!function(s){function t(){return c(28)}function l(e){return new(t())(e)}function e(e){for(var t,n,r=e[0],i=e[1],o=0,a=[];o<r.length;o++)n=r[o],u[n]&&a.push(u[n][0]),u[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(s[t]=i[t]);for(d&&d(e);a.length;)a.shift()()}l.resolve=function(e){return t().resolve(e)},l.reject=function(e){return t().reject(e)},l.all=function(e){return t().all(e)};var n={},u={0:0};function c(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.e=function(o){var e,t=[],n=u[o];if(0!==n)if(n)t.push(n[2]);else{var r=new l(function(e,t){n=u[o]=[e,t]});t.push(n[2]=r);var i,a=document.createElement("script");a.charset="utf-8",a.timeout=120,c.nc&&a.setAttribute("nonce",c.nc),a.src=c.p+""+({}[e=o]||e)+"."+{1:"b9d6a5b6",2:"d6e247b0",3:"bb65454c",4:"e529a674",5:"6d53c1db",6:"18e4f04e",7:"687c659c",8:"82659ba3",9:"65e375fa",10:"72bbfbe1",11:"4f4ea309",12:"c7c02596",13:"07633cff"}[e]+".walkme_lib.js",i=function(e){a.onerror=a.onload=null,clearTimeout(s);var t=u[o];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,i=new Error("Loading chunk "+o+" failed.\n("+n+": "+r+")");i.type=n,i.request=r,t[1](i)}u[o]=undefined}};var s=setTimeout(function(){i({type:"timeout",target:a})},12e4);a.onerror=a.onload=i,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}return l.all(t)},c.m=s,c.c=n,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return function(){return t[e]}}(r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var r=window._walkmeWebpackJP=window._walkmeWebpackJP||[];r.push=e,r=r.slice();for(var i=0;i<r.length;i++)e(r[i]);var d=function(){r.push.apply(r,arguments)};c(c.s=0)}([function(module,exports,__webpack_require__){(function(){var ma,zb,Ab,Bb,Cb,Eb,Fb,Gb,sf,Pf,Qf,Rf;function ClassMakeTutorial(Et,G){this.MTVersion="1.0",this.SVNRevision="$MasterRev: bee94c56 $",this.LibVersion="20190213-144138-bee94c56",this.SpecialRevision="no",__webpack_require__(1);var r=G.di,Tt=G.ctx;!function(e){var t=__webpack_require__(3);e.register("SimpleNLP").asInstance(t);var n=__webpack_require__(4)();e.register("ObjectMapper").asInstance(n.objectMapper),e.register("ObjectJpath").asInstance(n.objectJpath);var r=__webpack_require__(7);e.register("FlowNodeExtensions").asInstance(r.bizFlowExtensions),e.register("BaseGraphDfsService").asInstance(r.baseGraphDfsService);var i=__webpack_require__(15)();e.register("DeployableConsts").asInstance(i);var o=__webpack_require__(16)(e);e.register("UIComponentsClasses").asInstance(o);var a=__webpack_require__(23);e.register("NewToOldConditionConverter").asInstance(a.newToOldConditionConverter),e.register("OldToNewConditionConverter").asInstance(a.oldToNewConditionConverter);var s=__webpack_require__(27);if(e.register("Base64").asInstance(s),!e.has("PromiseManager")){var l=__webpack_require__(28).Promise;e.register("PromiseManager").asInstance(l)}var u=__webpack_require__(29);e.register("SharedConsts").asInstance(u);var c=__webpack_require__(56);e.register("BalloonTemplatesProvider").asInstance(c);var d=__webpack_require__(61);e.register("StorageKeysConfigurations").asInstance(d);var f=__webpack_require__(63),p=__webpack_require__(64)(f.decode);e.register("JsonHtmlDecoder").asInstance(p)}(window._walkmeInternals.ctx);var at=Tt.get("PromiseManager").Promise;Tt.register("DeployableTypes").dependencies("Consts").asFunction(function(e){return e.DEPLOYABLE_TYPE}),Tt.register("Consts").asCtor(function(e,t){var n=this;n.SURVEY_ANSWER_FREE_TEXT={MAX_LENGTH:1e3,EXTENDED_LENGTH:1500},n.ELEMENT_OWNER_TYPE_NAMES={TRIGGER:"trigger",SMART_TIP:"smartTip",SWT:"swt",WT:"wt",STEP:"step",CONDITION:"condition",LAUNCHER:"launcher",SMART_TIPSET:"smartTipSet",START_POINT:"startPoint",ACTION:"action"},n.COOKIE_LIFE_10_YEARS=31536e4,n.COOKIE_LIFE_2_YEARS=63072e3,n.ONE_DAY_SECONDS=86400,n.ONE_YEAR_SECONDS=31536e3,n.CSS_RESET={display:"block",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,marginTop:0,marginLeft:0,marginBottom:0,marginRight:0,verticalAlign:"baseline",borderCollapse:"inherit",backgroundImage:"none",backgroundColor:"transparent",orderSpacing:"1px 1px",lineHeight:"normal",height:"auto",textIndent:"inherit",letterSpacing:"normal",textTransform:"none",outline:"invert none medium",width:"auto",boxShadow:"none",textShadow:"none",borderTopStyle:"none",borderTopWidth:"medium",borderRightStyle:"none",borderRightWidth:"medium",borderBottomStyle:"none",borderBottomWidth:"medium",borderLeftStyle:"none",borderLeftWidth:"medium",position:"static",top:"auto",left:"auto",transition:"none",boxSizing:"content-box",color:"#EB15E2"},n.DEBUGGER={STATE_NAME:"wm-ftr",STATE:{Deactive:0,Active:1,ActiveAndReset:2}},n.IS_DISPLAY_POWERED_BY={Show:"txt",Hide:"no"},n.ANALYTICS_CUSTOM_VARS={MaxVarLength:100,MaxCustomFields:5},n.AJAX_PROVIDERS={wmjQueryAjaxProvider:1,ajaxProxyProvider:2},n.STEP_STATUS={SupposedToShow:0,Shown:1,Performed:2,SkippedNotFound:3,SkippedByCondition:4,MovedBack:5,Exited:6,FakeFound:7,SkippedByTutorialCondition:8,SkippedStartedFromBiggerStep:9,NonValidActionStep:10,SkippedByActionStep:11},n.LOG_FEATURES={AUDIT_STEPS:"auditSteps",BALLOON:"balloon",UI_CHANGE_TRACKER:"changeTracker",EXTERNAL_CONDITIONS_HANDLERS:"externalConditionHandlers"},n.STEP_ACTION={Redirect:"redirect",PlayStep:"playStep",WaitForCondition:"waitForCond",Branch:"branchWt",StopWt:"stopWt",Delay:"delay",Refresh:"refresh",OpenPlayerMenu:"openPlayerMenu",SetWalkMeData:"setWalkMeData",PassOwnership:"passOwnership"},n.STEP_TYPE={Normal:0,Popup:1,Action:2},n.SOURCES={production:0,preview:1,play:2,test:3,success:32},n.TIME_PERIODS={DaySeconds:86400},n.STORAGE_KEYS={lastGetDataTime:"wm-lgt",remindMeLater:"wm-RML",customAuditVarDictionary:"wm-cavd",WALKTHRU_PERSISTENCE_DATA:"wm-prsst"},n.STORAGE_TYPE={Cookie:"cookie",CrossDomain:"crossdomain",JStorage:"jstorage",CrossDomainLocalStorage:"crossdomain_ls",CrossDomainCookies:"crossdomain_ck",Extension:"extension",ProxyIframe:"proxy"},n.PLATFORM={Web:1,MobileWeb:3,Desktop:6},n.STEP_PLAY_INITIATOR_ENUM={NONE:0,WIDGET:1,API:2,LAUNCHER:3,TASK:4,BRANCHING:5,AUTOSTART:6,PERMALINK:7,BBCODE:8,CHAT_AGENT:9,SHOUTOUT:10,WALKTHRU:11,STEP:12,ATTENTION_GRABBER:13,FLOW_STEP:14,COURSE:15,CUSTOMIZATION:16,RESTART_SWT:17},n.AUDIT_TYPE={OPEN_TICKET:100},n.PLAY_MODE={Widget:0,LightBox:1,NewTab:2,SameTab:3},n.ELEMENT_INTERACTION_TYPES={Visible:0,NotVisible:1},n.SHOUTOUT_TYPES={snackbar:10,popup:20,fullScreen:30,customView:40},n.SPOTLIGHT_TYPES={arrow:1,django:2},n.MOBILE_COMMANDS={ACTION:{libAction:2003}},n.EVENT_SENDER_EVENT_TYPES={Close:"close",Open:"open",Play:"play",PlayFailed:"playFailed",Click:"click",Search:"search",Complete:"complete",GoalReached:"goalReach",ProgressUpdate:"progressUpdate",Submitted:"submitted",Loaded:"loaded",Visible:"visible",Draw:"draw",MouseEnter:"mouseenter",Focus:"focus",Blur:"blur",Passed:"passed",Failed:"failed",TeachMeStepCompletion:"teachMeStepCompletion",TeachMeCourseCompletion:"teachMeCourseCompletion",TeachMeCompletionUpdate:"teachMeCompletionUpdate",TeachMeStepStarted:"teachMeStepStarted",SessionPing:"sessionPing",SessionStart:"session",ActionClicked:"click"},n.TeachMe={QUIZ_RESULT_STORAGE_KEY_PREFIX:"wm-lms-quiz-res-",QUIZ_STATUS_CLASS:{PASSED:"passed",FAILED:"failed",NOT_TESTED:"not-tested"},QUIZ_STATUS_TEXT:{PASSED:"Quiz Passed",FAILED:"Quiz Failed",NOT_TESTED:"Not Tested"},QUIZ_STATUS:{PASSED:1,FAILED:0,NOT_TESTED:undefined}},n.EVENT_SENDER_STEP_ACTION_NAMES={Redirect:0,PlayStep:1,WaitForCondition:2,Branch:3,StopWt:4,Delay:5,Refresh:6,OpenPlayerMenu:7,SetWalkMeData:8,PassOwnership:9,ErrorHandling:10,Split:11,OnPageActionClick:12,OnPageActionHover:13,OnPageActionFocus:14,OnPageActionFillText:15,OnPageActionSelectListValue:16,Style:17,RestartSwt:18},n.EVENT_SENDER_ACTIONS={None:"none",OpenMenu:"menu",OpenCoursesMenu:"coursesMenu",PlayWalkthru:"wt",PlayShuttle:"shuttle",PlaySurvey:"survey",PlayShoutOut:"shoutout",PlayResource:"resource",PlayContent:"resource",SurveyQuestionAnswered:"answer",PlayBizFlow:"bizFlow",PlaySmartTipSet:"smartTip",Close:"close"},n.EVENT_SENDER_MOBILE_ACTION_TYPES={None:"none",RateApp:"rateApp",OpenSettings:"openSettings",BrowseToPage:"browseToPage",PlayVideo:"playVideo",SendEmail:"sendEmail",OpenApp:"openApp",OpenAppStore:"openAppStore"},n.EVENT_SENDER_EVENT_APPS={None:"none",Player:"player",Walkthru:"wt",Step:"step",ShoutOut:"shoutout",Shuttle:"shuttle",Survey:"survey",Question:"question",SurveyQuestionAnswer:"answer",Content:"resource",Launcher:"launcher",Task:"task",Course:"course",WidgetSearch:"widgetSearch",Ticket:"openTicket",Walkme:"walkme",TeachMe:"teachMe",AbTesting:"abTesting",TrackedElement:"trackedElement",TrackedPage:"trackedElementsSet",SmartTip:"smartTip",SmartTipSet:"smartTipSet",SmartTipUiComponent:"smartTipUiComponent",BizFlow:"bizFlow",BizFlowStep:"bizFlowStep",LiveChat:"liveChat",Quiz:"quiz",QuizQuestion:"quizQuestion",QuizAnswer:"quizAnswer",Action:"action"},n.EVENT_SENDER_AB_TESTING_DRAW_REASONS={Draw:0,ActivationRule:1},n.EVENT_SENDER_CANCEL_REASONS={Xclick:"X Clicked"},n.DEPLOYABLE_TYPE=e.DEPLOYABLE_TYPE,delete n.DEPLOYABLE_TYPE.Walkthru,n.DEPLOYABLE_TYPE.Tutorial=0,n.DEPLOYABLE_ACTION_TYPES={Action:0,Close:1,RemindMeLater:2},n.SAFESTART_ACTION={ErrorShown:0,PopupShown:1,AutoRedirect:2,StayClicked:3,RedirectClicked:4,FailOnUrl:5},n.FEATURES={DisableWidgetOpenFullUrl:"disableWidgetOpenFullUrl",EventSenderDontSendPageUrl:"dontSendPageUrl",EventSenderDontSendPageTitle:"dontSendPageTitle",EventSenderForceSendReferrerUrl:"forceSendReferrerUrl",EventSenderDisableSendReferrerUrl:"disableSendReferrerUrl",StickyCustomVars:"stickyCustomVars",StrongStickyCustomVars:"strongStickyCustomVars",DisableEventCollection:"disableEventCollection",JSP:"jsp",ForceEmbedInOwnerDocument:"embedInOwnerDocument",OldIsInIframeIndication:"oldIsInIframeIndication",DontMaskEndUserAddress:"dmeua",CalculateElementBoundsBeforeRedraw:"calculateElementBoundsBeforeRedraw",ExternalConditions:"externalConditions",EmbedInContainer:"embedInContainer",PositionCheckByChangeThreshold:"positionCheckByChangeThreshold",SWTConsecutivePopups:"SWTConsecutivePopups",DisableReturnWhenFontLoadFailed:"disableReturnWhenFontLoadFailed",ForceFindScrollable:"forceFindScrollable",AvoidCheckInIframe:"avoidCheckInIframe",FixIframeViewport:"fixIframeViewport",ShadowRootsInspector:"shadowRootsInspector",IconExecutionAdditionalSp:"iconExecutionAdditionalSp",CleanElementMemory:"cleanElementMemory",ClickTriggerWithKeyboard:"clickTriggerWithKeyboard",BalloonShowDestroySync:"balloonShowDestroySync",FixArrowsOutsideElement:"fixArrowsOutsideElement",EmbedInClosestCanEmbed:"embedInClosestCanEmbed",EmbedInElementDontWrapText:"embedInElementDontWrapText"},n.GOALS={LOG_FEATURE:"goals"},n.TASKS={LOG_FEATURE:"tasks"},n.RESOURCES={LOG_FEATURE_CONTENT_ACTIVATOR:"content"},n.HIGHLIGHTER={LOG_FEATURE:"hl"},n.AUTOSTART={LOG_FEATURE:"autostart",STOP_CONDITIONS:{XButton:"x",Action:"action",Cancel:"close"},STOP_CONDITION_KEY:"wm-stpcond-"},n.EVENTS={DICreated:"DICreated",WalkMeTotalLoadingTime:"WalkMeTotalLoadingTime",MainStart:"mainCreationStart",WalkmeApiStarted:"walkMeApiCreationStart",WalkmePlayerApiStarted:"walkMePlayerApiCreationStart",BeforeWalkmeRemoved:"removeWalkMe",AfterWalkmeRemoved:"afterRemoveWalkMe",WalkmeLoaded:"wm_walkmeLibLoaded",BeforeWalkmeReady:"BeforeWalkmeReady",WalkmeReady:"WalkMeReady",ElementsTrackingReady:"ElementsTrackingReady",ReleaseAllElementsCalled:"releaseAllElementsCalled",CallReleaseElementsFromBalloons:"callReleaseElementsFromBalloons",LanguageChanged:"languageChanged",BeforeLanguageSet:"beforeLanguageSet",PlayerClicked:"wmPlayerClicked",ApiWasCalled:"wmApiCalled",PermalinkClicked:"wmPermalinkClicked",WidgetLoad:"WidgetLoad",WidgetOpening:"wmWidgetOpening",EndUserSettingsSet:"endUserSettingsSet",AbExperimentLinkedGoalReached:"wmLinkedGoalReached",AbTasksBlocked:"AbTasksBlocked",SalesForceVarsExposed:"SfVarsExposed",TimerManagerCreationStarted:"timerManagerCreationStart",DeployableCreated:"DeployableCreated",DeployableDestroyed:"DeployableDestroyed",DeployableNotShowing:"DeployableNotShowing",DeployableHandleStarting:"DeployableHandleStarting",UIComponentDestroyed:"UIComponentDestroyed",UIObjectsTreeCreated:"UIObjectsTreeCreated",BeforeDataFileLoaded:"BeforeDataFileLoaded",BalloonInitialized:"BalloonInitialized",BalloonCreated:"BalloonCreated",BalloonShown:"BalloonShown",BeforeUsingUrl:"BeforeUsingUrl",SmartTips:{SmartTipElementShown:"SmartTipElementShown",SmartTipElementRemoved:"SmartTipElementRemoved",ValidationFailed:"SmartTipValidationFailed",ValidationPassed:"SmartTipValidationPassed",TooltipShown:"SmartTipTooltipShown",SmartTipSegmented:"SmartTipSegmented",SetTurnedOn:"SmartTipSetTurnedOn",SetTurnedOff:"SmartTipSetTurnedOff",SmartTipIconShown:"SmartTipIconShown",SmartTipIconHovered:"SmartTipIconHovered",SmartTipTooltipDestroyed:"SmartTipTooltipDestroyed",SmartTipIconDestroyed:"SmartTipIconDestroyed"},TaskCompleted:"TaskCompleted",TasksLoaded:"TasksLoaded",Flows:{AfterCompletingFlowStage:"AfterCompletingFlowStage",BeforeExecutingFlowStage:"BeforeExecutingFlowStage",FlowStageSkipped:"FlowStageSkipped",UIFlowStageShown:"UIFlowStageShown",FailedToStart:"FlowFailedToStart",BeforeFlowStarted:"BeforeFlowStarted",FlowStarted:"FlowStarted",FlowBranched:"FlowBranched",FlowStopped:"FlowStopped",FlowAborted:"FlowAborted",RestoringFlow:"RestoringFlow",FlowCompleted:"FlowCompleted",FlowBranchReturned:"FlowBranchReturned",LookingForElement:"LookingForElement",UiElementFound:"UiElementFound",WaitForConditionEvaluated:"WaitForConditionEvaluated",SafeStartStatusChanged:"SafeStartStatusChanged"},Walkthrus:{WalkthruGuidGenerated:"WalkthruGuid",WalkthruStarted:"StartNewWt",WalkthruStopped:"TutorialStopped",WalkthruLoaded:"LoadWt",WalkthruCompleted:"WalkthruCompleted",StepSkipped:"StepWasSkipped",StepElementFound:"ElementFound",StepElementNotFound:"ElementNotFound",LookingForStepElement:"LookingForElement",WaitingForStickyStep:"StickyStepWaiting",StepStarted:"NewStepStarted",StepExecuting:"StepPlayNum",StepPerforming:"StepPerforming",StepAdditionalTriggerSet:"StepAdditionalTriggerCBSet",StepAdditionalTriggersInitialized:"StepAdditionalTriggered",FakeStep:"StepIsFaked",StepShown:"NewStepShown",StepHasPlayCondition:"PlayStepCondition",StepCompleted:"StepCompleted",StepTriggered:"StepWasTriggered",InputGeneratedClick:"InputGeneratedClick",ShowStepBalloon:"showStepBalloon",DestroyStepBalloon:"destroyStepBalloon",NewSkippedStep:"NewSkippedStep",CheckNewStep:"CheckNewStep",WtConditionEvaluated:"WtConditionEvaluated",CanShowWt:"CanShowWt",CannotShowWt:"CannotShowWt"},Launchers:{LauncherIsInsecure:"LauncherInsecure",LauncherClicked:"wmLauncherClicked",LauncherIsShown:"LauncherIsShown",LauncherIsHovered:"LauncherIsHovered",DisplayLauncher:"DisplayLauncher",HideLauncher:"HideLauncher"},Surveys:{StartSurvey:"StartSurvey",SurveyPlayed:"SurveyPlayed",SurveyCompleted:"SurveyCompleted",SurveyExited:"SurveyExited",SurveyFailedShowing:"SurveyFailedShowing",SurveyBalloonActionsSet:"SurveyBalloonActionsSet",SurveyBackQuestion:"SurveyBackQuestion",SurveyNextQuestion:"SurveyNextQuestion",SurveyQuestionCountSet:"SurveyQuestionCountSet",SurveyFreeTextAnswerValidated:"SurveyFreeTextAnswerValidated",SuveyBeforeRadioButtonAppended:"SuveyBeforeRadioButtonAppended",SurveyBalloonDisplayed:"SurveyBalloonDisplayed"},Shuttles:{ActivatingShuttle:"ActivatingShuttle"},Contents:{ActivatingContent:"ActivatingContent"},PassOwnership:{PriorityInitialized:"priorityInitialized",PORegisterPriority:"PORegisterPriority"},Widget:{WidgetAPICreated:"WidgetAPICreated",TeachMeWidgetAPICreated:"TeachMeWidgetAPICreated",WidgetDisplayerClass:"WidgetDisplayerClass",WidgetInitInstances:"WidgetInitInstances",WidgetPlayerClass:"WidgetPlayerClass",WidgetMenuClass:"WidgetMenuClass",WidgetLanguageChanged:"WidgetLanguageChanged",WidgetDestroyAll:"WidgetDestroyAll",WidgetRefreshUI:"WidgetRefreshUI",SearchResultsReady:"SearchResultsReady",CreateSearchEngines:"CreateSearchEngines",SearchTermChanged:"SearchTermChanged",SearchCanceled:"SearchCanceled",SearchResultsAppended:"SearchResultsAppended",BeforeSearchResultsAppended:"BeforeSearchResultsAppended",AfterSearchResult:"AfterSearchResult",SearchEnded:"SearchEnded",WidgetConditionEvaluated:"WidgetConditionEvaluated"},WidgetMenu:{MenuHtml:"MenuHtml",MenuBuilt:"MenuBuilt",MenuShow:"MenuShow",MenuHide:"MenuHide",MenuLanguageChanged:"MenuLanguageChanged",CreateActivatable:"createActivatable",AccessibilityMenuBuilt:"AccessibilityMenuBuilt",MenuSearchResults:"MenuSearchResults",RefreshTabsBar:"RefreshTabsBar",MenuTabSelected:"MenuTabSelected"},WidgetPlayer:{PlayerShow:"PlayerShow",PlayerBuilt:"PlayerBuilt",PlayerHtml:"PlayerHtml",PlayerHide:"PlayerHide",PlayerLanguageChanged:"PlayerLanguageChanged"},SearchResultParse:"SearchResultParse",AppendingServerSearchResults:"AppendingServerSearchResults",SearchResultConverted:"SearchResultConverted",TrackedElementBeforeSendEvent:"trackedElementBeforeSendEvent",ContentRemoved:"ContentRemoved",AttentionGrabberInsecure:"AGDataInsecure",TasksConditionEvaluated:"TasksConditionEvaluated",LightBoxDivCreated:"lightBoxDivCreated",LightBoxCreated:"lightBoxCreated",LightBoxDivCentered:"LightBoxDivCentered",LightBoxClosed:"LightBoxClosed",ShouldChangeBalloonPosition:"ShouldChangeBalloonPosition",FirstStepNotAvailable:"FirstStepNotAvailable",ShoutOutClosed:"ShoutOutClosed",AutoStart:{Activated:"wmAutoStartActivated",ConditionEvaluated:"WtAutoStartConditionEvaluated"},LoadingContent:"LoadingContent",LoadingContentFromTeachMe:"LoadingContentFromTeachMe",LoadingContentInNewTab:"LoadingContentInNewTab",StorageLoaded:"StorageLoaded",BeforeStorageLoadedCallback:"BeforeStorageLoadedCallback",CustomAuditVar:"CustomAuditVar",Goals:{ConditionEvaluated:"GoalConditionEvaluated",GoalReached:"GoalCompleted"},ActionConditionEvaluated:"ActionConditionEvaluated",Scrolls:{ScrollFired:"scrollFired"},Quizzes:{QuizSubmitted:"QuizSubmitted",QuizPlay:"QuizPlay",QuizFail:"QuizFail",QuizPass:"QuizPass",QuizAnswerSubmitted:"QuizAnswerSubmitted",QuizSummarySuccessButtonClicked:"QuizSummarySuccessButtonClicked",QuizSummaryFailureButtonClicked:"QuizSummaryFailureButtonClicked",QuizXButtonClicked:"QuizXButtonClicked",QuizResultsActionButtonClicked:"QuizResultsActionButtonClicked"},NewSession:"NewSession",WalkmeReadyNewSession:"WalkmeReadyNewSession",ConditionTreeResult:"ConditionTreeResult",BeforeSettingCustomCss:"BeforeSettingCustomCss",SettingsFileNewPublish:"SettingsFileNewPublish",BBCodeStartActionClicked:{Walkthru:"bbcodeWtClicked",Bizflow:"bbcodeBfClicked",Resource:"bbcodeResourceClicked",Survey:"bbcodeSurveyClicked"},RegisterBBCodeDeployableClick:"RegisterBBCodeDeployableClick",ElementLocationChanged:"ElementLocationChanged",AnalyticsEventSent:"AnalyticsEventSent",BalloonLogs:{BalloonPopLocationCalculated:"BalloonPopLocationCalculated",BalloonIsFullyVisibleCalculated:"BalloonIsFullyVisibleCalculated",ClosestCanEmbedReturnsTop:"ClosestCanEmbedReturnsTop",ClosestCanEmbedSkipsElement:"ClosestCanEmbedSkipsElement",CalculateBalloonWidthCalled:"CalculateBalloonWidthCalled"},SpotlightCreated:"SpotlightCreated",SafeStartRedirect:"SafeStartRedirect",DATA_FILES_LOADED:"dataFilesLoaded",PageVisitIdUpdated:"PageVisitIdUpdated",PropagationStoppedSuffix:"PropagationStopped"},n.EVENTS_PARAMS={WalkmeRemovedErrorCodes:{missingUserIdentifyer:1,cannotHaveBothUniqueUserAndServerStorage:2}},n.SMART_TIP_INNER_EVENTS={CheckValidations:"wmCheckValidations",EventPropogationPrefix:"wmSmartTipInternalEvent",SmartTipElementRepositioned:"SmartTipElementRepositioned"},n.WINDOW_EVENTS={Resize:"resize"},n.PASS_OWNERSHIP={EvaluateOwnership:{CantBeDetermined:"CANT_BE_DETERMINED",Owner:"OWNER",NotOwner:"NOT_OWNER"},PassOwnershipEntity:{BizFlow:0,Walkthru:1},NEW_WINDOW_TIME_KEY:"wm-cond-win",LOG_FEATURE:"passOwnership",PASS_OWNERSHIP_COOKIE:"wm-cdplay"},n.FLOW_BEFORE_PLAY_KEY="wm-flw-preplay",n.FLOW_PLAY_MODES={PLAY:"play",RESTORE:"restore"},n.FLOW_STAGE_ACTIONS={BACK_FROM_FLOW_GROUP:"backFromFlowGroup",EXECUTE:"execute"},n.WINDOW_CUSTOM_DATA_TYPE={Cookie:0,Var:1},n.VALUE_CALCULATOR_TYPE={Cookie:"cookie",Variable:"var",JQuery:"jquery",LocalStorage:"localstorage"},n.DEFAULT_REACTION_TIME=500,n.FLOW_TRIGGER_WORKSPACE=".flow",n.FLOW_STEP_TYPE={UI:"UI",Action:"Action"},n.FLOW_UIELEMENT_TYPE={Element:"Element",Popup:"Popup"},n.FLOW_ACTION_RUN_STATE={Waiting:"Waiting",Done:"Done"},n.FLOW_ACTION_TYPE={ConnectToBizflow:"ConnectToBizflow",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",Redirect:"Redirect",Refresh:"Refresh",Style:"Style",SetData:"SetData",Split:"Split",Stop:"Stop",WaitForCondition:"WaitForCondition",OnPageAction:"OnPageAction",ErrorHandling:"ErrorHandling",RestartSwt:"RestartSwt"},n.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue"},n.FLOW_INNER_EVENTS={EventPropogationPrefix:"wmFlowInternalEvent",FlowIsPlaying:"FlowIsPlaying"},n.STICKY_TYPE={ONCE:0,SOFT:1,STRONG:2},n.VISIBILITY_STATE={VISIBLE:0,HIDDEN:1},n.ICON_CONTENT_KIND={Text:0,Image:1},n.POSITION_PERIMETER_TYPE={Outside:0,Inside:1},n.POSITION_TYPE={Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8},n.OPPOSITE_POSITION_TYPE={},r=n.OPPOSITE_POSITION_TYPE,i=n.POSITION_TYPE,r[i.Top]=i.Bottom,r[i.Right]=i.Left,r[i.Bottom]=i.Top,r[i.Left]=i.Right,r[i.TopLeft]=i.BottomRight,r[i.TopRight]=i.BottomLeft,r[i.BottomRight]=i.TopLeft,r[i.BottomLeft]=i.TopRight,r[i.Center]=i.Center,n.DEFAULT_POSITIONS={top:0,left:0,bottom:0,right:0},n.POPUP_BALLOON_Z_INDEX=t.deployableDefaultAttributes.zIndex.popupStep.toString(),n.NORMAL_BALLOON_Z_INDEX=t.deployableDefaultAttributes.zIndex.simpleStep.toString(),n.POSITION_OFFSET_TYPE={VerticallyCentered:1,HorizontalCentered:2,Above:3,Below:4,ToRight:5,ToLeft:6,SnapToViewportRight:9},n.POSITION_OFFSET={Center:0,Start:1,End:2},n.EMBEDMENT_TYPE={EmbedInElement:0,EmbedInElementParent:1,EmbedInOwnerDocument:2,EmbedInTopDocument:3,EmbedInClosestCanEmbed:4,EmbedNearCompatibleSibling:5,ForceEmbedInElement:6},n.ICON_CONTENT_STATE={Regular:0,Hover:1,Click:2},n.SMART_TIP={MODE:{OnlyInfo:0,OnlyValidations:1,InfoAndValidations:2},COMPONENT_TYPE:{Info:0,Validation:1,PositiveFeedback:2}},n.TOOLTIPS_ACTIVATION_MODES={Mouse:1,Focus:2},n.OLD_STICKIES={STICKINESS_TYPES:{soft:0,strong:1}},n.CONDITION_CHECKER={FEATURE_NAMES:{SmartTipSegmentation:"evaluate smart tip segmentation"}},n.IS_STICKY_SETTING_KEY="isSticky",n.STICKINESS_TYPE_SETTING_KEY="stickinessType",n.ANIMATION_TYPES={None:1},n.FLOW_TRIGGER_TYPE={Click:"Click",Hover:"Hover",Button:"Button",Text:"Text",Delay:"Delay",PageChanged:"PageChanged",SelectAny:"SelectAny",SelectValue:"SelectValue",BbCode:"BbCode",PeerStep:"PeerStep",Custom:"Custom",Swipe:"Swipe"},n.SHOUTOUT_CLICK_TYPE={Action:0,Close:1,XButton:2,RemindMeLater:3},n.BALLOON_BUTTON_TYPE={Submit:"Submit",Back:"Back",Next:"Next",Done:"Done",Start:"Start",Cancel:"Cancel"},n.FEATURES_LOGS={ElementFinder:"elementFinder",WalkMeSession:"session",Flows:"flows",AnalyticsTracking:"analyticsTracking"},n.SEARCH_DEPLOYABLES_PROVIDER_ID=0,n.APPLET_INTERACTION_TYPES={Element:1,Overlay:2},n.WALKTHRU_PERSISTANCE_DATA_FIELDS={CURRENT_TUTORIAL_COOKIE_NAME:"tId",CURRENT_STATE_COOKIE_NAME:"stt",CURRENT_STEP_COOKIE_NAME:"step",CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME:"spn",CURRENT_PLAY_GUID_COOKIE_NAME:"plgd",CURRENT_PLAY_INITIATOR_COOKIE_NAME:"pint",SPLIT_POINT_COOKIE_NAME:"splt",TUTORIAL_FINISHED_COOKIE_NAME:"fnsh",STEP_PLAY_HISTORY_COOKIE_NAME:"sph",SPLIT_TUTORIAL_IDS_COOKIE_NAME:"sti",SPLIT_START_FROM_STEP_COOKIE_NAME:"ssi",INTERACTION_GUID_COOKIE_NAME:"igd"},n.SURVEY_START_EVENTS={WalkThruCompleted:0,WalkThruExited:1,Both:2,WalkThruInterrupted:3,BbCodeClicked:4},n.CHECK_STEP_MODE={Normal:1,Sandbox:2},n.playConditionModes={PLAY_CONDITION:0,STICKY_CONDITION:1,BOTH:2},n.UI_PROPERTIES={Visible:"visible",Invisible:"invisible",Completed:"completed",Uncompleted:"uncompleted",StrikedOut:"strike-out",Active:"active",Inactive:"inactive",ProgressBar:"progress-bar",Default:"default",Search:"search",SearchProviders:"search-providers",Video:"video",Article:"article",Accessible:"accessible",Phantom:"phantom",LmsCourse:"lmsCourse",DisplayOnlyInSearch:"displayOnlyInSearch"},n.DISPLAY_WIDGET_CONDITION="displayWidgetCondition",n.WALKTHRU_STATE={NOT_RUNNING:0,RUNNING:1,WAITING_FOR_ELEMENT:2,WAITING_FOR_ELEMENT_EVENT:3,PAUSED:4,WAITING_FOR_SPLIT:5,WAITING_FOR_NEXT_BUTTON_CLICK:6,WAITING_FOR_PAGE_CHANGE:7,WAITING_FOR_STICKY_ELEMENT:8,WAITING_FOR_CONDITION:9,PASSING_OWNERSHIP:10,WAITING_FOR_REDIRECT:11,WAITING_FOR_OWNERSHIP:12},n.WALKTHRU_STEP_TRIGGER={NOTHING:0,NEXT_BUTTON:1,CLICK:2,HOVER:3,PAGE_CHANGED:4,KEY_PRESSED:5,DURATION:6,SELECT_ANY:7,SELECT_VALUE:8,SWIPE:9},n.SUBTEXT_CURRENT_START="##START_OF_CURRENT##",n.SUBTEXT_CURRENT_END="##END_OF_CURRENT##",n.SUBTEXT_TOTAL_START="##START_OF_TOTAL##",n.SUBTEXT_TOTAL_END="##END_OF_TOTAL##",n.SURVEY_FREQUENCY={0:"always",1:"visit",2:"once"},n.UI_CHANGE_NOTIFIERS={HASH:"hash",HISTORY:"history",IFRAME_LOAD_SELECTOR:"iframeLoadSelector",CLICK_SELECTOR:"clickSelector",AJAX_CALLS:"ajaxCalls",USER_INPUT:"userInput",HASH_ON_AJAX_CALLS:"hashOnAjax"},n.FLOW_TRANSITION_HANDLER_IDS={DELAYER:0,ON_BEFORE_UNLOAD:1},n.QUESTION_TYPES={FreeText:0,RadioButton:1,CheckBox:2,NPS:3,Message:4},n.DEFAULT_CHANGE_PIXELS_THRESHOLD=1,n.ACTION_TO_DEPLOYABLE_DATA={playWt:{deployableType:n.DEPLOYABLE_TYPE.Tutorial,deployableIdField:"wtId"},playContent:{deployableType:n.DEPLOYABLE_TYPE.Content,deployableIdField:"contentId"},playSurvey:{deployableType:n.DEPLOYABLE_TYPE.Survey,deployableIdField:"surveyId"},playBf:{deployableType:n.DEPLOYABLE_TYPE.BusinessSolution,deployableIdField:"bfId"},playShuttle:{deployableType:n.DEPLOYABLE_TYPE.Shuttle,deployableIdField:"shuttleId"}},n.SUPER_SCRIPT={MODE:{VISIBLE:"visible",INVISIBLE:"invisible"}};var r,i}).dependencies("DeployableConsts, SharedConsts");var te=Tt.get("Consts");Tt.register("ExternalWalkMeConfig").asCtor(function(e){var t={platform:e.PLATFORM.Web};this.get=function(e){return window._walkmeConfig&&window._walkmeConfig[e]?window._walkmeConfig[e]:t[e]}}).dependencies("Consts"),Tt.register("PlatformDI").asCtor(function(e,t){var n;this.register=function(e,t){"number"!=typeof e?-1!=Et.inArray(n,e)&&t():e==n&&t()},function(){n=t.get("platform")}.apply(null,arguments)}).dependencies("Consts, ExternalWalkMeConfig");var e=Tt.get("PlatformDI");Tt.register("StaticComponentsLoader").asCtor(function(){this.load=function(){n.push(__webpack_require__(65)),n.push(__webpack_require__(82)),n.push(__webpack_require__(86)),n.push(__webpack_require__(91)),n.push(__webpack_require__(96)),n.push(__webpack_require__(146)),n.push(__webpack_require__(158)),n.push(__webpack_require__(165)),n.push(__webpack_require__(184)),n.push(__webpack_require__(219)),n.push(__webpack_require__(261)),n.push(__webpack_require__(265))},this.init=function(){for(var e=0;e<n.length;e++){var t=n[e];t&&t.init&&t.init()}};var n=[]}),Tt.register("JsonUtils").asCtor(function(){function h(e){if(null!==e&&v(e,function(e){try{e.toJSON&&(e.toJSON=null)}catch(t){}}),function(){if("object"!=typeof JSON)return!1;if(!JSON.stringify)return!1;if(!y(JSON.stringify))return!1;return!0}())return JSON.stringify(e);if(null===e)return"null";var t=typeof e;if("undefined"===t)return undefined;if("number"===t||"boolean"===t)return""+e;if("string"===t)return m(e);if("object"===t){if("function"==typeof e.toJSON)return h(e.toJSON());if(e.constructor===Date){var n=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCFullYear(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds(),l=e.getUTCMilliseconds();return n<10&&(n="0"+n),r<10&&(r="0"+r),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),l<100&&(l="0"+l),l<10&&(l="0"+l),'"'+i+"-"+n+"-"+r+"T"+o+":"+a+":"+s+"."+l+'Z"'}if(e.constructor===Array){for(var u=[],c=0;c<e.length;c++)u.push(h(e[c])||"null");return"["+u.join(",")+"]"}var d,f,p=[];for(var g in e){if("number"===(t=typeof g))d='"'+g+'"';else{if("string"!==t)continue;d=m(g)}"function"!==(t=typeof e[g])&&"undefined"!==t&&(f=h(e[g]),p.push(d+":"+f))}return"{"+p.join(",")+"}"}}function t(e){if(function(){if("object"!=typeof JSON)return!1;if(!JSON.parse)return!1;if(!y(JSON.parse))return!1;return!0}())return JSON.parse(e);var t=e.toString().replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(t))return _makeTutorialEv.Ev("("+e+")");throw new SyntaxError("Error parsing JSON, source is not valid.")}this.toJSON=h,this.secureEvalJSON=t,this.clone=function(e){return t(h(e))},this.runOnObjectRecursive=v;var n=/["\\\x00-\x1f\x7f-\x9f]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function m(e){return e.match(n)?'"'+e.replace(n,function(e){var t=r[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'}function v(e,t){if(e!=undefined&&"object"==typeof e)for(var n in e)if(Object.hasOwnProperty.call(e,n)){var r=e[n];null!==r&&r!==undefined&&v(r,t)}null!==e&&e!==undefined&&t(e)}function y(e){return-1<e.toString().indexOf("[native code]")}}),Tt.register("SettingsFile").asCtor(function(t){var e,r=this;r.getSettingsFile=function(){return e&&e.getSettingsFile()||{}},r.getPublishVersion=function(){var e=r.getSettingsFile(),t=e.DataFiles[0].url,n=t.match(/data_([a-z0-9]+)/)[1];return n},r.getPublishDirectory=function(){var e=r.getSettingsFile(),t=e.DataFiles[0].url;return t.substring(0,t.lastIndexOf("/")+1)},r.getCdnServerName=function(){return r.getSettingsFile().CdnServerName||window.mt_cdn_server_name},r.getStorageType=function(){return r.getSettingsFile().Storage},r.getAllUserGuids=function(){return r.getSettingsFile().UserGuids},r.getPublishDate=function(){return r.getSettingsFile().PublishDate},r.getUrl=function(){return window._walkmeInternals&&window._walkmeInternals.settingsUrl},r.getPlayerRelatedPath=function(){var e=r.getSettingsFile().LibFile,t=/http.+\/player\//.exec(e);return t[0]},e=function(){if(window.wmPlaySnippetData){var e=t.secureEvalJSON(window.wmPlaySnippetData);return window.wmPlaySnippet={getSettingsFile:function(){return e}},window.wmPlaySnippet}return null}()||window.wmPreviewSnippet||window.wmSnippet}).dependencies("JsonUtils"),window._walkmeInternals=window._walkmeInternals||{},__webpack_require__.p=function(){try{if(window.localStorage){var e=window.localStorage.getItem("walkmePublicPath");if(e)return e}}catch(t){}return Tt.get("SettingsFile").getSettingsFile().PublicPath}(),window._walkmeInternals.walkmeBasePath=__webpack_require__.p,Tt.register("Logger").asCtor(function(s,l,u,c,a,d,f,p){var g=this,h=!1;window.walkme_lib_in_dev&&(h=!0);var m,v="walkmeCustomerLogs",i={debug:4,info:3,warn:2,error:1},e=86400,y=0;function t(r){return r.debug=function(e,t,n){return r("debug",e,t,n)},r.info=function(e,t,n){return r("info",e,t,n)},r.warn=function(e,t,n){return r("warn",e,t,n)},r.error=function(e,t,n){return r("error",e,t,n)},r}g.ready=function(){r.logger=g.wrapCustomerLog("DI")},g.wrapCustomerLog=function(r){return function(e,t,n){g.customerLog(e,t,n||r)}},g.customerLog=function(e,t,n){if(!l.isQuirksMode()||!(e instanceof mtjQuery||e&&e.nodeType)){t=t||1;var r=m.get();if(r){var i=parseInt(r.l),o=r.f,a=r.u;if(t<=i&&function(e,t,n){var r=!0;e?r=-1!=mtjQuery.inArray(n,e):t&&(r=-1==mtjQuery.inArray(n,t));return r}(o,a,n))try{r.m?w(T()+f.toJSON(e)):w(e)}catch(s){}}}},g.sendServerLog=t(function(e,t,n,r){Tt.get("EventCollectorLoggerPixel").log(e,t,n),g.customerLog(t,i[e],r)}),g.wrapServerLog=function(i){return t(function(e,t,n,r){g.sendServerLog(e,t,n,r||i)})};var S=0,E=[];function T(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()+"] "}function w(e){if(window.console)console.log(e);else try{var t=function(){var e=mtjQuery("#walkme-console-box");if(0===e.length){var t=Tt.get("TopContainerProvider").getTopContainer();e=mtjQuery('<div id="walkme-console-box"></div>');var n=mtjQuery('<div style="display: none;">Walkme Console: [ </div>'),r=mtjQuery('<button type="button" title="Toggle the walkme debug console">Walkme Console</button>'),i=mtjQuery('<ul id="walkme-console-messages"></ul>'),o=mtjQuery('<a href="#">clear</a>');n.append(o),n.append(" ]"),n.append(i),e.append(n),e.append(r),t.append(e),r.click(function(){n.slideToggle("fast",function(){var e=mtjQuery(this).is(":visible")?"Close Console":"Walkme Console";r.text(e)})}),o.click(function(){i.empty()}),n.css({margin:"15px 60px 5px 15px",padding:"5px",border:"1px solid red","background-color":"#FFC",color:"#000"}),r.css({border:"1px solid red","background-color":"#FFFFCC","margin-left":"15px",width:"120px"}),e.css({position:"fixed","z-index":a.POPUP_BALLOON_Z_INDEX,"font-family":"Arial",bottom:"10px",left:"10px",width:"100%","text-align":"left"}),i.css({"background-color":"white",border:"1px solid black",height:"260px","list-style-type":"none",padding:"0","overflow-y":"auto",margin:"5px 0 0"})}return e}(),n=new Date,r=(i=e)instanceof Et?"-jQuery object: selector - "+i.selector+", value - "+i.val()+", domElement - "+f.toJSON(i[0]):f.toJSON(i);t.find("#walkme-console-messages").prepend('<li style="padding: 2px 5px; border-bottom: 1px solid #afafaf"><span style="float: left; color: #afafaf; margin-right: 5px;">'+C(n.getHours())+":"+C(n.getMinutes())+":"+C(n.getSeconds())+" </span>"+r.substring(1,r.length-1)+"</li>")}catch(o){}var i}function C(e){return e<10?"0"+e:e}function n(){var n,t,r=this;function i(){n||(n={})}function o(e,t){return n?n[e]:t}function a(e){return Tt.get("CommonUtils").isDefined(e)?"string"==typeof e?(e=e.replace(/\s/g,"")).split(","):0<e.length?e:void 0:[]}function s(){t.setCookie(v,f.toJSON(n),e)}r.get=function(){return n},r.enable=function(e){return i(),n.l=e||1,s(),r},r.disable=function(){return n&&(n.l=0,s()),r},r.reset=function(){return n={l:1},s(),r},r.level=function(e){return e===undefined?o("l",null):(i(),n.l=e,s(),r)},r.track=function(e){if(e===undefined)return o("f",[]);i();var t=a(e);return delete n.u,n.f=n.f?p.concatWithoutDuplicates(t,n.f):t,s(),r},r.untrack=function(e){if(e===undefined)return o("u",[]);i();var t=a(e);return delete n.f,n.u=n.u?p.concatWithoutDuplicates(t,n.u):t,s(),r},r.timer=function(e){return i(),e?n.m=1:n.m&&delete n.m,s(),r},function(e){t=e,n=f.secureEvalJSON(t.getCookie(v))}.apply(null,arguments)}g.timer=function(o){S++;var a=(new Date).getTime();return{stop:function(){var e=f.secureEvalJSON(s.getCookie(v));if(e&&e.m){var t=(new Date).getTime(),n=t-a,r=Array(S).join("->\t"),i=T()+r+o+": "+n+"ms";1==S?(w(i),function(){for(var e=E.length-1;0<=e;e--)w(E[e]);E.length=0}()):E.push(i),S--}}}},g.enableCustomerLogs=function(e){return m.enable(e)},g.error=function(e,t,n){try{var r,i=arguments.callee.caller,o=i?i.name:"N/A";if(e&&e.message){var a=t?t+"\n":"";r=a+"File : "+e.fileName+"\n - Function : "+o+"\n - Line : "+e.lineNumber+"\n - Msg : "+e.message}else r="Function : "+o+"\n - "+t;e&&e.stack&&(r+="\n - Stack: "+e.stack),function(e,t,n){try{if(!Tt.get("AuditingEnabledIndicator").isEnabled())return;if(d.isFeatureEnabled("disableAuditErrorLog"))return;if(5<++y)return;var r={code:t,isInEditor:c.get(),SVNRevision:u.SVNRevision,LibVersion:u.LibVersion};n&&(mtjQuery.extend(n,r),r=n),g.sendServerLog.error(e,r)}catch(i){}}(r,1,n),h&&!window.wmNoAlert&&alert("Dev mode alert: "+r),g.customerLog("Error: "+r)}catch(s){}},g.getAPI=function(){return m},function(){m=new n(s)}.apply(null,arguments)}).dependencies("CookiesManager, HostData, Lib, IsInEditor, Consts, FeaturesManager, JsonUtils, ArrayUtils"),Tt.register("FeaturedLogger").asCtor(function(e,t,n,r){var i,o;this.customerLog=function(){var e=t.formatString.apply(null,arguments);n.customerLog(e,o,i)},i=r&&r.feature||e.DEFAULT_FEATURE,o=r&&r.logLevel||e.DEFAULT_LOG_LEVEL}).asProto().dependencies("FeaturedLoggerConsts, CommonUtils, Logger"),Tt.register("FeaturedLoggerConsts").asInstance({DEFAULT_FEATURE:"No name",DEFAULT_LOG_LEVEL:3}),this.CssInjector=__webpack_require__(268),Tt.register("CssInjector").asCtor(this.CssInjector).args({jQ:Et}),Tt.register("CssUtils").asCtor(function(){var r=["@import","expression","javascript","-moz-binding","-o-link","behavior"];function n(e){return e.replace(/\/\*[\s\S]*?\*\//gm,"")}this.clearComments=n,this.getSelectors=function(e){var t=n(e).split(/\s*{[^}]*}\s*/);return t.pop(),t},this.isSecure=function(e){return!function(e){for(var t=0;t<r.length;t++){var n=r[t];if(-1<e.indexOf(n))return!0}return!1}(n(e).toLowerCase())}});var t=function(){function e(e,t,n,r,i){if(this.ElementFinder=t,this.jsonUtils=i,this._measures=[],this._mutations=[],n)this._syncFunc=function(){return n.apply(e,arguments)},this._cleanFunc=function(){r.apply(e,arguments)};else{var o=Tt.get("TimerManager");this._syncFunc=function(e){return o.setWalkmeTimeout(e,16)}}}return e.prototype.measure=function(e){return this.addTask(this._measures,e)},e.prototype.mutate=function(e){return this.addTask(this._mutations,e)},e.prototype.remove=function(e){this.removeTask(this._measures,e),this.removeTask(this._mutations,e)},e.prototype.removeTask=function(e,t){var n=Et.inArray(t,e);-1<n&&e.splice(n,1)},e.prototype.cleanResources=function(){this._cleanFunc&&this._flushHandler&&this._cleanFunc(this._flushHandler),this._measures=[],this._mutations=[],this._flushHandler=null,this._scheduled=!1},e.prototype.addTask=function(n,r){var e=new at(function(e,t){n.push(function(){e(r())})});return this.scheduleFlush(),e},e.prototype.scheduleFlush=function(){var e=this;this._scheduled||(this._scheduled=!0,this._flushHandler=this._syncFunc(function(){e.flush()}))},e.prototype.flush=function(){for(var e=this;0<this._measures.length||0<this._mutations.length;)this.ElementFinder.wrapSession(function(){e.runTasks(e._measures)}),this.runTasks(this._mutations);this._scheduled=!1},e.prototype.runTasks=function(e){for(var t;t=e.shift();)try{t()}catch(n){Tt.get("EventSenderErrorLogger").logError("error running DOMSessionManager task\n\n"+this.jsonUtils.toJSON(n.message))}},e}();Tt.register("DOMSessionManager").asCtor(t).dependencies("win, ElementFinder, requestAnimationFrame, cancelAnimationFrame, JsonUtils"),Tt.register("WalkMeInfo").asCtor(function(e,t,n,r,i,o,a){var s=this;s.getUserGuid=c,s.getEndUserGuid=c,s.getEndUserGuidSource=c,s.getPermutationId=c,s.getLanguage=c,s.getSource=c,s.getCustomVars=c,s.getLibVersion=c,s.setAnalyticsCustomFields=function(e,t){return l[e]=t,!0},s.getAnalyticsCustomFields=d;var l=Array();function u(){if(e.getEndUserGuidSource())return e.getEndUserGuid()}function c(){throw new Error("WalkMeInfo not initialized properly")}function d(){return l}s.init=function(){s.getUserGuid=i.getUserGuid,s.getEndUserGuid=u,s.getEndUserGuidSource=e.getEndUserGuidSource,s.getPermutationId=t.getCurrentPermutation,s.getLanguage=n.getCurrentLanguage,s.getEnvironmentId=r.get,s.getCustomVars=d,s.getLibVersion=function(){return o.LibVersion},s.getPublishDate=a.getPublishDate}}).dependencies("EndUsersManager,AbCurrentPermutationProvider,LanguageManager,AuditSourceManager,UserGuidContainer,Lib,SettingsFile"),Tt.register("DebuggerManager").asCtor(function(n,r,i,o,a,e,t){var s=this,l=r.keysConfig.wmDebugger.config,u=r.keysConfig.wmDebugger.state;function c(e,t){"walkmetracker"!=t.searchTerm||f()||d()}function d(e,t){i.get().DebuggerSettings&&"1"==i.get().DebuggerSettings.IsInPublish&&s.launchDebugger(e,t)}function f(){return!!n.dbgr}function p(e){n.dbgr||(n.dbgr={}),n.dbgr.shouldClear=e,n.dbgr||(n.dbgr={}),__webpack_require__.e(1).then(function(){var e=[__webpack_require__(294)];(function(e){e()}).apply(null,e)})["catch"](__webpack_require__.oe)}function g(){n.dbgr&&(n.dbgr.debuggerWasLoaded=null),n.unbind(t.EVENTS.Widget.SearchTermChanged,c)}s.launchDebugger=function(e,t){s.isDebuggerOnWindow()||(e?r.saveData(l.key,e,l.expiry):r.removeData(l.key),t&&(n.dbgr||(n.dbgr={}),n.dbgr.debuggerWasLoaded=t),p(!0),o.postMessageToFrameAndDescendants(window.top,o.toJSON({requestType:"DEBUGGER_LOADED"})))},s.isDebuggerOnWindow=f,s.launchDebuggerIfEnabled=d,s.closeDebugger=function(){if(s.isDebuggerOnWindow()){var e=n.dbgr.close;e&&e()}delete n.dbgr},s.loadDebuggerForEditor=function(e){s.closeDebugger(),r.saveData(l.key,{uiState:"wmd-minimize"},l.expiry),r.saveData(u.key,h.ActiveAndReset,u.expiry),r.refreshGetData(undefined,e)},s.loadDebuggerFromStorage=function(){window._walkmeInternals.ctx.get("PostMessageListener").listen(function(e){try{var t=o.secureEvalJSON(e.data);"DEBUGGER_LOADED"==t.requestType&&p()}catch(n){a.customerLog("Error loading debugger from post message: "+n,4)}}),p()},s.clearDebuggerState=function(){r.removeData(u.key),r.removeData(l.key)},n.bind(t.EVENTS.Widget.SearchTermChanged,c),n.bind("removeWalkMe",g)}).dependencies("WmInternals, ClientStorageManager, SiteConfigManager, CommonUtils, Logger, SettingsFile, Consts");var h={Deactive:0,Active:1,ActiveAndReset:2};Tt.register("DynamicComponentTypes").asFunction(function(){return{Walkthru:0,LiveChat:1,ActionBot:2,IntegrationCenterWebhooks:3,DeepUI:4}}),Tt.register("DynamicComponentsProvider").asCtor(function(){var e;this.get=function(){return e},e=[__webpack_require__(269),__webpack_require__(270),__webpack_require__(271),__webpack_require__(272),__webpack_require__(273)]});var n=Tt.register("WalkmeLoader").asCtor(function(i,r,e,n,t,o,a,s,l,u,c,d){var f,p,g=this;function h(e){window._walkmeInternals.walkmeLoadLog.push(e)}var m=Tt.register("loadClasses").asInstance({}).dependencies("CookiesManager,Logger,FramesetsUtils,SettingsFile,JQueryElementFinder,ConditionFunctions,ConditionTreeEvaluator,BBCodeParser,ResourceManager,ClientOrServerStorageManager,EndUsersManager,EventSenderInitializer,AbPermutationManager,LibInitializer,WmAjax,SiteConfigManager,EndUserLoggerManager,AnalyticsManager,ClickAuditManager,RecorderServerManager,ServerDataSenderManager,GoalsManager,WalkMeGoalsManager");"useOnce"in m&&m.useOnce();var v=Tt.register("loadClasses2").asInstance({}).dependencies("DebuggerManager,WmInternals,FeaturesManager,TimerManager,CommonEvents,PopupNotificationsService,LoggerManager,ShoutOutActionDataProvider,AuditTasksManager,LegacyWidgetApiModule,LegacyExternalApiModule,FlowSurveyActivator,HeartbeatEventSender");function y(e,t){e&&(e.run?e.run(function(){S(e,t)}):S(e,t))}function S(e,t){if(e){var n=f[e.next];p=e.next,n?y(n,t):t&&t()}}function E(){var e=Tt.get("SessionPersister");return e.loadOrCreate()}"useOnce"in v&&v.useOnce(),g.start=function(e){y(f[p],e)},g.get=function(e){return Tt.get(e)},function(){window._walkmeInternals.walkmeLoadLog=[],f={start:{run:function(e){h("st"),je=Tt.get("CommonUtils"),i.profilerAPI=Tt.get("PerformanceAPI");var t=Tt.get("SettingsFile").getSettingsFile();Tt.get("AuditSourceManager").set(t.Environment),s.setUserGuid(t.UserGuids&&t.UserGuids[0]),Tt.get("RecorderServerManager").set(t.PlayerServer),Tt.get("FramesetsUtils").waitForFramesHeadsAndBodies(e)},next:"creatApi"},creatApi:{run:function(e){window.WalkMeAPI=Tt.get("ClassWalkMeAPI"),e()},next:"pageReady"},pageReady:{run:function(e){h("pr"),g.libCtorTimer=Tt.get("Logger").timer("lib constructor"),e()},next:"loadStorage"},loadStorage:{run:function(e){h("ls");var t=Tt.get("ClientStorageManager");if(t){if(!1===t.init(e,i))return n="storageManagerInitFailed",o.removeWalkMe(n,{sendLog:!0}),!(i.initFailed=!0);var n;try{window.walkme_lib_in_dev&&a.devModeAlert()}catch(r){}g.libCtorTimer.stop()}},next:"loadWalkmeConfig"},loadWalkmeConfig:{run:function(n){h("lwc"),r.init(function(){if(null!=r.Data){var e=r.Data.EndUserSettings,t=Tt.get("EndUsersManager");t.setEndUserSettings(e),t.createEndUserGuid()}n()})},next:"loadServerStorage"},loadServerStorage:{run:function(e){h("lss");var t=Tt.get("StorageManagerFactory").bySettingsFile(!0);Tt.register("ClientOrServerStorageManager").asInstance(t),t===Tt.get("ClientStorageManager")&&t.removeData(t.keysConfig.serverStorage.lastGetDataTime.key,s.getUserGuid()),t.init(e,e)},next:"afterStorageLoaded"},afterStorageLoaded:{run:function(e){h("asl"),Tt.get("loadClasses"),Tt.get("loadClasses2");var t=Tt.get("ClientOrServerStorageManager");t.convertOldCookieStorage("wm-lang"),t.convertOldCookieStorage("wm-ABPer"),-1==document.cookie.indexOf("walkmeDontInitLib")&&n.setWalkmeTimeout(function(){Tt.get("WalkmeLoadTimeManager").init(),l.init(),Tt.get("SuperScriptLauncher").init().then(E).then(function(){Tt.get("HostData").isIE(7)||Tt.get("AuditSourceProvider").isInPlayMode()||(Tt.get("PageVisitIdProvider").init(),Tt.get("EventSenderErrorLogger").init(),Tt.get("EventSenderInitializer").init(),Tt.get("EventSenderEventListener").init()),Tt.get("LibInitializer").startInitializer()})["catch"](function(e){throw e})},0)}}},p="start"}.apply(null,arguments)}).dependencies("Lib, WalkmeConfigManager, Consts, TimerManager, CommonEvents, LibDestroyer, DevModeAlertRaiser, UserGuidContainer, WindowBeforeUnloadHandler, LocalStorageService, CommonUtils, WmInternals");function i(){var t;this.set=function(e){t=e},this.get=function(){return t},this.addRange=function(e){t=t.concat(e)},t=[]}"useOnce"in n&&n.useOnce(),Tt.register("LibCtorService").asCtor(function(e,t,r,n){function i(){Tt.get("AjaxManager").init(),Tt.get("CommonEvents").raiseEvent(e.EVENTS.MainStart,{object:t}),Tt.initialize("Logger"),Tt.initialize("HostData"),Tt.initialize("ElementFinder"),Tt.get("WalkmeLoader").start()}this.init=function(){Et(["bind","unbind","on","off","one"]).each(function(e,n){r[n]=function(e,t){Et(r)[n](e,t)}}),Tt.get("CommonEvents").raiseEvent(e.EVENTS.DICreated,Tt),n.init(i)}}).dependencies("Consts, Lib, WmInternals, SupportToolkitInitializer"),Tt.register("TasksContainer").asCtor(i),Tt.register("ContentsContainer").asCtor(i),Tt.register("ShuttlesContainer").asCtor(i),Tt.register("SurveysContainer").asCtor(i),Tt.register("ShoutOutsContainer").asCtor(i),Tt.register("SpotlightsContainer").asCtor(i),Tt.register("TooltipsContainer").asCtor(i),Tt.register("CategoriesContainer").asCtor(i),Tt.register("CollectionsContainer").asCtor(i),Tt.register("ConditionBlocksContainer").asCtor(i),Tt.register("BusinessSolutionsContainer").asCtor(i),Tt.register("CoursesContainer").asCtor(i),Tt.register("LabelsContainer").asCtor(i),Tt.register("LessonsContainer").asCtor(i),Tt.register("TagsContainer").asCtor(i),Tt.register("TrackedPagesContainer").asCtor(i),Tt.register("TrackedElementsContainer").asCtor(i),Tt.register("AbExperimentsContainer").asCtor(i),Tt.register("SearchProviderUrlsContainer").asCtor(i);var o=Tt.get("UIComponentsClasses"),a=o.eventBasedObject,s=(o.uiComponentBase,o.idisplayer,o.popupBase,o.shoutOutBase);function X(){var s,l,u,c="walkme-hidden-iframe";function n(){return s&&(s.contentWindow||s.window)}this.init=function(e,t,n){a=n,(s=(a?a.ownerDocument:document).getElementById(c))?t&&t():(r=e,i=t,o=n,s=l.createIframe(u,c,!1,i,r,o,!0));var r,i,o;var a},this.postMessage=function(e,t){n().postMessage(e,t)},this.isInitialized=function(){try{return!!n()}catch(e){return!1}},this.getTargetWindow=n,this.terminate=function(){s&&s.parentNode&&s.parentNode.removeChild(s)},function(e,t,n){l=t,u=n.getHiddenIframePath(e)}.apply(null,arguments)}function $(){var n,o,a,s,l,u,c,r="walkme-proxy-iframe";function d(e){var t=l.getWalkmeInternals().walkmeWrap;t?t(n,e):n(e)}this.init=function(e,i){n=e,t=function(){var e,t,n,r=Et(a).contents();s=a.contentWindow||a.window,e=r,t=function(){o.init(null,function(){c=l.registerEventHandler("message",d,!1,s),s.targetWindow=o.getTargetWindow(),i&&i()},r.find("body")[0])},(n=s.document.createElement("script")).type="text/javascript",n.async=!1,n.src=u.getHiddenIframeScriptSrc(),window._walkmeInternals.hiddenIframeCallback=t,e.find("head")[0].appendChild(n)},(a=document.getElementById(r))?t():a=l.createIframe("about:blank",r,!1,t,null,null,!0);var t},this.isInitialized=function(){return o.isInitialized()},this.postMessage=function(e,t){s.send.apply(s,[e,t])},this.terminate=function(){o&&o.terminate();c&&c(),a&&a.parentNode&&a.parentNode.removeChild(a)},function(e,t,n){o=new X(e,l=t,u=n)}.apply(null,arguments)}function b(){var u,c,s,d,f,p,g,h,m,v,l,y,e,S,E=null,T=null,w=this,C={},b=function(){},I=null,_="wm-sync",t=15e3,P=[],A={terminate:"terminate",getAll:"getAllMultiple",checkCanSave:"checkCanSave",get:"get",increment:"increment",getOrSetAndGet:"getOrSetAndGet",del:"delete",setSession:"setSession",getSession:"getSession",set:"set",addSet:"addSet",add:"add",remove:"remove"};function n(){return Tt.get("TimerManager")}function a(e){for(var t=0;t<P.length;t++)P[t].push(e)}function k(e,t,n){var r=w.getData(e,t)||n;return r&&"string"==typeof r&&(r=p.secureEvalJSON(r)||n),r}function o(e,t){x(r(e,t))}function r(e,t){var n=function(){1e3<(i+=1)&&(i=1);return i}();return e.actionId=n,C[n]=t,e}w._iframeReady=!1,w.refreshGetData=function(e,t){var n;(n=t)&&T.push(n),!0!==S||Tt.get("LibDestroyer").removingWalkMe?K():F(e)},w.saveData=function(e,t,n,r){N(e,t,n,r),E.saveData(e,t,n,r),a(e)},w.getData=function(e,t){return E.getData(e,t)},w.removeData=function(e,t){var n,r;n=e,r=t,x({requestType:A.del,userGuid:r,key:n}),E.removeData(e,t),a(e)},w.increment=function(e,t,n,r,i){o({requestType:A.increment,userGuid:r,key:e,ttl:n,lastValue:t},i)},w.getOrSetAndGet=function(e,t,n,r,i){o({requestType:A.getOrSetAndGet,userGuid:r,key:e,ttl:n,fallbackValue:t},i)},w.setSyncFlag=function(e){L(D(_,1,10,e))},w.addToSet=function(e,t,n,r){for(var i=k(e,r,[]),o=0;o<t.length;o++)-1==Tt.get("inArrayFunc")(t[o],i)&&i.push(t[o]);N(e,t,n,r,A.addSet),E.saveData(e,p.toJSON(i),n,r),a(e)},w.addToDictionary=function(e,t,n,r,i){var o=k(e,i,{});o[t]=n,o=p.toJSON(o);var a,s,l,u,c={};c[t]=n,a=e,s=c,l=r,u=i,x({requestType:A.add,userGuid:u,key:a,keyValues:s,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:l}}),E.saveData(e,o,r,i)},w.removeFromDictionary=function(e,t,n,r){var i,o,a,s,l=k(e,r,{});delete l[t],l=p.toJSON(l),i=e,o=[t],a=n,s=r,x({requestType:A.remove,userGuid:s,key:i,keysToRemove:o,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:a}}),E.saveData(e,l,n,r)},w.getInternalKeys=function(e,t){return E.getInternalKeys(e,t)},this.sessionSetData=function(e,t,n){x({requestType:A.setSession,userGuid:n,key:e,value:t})},this.sessionGetData=function(e,t,n,r){o({requestType:A.getSession,userGuid:n,key:e,defaultValue:t},r)};var i=0;function D(e,t,n,r,i){return{requestType:i||A.set,userGuid:r,key:e,saveObj:{value:t,saveTime:(new Date).getTime(),expireSeconds:n}}}function N(e,t,n,r,i){x(D(e,t,n,r,i))}function O(e){var t=(new Date).getTime();return e.saveTime+1e3*e.expireSeconds-t}function x(e){w._iframeReady&&(s.isInitialized()?!1!==S&&L(e):w.init(function(){L(e)}))}function L(e){s.postMessage(p.toJSON(e),"*")}function F(e){P.push([]),x({requestType:A.getAll,usersToLoad:e})}function M(){x({requestType:A.checkCanSave,saveMode:u,userGuids:y})}function R(){"IE"==g.browser.name&&window.opener&&u==Tt.get("CrossDomainMethods").LocalStorage?(B(),n().libSetTimeout(U,3e3)):U()}function B(){w._iframeReady||(L({requestType:A.get,key:_,userGuids:y,saveMode:u}),n().libSetTimeout(B,100))}function U(){w._iframeReady||(w._iframeReady=!0,V(),M())}function V(){Y(),e=n().libSetTimeout(W,t)}function W(){Tt.get("Logger").customerLog("storage failed loading, removing walkme",3),Y(),S=!1,Tt.get("LibDestroyer").removeWalkMe("storageFailedLoading."+v.getErrors(),{sendLog:!0})}this.init=function(e){if(w._iframeReady=!1,b=e,!function(){if(!window.postMessage)return!1;if(u==Tt.get("CrossDomainMethods").LocalStorage)return!!m;return!0}())return Tt.get("Logger").customerLog("Cannot run cross-domain Walk-Thrus on this browser. Removing WalkMe."),!1;S=undefined,(s=c?new $(d,f,h):new X(d,f,h)).init(q,R),Tt.get("PostMessageListener").addTeardownCallback(J)};var j,G=!(this.removeAllData=function(e){var t=E.getStorageInternal()[e];if(t)for(var n in t)w.removeData(n,e)});function H(){window.open(w._saveCookiePath,"_blank"),G=!0,window.focus(),mtjQuery(document).unbind("click.wmpopup"),function e(t){t=t||0;10<t?W():!0!==S&&(t++,M(),n().libSetTimeout(function(){e(t)},200))}()}function Y(){e&&(e.clear(),e=null)}function z(e){var t;Y(),e.canSave||G?e.canSave&&(clearTimeout(j),mtjQuery(document).unbind(".wmpopup"),V(),F(y)):"cookies"==u?(j===undefined&&((t=parseInt(I.getData(Q.key)||0))<3?(t++,I.saveData(Q.key,t.toString(),Q.expiry),mtjQuery(document).bind("click.wmpopup touchend.wmpopup",H)):W()),j=n().libSetTimeout(M,500)):W()}var Q=Tt.get("StorageKeysConfigurations").hiddenIframe.popupHackTries;function q(e){if(v.checkMessageOrigin(e)){try{var t=p.secureEvalJSON(e.data)}catch(a){return}if(t.key==A.checkCanSave)z(t);else if(t.key==A.getAll){if(S||(S=!0,Y(),I.removeData(Q.key),I.removeDomainCookie()),function(e){var t=P.shift();if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(r&&r.length&&0<r.length&&r[0].saveObj!=undefined)for(var i=0;i<r.length;i++){var o=r[i].key;if(-1==Et.inArray(o,t)){var a=r[i].saveObj,s=O(a);0<s?E.saveData(o,a.value,s/1e3,n):w.removeData(o,n)}}}}(t.allValues),b){var n=b;b=null,n()}K()}else if(t.actionId!==undefined)!function(e){if(e&&C[e.actionId]){var t=C[e.actionId];delete C[e.actionId],t(e.value)}}(t);else if(t.key==A.get)if(0<O(t.saveObj))i=t.dataKey,o=t.saveObj.value,i==_&&o&&U();else for(var r=0;r<y.length;r++)w.removeData(t.dataKey,y[r]);else t.key==A.terminate&&(s&&s.terminate(),l&&l(),l=null)}var i,o}function K(){if(0<T.length){var e=T.shift();e&&e()}}function J(){var e=new at(function(e){l=e});return L({requestType:A.terminate}),e}w.releaseCallbacks=function(){T.length=0,C={}},w.releaseCallback=function(e){for(var t=0;t<T.length;t++)if(T[t]==e)return void(T[t]=null)},function(e,t,n,r,i,o,a){h=Tt.get("StorageResourceManager"),y=t,E=new Z,I=Tt.get("CookiesStorageManager"),T=[],g=Tt.get("HostData"),s=n,l=r,u=s&&"Safari"==g.browser.name?Tt.get("CrossDomainMethods").Cookies:l||(s&&g.isIEBrowser(10,"gte")?Tt.get("CrossDomainMethods").IndexedDB:Tt.get("CrossDomainMethods").LocalStorage),f=e,c=o,p=a,d=i,v=Tt.get("CDStorageOriginChecker"),m=Tt.get("LocalStorageService"),Tt.get("Logger").customerLog("Storage mode: "+u+", ["+(r?"from db/feature":"auto detected")+"], compressed: "+i,3),w._origin=h.getOrigin(),w._saveCookiePath=h.getSaveCookiePath(),w._path=h.getHiddenIframePath(i);var s,l}.apply(null,arguments)}function Z(){var o=this,t=null;function a(e){return t[e]===undefined&&(t[e]={}),t[e]}this.saveData=function(e,t,n,r){var i={};i.value=t,i.saveTime=(new Date).getTime(),i.expiresSeconds=n,a(r)[e]=i},this.getData=function(e,t){var n=a(t)[e];if(n){var r=(new Date).getTime();if(0<n.saveTime+1e3*n.expiresSeconds-r)return n.value;o.removeData(e,t)}return undefined},this.removeData=function(e,t){delete a(t)[e]},this.clear=function(e){t[e]={}},this.getStorageInternal=function(){return t},this.getInternalKeys=function(n,r){var i={},e=a(n);return Et.safeEach(e,function(e,t){0===Et.trim(e).toLowerCase().indexOf(r)&&(i[e]=o.getData(e,n))}),i},function(){t={}}.apply(null,arguments)}function I(){var l,u,c,d,f=this,p=null,t=!1;function g(e){return c.defaultValue(e,p)}this.getStorageType=function(){return l},this.init=function(e){if(e=e||function(){},f.dataManager.isInitialized?f.dataManager.isInitialized():t)e();else{if(t=!0,f.dataManager.init)return f.dataManager.init(e);e()}},this.refreshGetData=function(e,t){e=e&&0<e.length?e:[g()],f.dataManager.refreshGetData?f.dataManager.refreshGetData(e,t):t&&t()},this.saveData=function(e,t,n,r){if(0===n&&u.error(null,"ClientStorageManager.saveData - expiresSeconds is 0"),Et!=undefined&&mtjQuery!=undefined)if(Tt.get("FeaturesManager").isFeatureEnabled("StorageManagerTrimStrings")&&"string"==typeof t&&(t=Et.trim(t)),e=mtjQuery.trim(e),r=g(r),t!==undefined){if(n==undefined){var i="storageManager: trying to save key in storage manager without expiration, key: "+e+", value: "+t+", userGUID: "+r;u.customerLog(i,3)}var o,a,s,l;f.dataManager.addToDictionary&&(a=null!==(o=t),s=!(o instanceof Array),l=!(o instanceof Date),"object"==typeof o&&a&&s&&l)?function(e,t,n,r){for(var i in f.removeData(e,r),t)t.hasOwnProperty(i)&&t[i]!==undefined&&f.dataManager.addToDictionary(e,i,t[i],n,r)}(e,t,n,r):f.dataManager.saveData(e,d.toJSON(t),n,r)}else f.removeData(e,r)},this.getData=function(e,t,n){e=mtjQuery.trim(e),n=g(n);var r=f.dataManager.getData(e,n);return r===undefined||""===r?t:d.secureEvalJSON(r)},this.addToDictionary=function(e,t,n,r,i){if(e=mtjQuery.trim(e),i=g(i),f.dataManager.addToDictionary)f.dataManager.addToDictionary(e,t,n,r,i);else{var o=f.getData(e,i);null!==o&&"object"==typeof o||(o={}),o[t]=n,f.saveData(e,o,r,i)}},this.removeFromDictionary=function(e,t,n,r){if(e=mtjQuery.trim(e),r=g(r),f.dataManager.removeFromDictionary)f.dataManager.removeFromDictionary(e,t,n,r);else{var i=f.getData(e,r);i&&i[t]!==undefined&&(delete i[t],f.saveData(e,i,n,r))}},this.addToSet=function(e,t,n,r){if(e=mtjQuery.trim(e),r=g(r),f.dataManager.addToSet)f.dataManager.addToSet(e,t,n,r);else{var i=f.getData(e,r);Et.isArray(i)||(i=[]);for(var o=0;o<t.length;o++)-1==i.indexOf(t[o])&&i.push(t[o]);f.saveData(e,i,n,r)}},this.removeData=function(e,t){e=mtjQuery.trim(e),t=g(t),f.dataManager.removeData(e,t)},this.addToQueue=function(e,t,n,r,i){e=mtjQuery.trim(e),i=g(i);var o=f.getData(e,[],i);o||(o=[]),o.push(t),o.splice(0,o.length-n),f.saveData(e,o,r,i)},f.convertOldCookieStorage=function(e){var t=Tt.get("CookiesManager"),n=t.getCookie(e),r='"#!@DeL@!#"';if(n&&n!=r&&0!==n.indexOf('"')){f.saveData(e,n,Tt.get("Consts").COOKIE_LIFE_2_YEARS);var i=Tt.get("SettingsFile").getStorageType();i&&i!=STORAGE_TYPE.Cookie&&t.setCookie(e,r,-1)}},f.increment=function(e,t,n,r,i){if(e=mtjQuery.trim(e),r=g(r),f.dataManager.increment)f.dataManager.increment(e,t,n,r,i);else{var o=f.getData(e,0,r);t!==o&&(o++,f.saveData(e,o,n,r)),i&&i(o)}},f.getOrSetAndGet=function(e,t,n,r,i){if(e=mtjQuery.trim(e),r=g(r),f.dataManager.getOrSetAndGet)f.dataManager.getOrSetAndGet(e,t,n,r,i);else{var o=f.getData(e,undefined,r);undefined===o&&(f.saveData(e,t,n,r),o=t),i&&i(o)}},f.runWithLock=function(n,r,i,o,a){if(i.maxRetries===undefined&&(i.maxRetries=10),0!==i.maxRetries){i.maxRetries--,n=mtjQuery.trim(n),r=g(r);var s=f.guidGenerator.generateGuid(),e=(i.timeout||1e3)/1e3;f.getOrSetAndGet(n,s,e,r,function(e){if(e===s){var t=o();t&&"function"==typeof t.then?t.then(function(){f.removeData(n,r)}):f.removeData(n,r)}else f.timerManager.setWalkmeTimeout(function(){f.runWithLock(n,r,i,o,a)},i.interval||500)})}else a&&a()},f.getInternalKeys=function(e,t){t&&""!==t||(t="wm-");var n,r=f.dataManager.getInternalKeys(g(e),t);return n=r,Et.safeEach(n,function(e,t){t!==undefined&&""!==t&&(t=d.secureEvalJSON(t)),n[e]=t}),r},this.removeAllData=function(e){f.dataManager.removeAllData(g(e))},f.sessionSetData=function(e,t,n){e=mtjQuery.trim(e),f.dataManager.sessionSetData?f.dataManager.sessionSetData(e,t,n):window.sessionStorage[n+e]=t},f.sessionGetData=function(e,t,n,r){e=mtjQuery.trim(e),f.dataManager.sessionGetData?f.dataManager.sessionGetData(e,t,n,r):r&&r(window.sessionStorage[n+e]||t)},f.setSyncFlag=function(e){f.dataManager.setSyncFlag&&f.dataManager.setSyncFlag(e)},f.isEnabled=function(){return f.dataManager.isEnabled()},f.releaseCallbacks=function(){f.dataManager.releaseCallbacks&&f.dataManager.releaseCallbacks()},f.releaseCallback=function(e){e&&f.dataManager.releaseCallback&&f.dataManager.releaseCallback(e)},function(e,t,n,r,i,o,a,s){l={type:e,mode:"client"},f.dataManager=t,p=n,u=r,c=i,d=o,f.keysConfig=Tt.get("StorageKeysConfigurations"),f.guidGenerator=a,f.timerManager=s}.apply(null,arguments)}function l(){this.get=function(e){return window._walkmeExtension&&"undefined"!=typeof window._walkmeExtension[e]?window._walkmeExtension[e]:undefined}}function l(){this.get=function(e){return window._walkmeExtension&&"undefined"!=typeof window._walkmeExtension[e]?window._walkmeExtension[e]:undefined}}function P(){var o,a,s,l,u,c,d=this;function f(){return a.getFromStorage(c)}d.saveData=function(e){var t=l.minifyData(e);if(d.removeData(),t!==undefined){for(var n=function(e,t){for(var n=[],r=Math.ceil(e.length/t),i=0;i<r;i++){var o=t>e.length?e.length:t,a=e.slice(0,o);e=e.substring(o),n.push(a)}return n}(t,2600),r=0;r<n.length;r++){var i=n[r];a.saveToStorage(u+r,i,o)}a.saveToStorage(c,n.length,o)}},d.getData=function(){var e,t,n,r=f();if(r!=undefined){e="";for(var i=0;i<r;i++){e+=a.getFromStorage(u+i)}}if(e)try{t=(t=l.deminifyData(e))||undefined}catch(o){n=o}return(n||0<r&&!t)&&(s(n,"Storage data is malformed, discarding it."),d.removeData()),t},d.removeData=function(){var e=f();if(a.saveToStorage(c,0,o),e!=undefined)for(var t=0;t<e;t++)a.saveToStorage(u+t,null,o)},function(e,t,n,r){a=e,o=t,s=n,l=Tt.get("DataMinifier"),r;var i=Tt.get("StorageKeysConfigurations").storage;u=i.dataPrefix.key,c=i.numberOfEntries.key}.apply(null,arguments)}function u(n,r){function t(e,t){return{name:n.get()[r.generateKey(e)],type:e.toLowerCase(),weak:t}}this.generateWithoutBackground=function(e){return t(e,!0)},this.generate=function(e){return t(e,!1)}}Tt.register("CdnServer").asCtor(function(e){var t;this.get=function(){return t||e.getCdnServerName()||""},this.override=function(e){t=e}}).dependencies("SettingsFile"),Tt.register("FindElementCornerMargin").asInstance(1),Tt.register("FindElementCornerFunctions").asFunction(function(t){return[function(e){return{x:e.offset().left+e.outerWidth()/2,y:e.offset().top+t}},function(e){return{x:e.offset().left+e.outerWidth()/2,y:e.offset().top+e.outerHeight()-t}},function(e){return{x:e.offset().left+t,y:e.offset().top+e.outerHeight()/2}},function(e){return{x:e.offset().left+e.outerWidth()-t,y:e.offset().top+e.outerHeight()/2}},function(e){return{x:e.offset().left+t,y:e.offset().top+t}},function(e){return{x:e.offset().left+t,y:e.offset().top+e.outerHeight()-t}},function(e){return{x:e.offset().left+e.outerWidth()-t,y:e.offset().top+t}},function(e){return{x:e.offset().left+e.outerWidth()-t,y:e.offset().top+e.outerHeight()-t}}]}).dependencies("FindElementCornerMargin"),Tt.register("ElementPositionCalculator").asCtor(function(u,c){this.getElementPosition=function(e,t){try{var n,r;if(e==u.EMBEDMENT_TYPE.EmbedInOwnerDocument){var i=t.offset();n=Math.floor(i.top),r=Math.floor(i.left)}else if(e==u.EMBEDMENT_TYPE.EmbedInTopDocument){var o=c.getPosRelativeToWindow(t[0],window,!0);n=o.top,r=o.left}var a=t.height(),s=t.width();return{top:n,left:r,height:a,width:s}}catch(l){return{}}}}).dependencies("Consts, PositionHelper"),Tt.register("StorageResourceManager").asCtor(function(n,r,i,o){var a,s=this;function l(e){var t=n.getStorageType();if(t)return t[e]}s.getOrigin=function(){if(!a){if(i){var e=i.getItem("wm-cdhi-o");if(e)return e}var t=l("hi");if(t)return t;a=r.getOrigin()}return a},s.getHiddenIframePath=function(e){var t=e?".compress":"";return s.getOrigin()+r.formatString("/player/resources/CD/CDhiddenIframe{1}_v{0}.html",41,t)},s.getHiddenIframeScriptSrc=function(){return s.getOrigin()+r.formatString("/player/resources/CD/cdHiddenIframeScript_{0}.js",3)},s.getSaveCookiePath=function(){var e=l("sc");return e||s.getOrigin()+"/player/resources/CD/saveCookie.html"},s.shouldHandleMessage=function(e){var t=s.getOrigin();return-1<o.remove(t.toLowerCase()).indexOf(o.remove(e.origin))}}).dependencies("SettingsFile, CommonUtils, LocalStorageService, UrlCommonStringsRemover"),Tt.register("CDStorageOriginChecker").asCtor(function(r){var i,o=[];this.checkMessageOrigin=function(e){var t,n=r.shouldHandleMessage(e);return!i&&e&&"frameOrigin"==e.data&&(n||(t="Storage Frame is not from the same origin: "+e.origin,o.push(t)),i=!0),n},this.getErrors=function(){return o.length?"\nErrors:\n"+o.join("\n"):""},function(){}.apply(null,arguments)}).asSingleton().dependencies("StorageResourceManager"),Tt.register("CookiesStorageManager").asCtor(function(a){var i,o=this,r="#!@DeL@!#",s="wm-dmn";o.saveData=function(e,t,n,r){o.currentDomain==undefined&&(o.currentDomain=function(){var e=a.getCookie(s);if(e)return e;var t=window.location.hostname;if(new RegExp("^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$").test(t))return a.setCookie(s,t,600,t),t;if(-1==t.indexOf("."))return null;for(var n=t.split("."),r="",i=n.length-1;0<=i;i--)if(""!=r&&(r="."+r),r=n[i]+r,a.setCookie(s,r,600,r),a.getCookie(s)==r)return r;if(a.setCookie("wm-test","wm-test",600),"wm-test"!=a.getCookie("wm-test"))try{console.log("WalkMe requires the browser to accept cookies - please enable cookies in your browser.")}catch(o){}else console.log(new Error("Cannot get domain from: "+t));return undefined}()),a.setCookie(e,t,n,o.currentDomain),i.saveData(e,t,n,r)},o.getData=function(e,t){var n=i.getData(e,t);return n!==undefined||(n=a.getCookie(e))!==r&&!1!==n?n:undefined},o.removeData=function(e,t){i.removeData(e,t);var n=o.getData(e);n!==undefined&&o.saveData(e,r,-1)},o.removeAllData=function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++)if(0===Et.trim(e[t]).toLowerCase().indexOf("wm-")){var n=Et.trim(e[t].split("=")[0]);document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}},o.getInternalKeys=function(e,t){for(var n=document.cookie.split(";"),r={},i=0;i<n.length;i++)if(0===Et.trim(n[i]).toLowerCase().indexOf(t)){var o=Et.trim(n[i].split("=")[0]);o!==s&&(r[o]=this.getData(o))}return r},o.refreshGetData=function(e,t){for(var n=0;n<e.length;n++)i.clear(e[n]);t&&t()},o.removeDomainCookie=function(){o.removeData(s)},function(){i=new Z}.apply(null,arguments)}).asProto().dependencies("CookiesManager"),Tt.register("ExtensionStorageManager").asCtor(function(t,n,o){var r=this,i=5;function a(e){return(new Date).getTime()+e}r.init=function(e){window.walkmeExt?e():0!=i?(i--,t.libSetTimeout(function(){r.init(e)},300)):n.customerLog("Extension storage is not available, walkme can not load",3)},r.saveData=function(e,t,n,r){var i={val:t,exp:a(1e3*n)};walkmeExt.SaveData(e,o.toJSON(i),r)},r.getData=function(e,t){var n=walkmeExt.GetData(e,t);if(n){var r=o.secureEvalJSON(n);return r.val}},r.removeData=function(e,t){walkmeExt.removeData(e,t)},r.removeAllData=function(e){walkmeExt.RemoveAllData(e)},r.getAll=function(e){return walkmeExt.GetAll(e)},function(){}.apply(null,arguments)}).asProto().dependencies("TimerManager, Logger, JsonUtils"),Tt.register("WalkMejStorageManager").asCtor(function(o,s,a){var l=this,u="walkMe_";function c(){return(new Date).getTime()}this.init=function(e){if(!l.isEnabled())return!1;e()},this.saveData=function(e,t,n){n=o.defaultValue(n,0),l.removeData(e);var r,i={val:t,exp:(r=1e3*n,c()+r)};s.setItem(u+e,a.toJSON(i))},this.getData=function(e){var t=s.getItem(u+e);if(t){var n=a.secureEvalJSON(t);if(!(n.exp<c()))return n.val;l.removeData(e)}},this.removeData=function(e){s.removeItem(u+e)},this.removeAllData=function(){Object.keys(localStorage).forEach(function(e){0===e.indexOf(u)&&localStorage.removeItem(e)})},this.getInternalKeys=function(e,r){function t(e,t,n){-1<(e=e.substr(n)).toLowerCase().indexOf(r)&&(t[e]=l.getData(e))}for(var n={},i=u.length,o=0;o<s.length;o++){var a=s.key(o);t(a,n,i)}return n},this.isEnabled=function(){return!!s},function(){try{!function(){if(!l.isEnabled())return;var e=a.secureEvalJSON(s.getItem("wm-storage"));if(!e)return;var t=(e.__jstorage_meta||{}).TTL||{};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],i=t[n],o=c();o<i&&l.saveData(n,r,(i-o)/1e3)}s.removeItem("wm-storage")}()}catch(e){}}.apply(null,arguments)}).asProto().dependencies("CommonUtils, LocalStorageService, JsonUtils"),Tt.register("ServerStorageAjaxCaller").asCtor(function(e,t,s,n,r){var l,u,i,c;this.init=function(){l=e.get(),u=r.getEndUserGuid(),i=t.get(),c=i+"/EndUserStorage/Get"},this.get=function(r,i,o,a){var e={walkmeUserGuid:r,source:l,endUserGuid:u,secondsSinceUpdate:i};n.execute({url:c,data:e,success:function(e,t,n){e.Data.ErrorMessage?(s.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+r+", source: "+l+", end user: "+u+", seconds since update: "+i+". Error: "+e.Data.ErrorMessage+"."),a&&a()):o(e.Data)},error:function(e,t,n){s.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+r+", source: "+l+", end user: "+u+", seconds since update: "+i+". Error: "+t+"."),a&&a()},timeout:1e4})},function(){}.apply(null,arguments)}).dependencies("AuditSourceManager, RecorderServerManager, Logger, WmAjax, EndUsersManager"),Tt.register("ServerStorageManager").asCtor(function(p,e,g,h,m,v,y,r){var S,E,T,w,C,b,I=this,n=!1,_=!0,P=g.keysConfig.serverStorage.currentEndUserGuid,A=g.keysConfig.serverStorage.currentEnvironment,k=g.keysConfig.serverStorage.lastGetDataTime,D=["wm-c-test","wm-dbg-cnf","wm-dbg","wm-ueug","wm-fgug","wm-gb","wm-prsst","wm-sf-lst-usr","wm-sf-users-data","wm-sat","wm-sst","wm-sk","wm-SrvSmt","wm-wtchd","wm-cond-win","wm-prf-stt","wm-prf-snk","wm-cdstop","wm-cdplay","wm-po-pc","wm-po-r","wm-po-q","wm-dt","wm-ne","wm-nx","wm_abg_","wm_ct_","wm-po-p",P.key,A.key,"wm-ftr-cnf","wm-ftr","wm-ltm","wm-ct-prv","wm-lg-act"];function o(e,t,n){var r=!1;return 3600<=t&&(r=!0),r}I.init=function(e,t){if(C)e&&e();else{C=!0,S.init(),m.init(),E=p.getUserGuid(),T=y.getEndUserGuid(),w=h.get();var n,r,i=g.getData(k.key,null,E);i&&(_=!1),n=g.getData(P.key,null,E),r=g.getData(A.key,null,E),_||n==T&&r==w||(!function(){for(var t=g.getInternalKeys(E),n=0;n<D.length;n++)Et.each(t,function(e){0==e.indexOf(D[n])&&delete t[e]});for(var e in t)t.hasOwnProperty(e)&&g.removeData(e,E)}(),i=null),g.saveData(P.key,T,P.expiry,E),g.saveData(A.key,w,A.expiry,E);var o,a,s,l,u,c,d=(new Date).getTime(),f=null==i?null:(d-i)/1e3;u=f,c=v.getStorageType()[g.keysConfig.serverStorage.invalidateIntervalKey.key]||86400,null===u||c<=u?(o=f,a=d,s=e,l=t,m.get(E,o,function(e){I.updateLocalStorage(e,a),b=0,s&&s()},function(){b=1,l&&l()})):e&&e()}},I.updateLocalStorage=function(e,t){n=!!_,I.updateLocalStorageItems(e),g.saveData(k.key,t,k.expiry,E)},I.updateLocalStorageItems=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.IsDeleted?g.removeData(n.Key,E):g.saveData(n.Key,r.secureEvalJSON(n.Value),n.SecondsToExpiry,E)}},I.shouldUpdateOldKeys=function(){return n},I.getStorageType=function(){var e=g.getStorageType();return e.mode="server",e},I.refreshGetData=g.refreshGetData,I.saveData=function(e,t,n,r){r==undefined&&(r=E),o(e,n,r)&&S.update(e,t,n,r),g.saveData(e,t,n,r)},I.getData=function(e,t,n,r){return r!==undefined&&b&&(t=r),g.getData(e,t,n)},I.addToDictionary=function(e,t,n,r,i){o(e,r,i)&&S.updatePropertyInObject(e,t,n,r,i||E),g.addToDictionary(e,t,n,r,i)},I.addToSet=function(e,t,n,r){r==undefined&&(r=E),o(e,n,r)&&S.addToSet(e,t,n,r),g.addToSet(e,t,n,r)},I.removeData=function(e,t){t==undefined&&(t=E),S.remove(e,t),g.removeData(e,t)},I.addToQueue=g.addToQueue,I.convertOldCookieStorage=g.convertOldCookieStorage,I.increment=g.increment,I.getInternalKeys=g.getInternalKeys,I.removeAllData=g.removeAllData,I.sessionSetData=g.sessionSetData,I.sessionGetData=g.sessionGetData,I.setSyncFlag=g.setSyncFlag,function(){S=e,C=!1,I.keysConfig=g.keysConfig}.apply(null,arguments)}).dependencies("UserGuidContainer, EndUserStorageDataSender, ClientStorageManager, AuditSourceManager, ServerStorageAjaxCaller, SettingsFile, EndUsersManager, JsonUtils"),Tt.register("EndUserStorageDataSender").asCtor(function(r,e,t,n,i){var a,o,s,l,u,c,d,f=this;function p(e,t,n){return{Key:e,Value:r.toJSON(t),Expiry:n}}f.init=function(){a=i.getUserGuid(),o=n.getEndUserGuid(),s=e.get()},f.updatePropertyInObject=function(e,t,n,r,i){a=i||a;var o={Key:e,FieldKey:t,FieldValue:n,Expiry:r};u.sendData(o)},f.addToSet=function(e,t,n,r){a=r||a,c.sendData(p(e,t,n))},f.update=function(e,t,n,r){a=r||a,l.sendData(p(e,t,n))},f.remove=function(e,t){a=t||a,d.sendData({Key:e})},f.getUpdateTypedDataSender=function(){return l},f.getRemoveTypedDataSender=function(){return d},f.updateRequestParamsFunc=function(e){return{walkmeUserGuid:a,source:s,endUserGuid:o,keyValueExpiryListSerialized:r.toJSON(e)}},f.removeRequestParamsFunc=function(e){return{walkmeUserGuid:a,source:s,endUserGuid:o,keyListSerialized:r.toJSON(e)}},function(){u=t.register("up",{actionUrl:"/EndUserStorage/UpdatePropertyInObject",prefixForStorage:"up",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:f.updateRequestParamsFunc,shouldTruncateData:!1}),c=t.register("as",{actionUrl:"/EndUserStorage/AddToSet",prefixForStorage:"as",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:f.updateRequestParamsFunc,shouldTruncateData:!1}),l=t.register("us",{actionUrl:"/EndUserStorage/Update",prefixForStorage:"us",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:f.updateRequestParamsFunc,shouldTruncateData:!1}),d=t.register("rs",{actionUrl:"/EndUserStorage/Remove",prefixForStorage:"rs",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:f.removeRequestParamsFunc,shouldTruncateData:!1})}.apply(null,arguments)}).dependencies("JsonUtils, AuditSourceManager, ServerDataSenderManager, EndUsersManager, UserGuidContainer"),Tt.register("ServerStorageSettingsService").asCtor(function(t){this.isServerStorageOn=function(){var e=t.getStorageType();return!!e&&1==e[n]};var n="ss"}).dependencies("SettingsFile"),Tt.register("CrossDomainMethods").asInstance({Cookies:"cookies",LocalStorage:"localStorage",IndexedDB:"indexedDB"}),Tt.register("StorageManagerFactory").asCtor(function(e,r,s,l,u,c,i,d,f,p,g){var h,m,v,y,S,E=!0,o=this,T="cm";function w(e,t){var n=r.getStorageType();return n&&n[e]!==undefined?n[e]:t}function C(e,t,n,r,i){var o=h(),a=o[0];return t?function(e,t,n,r,i,o){if(!m){var a=new b(u,e,t,r,i,o,f);m=new I(c.STORAGE_TYPE.CrossDomain,a,n,s,u,f,p,g)}return m}(o,t,a,r,!!w(T,E),i):e?function(e){if(!v){var t=Tt.get("WalkMejStorageManager");v=new I(c.STORAGE_TYPE.JStorage,t,e,s,u,f,p,g)}return v}(a):n?function(e){if(!S){var t=Tt.get("ExtensionStorageManager");S=new I(c.STORAGE_TYPE.Extension,t,e,s,u,f,p,g)}return S}(a):function(e){if(!y){var t=Tt.get("CookiesStorageManager");y=new I(c.STORAGE_TYPE.Cookie,t,e,s,u,f,p,g)}return y}(a)}o.bySettingsFile=function(e){var t=je.getWindowCookie("wm-stt"),n=t?o.byType(t):o.byType(r.getStorageType());return e&&i.isServerStorageOn()&&!Tt.get("EndUsersManager").isWalkMeGeneratedEndUserType()&&(n=Tt.get("ServerStorageManager")),n},o.byType=function(e){var t,n=function(e){if(!e)return e;{if("string"==typeof e)return e;var t=e.st;return t[l.browser.string]||t[l.browser.name]||t["*"]}}(e),r=!1,i=!1,o=!1,a=w("sm");switch(n){case c.STORAGE_TYPE.JStorage:r=!0;break;case c.STORAGE_TYPE.CrossDomainCookies:a=d.Cookies,i=!0;break;case c.STORAGE_TYPE.CrossDomainLocalStorage:a=d.LocalStorage;case c.STORAGE_TYPE.CrossDomain:i=!0;break;case c.STORAGE_TYPE.Extension:o=!0;break;case c.STORAGE_TYPE.ProxyIframe:t=i=!0;break;case c.STORAGE_TYPE.Cookie:}return C(r,i,o,a,t)},function(){h=e.getAllUserGuids}.apply(null,arguments)}).dependencies("UserGuidContainer, SettingsFile, Logger, HostData, CommonUtils, Consts, ServerStorageSettingsService, CrossDomainMethods, JsonUtils, GuidGenerator, TimerManager"),Tt.register("ClientStorageManager").asFunction(function(e){return e.bySettingsFile()}).dependencies("StorageManagerFactory"),Tt.register("ExtensionConfigManager").asCtor(l),Tt.register("ExtensionConfigManager").asCtor(l),Tt.register("StringCache").asCtor(function(){var n=[],r=[];this.set=function(e,t){n.push(e),r.push(t),5<n.length&&(n.shift(),r.shift())},this.getValue=function(e){for(var t=0;t<n.length;t++)if(n[t]==e)return r[t]},this.getKey=function(e){for(var t=0;t<r.length;t++)if(r[t]==e)return n[t]}}).asProto(),Tt.register("ButtonSiteConfigKeyGenerator").asCtor(function(){this.generateKey=function(e){return e+"ButtonText"}}),Tt.register("WelcomeButtonSiteConfigKeyGenerator").asCtor(function(){this.generateKey=function(e){return"WelcomeStepButton"+e+"Text"}}),Tt.register("BalloonButtonDataGenerator").asCtor(u).dependencies("SiteConfigManager, ButtonSiteConfigKeyGenerator"),Tt.register("WelcomeBalloonButtonDataGenerator").asCtor(u).dependencies("SiteConfigManager, WelcomeButtonSiteConfigKeyGenerator"),Tt.register("AjaxProxyIframeManager").asCtor(function(s,l,e){var u,c,d,f={},p=1;function t(){d.resolve()}function n(e){if(!(u.toLowerCase().indexOf(e.origin)<0)){var t=l.secureEvalJSON(e.data);t.wmAP&&f[t.requestIndex]&&(t.data=l.secureEvalJSON(t.data),f[t.requestIndex].requestDefer.resolve(t))}}this.init=function(){d=Et.Deferred(),u=s.getOrigin()+e.formatString("/player/resources/AP/ajaxProxyIframe_v{0}.html",5),c=s.createIframe(u,"walkme-ap-iframe",!1,t,n)},this.postMessage=function(e,t){o=p,a=t,f[o]={requestDefer:Et.Deferred(),result:""},f[o].requestDefer.promise().then(function(e){delete f[o],a(e)}),n=e,r=p,i={origin:s.getWinOrigin(),requestIndex:r,message:n,wmAP:!0},d.promise().then(function(){c.contentWindow.postMessage(l.toJSON(i),u)}),p++;var n,r,i;var o,a},this.abort=function(e){delete f[e]}}).dependencies("CommonUtils, JsonUtils, StringUtils"),Tt.register("ClassWalkMeAPI").asCtor(function(t,o,r,i,n,e,a,s,l,u,c,d){var f=this;f.getPlayInitiatorEnum=function(){return o.STEP_PLAY_INITIATOR_ENUM},f.getFlows=function(){try{for(var e=window._walkmeInternals.ctx,t=e.get("BusinessSolutionsManager").getAll(),n=e.get("CommonUtils").clone(t),r=0;r<n.length;r++){var i=n[r].Settings.CustomField1;i&&(n[r].Settings.CustomField1=s.decodeHtml(i,['"',"'","&"]))}return n}catch(o){p("walkMeAPI - error running getFlows.",3)}},f.startContentById=function(e,t,n){try{if(e<0)return!1;var r={type:t=t!==undefined?t:o.STEP_PLAY_INITIATOR_ENUM.API};return g(r),n&&(r.objectId=n),Tt.get("ContentsManager").activateById(e,r),!0}catch(i){p("walkMeAPI - error running startContentById.",3)}},f.startSurveyById=function(e,t){try{return!(e<0)&&(g(t=t||{type:o.STEP_PLAY_INITIATOR_ENUM.API}),Tt.get("SurveysManager").activateById(e,t))}catch(n){p("walkMeAPI - error running startSurveyById.",3)}},f.startFlowById=function(e,t){try{if(!a.isWalkMeVisible())return!1;var n={type:o.STEP_PLAY_INITIATOR_ENUM.API};return g(n),window._walkmeInternals.ctx.get("BusinessSolutionsManager").activateById(e,n,t)}catch(r){p("walkMeAPI - error running startFlowById.",3)}},f.stopFlow=function(){try{return!!a.isWalkMeVisible()&&window._walkmeInternals.ctx.get("BizflowApi").stop()}catch(e){p("walkMeAPI - error running stopFlow.",3)}},f.setAnalyticsCustomField=function(e,t){try{return!(e>o.ANALYTICS_CUSTOM_VARS.MaxCustomFields||e<1||t.length>o.ANALYTICS_CUSTOM_VARS.MaxVarLength)&&Tt.get("WalkMeInfo").setAnalyticsCustomFields(e-1,t)}catch(n){p("walkMeAPI - error running setAnalyticsCustomField.",3)}},f.setAnalyticsProperty=function(e,t){try{r.setPredefinedPropertyValue(e,t)}catch(n){p("walkMeAPI - error running setAnalyticsProperty.",3)}},f.enableLogs=function(e){try{return e==undefined&&(e=!0),this.log.enable(e)}catch(t){p("walkMeAPI - error running enableLogs.",3)}},f.loadTasks=function(e,t){try{return window._walkmeInternals.ctx.get("TodoListManager").loadTasks(e,t)}catch(n){p("walkMeAPI - error running loadTasks.",3)}},f.getTasks=function(e){try{return window._walkmeInternals.ctx.get("TodoListManager").getApiTasks(e)}catch(t){p("walkMeAPI - error running getTasks.",3)}},f.getWidgetMode=function(){return"Walkthrus"},f.setWidgetMode=function(e){return"Deprecated"},f.getWidgetInitialState=function(){return"Closed"},f.changeLanguage=function(e,t){try{return Tt.get("LibInitializer").changeLanguage(e,t)}catch(n){}},f.getAllLanguages=function(){try{return G.ctx.get("LanguageManager").getAllLanguages()}catch(e){p("walkMeAPI - error running getAllLanguages.",3)}},f.getSupportedLanguages=function(){try{return G.ctx.get("LanguageManager").getMenuLanguages()}catch(e){p("walkMeAPI - error running getSupportedLanguages.",3)}},f.getCurrentLanguage=function(){try{return G.ctx.get("LanguageManager").getCurrentLanguage()}catch(e){p("walkMeAPI - error running getCurrentLanguage.",3)}},f.getTree=function(){try{return _walkMe.getUiDataProvider().uiObjectsTree()}catch(e){p("walkMeAPI - error running getTree.",3)}},f.triggerUIChange=function(){try{return n.triggerUIChangeAPI()}catch(e){p("walkMeAPI - error running triggerUIChange.",3)}},f.triggerPageChange=function(){try{return l.triggerPageChange()}catch(e){p("walkMeAPI - error running triggerPageChange.",3)}},f.launchTracker=function(e,t){try{return i.launchDebuggerIfEnabled(e,t)}catch(n){p("walkMeAPI - error running launchTracker.",3)}},f.log=e.getAPI(),f.getObjectsTree=function(){try{return window._walkmeInternals.ctx.get("WidgetUiApi").getObjectsTree()}catch(e){p("walkMeAPI - error running getObjectsTree.",3)}},f.getDeployableId=function(e,t){try{var n=u.get(e),r=n.getAll(),i=Et.grep(r,function(e){return e.Name.toLowerCase()==t.toLowerCase()});return 0<i.length&&i[0].Id}catch(o){p("walkMeAPI - error running getDeployableId. Error: "+o,3)}},f.getWalkthrus=function(){return[]},f.isDeployableVisible=function(e,t){if(!Tt.get("ShowInMenuCheckerFactory").isSupportedDeployableInMenu(e))return void p("walkMeAPI - deployable type not supported.",3);var n=u.get(e);{if(n){var r=n.getById(t);if(r){r.deployableType||(r.deployableType=e);var i=Tt.get("PropertiesGeneratorFactory").create({deployable:r}).getAll();return-1<c.inArray(o.UI_PROPERTIES.Visible,i)}return p("walkMeAPI - error deployable not exist.",3),!1}return p("walkMeAPI - error getting deployable type manager.",3),!1}},f.activateDeployable=function(e,t,n){var r=u.get(e);{if(n=n||{type:o.STEP_PLAY_INITIATOR_ENUM.API},!r)return p("walkMeAPI - error activate deployable.",3),!1;try{return!!r.activateById(t,n)}catch(i){return p("walkMeAPI - error activate deployable. "+i,3),!1}}},f.debug={toggleWM:function(){d.saveData("walkme_is_enabled_override",0),p("walkMeAPI - WalkMe toggled off.",3)}};var p=e.wrapCustomerLog("walkmeAPI");function g(e){t.raiseEvent(o.EVENTS.ApiWasCalled,{initiator:e})}t.raiseEvent(o.EVENTS.WalkmeApiStarted,{object:f}),f.conditions={handlers:{registerAsync:function(){var e=Tt.get("ExternalConditionsHandlers");return e.register.apply(e,arguments)}}}}).dependencies("CommonEvents, Consts, AnalyticsPropertiesManager, DebuggerManager, UIChangeTracker, Logger, WalkMeVisibilityChecker, HtmlDecoder, PageChangeTracker, DeployablesManagerFactory, ArrayUtils, CookiesStorageManager").asSingleton(),function(e){var i={Template:function(e,t,n,r){this.r=e||this.r,this.c=n,this.options=r,this.text=t||"",this.buf=""}};i.Template.prototype={r:function(e,t,n){return""},v:function(e){return e=l(e),s.test(e)?e.replace(t,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(o,"&#39;").replace(a,"&quot;"):e},t:l,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];return i?(this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)):""},rs:function(e,t,n){var r=e[e.length-1];if(u(r))for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop();else n(e,t,this)},s:function(e,t,n,r,i,o,a){var s;return(!u(e)||0!==e.length)&&("function"==typeof e&&(e=this.ls(e,t,n,r,i,o,a)),s=""===e||!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,t,n,r){var i=e.split("."),o=this.f(i[0],t,n,r),a=null;if("."===e&&u(t[t.length-2]))return t[t.length-1];for(var s=1;s<i.length;s++)o=o&&"object"==typeof o&&i[s]in o?(a=o)[i[s]]:"";return!(r&&!o)&&(r||"function"!=typeof o||(t.push(a),o=this.lv(o,t,n),t.pop()),o)},f:function(e,t,n,r){for(var i=!1,o=null,a=!1,s=t.length-1;0<=s;s--)if((o=t[s])&&"object"==typeof o&&e in o){i=o[e],a=!0;break}return a?(r||"function"!=typeof i||(i=this.lv(i,t,n)),i):!r&&""},ho:function(e,t,n,r,i){var o=this.c,a=this.options;return a.delimiters=i,r=null==(r=e.call(t,r))?String(r):r.toString(),this.b(o.compile(r,a).render(t,n)),!1},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,o,a){var s,l=t[t.length-1];if(!r&&this.c&&0<e.length)return this.ho(e,l,n,this.text.substring(i,o),a);if("function"==typeof(s=e.call(l))){if(r)return!0;if(this.c)return this.ho(s,l,n,this.text.substring(i,o),a)}return s},lv:function(e,t,n){var r=t[t.length-1],i=e.call(r);return"function"==typeof i&&(i=l(i.call(r)),this.c&&~i.indexOf("{{"))?this.c.compile(i,this.options).render(r,n):l(i)}};var t=/&/g,n=/</g,r=/>/g,o=/\'/g,a=/\"/g,s=/[&<>\"\']/;function l(e){return String(null===e||e===undefined?"":e)}var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},E=/\S/,c=(a=/\"/g,/\n/g),d=/\r/g,f=/\\/g,T={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};function w(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function C(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function b(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function p(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function g(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}function m(e){return e.replace(f,"\\\\").replace(a,'\\"').replace(c,"\\n").replace(d,"\\r")}function v(e){return~e.indexOf(".")?"d":"f"}function y(e){for(var t,n,r,i,o,a,s,l,u,c,d,f="",p=0,g=e.length;p<g;p++){var h=e[p].tag;"#"==h?f+=(a=e[p].nodes,s=e[p].n,l=v(e[p].n),u=e[p].i,c=e[p].end,d=e[p].otag+" "+e[p].ctag,"if(_.s(_."+l+'("'+m(s)+'",c,p,1),c,p,0,'+u+","+c+',"'+d+'")){_.rs(c,p,function(c,p,_){'+y(a)+"});c.pop();}"):"^"==h?f+=(i=e[p].nodes,o=e[p].n,"if(!_.s(_."+v(e[p].n)+'("'+m(o)+'",c,p,1),c,p,1,0,0,"")){'+y(i)+"};"):"<"==h||">"==h?f+='_.b(_.rp("'+m((r=e[p]).n)+'",c,p,"'+(r.indent||"")+'"));':"{"==h||"&"==h?f+=(n=e[p].n,"_.b(_.t(_."+v(e[p].n)+'("'+m(n)+'",c,p,0)));'):"\n"==h?f+=S('"\\n"'+(e.length-1==p?"":" + i")):"_v"==h?f+=(t=e[p].n,"_.b(_.v(_."+v(e[p].n)+'("'+m(t)+'",c,p,0)));'):h!==undefined&&e[p].hasOwnProperty("tag")||(f+=S('"'+m(e[p])+'"'))}return f}function S(e){return"_.b("+e+");"}i.scan=function(e,t){var n,r,i,o,a,s=e.length,l=0,u=null,c=null,d="",f=[],p=!1,g=0,h=0,m="{{",v="}}";function y(){0<d.length&&(f.push(new String(d)),d="")}function S(e,t){if(y(),e&&function(){for(var e=!0,t=h;t<f.length;t++)if(!(e=f[t].tag&&T[f[t].tag]<T._v||!f[t].tag&&null===f[t].match(E)))return!1;return e}())for(var n,r=h;r<f.length;r++)f[r].tag||((n=f[r+1])&&">"==n.tag&&(n.indent=f[r].toString()),f.splice(r,1));else t||f.push({tag:"\n"});p=!1,h=f.length}for(t&&(t=t.split(" "),m=t[0],v=t[1]),g=0;g<s;g++)0==l?b(m,e,g)?(--g,y(),l=1):"\n"==e.charAt(g)?S(p):d+=e.charAt(g):1==l?(g+=m.length-1,"="==(u=(c=T[e.charAt(g+1)])?e.charAt(g+1):"_v")?(r=g,void 0,i="="+v,o=(n=e).indexOf(i,r),a=C(n.substring(n.indexOf("=",r)+1,o)).split(" "),m=a[0],v=a[1],g=o+i.length-1,l=0):(c&&g++,l=2),p=g):b(v,e,g)?(f.push({tag:u,n:C(d),otag:m,ctag:v,i:"/"==u?p-v.length:g+m.length}),d="",g+=v.length-1,l=0,"{"==u&&("}}"==v?g++:w(f[f.length-1]))):d+=e.charAt(g);return S(p,!0),f},i.generate=function(e,t,n){var r='var _=this;_.b(i=i||"");'+y(e)+"return _.fl();";return n.asString?"function(c,p,i){"+r+";}":new i.Template(new Function("c","p","i",r),t,i,n)},i.parse=function(t,n,r){return function e(t,n,r,i){for(var o=[],a=null,s=null;0<t.length;)if("#"==(s=t.shift()).tag||"^"==s.tag||p(s,i))r.push(s),s.nodes=e(t,s.tag,r,i),o.push(s);else{if("/"==s.tag){if(0===r.length)throw new Error("Closing tag without opener: /"+s.n);if(a=r.pop(),s.n!=a.n&&!g(s.n,a.n,i))throw new Error("Nesting error: "+a.n+" vs. "+s.n);return a.end=s.i,o}o.push(s)}if(0<r.length)throw new Error("missing closing tag: "+r.pop().n);return o}(t,0,[],(r=r||{}).sectionTags||[])},i.cache={},i.compile=function(e,t){var n=e+"||"+!!(t=t||{}).asString,r=this.cache[n];return r||(r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r)},i.to_html=function(e,t,n){var r=e;return"string"==typeof r?r=this.compile(e):"function"==typeof r&&(r=new i.Template(r)),r.render(t,n)},void 0!==Tt&&Tt.register("Mustache").asInstance(i)}(),Tt.register("WalkMeVisibilityChecker").asCtor(function(n,r){this.isWalkMeVisible=function(){var e=0!==n.get().ShowWalkMe,t=r.shouldShowWidget();return e&&t}}).dependencies("SiteConfigManager, AbTestingManager"),Tt.register("WalkthruStepShower").asCtor(function(u,c,d,f,p,g,h,m,v,y,S,E){this.showStep=function(e,t,n){var r=d.secureEvalJSON(e);f.fixStep(r,0,m.get());var i=c.findElement(r);if(u.customerLog("element:",5),u.customerLog(i,5),!i)return!1;var o,a=p.getComplexHtmlElements(r,i);a&&(i=a.elements,o=a.parentElement);s=r,s.DesignTemplateId||s.DesignTemplatePlaceholderConfigs&&0!=s.DesignTemplatePlaceholderConfigs.length||(r.DesignTemplatePlaceholderConfigs=S.createPlaceHolderConfigs(E.templateEntityType.balloon,r.StepTitle,r.StepText));var s;var l=Tt.create("Balloon",{element:i,parentElement:o,forceEmbedBalloonInIframe:t,positionHelper:g,stepSettings:r.Settings,visibilityFilter:g.getVisibleFilterKey(r),text:{title:r.StepTitle,content:r.StepText,subText:function(e){if(!e)return"";var t=m.get().StepsInfoText;return t?t=(t=t.replace("{0}",e.passedVisibleSteps)).replace("{1}",e.totalVisibleSteps):""}(n)},position:r.Position,data:{stepId:r.Id,type:r.Type},buttons:y.calculate(r,n),configuration:r.Configuration,logger:u,drawer:h.getBalloonDrawer(r.Configuration,r),isViewStep:!0,siteConfig:m.get(),bindButtonsFunc:Tt.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:r.DesignTemplatePlaceholderConfigs});return v.add(l),l.Show(!0,function(){l.SetTimeoutOn()}),l}}).dependencies("Logger, Lib, JsonUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper, BalloonDrawerProvider,SiteConfigManager, BalloonsContainer, WalkthruStepShowerButtonsCalculator, DefaultPlaceHolderConfigsCreator, SharedConsts"),Tt.register("WalkthruStepShowerButtonsCalculator").asCtor(function(s,l){this.calculate=function(e,t){var n=undefined;e.Type==l.stepType.Simple?(a=e.End,n=-1<Et.inArray(l.stepTrigger.Button.toString(),a.split(","))?{next:!0}:{}):(i=(r=e).Settings&&r.Settings.popupStepButtons||[],o={},s.foreach(i,function(e){var t=u[e.action];o[t]=!0}),n=o);var r,i,o;var a;t&&Et.extend(n,function(e){var t={};0<e.passedVisibleSteps&&(t.back=!0);e.passedVisibleSteps<e.totalVisibleSteps&&(t.next=!0);e.passedVisibleSteps!==undefined&&e.passedVisibleSteps===e.totalVisibleSteps&&(t.done=!0);return t}(t));return n};var u={};e=l.POPUP_BUTTON_ACTIONS,u[e.NextDone]="next",u[e.Start]="start",u[e.Back]="back",u[e.Cancel]="cancel";var e}).dependencies("ArrayUtils, SharedConsts"),__webpack_require__(274),Tt.register("SiteConfigManager").asCtor(function(i){var o;this.get=function(){return a},this.set=function(t,n){a=t;var r=Tt.get("FeaturesManager");r.isFeatureEnabled("decodeSiteConfig")&&function e(t){for(var n in t)if(Object.hasOwnProperty.call(t,n)){var r=t[n];"string"==typeof r?t[n]=i.decodeHtml(r,s):"object"==typeof t&&e(r)}}(a);if(a!=[]&&!n){if(!(o=!0)===Tt.get("CustomCssSetter").setCustomCssIfNeeded(null)&&!r.isFeatureEnabled("loadNoStyle"))return void Tt.get("LibDestroyer").removeWalkMe("set custom css failed",{sendLog:!0});Tt.get("PositionHelper").extendVisibilityFilters()}},this.wasCustomCssSet=function(){return o};var a=[],s=["&","'",'"',"<",">"]}).dependencies("HtmlDecoder"),Tt.register("TeachMeConfigManager").asCtor(function(){this.get=function(){return t},this.set=function(e){t=e};var t=[]}),Tt.register("LibDestroyer").asCtor(function(i,o,a,s,l,u,c,d){var f=this,p=!1,t=[];function g(e){e&&t.push(e),p?Tt.get("Logger").customerLog("destroyAll - already destroying",1):(p=!0,Tt.get("Logger").customerLog("destroyAll - begin",1),Tt.get("ClientStorageManager").releaseCallbacks(),Tt.get("ConditionCheckerType").cleanResources(),Tt.get("UIVisibilityManagerType").cleanResources(),Tt.get("DOMSessionManager").cleanResources(),Tt.get("BizFlowOnBeforeUnloadChecker").destroy(),Tt.get("FlowTransitionDelayer").destroy(),Tt.get("jQueryCacheCleaner").destroy(),Tt.get("GoalsManager").cleanResources(),r().pipe(function(){Tt.get("Logger").customerLog("destroyAll - releaseAllElements finished",1)}).pipe(n).pipe(o.releaseAllTimeouts).pipe(function(){Tt.get("Logger").customerLog("destroyAll - calling user callbacks",1);for(var e=0;e<t.length;e++)t[e]();p=!(t=[])}))}function n(){var e=Tt.get("CdnServer").get().replace("http://","").replace("https://","");if(mtjQuery("script[src*='"+e+"']").not("script[src*='walkme_lib']").not("script[src*='maketutorial_lib']").not("[src*='jquery']").not("[src*='wmjQuery']").remove(),mtjQuery(".mt-to-destroy, .walkme-to-destroy").remove(),function(e){if(!Tt.get("FramesetsUtils").isFramesetsPage())return;for(var t=Tt.get("FramesetsUtils").getAllFramesDocuments(),n=0;n<t.length;n++)Et(e,t[n]).remove()}(".mt-to-destroy, .walkme-to-destroy"),window._walkmePlayer&&window._walkmePlayer.destroyWalkMePlayer&&window._walkmePlayer.destroyWalkMePlayer(),window.walkmeWidget&&window.walkmeWidget.destroyWalkMePlayer&&window.walkmeWidget.destroyWalkMePlayer(),Tt.get("SmartTipSetActivationInitiator").stop(),Tt.entry("UIChangeTracker").wasReady()){var t=Tt.get("UIChangeTracker");t&&(t.stop(),t=null)}if(Tt.entry("PageChangeTracker").wasReady()){var n=Tt.get("PageChangeTracker");n&&(n.stop(),n=null)}Tt.get("TrackedPagesManager").releaseAll(),Tt.get("TrackedElementsManager").releaseAll(),Tt.entry("PageVisitGuidProvider").wasReady()&&Tt.get("PageVisitGuidProvider").releaseResources()}function r(t){var e=Et.Deferred();return a.raiseEvent(s.EVENTS.ReleaseAllElementsCalled),c.executeParallel({functionsToExecute:[function(e){h(e,t)},m,y,v],successCallback:function(){S().then(e.resolve)},failCallback:e.reject}),e.promise()}function h(e,t){Tt.get("Logger").customerLog("Releasing balloons",5,s.LOG_FEATURES.BALLOON);var n={isDestroyingAll:p};Et.extend(n,t),a.raiseEvent(s.EVENTS.CallReleaseElementsFromBalloons,n);var r=i.getAll();i.removeAll(),c.executeParallel({objectsArray:r,functionsToExecute:[function(e,t){e.destroy(!1,t)}],successCallback:e})}function m(e){Tt.get("ShoutOutsManager").releaseAll(e)}function v(e){Tt.get("CoursesManager").releaseAll(e)}function y(e){Tt.get("AttentionGrabberManagerAPI").remove(e)}function S(){return Tt.get("SmartTipSetActivationInitiator").stop(),Tt.get("BusinessSolutionsManager").releaseAll()}f.releaseAllElements=r,f.releaseBalloons=h,f.releaseShoutOuts=m,f.releaseFlow=S,f.removeWalkMe=function(e,t){if((t=t||{}).sendLog){var n=Tt.get("EventSenderErrorLogger");n.logError("WalkMe was removed",{subType:"RemoveWalkMe",removeWalkMeReason:e,errorCode:t.errorCode})}f.removingWalkMe=!0,Tt.get("Logger").customerLog(d.formatString("removeWalkMe called with reason {0}",e)),G.removeWalkMeReason=e;try{Tt.get("EventSenderDisabler").disable()}catch(i){}var r={reason:e,errorCode:t.errorCode};a.raiseEvent(s.EVENTS.BeforeWalkmeRemoved,r);try{window.walkme_remove_walkme_callback&&walkme_remove_walkme_callback(e)}catch(i){}g(function(){(o.clearGlobalTimeouts(),Tt.get("CrossDomainManager").get().stop(),Tt.get("ResourceManager").emptyStyleSheets(),Tt.get("IFramesManager").releaseEvents(),Tt.get("AutoStartRunningState").cleanResources(),Tt.get("SessionPersister").cleanResources(),Tt.get("WindowBeforeUnloadHandler").cleanResources(),Tt.get("PostMessageListener").cleanResources()).then(function(){var e=Tt.get("CdnServer").get().replace("http://","").replace("https://","");Et("script[src*='"+e+"']").remove(),Et("script[src*='maketutorial']").remove(),Et("script[src*='wmjQuery']").remove(),Et("script[id='mt_script']").remove(),Et("link[id^='mt-css']").remove();u.getTopContainer();Et(".walkme-to-remove").remove(),l.removeScrollAndResizeEvents(),c.unregisterEventHandler("load",Et.ready,!1,window),Et(window).unbind(),Et(G).unbind(),function(){if(!window._walkmeInternals)return;for(var e=Tt.get("WalkmeInternalsPersistWhitelist"),t={},n=0;n<e.length;n++)t[e[n]]=G[e[n]];window._walkmeInternals=t}(),a.raiseEvent(s.EVENTS.AfterWalkmeRemoved,r),function(){for(var e=["wmjQuery","mtjQuery","_walkmeConfig","_walkMe","_makeTutorial","WalkMeAPI","WalkMePlayerAPI","WalkMeDataClass","WalkmeWidget","_makeTutorialEv","wmContext","WalkmeSnippet","wmPreviewSnippet","wmSnippet","walkme_lib_in_dev","walkme_lib_notify_ServerName","walkme_lib_upload_date","walkme_lib_uploader","walkme_lib_version","ClassMakeTutorial","loadWidgetWrap","loadWidget","walkme_event","walkme_post_lib_loaded","walkme_pre_lib_loaded",,"_walkmeWebpackJP","mt_cdn_server_name","mt_get_user_settings_url"],t=0;t<e.length;t++)window[e[t]]=undefined}(),t.callback&&t.callback()})})},f.destroyAll=g,f.releaseTeachMeElements=v}).dependencies("BalloonsContainer, TimerManager, CommonEvents, Consts, PositionHelper, TopContainerProvider, CommonUtils, StringUtils"),Tt.register("endUserGuidValidator").asCtor(function(e,t,n,r,i,o,a){this.validate=function(){if(!r.isInPreviewMode()&&a.get())return undefined;for(var e=0;e<s.length;e++){var t=s[e]();if(t)return o.logError(t.message),t}};var s=[function(){if(!t.isServerStorageOn()||!n.isWalkMeGeneratedEndUserType())return undefined;return{message:"Unique User Settings are not supported by server storage",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.cannotHaveBothUniqueUserAndServerStorage}},function(){if(n.isEndUserGuidValid())return undefined;return{message:"Could not retrieve end user identifier",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.missingUserIdentifyer}}]}).dependencies("Consts, ServerStorageSettingsService, EndUsersManager, AuditSourceProvider, Lib,EventSenderErrorLogger, IsInEditor"),Tt.register("CommonEvents").asCtor(function(i,o,a,e,n){this.raiseEvent=function(e,t){r(e,t)},this.deprecatedRaiseEvent=r,this.sendInternalEvent=r,this.sendAutomationEvent=function(e,t){if(!window.wmjQuery)return;n.forward(e,t)};var s=window.wmjQuery&&Et(e);function r(e,t,n){try{if(!window.wmjQuery)return;s.triggerHandler(e,[t,n]),o.route(e,t,n),a.sync(e,t)}catch(r){i.error(r)}}}).dependencies("Logger,ApiEventRouter,EventsTriggerSyncer,WmInternals,AutomationEventForwarder").asSingleton(),Tt.register("MessageSender").asCtor(function(n){this.send=function(e,t){return n.raiseEvent(e,t),t.returnValue}}).dependencies("CommonEvents"),Tt.register("AdditionalTemplatesHandlers").asCtor(function(){this.assign=function(e,t){if(r(e))throw new Error("There is already handler assigned to the type - "+e);if("function"!=typeof t)throw new Error("'handler' must be a function");n[e]=t},this.get=o,this.run=function(e,t,n){var r=n,i=o(e);return i&&(r=i.apply(null,t)),r},this.hasHandler=r;var n={};function o(e){return n[e]}function r(e){return!!o(e)}}).asSingleton(),Tt.register("WMObjectNameObfMapping").asInstance({amount:"b",app:"a",browser:"c",browserName:"d",browserVersion:"e",count:"i",cVars:"f",duration:"g",env:"h",euId:"euId",euIdSource:"j",feId:"k",feVersion:"l",gitRevision:"m",instanceId:"n",interactionGuid:"o",ip:"p",key:"q",language:"r",libVersion:"s",local:"t",message:"u",misc:"v",mobile:"w",name:"x",os:"y",pageTitle:"z",permId:"aa",platform:"ab",publishDate:"ac",publishEnv:"ad",quantity:"ae",reason:"af",sesId:"ag",sessionId:"ah",sum:"ai",time:"timestamp",total:"ak",type:"al",uId:"uId",url:"an",urlWithoutQueryString:"ap",userVars:"ao",result:"aq",score:"ar",version:"ax",pluginName:"aw",pluginVersion:"ay",pluginCaptureVersion:"az",capturePlatformVersion:"au",platformVersion:"av",customContext:"aj"}),Tt.register("WMObjectNameObfMapper").asFunction(function(r,i){return function(e){"object"!=typeof e&&(e={message:e});var t={};for(var n in e)r[n]===undefined?i.logError("no such key you try to encode ",n):t[r[n]]=e[n];return t}}).dependencies("WMObjectNameObfMapping,EventSenderErrorLogger"),Tt.register("StaticWMDataProvider").asFunction(function(r,i,o,a,s){return function(){var e=r.getEnvironmentData(),t=i.getWalkMeData(),n=!0===window.walkme_lib_in_dev?{local:!0}:{};return Et.extend({libVersion:o.getLibVersion(),publishDate:o.getPublishDate(),publishEnv:a.getSettingsFile().Environment,pageTitle:s.getContextData().title},e,t,n)}}).dependencies("EventSenderEnvironmentDataProvider,EventCollectorWalkMeDataProvider,WalkMeInfo,SettingsFile,EventSenderContextDataProvider"),Tt.register("AutomationEventDataAppender").asCtor(function(){this.append=function(e,t,n){e.Type=n,t&&Et.extend(e,t)}}),Tt.register("EventDataAppender").asCtor(function(){this.append=function(e,t,n){e.Type=n,t&&(e.ExtraData=t)}}),Tt.register("ApiEventForwarder").asCtor(function(e){var o,a;this.forward=function(e,t,n){var r=o&&o[e]&&o[e].transform;if(r){var i=r(t,n);a.raise(i.name,i.data)}else a.raise(e,t)},o=e.apiEventsConfigProvider&&e.apiEventsConfigProvider.get(),a=e.apiEventRaiser}).asProto().dependencies(),Tt.register("NewApiEventForwarder").dependencies("NewApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:Tt.create("ApiEventRaiser",{windowFuncName:"walkme_event",dataAppenders:[t]})};return Tt.create("ApiEventForwarder",n)}),Tt.register("OldApiEventForwarder").dependencies("OldApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:Tt.create("ApiEventRaiser",{windowFuncName:"mt_event",dataAppenders:[t]})};return Tt.create("ApiEventForwarder",n)}),Tt.register("EditorApiEventForwarder").dependencies("EditorApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:Tt.create("ApiEventRaiser",{windowFuncName:"walkme_editor_event",dataAppenders:[t]})};return Tt.create("ApiEventForwarder",n)}),Tt.register("AutomationEventForwarder").dependencies("AutomationEventDataAppender").asFunction(function(e){var t={apiEventRaiser:Tt.create("ApiEventRaiser",{windowFuncName:"walkme_automation_event",dataAppenders:[e]})};return Tt.create("ApiEventForwarder",t)}),Tt.register("ApiEventRaiser").asCtor(function(s,l,e,u){var c,t=this;t.raise=function(e,t){try{if(l[u.windowFuncName]){var n=(r=e,i=t,o={},Et.each(c,function(e,t){t.append(o,i,r)}),o);l[u.windowFuncName](n)}}catch(a){s.error(a)}var r,i,o},t.addAppender=function(e){c.push(e)},c=u.dataAppenders,e.add(t)}).asProto().dependencies("Logger, win, ApiEventRaisersContainer"),Tt.register("ApiEventRaisersContainer").asCtor(function(){this.add=function(e){t.push(e)},this.get=function(){return t};var t=[]}),Tt.register("ApiEventRouter").asCtor(function(r,i,o,a,s){this.route=function(e,t,n){r.get()[e]&&(i.forward(e,t,n),s.forward(e,t,n));o.get()[e]&&a.forward(e,t,n)}}).dependencies("NewApiEventsConfigProvider, NewApiEventForwarder, OldApiEventsConfigProvider, OldApiEventForwarder, EditorApiEventForwarder");var c,d=function(){function e(){}return e.prototype.sync=function(e,t,n){return n},e}();function f(){var n;this.minifyData=function(e){if(e&&0!=e.length)return n.stringify(e)},this.deminifyData=function(e){if(e)return n.parse(e)},function(e,t){n=Tt.get("CJson")}.apply(null,arguments)}function p(){var t;this.minifyData=function(e){if(e&&0!=e.length)return t.toJSON(e)},this.deminifyData=function(e){if(e)return t.secureEvalJSON(e)},function(e){t=e}.apply(null,arguments)}function z(){var i,n,o,r,a,s,l,u,c,d,f,p,g,h,m,v,y,S,E,T,w,C,b=this,I=[];function _(){n.saveData(I)}b.isStorageEnabled=function(){return S},b.sendData=function(t){if(C&&0==b.actionUrl().indexOf("/Statistics/"))c("Prevent sending logs to Analytics",3);else if("object"==typeof t)S?h.refreshGetData(null,n):n();else{var e=T.formatString("TypedDataSender - got object with value {0} of type {1} instead of object ({2}).",t,typeof t,l);c(e,1)}function n(){if(f)c("Not accepting anymore data",3);else if(I=b.data(),i.isServerSick())if(!1===E&&I.length<10)r();else{var e=T.formatString("TypedDataSender - Server is sick, ignoring new data of type {0} for now",l);c(e,3)}else r(),i.sendData()}function r(){var e;S||(I.length=0),o&&o(I,t),t[g]=(e=0,S&&(e=h.getFromStorage(w,0),h.saveToStorage(w,e+1,m)),e),I.push(t),S&&_()}},b.persistData=function(){S&&(_(),I&&0!=I.length||h.removeFromStorage(w))},b.data=function(){return S&&(I=n.getData()),I=I||[]},b.actionUrl=function(){return r},b.sendingThreshold=function(){return s},b.dataType=function(){return l},b.truncateData=function(){S&&((I=b.data()).splice(1,I.length-1),b.persistData())},b.clearAndStopSavingData=function(){f=!0,I.length=0,S&&n.removeData()},b.technicalSuccessHandler=function(){return a},b.successCallback=function(){return v},b.failCallback=function(){return y},b.requestParamsFunc=function(){return d},b.getDataIdFieldName=function(){return g},b.shouldTruncateData=function(){return E},function(e){var t=e.stateManager;i=e.serverDataSenderManager,r=e.actionUrl,o=e.beforeSendingManipulationFunc,a=e.technicalSuccessHandler,s=e.sendingThreshold,l=e.dataType,u=e.dateSenderLogFeature,d=e.requestParamsFunc,p=e.logError,T=e.stringUtils,c=e.logger.wrapCustomerLog(u),g=e.dataIdFieldName||"iN",v=e.successCallback,y=e.failCallback,E=e.shouldTruncateData,w=t.keysConfig.typedDataSender.nextItemNumber.key,C=e.shouldBlockAnalytics,(S=!1!==e.storageEnabled)&&(m=e.defaultDataStorageLifeSeconds,h=new lt(t,e.twoLettersDataType),n=new P(h,m,p,e.recursiveMinification),I=b.data())}.apply(null,arguments)}Tt.register("EventsTriggerSyncer").asCtor(function(i){this.sync=function(e,t){var n=t?t.defaultValue:undefined,r=i.sync(e,t,n);t&&r!==undefined&&(t.returnValue=r);t&&t.asyncCallback&&(r&&r.then?r.then(t.asyncCallback,t.asyncFailback):Et.when(r).then(t.asyncCallback,t.asyncFailback))}}).dependencies("EventsTrigger"),Tt.has("EventsTrigger")||Tt.register("EventsTrigger").asInstance(new d),Tt.register("NewApiEventsConfigProvider").asCtor(function(n){function t(e,t){return{name:n.EVENTS.Launchers.LauncherIsShown,data:t}}function r(e,t){return{name:n.EVENTS.Walkthrus.StepShown,data:t}}this.get=function(){var e={};return e[n.EVENTS.Walkthrus.StepShown]={transform:r},e[n.EVENTS.Launchers.LauncherIsShown]={transform:t},e[n.EVENTS.TaskCompleted]={},e[n.EVENTS.TasksLoaded]={},e[n.EVENTS.Launchers.LauncherClicked]={},e[n.EVENTS.Goals.GoalReached]={},e.ABTestingGoalsFetched={},e[n.EVENTS.UIComponentDestroyed]={},e[n.EVENTS.DeployableCreated]={},e.SurveyPlayed={},e.SurveyCompleted={},e.BalloonCreated={},e.WalkthruAborted={},e.WalkthruStopped={},e.UserStoppedWalkthru={},e.UserStoppedWalkthruAfterStop={},e.WalkthruFailedToStart={},e.WalkthruCompleted={},e.BeforeNewStepShown={},e.BackButtonClicked={},e.NextButtonClicked={},e.DoneButtonClicked={},e.SfVarsExposed={},e.BBCodeLinkClicked={},e.FailureMessageOkButtonPressed={},e.StorageManagerInitialized={},e[n.EVENTS.StorageLoaded]={},e[n.EVENTS.WalkmeLoaded]={},e[n.EVENTS.Flows.UIFlowStageShown]={},e[n.EVENTS.Flows.FlowCompleted]={},e[n.EVENTS.Flows.FailedToStart]={},e[n.EVENTS.Flows.FlowStopped]={},e[n.EVENTS.Flows.FlowStarted]={},e[n.EVENTS.Flows.BeforeExecutingFlowStage]={},e[n.EVENTS.Flows.AfterCompletingFlowStage]={},e[n.EVENTS.Flows.FlowStageSkipped]={},e[n.EVENTS.SmartTips.TooltipShown]={},e[n.EVENTS.SmartTips.SmartTipIconShown]={},e[n.EVENTS.BeforeWalkmeRemoved]={},e[n.EVENTS.AfterWalkmeRemoved]={},e}}).dependencies("Consts"),Tt.register("EditorApiEventsConfigProvider").asCtor(function(t){this.get=function(){var e=t.get();return e.WalkthruCompleted={transform:function(e,t){return{name:"WalkthruCompleted",data:{WalkThru:e,AdditionalData:t}}}},e}}).dependencies("NewApiEventsConfigProvider"),Tt.register("OldApiEventsConfigProvider").asCtor(function(n){function t(n){return function(e,t){return{name:n,data:e}}}function r(e,t){return{name:n.EVENTS.Walkthrus.StepShown,data:t}}this.get=function(){var e={};return e[n.EVENTS.Walkthrus.StepShown]={transform:r},e.WalkthruStopped={transform:t("TutorialStopped")},e.UserStoppedWalkthru={transform:t("UserStoppedTutorial")},e.UserStoppedWalkthruAfterStop={transform:t("UserStoppedTutorialAfterStop")},e.WalkthruCompleted={transform:t("TutorialCompleted")},e.BeforeNewStepShown={},e.BackButtonClicked={},e.NextButtonClicked={},e.DoneButtonClicked={},e}}).dependencies("Consts"),Tt.register("PostMessage").asInstance(window.postMessage),Tt.register("NativeTimerFunctionsProvider").asCtor(function(){this.get=function(){return{clearTimeout:window.NREUM&&NREUM.o&&NREUM.o.CT||window.clearTimeout,clearInterval:window.clearInterval,setTimeout:window.NREUM&&NREUM.o&&NREUM.o.ST||window.setTimeout,setInterval:window.setInterval}}}).asSingleton(),Tt.register("TimerManager").asCtor(function(e,t,n,r){var i=this;i.setWalkmeTimeout=function(e,t){return new y(e,t)},i.setWalkmeInterval=function(e,t){return d((n=e,G.walkmeWrap?function(){G.walkmeWrap.apply(this,[n])}:n),t);var n},i.playSetTimeout=function(e,t){return new y(e,t,a.playTimeouts)},i.playSetInterval=function(e,t){return new S(e,t,a.playTimeouts)},i.libSetTimeout=function(e,t){return new y(e,t,a.libTimeouts)},i.releaseAllTimeouts=function(){i.releaseTimeoutsArray("libTimeouts"),i.pauseTimeoutsArray("playTimeouts")},i.clearGlobalTimeouts=function(){for(var e in u)e&&e.indexOf&&0===e.indexOf(l)&&m(u[e])},i.releaseTimeoutsArray=h,i.stopTimeoutsArray=h,i.pauseAllTimeouts=function(){for(var e in a)i.pauseTimeoutsArray(e)},i.pauseTimeoutsArray=function(e){var t=a[e];t&&E(t,function(e){s.push(e),e.pause()})},i.resumeTimeoutsArray=function(e){if(a[e]){for(var t=0;t<s.length;t++)s[t].resume();s.length=0}},i.resumeAllTimeouts=function(){for(var e in a)i.resumeTimeoutsArray(e)},i.overrideTimeouts=function(){Tt.get("FeaturesManager").isFeatureEnabled("overridetimeouts")&&(window.clearTimeout=function(e){g(e,m)},window.clearInterval=function(e){g(e,v)})};var o=n.get(),a={libTimeouts:{},playTimeouts:{}},s=[],l="wm-",u={};e.raiseEvent(t.EVENTS.TimerManagerCreationStarted,{object:i});var c=o.setTimeout,d=o.setInterval,f=o.clearTimeout,p=o.clearInterval;function g(e,t){var n=u[l+e]!==undefined;n||t(e)}function h(e){var t=a[e];t&&E(t,function(e){e.clear()})}function m(e){f(e)}function v(e){p(e)}function y(e,t,n){this.fn=e,this.interval=t,this.timeoutsDict=n||{};var r=this;this.id=c(function(){r.run()},t),this.timeoutsDict[this.id]=this,u[l+this.id]=this.id}function S(e,t,n,r,i){this.timeoutsDict=n,r=r||window;var o=function(){e.apply(r,i||arguments)};this.id=d(function(){G.walkmeWrap?G.walkmeWrap(o):o()},t),n[this.id]=this,u[l+this.id]=this.id}function E(e,t){for(var n in e)if(e.hasOwnProperty(n))try{t(e[n])}catch(r){}}y.prototype.timeoutWrap=function(){this.clear();try{this.fn.apply(window)}catch(e){!function(e,t){var n=t&&/function ([\w\d\_]+)\(/.exec(t.toString());Tt.has("EventSenderErrorLogger")&&Tt.get("EventSenderErrorLogger").logError(e.message,{functionName:n&&n[1]});r.customerLog("TimerManager error: "+(e&&e.message))}(e,this.fn)}},y.prototype.run=function(){if(G.walkmeWrap){var e=this;G.walkmeWrap(function(){e.timeoutWrap()})}else this.timeoutWrap()},y.prototype.resume=function(){if(!this.cleared){var e=this;this.id=c(function(){e.run()},10),this.timeoutsDict[this.id]=this}},y.prototype.id=null,y.prototype.cleared=!1,y.prototype.clear=function(){this.cleared||(m.call(window,this.id),this.cleared=!0,delete this.timeoutsDict[this.id],delete u[l+this.id])},y.prototype.pause=function(){this.cleared||(delete this.timeoutsDict[this.id],m.call(window,this.id))},S.prototype.id=null,S.prototype.cleared=!1,S.prototype.clear=function(){m(this.id),this.cleared=!0,delete u[l+this.id],delete this.timeoutsDict[this.id]}}).asSingleton().dependencies("CommonEvents,Consts,NativeTimerFunctionsProvider,Logger"),Tt.register("MutationObserverWrapper").asCtor(function(){this.isEnabled=function(){return!1},this.watchElement=function(e,t){var n=new MutationObserver(t);return n.observe(e[0],r),{unbind:function(){n.disconnect()}}};var r={childList:!0,attributes:!0,subtree:!0}}),c={0:f,2:p},Tt.has("DataMinifier")||Tt.register("DataMinifier").asFunction(function(e,t,n){var r,i;return r=t.getStorageType(),i=r&&r.mt,new c[i||0](e,n)}).dependencies("JsonUtils,SettingsFile,Logger"),Tt.register("TypedDataSender").asCtor(z).asProto(),Tt.register("ServerDataSenderManagerParams").asInstance({defaultDataStorageLifeSeconds:900,dateSenderLogFeature:"serverDataSender"}),Tt.register("ServerDataSenderManager").asCtor(function(e,r,p,t,i,g,h,o,m,v,n,y){var S,a,E,s,l,T,u,c,w,d,f,C=i.keysConfig.serverDataSender.serverSick.key,b=i.keysConfig.serverDataSender.serverSickAttempts.key,I=i.keysConfig.serverDataSender.serverSickTimestamp.key,_=2,P=3e3,A=6e4,k={1:6e4,2:24e4},D={Success:0,LogicalError:1,TechnicalError:2},N=this,O={};function x(){var e=L();return e||(T("serverDataSenderManager - no data to send. marking it healthy",3),void V())}function L(){for(var e=F(),t=e.length-1;0<=t;t--){var n=e[t],r=n.data();if(0<r.length)return{dataSender:n,data:r}}}function F(){return n.getDictionaryValues(O)}function M(){return!!S&&(T("There's already a pending request to server",3),!0)}function R(){var e=x();if(e&&!M()){var t=e.dataSender,n=e.data;T(y.formatString("Got {0} {1}s to send, starting now",n.length,t.dataType()),3),W(n,t)}}function B(){if(a)T("Already waiting for server's health",5);else{null!=E&&(E.clear(),E=null),a=!0;var e=i.getData(b);if(e=e?++e:1,u<e){var t=y.formatString("Server wasn't healthy for more than {0} attempts, restarting sick mode",e);T(t,0),i.removeData(I),i.removeData(b),a=!1,B()}else{var n=function(e){var t=i.getData(I);if(!t){var n=f[e];t=(new Date).getTime()+n,i.saveData(I,t,s)}return t-(new Date).getTime()}(e),r=y.formatString("Sick attempts: {0}, time before next retry: {1} second(s)",e,n/1e3);T(r,3),d=o.libSetTimeout(function(){i.refreshGetData(null,function(){i.removeData(I),i.saveData(b,e,s),a=!1,R()})},n)}}}function U(){i.getData(C);V(),S=!1,R()}function V(){i.removeData(C),i.removeData(b),i.removeData(I),a=!1}function W(e,t){if(0!=p.get().length)if(0!=e.length){null!=E&&(E.clear(),E=null),S=!0;var n=t.sendingThreshold(),r=v.clone(e);r.length>n&&(r=r.splice(0,n));var i=t.requestParamsFunc()(r);h.isFeatureEnabled(m.FEATURES.DontMaskEndUserAddress)&&(i.dmeua=1);var o,a,s,l,u,c,d=g.execute({url:p.get()+t.actionUrl(),dataType:"jsonp",data:i,timeout:w});h.isFeatureEnabled("bypassAuditServer")?(l=r,c=t,(u=d).error(function(e,t,n){if(200==e.status&&"parsererror"==t)j(l,c);else{var r=y.formatString("Server technical (AJAX) error (2) jqXHR:{0}, textStatus:{1}, errorThrown:{2}",v.toJSON(e),t,n);T(r,3),Y(n,c)}}),u.success(function(e){var t="Got success while in bypass player server mode";T(t,3),_makeTutorial.Logger.error(null,t)})):(o=r,s=t,(a=d).success(function(e){T("Sending data ajax success",3),window._walkMe&&function(t,n,r){if(r.technicalSuccessHandler&&r.technicalSuccessHandler())r.technicalSuccessHandler()(t,function(){var e=t.Data||t;H(n,r,e)},function(){Y(t.Data||t,r)},function(){var e=t.Data||t;j(n,r,e)},n);else switch(t.WMResultCode){case D.Success:j(n,r,t.Data);break;case D.LogicalError:T(r.dataType()+" : Logical error sending data. "+t.Data,3),H(n,r,t.Data);break;case D.TechnicalError:T(r.dataType()+" : Technical error sending data",3),Y(t.Data||t,r);break;default:T(r.dataType()+" : No error code received - treated as technical error",3),Y(t.Data||t,r)}}(e,o,s)}),a.error(function(e,t,n){200==e.status&&"parsererror"==t?H(o,s,n):Y(n,s)}));var f=y.formatString("Sent {0} data of type {1} to server at {2}",r.length,t.dataType(),(new Date).toString());T(f,3)}else T("dataArray's length is 0, no data to send",3);else T(y.formatString("RecorderServerName is {0}, can't send data of type {1}",p.get(),t.dataType()),2)}function j(e,t,n){if(T("The technical success was also logical success",3),G(e,t),U(),t.successCallback){var r=t.successCallback();r&&r(n)}}function G(e,t){for(var n=t.getDataIdFieldName(),r=function(e,t){for(var n=0,r=e.length-1;0<=r;r--){var i=e[r],o=i[t];o&&n<o&&(n=o)}return n}(e,n),i=t.data(),o=i.length-1;0<=o;o--){var a=i[o];a[n]<=r&&i.splice(o,1)}t.persistData()}function H(e,t,n){if(T(y.formatString("Logical error happened, discarding {0} {1}",e.length,t.dataType()),3),G(e,t),U(),S=!1,R(),t&&t.failCallback){var r=t.failCallback();r&&r(n)}}function Y(e,t){if(i.saveData(C,1,s),T("Truncating data due to sick server",3),function(){for(var e=F(),t=e.length-1;0<=t;t--){var n=e[t];n.shouldTruncateData()&&n.truncateData()}}(),S=!1,t&&t.failCallback){var n=t.failCallback();n&&n(e)}B()}N.register=function(e,t){if(O[e])return O[e];var n=new z({beforeSendingManipulationFunc:t.beforeSendingManipulationFunc,actionUrl:t.actionUrl,technicalSuccessHandler:t.technicalSuccessHandler,successCallback:t.successCallback,failCallback:t.failCallback,dataType:t.dataType,twoLettersDataType:e,serverDataSenderManager:N,sendingThreshold:t.sendingThreshold,stateManager:i,stringUtils:y,storageEnabled:!1!==t.storageEnabled,dateSenderLogFeature:l,requestParamsFunc:t.requestParamsFunc,dataIdFieldName:t.dataIdFieldName,defaultDataStorageLifeSeconds:t.dataStorageLifetimeSeconds!=undefined?t.dataStorageLifetimeSeconds:s,logError:r.error,logger:r,recursiveMinification:t.recursiveMinification,shouldTruncateData:!1!==t.shouldTruncateData,shouldBlockAnalytics:h.isFeatureEnabled("noAnalyticsAudit")});return O[e]=n},N.start=function(e){N.sendData()},N.stop=function(e){i.removeData(C),i.removeData(b),i.removeData(I),N.removeAllData(),null!=E&&(E.clear(),E=null),null!=d&&(d.clear(),E=null)},N.sendData=function(){var e=x();if(e&&!M()){var t=e.dataSender,n=e.data;if(N.isServerSick())return T("Waiting for server's health in sendData",3),void B();if(n.length>=t.sendingThreshold())T(y.formatString("sendData - Got {0} {1}s to send, starting now",n.length,t.dataType()),3),null!=E&&(E.clear(),E=null),W(n,t);else if(null==E||E.cleared){var r=y.formatString("Got {0} {1}s to send, waiting {2}",n.length,t.dataType(),c);T(r,3),E=o.libSetTimeout(function(){E=null,i.refreshGetData(null,function(){var e=x();if(e&&!M()){var t=e.dataSender,n=e.data;W(n,t)}})},c)}else T("sendData - timeout already exists",5)}},N.isServerSick=function(){var e;return(e=L())&&e.data||V(),i.getData(C)||!1},N.removeAllData=function(){for(var e=F(),t=e.length-1;0<=t;t--)e[t].clearAndStopSavingData()},function(){s=t.defaultDataStorageLifeSeconds,l=t.dateSenderLogFeature,u=t.maxSickAttemps||_,w=t.sendDataAjaxTimeout||A,c=t.checkDataToSendInterval||P,f=t.attemptsWaitTime||k,T=r.wrapCustomerLog(l)}.apply(null,arguments)}).dependencies("Lib,Logger,RecorderServerManager,ServerDataSenderManagerParams,ClientStorageManager,WmAjax,FeaturesManager,TimerManager,Consts,JsonUtils,DictionaryUtils,StringUtils"),Tt.register("AjaxManager").asCtor(function(e,t,n,r,i){var o=r.AJAX_PROVIDERS.wmjQueryAjaxProvider;this.init=function(){o=r.AJAX_PROVIDERS.wmjQueryAjaxProvider,i._walkmeInternals&&i._walkmeInternals.bind&&i._walkmeInternals.bind("dataFilesLoaded",function(){e.isFeatureEnabled("ajaxProxy")&&(n.init(),o=r.AJAX_PROVIDERS.ajaxProxyProvider)})},this.getProvider=function(){var e;switch(o){case r.AJAX_PROVIDERS.ajaxProxyProvider:e=n;break;default:e=t}return e},function(){}.apply(null,arguments)}).dependencies("FeaturesManager, WmjQueryAjaxProvider, AjaxProxyProvider, Consts, win"),Tt.register("AjaxProxyProvider").asCtor(function(i){this.init=function(){i.init()},this.callAjax=function(e){var t=Et.Deferred(),n=(r=t,{success:function(t){r.promise().then(function(e){e.success&&t(e.data)})},error:function(t){r.promise().then(function(e){e.success||t(e.data.jqXHR,e.data.textStatus,e.data.errorThrown)})},abort:function(){r.promise().then(function(e){i.abort(e.requestIndex)})}});var r;return i.postMessage(e,t.resolve),e.success&&n.success(e.success),e.error&&n.error(e.error),n}}).dependencies("AjaxProxyIframeManager"),Tt.register("WmjQueryAjaxProvider").asCtor(function(){this.callAjax=function(e){return Et.ajax(e)}}),Tt.register("WmAjax").asCtor(function(e,t,n,r){var i,o,a=e;this.setFeatures=function(e,t){i=e,o=t},this.execute=function(e){return e.dataType=e.dataType?e.dataType:"jsonp","jsonp"===e.dataType&&(i||o&&r.hasCorsSupport())&&(e.dataType="json"),a.sendAutomationEvent("ajaxSent",e),n.getProvider().callAjax(e)},this.loadTextFile=function(e,t,n,r,i){r=r||function(e,t,n){},mtjQuery.ajax(e,{cache:!!i,dataType:"jsonp",jsonpCallback:t,success:n,error:r})},function(){}.apply(null,arguments)}).dependencies("CommonEvents, FeaturesManager, AjaxManager, CorsSupportIndicator"),Tt.register("InitiatorManager").asCtor(function(){var n;this.get=function(){return n[n.length-1]},this.setForScope=function(e,t){n.push(e),t(),n.pop()},n=[]}),Tt.register("UserTimeMonitor").asCtor(function(n,r){this.wasActionPerformed=function(e){return n.getData(e)==r.getEndUserGuid()},this.logActionPerformed=function(e,t){n.saveData(e,r.getEndUserGuid(),t)}}).dependencies("ClientStorageManager, EndUsersManager");var g,m,v,y,S,E,T,w,C,_,A,k,D,N,O,x,L,F,M,R,B,U,V,W,j,H,Y,Q,q,K,J,ee,ne,re,ie,oe,ae,se,le,ue,ce,de,fe,pe,ge,he,me,ve,ye,Se,Ee,Te,we,Ce,be,Ie=this&&this.__extends||(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function _e(o,a,e,s,l){function n(e,t,n){if(u())try{var r=l.toJSON(function(e,t,n){n&&"object"!=typeof n&&(n=null);return Et.extend({time:(new Date).getTime(),app:"player",level:e,message:t},s(),n||{})}(e,t,n));o.send(r)}catch(i){throw a&&a.logError(l.toJSON(i.message)),i}}function u(){return e.isFeatureEnabled()}this.log=n,this.log.debug=function(e,t){return n("debug",e,t)},this.log.info=function(e,t){return n("info",e,t)},this.log.warn=function(e,t){return n("warn",e,t)},this.log.error=function(e,t){return n("error",e,t)},this.isLoggingEnabled=u,function(){}.apply(this,arguments)}m=xe||(xe={}),v=m.Storage||(m.Storage={}),y=function(){function e(e){this.buffer=[],this.reduceFn=e.reduceArray}return e.prototype.getStorageType=function(){return"ArrayBuffer"},e.prototype.push=function(e){this.buffer.push(e)},e.prototype.pull=function(){return this.buffer.shift()},e.prototype.peek=function(){return this.buffer[0]},e.prototype.count=function(){return this.buffer.length},e.prototype.clear=function(){this.buffer=[]},e.prototype.dataSize=function(){return this.reduceFn(this.buffer,function(e,t){return e+t.length},0)},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){return this.buffer},e.prototype.set=function(e){this.pushAll(e)},e.prototype.pushAll=function(e){if(Et.isArray(e))for(var t=0,n=e.length;t<n;t++)this.push(e[t])},e.prototype.pullAll=function(){var e=this.buffer;return this.clear(),e},e}(),v.ArrayBuffer=y,S=xe||(xe={}),E=S.Storage||(S.Storage={}),T=function(){function e(e){this.buffer={},this.runningId=0,this.getDictionaryKeys=e.getDictionaryKeys}return e.prototype.getStorageType=function(){return"DictionaryBuffer"},e.prototype.generateId=function(){return""+ ++this.runningId},e.prototype.push=function(e){var t=this.generateId();return this.buffer[t]=e,t},e.prototype.pull=function(e){var t=this.buffer[e];return delete this.buffer[e],t},e.prototype.peek=function(e){return this.buffer[e]},e.prototype.count=function(){return this.getAllIds().length},e.prototype.clear=function(){this.buffer={}},e.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=this.buffer[t].length);return e},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&e.push(this.peek(t));return e},e.prototype.set=function(e){return this.pushAll(e)},e.prototype.pushAll=function(e){var t=[];if(Et.isArray(e))for(var n=0,r=e.length;n<r;n++)t.push(this.push(e[n]));return t},e.prototype.pullAll=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++)t.push(this.pull(e[n]));else for(var i in this.buffer)this.buffer.hasOwnProperty(i)&&t.push(this.pull(i));return t},e.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},e}(),E.DictionaryBuffer=T,w=xe||(xe={}),C=w.Storage||(w.Storage={}),_=function(){function e(e,t,n,r){this.buffer={},this.inputMapper=n,this.outputMapper=r,this.getDictionaryKeys=e.getDictionaryKeys,this.mapFn=t.map,this.reduceFn=t.reduceArray}return e.prototype.getStorageType=function(){return"ReduceBuffer"},e.prototype.count=function(){return this.getAllIds().length},e.prototype.clear=function(){this.buffer={}},e.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=t.length+(""+this.buffer[t]).length);return e},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){return this.buffer},e.prototype.set=function(e){this.buffer=e},e.prototype.pushAll=function(e){var t=this,n=this.mapFn(e,function(e){return t.inputMapper.convert(e)}),r=this.reduceFn(n,function(e,t){return e[t]=(e[t]||0)+1,e},this.buffer);this.set(r)},e.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},e.prototype.pullAll=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e.push(this.format(t)),delete this.buffer[t]);return e},e.prototype.format=function(e){return this.outputMapper.convert({type:e,count:this.buffer[e]})},e}(),C.ReduceBuffer=_,A=xe||(xe={}),k=A.Manipulation||(A.Manipulation={}),D=function(){function e(e){this.jsonUtils=e}return e.prototype.convert=function(e){var t=this.jsonUtils.secureEvalJSON(e);return t.data.type+":"+t.type},e}(),k.EventTypeMapper=D,N=xe||(xe={}),O=N.Manipulation||(N.Manipulation={}),x=function(){function e(){}return e.prototype.convert=function(e){return{message:"Event failed to send [type "+e.type+", count "+e.count+"]",extraData:{evType:e.type,count:e.count}}},e}(),O.EventLogMapper=x,Tt.register("DataChannelConfigLog").asInstance({postEventAction:"/event/log",healthCheckAction:"/general/status",requestTimeoutMs:2e3,retryParameterName:"r"}),Tt.register("EventTypeMapper").asCtor(xe.Manipulation.EventTypeMapper).dependencies("JsonUtils"),Tt.register("EventLogMapper").asCtor(xe.Manipulation.EventLogMapper),Tt.register("ArrayBuffer").asCtor(xe.Storage.ArrayBuffer).asProto().dependencies("ArrayUtils"),Tt.register("DictionaryBuffer").asCtor(xe.Storage.DictionaryBuffer).asProto().dependencies("DictionaryUtils"),Tt.register("ReduceBuffer").asCtor(xe.Storage.ReduceBuffer).asProto().dependencies("DictionaryUtils,ArrayUtils,EventTypeMapper,EventLogMapper"),L=xe||(xe={}),M=function(){function e(e,t){this.callback=t,this.timeoutMs=e}return e.prototype.start=function(e){var t=this;if(!this.enabled){this.enabled=!0;var n=e||this.timeoutMs;this.timerHandle=Tt.get("TimerManager").setWalkmeTimeout(function(){t.onTick()},n)}},e.prototype.onTick=function(){this.enabled=!1,this.callback()},e.prototype.stop=function(){this.timerHandle&&(this.timerHandle.clear(),this.timerHandle=null),this.enabled=!1},e.prototype.restart=function(){this.stop(),this.start()},e.prototype.isEnabled=function(){return this.enabled},e}(),L.SimpleTimer=M,(F=L.BrowserConnectionLimit||(L.BrowserConnectionLimit={}))[F.Chrome=6]="Chrome",Tt.register("EventsCollectorAuditingEnabledIndicator").asCtor(function(e,t){this.isEnabled=function(){return e.isFeatureEnabled()&&t.shouldAudit()}}).dependencies("EventsCollectorFeatureEnabledIndicator, AuditingEnabledIndicator"),R=xe||(xe={}),B=R.Storage||(R.Storage={}),U=function(){function e(e,t,n,r,i){this.autoSave=e.autoSave||!1,this.keyName=e.keyName||"wm-ds-b",this.expiresSeconds=e.expiresSeconds||600,this.storageTypesEnum=n.STORAGE_TYPE,this.clientStorageManager=t,this.buffer=r,this.jsonUtils=i}return e.prototype.save=function(){var e=this.jsonUtils.toJSON(this.getRawData());this.clientStorageManager.saveData(this.keyName,e,this.expiresSeconds)},e.prototype.load=function(){this.buffer.clear();var e=this.clientStorageManager.getData(this.keyName);if(e)try{this.set(this.jsonUtils.secureEvalJSON(e))}catch(t){this.buffer.clear()}},e.prototype.count=function(){return this.buffer.count()},e.prototype.clear=function(){this.buffer.clear(),this.updateStorageIfNeeded()},e.prototype.dataSize=function(){return this.buffer.dataSize()},e.prototype.maxSize=function(){var e;switch(this.clientStorageManager.getStorageType().type){case this.storageTypesEnum.JStorage:case this.storageTypesEnum.CrossDomainLocalStorage:case this.storageTypesEnum.CrossDomain:e=2621440;break;case this.storageTypesEnum.Extension:case this.storageTypesEnum.ProxyIframe:e=524288;break;case this.storageTypesEnum.CrossDomainCookies:case this.storageTypesEnum.Cookie:default:e=2048}return.5*e},e.prototype.withinSizeLimit=function(e){return e<=this.maxSize()},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.updateStorageIfNeeded=function(){this.autoSave&&this.save()},e.prototype.getRawData=function(){return this.buffer.getRawData()},e}(),B.BaseClientStorageBuffer=U,V=xe||(xe={}),W=V.Storage||(V.Storage={}),j=function(o){function e(e,t,n,r,i){return o.call(this,e,t,n,r,i)||this}return Ie(e,o),e.prototype.getStorageType=function(){return"ClientStorageArrayBuffer::"+this.getBuffer().getStorageType()},e.prototype.getBuffer=function(){return this.buffer},e.prototype.push=function(e){this.getBuffer().push(e),this.updateStorageIfNeeded()},e.prototype.pull=function(){var e=this.getBuffer().pull();return this.updateStorageIfNeeded(),e},e.prototype.peek=function(){return this.getBuffer().peek()},e.prototype.set=function(e){this.getBuffer().set(e)},e.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},e.prototype.pullAll=function(){return this.getBuffer().pullAll()},e}(W.BaseClientStorageBuffer),W.ClientStorageArrayBuffer=j,H=xe||(xe={}),Y=H.Storage||(H.Storage={}),Q=function(o){function e(e,t,n,r,i){return o.call(this,e,t,n,r,i)||this}return Ie(e,o),e.prototype.getStorageType=function(){return"ClientStorageDictionaryBuffer::"+this.buffer.getStorageType()},e.prototype.getBuffer=function(){return this.buffer},e.prototype.push=function(e){var t=this.getBuffer().push(e);return this.updateStorageIfNeeded(),t},e.prototype.pull=function(e){var t=this.getBuffer().pull(e);return this.updateStorageIfNeeded(),t},e.prototype.peek=function(e){return this.getBuffer().peek(e)},e.prototype.set=function(e){return this.getBuffer().set(e)},e.prototype.pushAll=function(e){return this.getBuffer().pushAll(e)},e.prototype.pullAll=function(e){return this.getBuffer().pullAll(e)},e}(Y.BaseClientStorageBuffer),Y.ClientStorageDictionaryBuffer=Q,q=xe||(xe={}),K=q.Storage||(q.Storage={}),J=function(o){function e(e,t,n,r,i){return o.call(this,e,t,n,r,i)||this}return Ie(e,o),e.prototype.getStorageType=function(){return"ClientStorageReduceBuffer::"+this.getBuffer().getStorageType()},e.prototype.getBuffer=function(){return this.buffer},e.prototype.set=function(e){this.getBuffer().set(e)},e.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},e.prototype.pullAll=function(){return this.getBuffer().pullAll()},e}(K.BaseClientStorageBuffer),K.ClientStorageReduceBuffer=J,ee=xe||(xe={}),ne=ee.Storage||(ee.Storage={}),re=function(){function e(e,t){this.autoSave=e.autoSave||!1,this.keyName=e.keyName||"wm-ds-b",this.buffer=t}return e.prototype.count=function(){return this.buffer.count()},e.prototype.clear=function(){this.buffer.clear(),this.updateStorageIfNeeded()},e.prototype.dataSize=function(){return this.buffer.dataSize()},e.prototype.withinSizeLimit=function(e){return e<=this.maxSize()},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.updateStorageIfNeeded=function(){this.autoSave&&this.save()},e.prototype.getRawData=function(){return this.buffer.getRawData()},e}(),ne.BaseStorageBuffer=re,ie=xe||(xe={}),oe=ie.Storage||(ie.Storage={}),ae=function(i){function e(e,t,n){var r=i.call(this,e,t)||this;return r.utils=n,r}return Ie(e,i),e.prototype.save=function(){var e=this.utils.toJSON(this.getRawData());sessionStorage[this.keyName]=e},e.prototype.load=function(){this.buffer.clear();var e=sessionStorage[this.keyName];if(e)try{this.set(this.utils.secureEvalJSON(e))}catch(t){this.buffer.clear()}},e.prototype.maxSize=function(){return 2621440},e}(oe.BaseStorageBuffer),oe.BaseSessionStorageBuffer=ae,se=xe||(xe={}),le=se.Storage||(se.Storage={}),ue=function(o){function e(e,t,n,r,i){return o.call(this,e,r,i)||this}return Ie(e,o),e.prototype.getStorageType=function(){return"SessionStorageArrayBuffer::"+this.getBuffer().getStorageType()},e.prototype.getBuffer=function(){return this.buffer},e.prototype.push=function(e){this.getBuffer().push(e),this.updateStorageIfNeeded()},e.prototype.pull=function(){var e=this.getBuffer().pull();return this.updateStorageIfNeeded(),e},e.prototype.peek=function(){return this.getBuffer().peek()},e.prototype.set=function(e){this.getBuffer().set(e)},e.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},e.prototype.pullAll=function(){return this.getBuffer().pullAll()},e}(le.BaseSessionStorageBuffer),le.SessionStorageArrayBuffer=ue,ce=xe||(xe={}),de=ce.Storage||(ce.Storage={}),fe=function(o){function e(e,t,n,r,i){return o.call(this,e,r,i)||this}return Ie(e,o),e.prototype.getStorageType=function(){return"SessionStorageDictionaryBuffer::"+this.buffer.getStorageType()},e.prototype.getBuffer=function(){return this.buffer},e.prototype.push=function(e){var t=this.getBuffer().push(e);return this.updateStorageIfNeeded(),t},e.prototype.pull=function(e){var t=this.getBuffer().pull(e);return this.updateStorageIfNeeded(),t},e.prototype.peek=function(e){return this.getBuffer().peek(e)},e.prototype.set=function(e){return this.getBuffer().set(e)},e.prototype.pushAll=function(e){return this.getBuffer().pushAll(e)},e.prototype.pullAll=function(e){return this.getBuffer().pullAll(e)},e}(de.BaseSessionStorageBuffer),de.SessionStorageDictionaryBuffer=fe,pe=xe||(xe={}),ge=pe.Storage||(pe.Storage={}),he=function(o){function e(e,t,n,r,i){return o.call(this,e,r,i)||this}return Ie(e,o),e.prototype.getStorageType=function(){return"SessionStorageReduceBuffer::"+this.getBuffer().getStorageType()},e.prototype.getBuffer=function(){return this.buffer},e.prototype.set=function(e){this.getBuffer().set(e)},e.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},e.prototype.pullAll=function(){return this.getBuffer().pullAll()},e}(ge.BaseSessionStorageBuffer),ge.SessionStorageReduceBuffer=he,me=xe||(xe={}),ve=function(){function n(e){this.defaultConfig={healthCheckAction:"/general/status",requestTimeoutMs:2e3,retryParameterName:"r",sendingIntervalMs:250,maxRetries:3,isLogFailed:!1,maxStaticDataLength:0,maxDynamicDataLength:50,channelType:"AjaxChannel",baseUrl:e.get()}}return n.generateCtxName=function(e){return"DataSender"+e},n.prototype.generateEventsSender=function(e){if(!e.ctxName&&!e.name)throw new Error("property 'ctxName' or 'name' must be defined in sender config");var t=Et.extend({},this.defaultConfig,e);switch(t.ctxName||(t.ctxName=n.generateCtxName(t.name)),t.dataSender){case"accumulation":n.generateAccumulationSender(t);break;case"immediate":n.generateImmediateSender(t);break;default:throw new Error("Wrong data sender provided. Please use either accumulation or immediate")}return t},n.prototype.generateAndGetEventsSender=function(e){var t=this.generateEventsSender(e);return Tt.get(t.ctxName)},n.generateImmediateSender=function(u){var c=this;Tt.register(u.ctxName).asCtor(function(e,t,n,r,i,o){var a=new me.Channels[u.channelType]({postEventAction:u.postEventAction,healthCheckAction:u.healthCheckAction,requestTimeoutMs:u.requestTimeoutMs,retryParameterName:u.retryParameterName,baseUrl:u.baseUrl,retryIntervalMs:u.retryIntervalMs}),s=new c.STORAGE_CLASSES[u.storageType].storageTypeClass(u.storageConfig,Tt.get(u.clientStorageManager),e,t,n),l={sendingIntervalMs:u.sendingIntervalMs,retryIntervalMs:u.retryIntervalMs,maxRetries:u.maxRetries,isLogFailed:u.isLogFailed};return new me.Managers.ImmediateSender(a,s,l,n,o,r,i)}).dependencies("Consts, ArrayBuffer, JsonUtils, Logger, EventSenderErrorLogger, CleanObject")},n.generateAccumulationSender=function(h){var m=this;Tt.register(h.ctxName).asCtor(function(e,t,n,r,i,o,a,s,l,u){var c=new me.Channels[h.channelType]({postEventAction:h.postEventAction,healthCheckAction:h.healthCheckAction,requestTimeoutMs:h.requestTimeoutMs,retryParameterName:h.retryParameterName,baseUrl:h.baseUrl,retryIntervalMs:h.retryIntervalMs}),d=new m.STORAGE_CLASSES[h.storageType].storageTypeClass(h.storageConfig,Tt.get(h.clientStorageManager),e,t,n),f=new m.STORAGE_CLASSES[h.storageType].stagingStorageTypeClass(h.stagingStorageConfig,Tt.get(h.clientStagingStorageManager),e,r,n),p={sendingIntervalMs:h.sendingIntervalMs,maxRetries:h.maxRetries,isLogFailed:h.isLogFailed,maxStaticDataLength:h.maxStaticDataLength,maxDynamicDataLength:h.maxDynamicDataLength},g=new m.STORAGE_CLASSES[h.storageType].dataSenderStorageLogFailureClass(h.failureStorageConfig,i,e,o,n);return new me.Managers.AccumulationSender(c,d,f,t,r,p,g,a,n,u,s,l)}).dependencies("Consts, ArrayBuffer, JsonUtils, DictionaryBuffer, ClientStorageManager, ReduceBuffer, EventCollectorLoggerPixel, Logger, EventSenderErrorLogger, CleanObject")},n.STORAGE_CLASSES={client:{storageTypeClass:me.Storage.ClientStorageArrayBuffer,stagingStorageTypeClass:me.Storage.ClientStorageDictionaryBuffer,dataSenderStorageLogFailureClass:me.Storage.ClientStorageReduceBuffer},session:{storageTypeClass:me.Storage.SessionStorageArrayBuffer,stagingStorageTypeClass:me.Storage.SessionStorageDictionaryBuffer,dataSenderStorageLogFailureClass:me.Storage.SessionStorageReduceBuffer}},n}(),Tt.register("EventsSenderFactory").asCtor(ve).dependencies("EventServerBaseUrlProvider"),Tt.register("EventCollectorEventSender").asCtor(function(l,u,e,t,n,c,d,f,p,g){this.postEvent=function(e,t){try{var n=(r=t,i=e,o={time:(new Date).getTime(),type:i,data:null},"[object Function]"===Object.prototype.toString.call(r)?o.data=r():o.data=r,o=Et.extend(o,g.get()),p.decodeJsonNodes(o),o);l.send(n),a={eventData:n},d.raiseEvent(f.EVENTS.AnalyticsEventSent,a)}catch(s){throw u&&u.logError(c.toJSON(s.message)),s}var r,i,o,a}}).dependencies("DataSender, EventSenderErrorLogger, EventSenderEnvironmentDataProvider, EventCollectorWalkMeDataProvider, SessionManager, JsonUtils, CommonEvents, Consts, JsonHtmlDecoder, CommonEventAttributesProvider"),Tt.register("EventCollectorLogger").asCtor(_e).dependencies("DataSenderLog,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator, StaticWMDataProvider,JsonUtils"),Tt.register("EventCollectorLoggerPixel").asCtor(_e).dependencies("DataSenderLogPixel,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator,StaticWMDataProvider,JsonUtils"),Tt.register("EventSender").asCtor(function(e,t,n,r,i){function o(){return n.isEnabled()}this.isEnabled=o,this.postEvent=function(e,t){if(o())try{r.postEvent(e,t)}catch(n){i.error(n)}},this.getEventAppByDeployable=t.map,this.isReportingEnabled=o,this.EVENT_TYPES=e.EVENT_SENDER_EVENT_TYPES,this.EVENT_APPS=e.EVENT_SENDER_EVENT_APPS,this.CANCEL_REASONS=e.EVENT_SENDER_CANCEL_REASONS,function(){}.apply(this,arguments)}).dependencies("Consts, DeployableTypeToEventSenderAppTypeMapper, EventsCollectorAuditingEnabledIndicator, EventCollectorEventSender, Logger"),Tt.register("EventSenderDisabler").asCtor(function(e){this.disable=function(){e.sleep(),e.disable()}}).dependencies("DataSender"),Tt.register("EventSenderErrorLogger").asCtor(function(e,o,a,s,l,t,u,n){var r,i,c=this;function d(e){Et.ajax({url:r+i,data:t.toJSON(e),contentType:"text/plain",dataType:"json",type:"POST"})}c.init=function(){r=n.get()},c.setBaseUrl=function(e){r=e},c.isReady=function(){return!(!r||!i)},c.logError=function(e,t){if(c.isReady()&&u.isEnabled()){var n;try{n={uId:a.getUserGuid(),euId:a.getEndUserGuid(),euIdSource:a.getEndUserGuidSource(),permId:a.getPermutationId(),language:a.getLanguage(),cVars:a.getCustomVars(),env:a.getEnvironmentId()}}catch(i){}var r=Et.extend({time:(new Date).getTime(),level:"error",app:"player",message:e},{url:l.get(),browser:o.browser,os:o.os,screen:o.getWinSize(),mobile:o.isMobile()},n,t||{});s.filter(r).then(d)}},function(e){i=e.postEventAction}.apply(c,arguments)}).dependencies("DataChannelConfigLog,HostData,WalkMeInfo,ErrorLogFilter,SafeFullUrlProvider,JsonUtils,AuditingEnabledIndicator, EventServerBaseUrlProvider"),Tt.register("EventSenderInitializer").asCtor(function(t){this.init=function(){for(var e=0;e<n.length;e++)Tt.get(n[e].ctxName).enable();n=[]};var n=[{ctxName:"DataSenderLog",postEventAction:"/event/log",storageConfig:{keyName:"wm-ds-lb",autoSave:!1,expiresSeconds:600},storageType:"client",maxRetries:3,isLogFailed:!1,sendingIntervalMs:5e3,retryIntervalMs:5e3,channelType:"CompatibilityChannel",dataSender:"immediate",clientStorageManager:"ClientStorageManager"},{ctxName:"DataSenderLogPixel",postEventAction:"/event/log",storageConfig:{keyName:"wm-ds-lbp",autoSave:!1,expiresSeconds:600},storageType:"client",maxRetries:3,isLogFailed:!1,sendingIntervalMs:5e3,retryIntervalMs:5e3,channelType:"ImageChannel",dataSender:"immediate",clientStorageManager:"ClientStorageManager"},{ctxName:"DataSender",postEventAction:"/event/postEvent",storageConfig:{keyName:"wm-ds-b",autoSave:!1,expiresSeconds:600},stagingStorageConfig:{keyName:"wm-ds-s",autoSave:!1,expiresSeconds:600},failureStorageConfig:{keyName:"wm-ds-lfb",autoSave:!0,expiresSeconds:86400},maxRetries:0,retryIntervalMs:5e3,isLogFailed:!0,channelType:"CompatibilityChannel",storageType:"client",dataSender:"accumulation",clientStorageManager:"ClientStorageManager",clientStagingStorageManager:"ClientStorageManager"},{ctxName:"DataSenderBI",postEventAction:"/event/backEvent",storageConfig:{keyName:"wm-ds-bib",autoSave:!1,expiresSeconds:600},stagingStorageConfig:{keyName:"wm-ds-sbi",autoSave:!1,expiresSeconds:600},failureStorageConfig:{keyName:"wm-ds-lb",autoSave:!1,expiresSeconds:600},sendingIntervalMs:5e3,maxRetries:0,isLogFailed:!0,maxStaticDataLength:950,channelType:"AjaxChannel",storageType:"client",dataSender:"accumulation",clientStorageManager:"DummyClientStorageManager",clientStagingStorageManager:"DummyClientStorageManager"},{ctxName:"DataSenderHeartbeat",postEventAction:"/event/postEvent",storageConfig:{keyName:"wm-ds-hb",autoSave:!1,expiresSeconds:600},stagingStorageConfig:{keyName:"wm-ds-shb",autoSave:!1,expiresSeconds:600},failureStorageConfig:{keyName:"wm-ds-fhb",autoSave:!1,expiresSeconds:600},maxRetries:3,isLogFailed:!0,channelType:"CompatibilityChannel",storageType:"client",dataSender:"immediate",clientStorageManager:"ClientStorageManager",clientStagingStorageManager:"ClientStorageManager"}];!function(){for(var e=0;e<n.length;e++)t.generateEventsSender(n[e])}()}).dependencies("EventsSenderFactory"),Tt.register("EventsCollectorFeatureEnabledIndicator").asCtor(function(e,t,n){this.isFeatureEnabled=function(){return n.isReady()&&!n.isFeatureEnabled(e.FEATURES.DisableEventCollection)&&!t.isIE(7)}}).dependencies("Consts, HostData, FeaturesManager"),Tt.register("ActivityIndicator").asCtor(function(s,e){var t=["blur","change","click","dblclick","focus","focusin","focusout","hover","keydown","keypress","keyup","mousedown","mouseup","resize","scroll","select","submit"],n=this;this.bindEvents=function(a){s.each(t,function(e,t){var n,r,i,o;document.addEventListener?(i=t,o=a,document.addEventListener(i,o,!0)):(n=t,r=a,s(document).on(n+".wm-heartbeat",r))}),e.on("removeWalkMe",function(){n.unbindEvents(a)})},this.unbindEvents=function(a){s.each(t,function(e,t){var n,r,i,o;document.addEventListener?(i=t,o=a,document.removeEventListener(i,o,!0)):(n=t,r=a,s(document).off(n+".wm-heartbeat",r))})}}).dependencies("wmjQuery, WmInternals"),Tt.register("HeartbeatBackoffTimer").asCtor(function(e,t,n){var r,i,o,a=12e4;function s(){e.saveData(r,o,i)}this.getCurrentTimeout=function(){return o},this.raiseTimeout=function(){o=Math.min(2*o,96e4),s()},r=e.keysConfig.heartbeat.backoffTimer.key,i=e.keysConfig.heartbeat.backoffTimer.expiry,o=e.getData(r,a),t.on(n.EVENTS.NewSession,function(){o=a,s()})}).dependencies("ClientStorageManager, WmInternals, Consts"),Tt.register("HeartbeatEventSender").asCtor(function(t,e,i,o,a,n,r,s,l,u){this.disable=function(){f&&(f=!1,t.unbindEvents(p))};var c,d=i.keysConfig.heartbeat.eventStorage.key,f=!0;function p(){var e,t,n,r=(new Date).getTime();c||g(r),e={time:r},t=a.get(),c={sId:t.sId,wm:{uId:t.wm.uId,euId:t.wm.euId,env:t.wm.env},version:t.version,type:"activity",time:e.time},n=c,i.saveData(d,n,1800)}function g(e){var t=u.getCurrentTimeout(),n=(new Date).getTime()-e,r=t<n?0:t-n;o.setWalkmeTimeout(h,r)}function h(){f&&(e.send(c),c=undefined),i.removeData(d),u.raiseTimeout()}r._walkmeInternals.one("WalkMeReady",function(){var e;l.isEnabled()||(f=!1),f&&s.isFeatureEnabled("enableHeartBeatEvent")&&(t.bindEvents(p),(e=i.getData(d))&&g((c=e).time))})}).dependencies("ActivityIndicator, DataSenderHeartbeat, ClientStorageManager, TimerManager, CommonEventAttributesProvider, JsonUtils, win, FeaturesManager, AuditingEnabledIndicator, HeartbeatBackoffTimer"),Tt.register("AnalyticsPropertiesManager").asCtor(function(i,o){var a;this.setPredefinedPropertyValue=function(e,t){var n=o.getPredefinedProvider(t);a[e]=n},this.getPropertyValue=function(e){if(a[e])return a[e].get();return undefined},this.init=function(){var e=i.get().Settings;if(e&&e.analyticsProperties)for(var t=0;t<e.analyticsProperties.length;t++){var n=e.analyticsProperties[t],r=o.get(n);a[n.name]=r}},function(){a={}}.apply(this,arguments)}).dependencies("SiteConfigManager, ValueProviderFactory"),Tt.register("PredefinedValueProvider").asCtor(function(e){var t;this.get=function(){return t},function(e){t=e.value}.apply(this,[e])}).asProto(),Tt.register("StickyValueProvider").asCtor(function(e){var t,n;function r(){t=n()}this.get=function(){t===undefined&&r();return t},function(e){n=e.calculateValueFunc,r()}.apply(this,[e])}).asProto(),Tt.register("StrongStickyValueProvider").asCtor(function(e){var t,n;this.get=function(){return t=n(),t},function(e){n=e.calculateValueFunc}.apply(this,[e])}).asProto(),Tt.register("ValueProviderFactory").asCtor(function(a,s,l){function u(e){var t={value:e};return Tt.create("PredefinedValueProvider",t)}this.get=function(e){var t=(n=e,r=l.get(n.calculationMethod),i=n.variable,function(){return r.calculate(i)});var n,r,i;{if(a.isFeatureEnabled(s.FEATURES.StickyCustomVars)){var o={calculateValueFunc:t};return Tt.create("StickyValueProvider",o)}if(a.isFeatureEnabled(s.FEATURES.StrongStickyCustomVars)){var o={calculateValueFunc:t};return Tt.create("StrongStickyValueProvider",o)}}return u(t())},this.getPredefinedProvider=u,function(){}.apply(this,arguments)}).dependencies("FeaturesManager, Consts, ValueCalculatorFactory"),ye=xe||(xe={}),Se=ye.Channels||(ye.Channels={}),Ee=function(){function e(e){this.maxConnections=ye.BrowserConnectionLimit.Chrome,this.currentOpenConnections=0,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.requestTimeoutMs=e.requestTimeoutMs,this.retryParameterName=e.retryParameterName,this.retryIntervalMs=e.retryIntervalMs||0,this.timerManager=Tt.get("TimerManager"),this.setBaseUrl(e.baseUrl)}return e.prototype.getChannelType=function(){return"AjaxChannel"},e.prototype.getChannelMethod=function(){return"POST"},e.prototype.setBaseUrl=function(e){this.baseUrl=e},e.prototype.getBaseUrl=function(){return this.baseUrl},e.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},e.prototype.getRetryParamName=function(){return this.retryParameterName},e.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},e.prototype.getLineBreak=function(){return"\n"},e.prototype.checkHealth=function(){Et.get(this.getHealthCheckUrl())},e.prototype.send=function(r,i,o,a,s){if(!this.isAvailable())throw new Error("Channel is at max capacity. Can't send anymore data.");var l=this;this.currentOpenConnections++;var e=this.getPostEventUrl();a&&(e+="?"+this.getRetryParamName()+"="+a);var t=Tt.get("WmAjax").execute({url:e,data:r,contentType:"text/plain",type:"POST",dataType:"html",timeout:this.requestTimeoutMs||2e3});t.success(function(e){i&&i(),l.successCallback&&l.successCallback(),l.singleLinkFree()}),t.error(function(e,t,n){s!==undefined&&0!==s?l.timerManager.setWalkmeTimeout(function(){l.send(r,i,o,a,--s)},l.retryIntervalMs):(o&&o(e,t,n),l.failCallback&&l.failCallback(e,t,n)),l.singleLinkFree()})},e.prototype.isInitialized=function(){return!!this.baseUrl},e.prototype.isAvailable=function(){return this.currentOpenConnections<this.maxConnections},e.prototype.isIdle=function(){return 0===this.currentOpenConnections},e.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},e.prototype.estimateDataSize=function(e){return e.length},e.prototype.maxPacketSize=function(){return 9e3},e.prototype.channelBandwidth=function(){return ye.BrowserConnectionLimit.Chrome*this.maxPacketSize()},e.prototype.whenFree=function(e){this.whenFreeCallback=e},e.prototype.fail=function(e){this.failCallback=e},e.prototype.success=function(e){this.successCallback=e},e.prototype.singleLinkFree=function(){this.currentOpenConnections--,this.whenFreeCallback&&this.whenFreeCallback()},e}(),Se.AjaxChannel=Ee,Te=xe||(xe={}),we=Te.Channels||(Te.Channels={}),Ce=function(){function e(e){this.maxConnections=Te.BrowserConnectionLimit.Chrome,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.retryParameterName=e.retryParameterName,this.retryIntervalMs=e.retryIntervalMs||0,this.timerManager=Tt.get("TimerManager"),this.setBaseUrl(e.baseUrl),this.allocateImages()}return e.prototype.getChannelType=function(){return"ImageChannel"},e.prototype.getChannelMethod=function(){return"GET"},e.prototype.setBaseUrl=function(e){this.baseUrl=e},e.prototype.getBaseUrl=function(){return this.baseUrl},e.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},e.prototype.getRetryParamName=function(){return this.retryParameterName},e.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},e.prototype.getLineBreak=function(){return"\n"},e.prototype.checkHealth=function(){Et.get(this.getHealthCheckUrl())},e.prototype.send=function(e,t,n,r,i){var o=this,a=encodeURIComponent(e),s=this.assertFree();s.attr(this.getBusyFlag(),"true");var l=this.getPostEventUrl()+"?"+this.getURLQueryParamKey()+"="+a;r&&(l+="&"+this.getRetryParamName()+"="+r),s.on("load",function(){s.unbind("load"),s.attr(o.getBusyFlag(),"false"),o.whenFreeCallback&&o.whenFreeCallback(),t&&t(),o.successCallback&&o.successCallback()}).on("error",function(){i!==undefined&&0!==i?o.timerManager.setWalkmeTimeout(function(){o.send(e,t,n,r,--i)},o.retryIntervalMs):(n&&n(null,null,null),o.failCallback&&o.failCallback(null,null,null))}),s.attr("src",l)},e.prototype.isInitialized=function(){return!!this.baseUrl},e.prototype.isAvailable=function(){return null!==this.getFreeImg()},e.prototype.isIdle=function(){for(var e=0;e<this.images.length;e++)if(!this.isImageFree(this.images[e]))return!1;return!0},e.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},e.prototype.estimateDataSize=function(e){return encodeURIComponent(e).length},e.prototype.maxPacketSize=function(){var e="?"+this.getURLQueryParamKey()+"=&"+this.getRetryParamName()+"=";return this.getMaxUrlSize()-this.getPostEventUrl().length-e.length-2},e.prototype.channelBandwidth=function(){return Te.BrowserConnectionLimit.Chrome*this.maxPacketSize()},e.prototype.whenFree=function(e){this.whenFreeCallback=e},e.prototype.fail=function(e){this.failCallback=e},e.prototype.success=function(e){this.successCallback=e},e.prototype.getFreeImg=function(){for(var e=0;e<this.images.length;e++)if(this.isImageFree(this.images[e]))return this.images[e];return null},e.prototype.isImageFree=function(e){return"false"===e.attr(this.getBusyFlag())},e.prototype.allocateImages=function(){this.images=[];for(var e=0;e<this.maxConnections;e++){var t=this.createImage();this.images.push(t)}},e.prototype.createImage=function(){var e=Et("<img/>");return e.css("width","1px"),e.css("height","1px"),e.attr(this.getBusyFlag(),"false"),e},e.prototype.getMaxUrlSize=function(){return 2048},e.prototype.getBusyFlag=function(){return"_WM_BUSY_"},e.prototype.getURLQueryParamKey=function(){return"ed"},e.prototype.assertFree=function(){var e=this.getFreeImg();if(!e)throw"Channel is at max capacity. Can't send anymore data.";return e},e.prototype.getCurrentImages=function(){return this.images.slice(0)},e.prototype.dispose=function(){for(var e=0;e<this.images.length;e++)this.images[e].remove()},e}(),we.ImageChannel=Ce,function(d){var r,e;(e=r=d.CompatibilityChannelMode||(d.CompatibilityChannelMode={}))[e.PostNativeCors=0]="PostNativeCors",e[e.GetImage=1]="GetImage",e[e.PostIECorsPlugin=2]="PostIECorsPlugin";var t=function(){function e(e){var u=this;this.eventSenderErrorLogger=Tt.get("EventSenderErrorLogger"),this.config=Et.extend({},e),this.initUnderlyingChannel(),this.sendFn=function(o,a,s,e){var l=!1,i=function(e,t,n,r){if(!l){l=!0,u.eventSenderErrorLogger.logError("Failed to send event using Ajax",{errorThrown:n});var i=new d.ImageChannel(u.config);u.underlyingChannel=i,c(o,a,s,r)}};try{c(o,a,function(e,t,n,r){i(0,0,n,r)},e)}catch(t){i(0,0,null)}u.sendFn=c};var c=function(e,t,n,r){u.underlyingChannel.send(e,t,n,r,3)}}return e.prototype.getChannelType=function(){return"CompatibilityChannel."+this.underlyingChannel.getChannelType()},e.prototype.getChannelMethod=function(){return r[this.mode]},e.prototype.getBaseUrl=function(){return this.underlyingChannel.getBaseUrl()},e.prototype.setBaseUrl=function(e){this.config.baseUrl=e,this.initUnderlyingChannel()},e.prototype.initUnderlyingChannel=function(){var e=this.checkCompatibility(),t=new RegExp("^(//|"+location.protocol+")","i").test(this.config.baseUrl),n=this.pickChannel(e,this.config,t);this.underlyingChannel=n},e.prototype.getPostEventUrl=function(){return this.underlyingChannel.getPostEventUrl()},e.prototype.getHealthCheckUrl=function(){return this.underlyingChannel.getHealthCheckUrl()},e.prototype.getRetryParamName=function(){return this.underlyingChannel.getRetryParamName()},e.prototype.getLineBreak=function(){return this.underlyingChannel.getLineBreak()},e.prototype.checkHealth=function(){Et.get(this.underlyingChannel.checkHealth())},e.prototype.send=function(e,t,n,r){this.sendFn(e,t,n,r)},e.prototype.isInitialized=function(){return!!this.underlyingChannel&&this.underlyingChannel.isInitialized()},e.prototype.isAvailable=function(){return this.underlyingChannel.isAvailable()},e.prototype.isIdle=function(){return this.underlyingChannel.isIdle()},e.prototype.withinSizeLimit=function(e){return this.underlyingChannel.withinSizeLimit(e)},e.prototype.estimateDataSize=function(e){return this.underlyingChannel.estimateDataSize(e)},e.prototype.maxPacketSize=function(){return this.underlyingChannel.maxPacketSize()},e.prototype.channelBandwidth=function(){return this.underlyingChannel.channelBandwidth()},e.prototype.whenFree=function(e){this.underlyingChannel.whenFree(e)},e.prototype.fail=function(e){this.underlyingChannel.fail(e)},e.prototype.success=function(e){this.underlyingChannel.success(e)},e.prototype.pickChannel=function(e,t,n){switch(this.mode=e){case r.PostIECorsPlugin:return n?new d.AjaxChannel(t):new d.ImageChannel(t);case r.PostNativeCors:return new d.AjaxChannel(t);case r.GetImage:return new d.ImageChannel(t)}},e.prototype.checkCompatibility=function(){return(new XMLHttpRequest).withCredentials!==undefined?r.PostNativeCors:"undefined"!=typeof window.XDomainRequest?r.PostIECorsPlugin:r.GetImage},e}();d.CompatibilityChannel=t}((be=xe||(xe={})).Channels||(be.Channels={}));var Pe,Ae,ke,De,Ne,Oe,xe,Le,Fe,Me,Re=function(){function t(e,t,n,r,i){this.eventCollectorWalkMeDataProvider=e,this.eventSenderEnvironmentDataProvider=t,this.eventSenderContextDataProvider=n,this.sessionManager=r,this.walkMeInfo=i,this.extraCommonData=[]}return t.prototype.get=function(){var e={sId:this.sessionManager.getCurrentSession(),wm:this.eventCollectorWalkMeDataProvider.getWalkMeData(),env:this.eventSenderEnvironmentDataProvider.getEnvironmentData(),ctx:this.eventSenderContextDataProvider.getContextData(),visions:this.getVisionsAttributes(),version:{lib:this.walkMeInfo.getLibVersion(),pe:t.schemaVersion}};return Et.extend(!0,{},e,this.getExtraCommonData())},t.prototype.getVisionsAttributes=function(){var e=window.JacoRecorder;return e&&e.state&&e.state.session&&e.state.session.id?{sId:e.state.session.id}:undefined},t.prototype.extend=function(e){this.extraCommonData.push(e)},t.prototype.getExtraCommonData=function(){if(0===this.extraCommonData.length)return{};var e=Et.map(this.extraCommonData,this.executeCommonDataFunction);return Et.extend.apply(Et,[!0,{}].concat(e))},t.prototype.executeCommonDataFunction=function(e){return"function"==typeof e?e():e},t.schemaVersion="5.0.0",t}();Tt.register("CommonEventAttributesProvider").asCtor(Re).dependencies("EventCollectorWalkMeDataProvider, EventSenderEnvironmentDataProvider, EventSenderContextDataProvider, SessionManager, WalkMeInfo"),Tt.register("EventCollectorWalkMeDataProvider").asCtor(function(i,o,a,s,l){this.getWalkMeData=function(){var e={uId:i.getUserGuid(),euId:i.getEndUserGuid(),euIdSource:i.getEndUserGuidSource(),permId:i.getPermutationId(),language:i.getLanguage(),cVars:i.getCustomVars(),env:i.getEnvironmentId(),interactionGuid:o.getCurrentInteractionGuid(),platform:a.get("platform"),userVars:s.getUserVars()},t=l.get("globalGuid");t&&(e.extensionInstallationGuid=t);var n=l.get("extVersion");n&&(e.extensionVersion=n);var r=l.get("configSrc");r&&(e.extensionConfigSrc=r);return e}}).dependencies("WalkMeInfo, InteractionManager, ExternalWalkMeConfig, EventCollectorUserDataProvider, ExtensionConfigManager"),Tt.register("EventSenderContextDataProvider").asCtor(function(a,e,s,t,l,n){var r=null;function i(){if(!0===function(){null===r&&s.isReady()&&(r=!s.isFeatureEnabled(l.FEATURES.EventSenderDisableSendReferrerUrl)&&(!!s.isFeatureEnabled(l.FEATURES.EventSenderForceSendReferrerUrl)||n.sync("EventSenderContextDataProviderReferrerEnablement",null,!1)));return r}()){var e=a.document.referrer;if(!e&&o())try{top._walkMe&&(e=top.document.referrer)}catch(t){}if(e)return e}}function o(){return top!==a}this.getContextData=function(){return{location:function(){var e="",t="",n="",r="",i="",o="";!s.isReady()||s.isFeatureEnabled(l.FEATURES.DisableWidgetOpenFullUrl)||s.isFeatureEnabled(l.FEATURES.EventSenderDontSendPageUrl)||(e=a.location.protocol,t=a.location.hostname,o=a.location.port,n=a.location.pathname,r=a.location.hash,i=a.location.search);return{protocol:e,hostname:t,port:o,pathname:n,hash:r,search:i}}(),isIframe:o(),visitId:e.get(),title:function(){if(s.isReady()&&!s.isFeatureEnabled(l.FEATURES.EventSenderDontSendPageTitle))return t.getPageTitle();return""}(),referrer:i()}}}).dependencies("win, PageVisitIdProvider, FeaturesManager, HostData, Consts, EventsTrigger"),Tt.register("EventSenderEnvironmentDataProvider").asCtor(function(e){this.getEnvironmentData=function(){return{browser:e.browser,os:e.os,mobile:e.isMobile(),screen:e.getWinSize(),timezone:(new Date).getTimezoneOffset()}},function(){}.apply(this,arguments)}).dependencies("HostData"),Tt.register("EndUsersManager").asCtor(function(n,a,s,r,l,t,u,c,i){var o,d,f,p,g=this;g.setEndUserSettings=function(e){o=e,t.raiseEvent(u.EVENTS.EndUserSettingsSet,{endUserSettings:e})},g.getEndUserSettings=function(){return o},g.isWalkMeGeneratedEndUserType=function(){var e=!0;o&&(e=y()||!S(!0));return e},g.getEndUserGuid=S,g.createEndUserGuid=function(){o||T("Cannot create end user guid before end user settings were set");if(d)return;(d=function(){if(o){var e=g.calculateCustomEndUserGuid(o);return e?(f="Identifier",E(e)):e=function(){var e=(p=n.getData(m.key),n.getData(h.key));if(e)return f="Cache",e}()||function(){var e=!1;o&&"walkme"!=o.Method&&"none"!=o.Method?(f="Generated",e=!0):f="Identifier";var t=r.generateGuid();return a.customerLog("getEndUserGuid: generating new user guid-"+t+" isForced: "+e,3,v),E(t,e),t}(),e}}())&&a.customerLog("getEndUserGuid: created endUserGuid-"+d,3,v)},g.getEndUserGuidSource=function(){return f},g.isEndUserGuidValid=function(){return!l.isValueTrue(o.FallbackDisabled)||y()||!1!==S(!0)},g.calculateCustomEndUserGuid=function(e){if(!e)return;var t,n=e.Method,r=e.Parameters;switch(n){case"var":r.VarName&&(t=l.getWindowData(u.WINDOW_CUSTOM_DATA_TYPE.Var,r.VarName),(i=t)&&i.nodeType&&(a.customerLog("endUserGuid - invalid variable name",1,v),t=undefined));break;case"salesforce":t=function(){if(window.walkme_sf_vars)return window.walkme_sf_vars.userId}();break;case"cookie":r.VarName&&(t=l.getWindowData(u.WINDOW_CUSTOM_DATA_TYPE.Cookie,r.VarName));break;case"jquery":r.VarName&&(t=s.getjQueryElementText(r.VarName))}var i;var o={method:n,params:r};return t=c.send("EndUserRetrieved",o)||t};var h=n.keysConfig.endUser.guid,m=n.keysConfig.endUser.forcedGenerate,v="endUser";function y(){return"walkme"==o.Method||"none"==o.Method}function S(e){return d||i.get()||T("Cannot get end user guid before it was created"),e&&p?(a.customerLog("Could not retrieve endUserGuid",3,v),!1):d}function E(e,t){n.saveData(h.key,e,h.expiry),t?(p=!0,n.saveData(m.key,1,m.expiry)):(p=!1,n.removeData(m.key))}function T(e){var t=new Error(e);throw a.error(t),t}(function(){}).apply(null,arguments)}).dependencies("ClientStorageManager,Logger,JQueryElementFinder,GuidGenerator,CommonUtils, CommonEvents, Consts, MessageSender,IsInEditor"),Pe=xe||(xe={}),Ae=Pe.Managers||(Pe.Managers={}),ke=function(){function e(e,t,n,r,i,o){this.buffer=t,this._isEnabled=!1,this.dataChannel=e,this._eventsErrorLogger=o,this.jsonUtils=r,this._logger=i?i.wrapCustomerLog("newSender"):function(){}}return e.prototype.checkHealth=function(){return this.dataChannel.checkHealth()},e.prototype.getBaseUrl=function(){return this.dataChannel.getBaseUrl()},e.prototype.setBaseUrl=function(e){this.dataChannel.setBaseUrl(e)},e.prototype.getPostEventUrl=function(){return this.dataChannel.getPostEventUrl()},e.prototype.getHealthCheckUrl=function(){return this.dataChannel.getHealthCheckUrl()},e.prototype.enable=function(){var e=this;if(!this._isEnabled)try{this._logger(this.getSenderType()+"::enable. Enabling new data sender. \r\n [channel : "+this.dataChannel.getChannelType()+" , method : "+this.dataChannel.getChannelMethod()+" ,max packet size: "+this.dataChannel.maxPacketSize()+" ] \r\n [storage : "+this.buffer.getStorageType()+" , max storage size: "+this.buffer.maxSize()+"] \r\n",3),this._isEnabled=!0,this.dataChannel.whenFree(function(){e.linkIsFree()}),this.registerToUnload(function(){return e.sleep()}),this.wakeUp()}catch(t){this.logError(t,"Enable")}},e.prototype.logError=function(e,t){if(this._eventsErrorLogger){var n=this.dataChannel&&this.buffer?{storage:this.buffer.getStorageType(),channel:this.dataChannel.getChannelType()}:{};n.sender=this.getSenderType()+(t?"::"+t:""),this._eventsErrorLogger.logError(this.jsonUtils.toJSON(e.message),n)}},e.prototype.disable=function(){this._isEnabled&&(this._isEnabled=!1)},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.isIdle=function(){return this._isEnabled&&this.dataChannel.isIdle()&&this.buffer.isEmpty()},e.prototype.clearStorage=function(){this.buffer.clear()},e.prototype.registerToUnload=function(e){Tt.get("WindowBeforeUnloadHandler").register(e)},e}(),Ae.SuperSender=ke,De=xe||(xe={}),Ne=De.Managers||(De.Managers={}),Oe=function(p){function e(e,t,n,r,i,o,a,s,l,u,c,d){var f=p.call(this,e,t,o,l,c,d)||this;return f.estimatedPacketSize=0,f.cycleTimer=new De.SimpleTimer(o.sendingIntervalMs,function(){return f.doCycle()}),f.retryTimer=new De.SimpleTimer(o.retryIntervalMs,function(){return f.doCycle()}),f.maxRetries=o.maxRetries,f.maxRetryTimeoutSec=o.maxRetryTimeoutSec,f.minRetryTimeoutSec=o.minRetryTimeoutSec,f.currentRetries=0,f.isHealthy=!0,f.needMoreLink=!1,f.isLogFailed=o.isLogFailed,f.memoryBuffer=r,f.stagingMemoryBuffer=i,f.stagingBuffer=n,f.failureBuffer=a,f.dataSenderLogFailure=s,f.maxDynamicDataLength=o.maxDynamicDataLength||0,f.maxStaticDataLength=o.maxStaticDataLength===undefined?1e3-o.maxDynamicDataLength:o.maxStaticDataLength,f.staticData=f.emptyStaticData(),f.dynamicDataArr=[f.timestampDynamicData],f.staticIndicator={_static:!0},f.staticIndicatorLen=0,f.cleanObject=u,f}return Ie(e,p),e.prototype.getSenderType=function(){return"AccumulationSender"},e.prototype.emptyStaticData=function(){return{data:{},length:0}},e.prototype.setStaticData=function(e,t){var n;if(t&&"_static"!==e&&!this.staticData.data[e]){var r=Et.extend({},this.staticData.data,((n={})[e]=t,n)),i=this.jsonUtils.toJSON(r),o=this.dataChannel.estimateDataSize(i);return o>this.maxStaticDataLength?(this._logger("Static data that exceeds the limit "+e+":"+this.jsonUtils.toJSON(t),3),!1):(this.staticData.data=r,this.staticData.length=o,!0)}},e.prototype.timestampDynamicData=function(){return{"Wm-Client-Timestamp":(new Date).getTime()}},e.prototype.dynamicData=function(){for(var e={},t=0;t<this.dynamicDataArr.length;t++){var n=Et.extend({},e,this.dynamicDataArr[t]()),r=this.jsonUtils.toJSON(n);this.dataChannel.estimateDataSize(r)>this.maxDynamicDataLength?this._logger("Dynamic data that exceeds the limit "+r,3):e=n}return e},e.prototype.enrichmentDataLength=function(){this.staticIndicatorLen||(this.staticIndicatorLen=this.dataChannel.estimateDataSize(this.jsonUtils.toJSON(this.staticIndicator))+1);var e=this.maxDynamicDataLength+this.staticData.length;return 0!==e?e+this.staticIndicatorLen:0},e.prototype.getBuffer=function(){return this.buffer},e.prototype.send=function(e){try{this._logger(this.getSenderType()+"::Send. called for: "+this.jsonUtils.toJSON(e),5);var t="string"!=typeof e?this.jsonUtils.toJSON(this.cleanObject(e)):e;if(!this.isEnabled())return!1;var n=this.dataChannel.estimateDataSize(t);if(!this.dataChannel.withinSizeLimit(n+this.enrichmentDataLength()))throw new Error("Data exceeds channel packet size");if(this.getBuffer().withinSizeLimit(t.length))return this.getBuffer().isEmpty()||(this.estimatedPacketSize+=this.dataChannel.estimateDataSize(this.dataChannel.getLineBreak())),this.estimatedPacketSize+=n,this.getBuffer().dataSize()+t.length>this.getBuffer().maxSize()&&this.sendBuffer(),this.getBuffer().push(t),this.estimatedPacketSize>=this.dataChannel.channelBandwidth()?(this.sendBuffer(),this.getTimer().restart()):this.getTimer().start(),!0;this.dataChannel.isAvailable()?this.stageAndSend({memory:[t],persist:[]}):(this.memoryBuffer.push(t),this.needMoreLink=!0)}catch(r){throw this.logError(r,"Send"),r}},e.prototype.wakeUp=function(){if(this.isEnabled())try{this._logger(this.getSenderType()+"::WakeUp. buffer size before load. "+this.getBuffer().dataSize(),3),this.loadFromStorage(),this._logger(this.getSenderType()+"::WakeUp. buffer size after load. "+this.getBuffer().dataSize(),3)}catch(e){throw this.logError(e,"WakeUp"),e}},e.prototype.sleep=function(){if(this.isEnabled())try{this._logger(this.getSenderType()+"::Sleep. buffer size before flush: "+this.getBuffer().dataSize(),3),this.sendBuffer(),this._logger(this.getSenderType()+"::Sleep. buffer size after flush: "+this.getBuffer().dataSize(),3),this.getBuffer().save(),this.stagingBuffer.save(),this.failureBuffer.save()}catch(e){throw this.logError(e,"Sleep"),e}},e.prototype.isIdle=function(){return p.prototype.isIdle.call(this)},e.prototype.linkIsFree=function(){this.isEnabled()&&this.needMoreLink&&this.sendBuffer()},e.prototype.doCycle=function(){this.isEnabled()&&(this._logger(this.getSenderType()+"::doCycle. buffer size before flush. "+this.getBuffer().dataSize(),4),this.sendBuffer(),this._logger(this.getSenderType()+"::doCycle. buffer size after flush. "+this.getBuffer().dataSize(),4))},e.prototype.getSeperator=function(){return this.dataChannel.getLineBreak()},e.prototype.getTimer=function(){return this.isHealthy?this.cycleTimer:this.retryTimer},e.prototype.hasBufferEvents=function(){return!this.getBuffer().isEmpty()||!this.memoryBuffer.isEmpty()},e.prototype.getPriorityBuffer=function(){return this.memoryBuffer.isEmpty()?this.getBuffer():this.memoryBuffer},e.prototype.sendBuffer=function(){if(this.isEnabled())try{for(var e=this.dataChannel.maxPacketSize();this.hasBufferEvents()&&this.dataChannel.isAvailable();){var t={persist:[],memory:[]},n=this.enrichmentDataLength();do{var r=this.getPriorityBuffer(),i=this.dataChannel.estimateDataSize(r.peek()),o=0;if(0!==n&&(o=this.dataChannel.estimateDataSize(this.getSeperator())),e<n+(o+=i)){if(0<n)break;r.pull(),this.logError(new Error("Tried to send too long message"),"SendBuffer")}else t[r===this.memoryBuffer?"memory":"persist"].push(r.pull()),n+=o,this.estimatedPacketSize-=o}while(this.hasBufferEvents()&&n<e);0<n&&this.stageAndSend(t)}this.needMoreLink=this.hasBufferEvents()}catch(a){throw this.logError(a,"SendBuffer"),a}},e.prototype.enrichmentDataHasOwnProps=function(e){for(var t in e)if(e.hasOwnProperty(t)&&"_static"!==t)return!0;return!1},e.prototype.getEnrichmentData=function(){var e=Et.extend({_static:!0},this.staticData.data,this.dynamicData());if(this.enrichmentDataHasOwnProps(e))return this.jsonUtils.toJSON(e)},e.prototype.stageAndSend=function(e){var r=this,i={persist:this.stagingBuffer.pushAll(e.persist),memory:this.stagingMemoryBuffer.pushAll(e.memory)},t=this.getEnrichmentData(),n=(t?[t]:[]).concat(e.persist,e.memory).join(this.getSeperator());this._logger(this.getSenderType()+"::sendBuffer. packet size "+n.length,3),this._logger(this.getSenderType()+"::sendBuffer. sending packet :"+this.jsonUtils.toJSON(n),4),this.dataChannel.send(n,function(){try{r.isHealthy=!0,r.currentRetries=0,r.stagingBuffer.pullAll(i.persist),r.stagingMemoryBuffer.pullAll(i.memory),r.isLogFailedEnabled()&&r.logFailedEvents()}catch(e){}},function(){try{if(r.isHealthy=!1,r.getBuffer().pushAll(r.stagingBuffer.pullAll(i.persist)),r.memoryBuffer.pushAll(r.stagingMemoryBuffer.pullAll(i.memory)),r.currentRetries++,r.currentRetries>r.maxRetries){if(r.isLogFailedEnabled()){var e=r.getBuffer().pullAll().concat(r.memoryBuffer.pullAll());r.failureBuffer.pushAll(e)}r.currentRetries=0,r.getBuffer().clear(),r.memoryBuffer.clear()}else{var t=r.getNextRetryTime();r.getTimer().start(t)}}catch(n){}},this.currentRetries||undefined)},e.prototype.getNextRetryTime=function(){if(!(this.maxRetries<=1)){var e=1e3*(this.minRetryTimeoutSec+(this.maxRetryTimeoutSec-this.minRetryTimeoutSec)*(this.currentRetries-1)/(this.maxRetries-1));return Math.min(1e3*this.maxRetryTimeoutSec,Math.random()*(.25*e)+.75*e)}},e.prototype.loadFromStorage=function(){this.isEnabled()&&(this.getBuffer().load(),this.stagingBuffer.load(),this.failureBuffer.load(),this.getBuffer().pushAll(this.stagingBuffer.pullAll()),this.stagingBuffer.save(),this._logger(this.getSenderType()+"::loadFromStorage. buffer size after load : "+this.getBuffer().dataSize(),4),this.sendBuffer())},e.prototype.isLogFailedEnabled=function(){return this.isLogFailed},e.prototype.logFailedEvents=function(){if(!(this.failureBuffer.count()<=0))for(var e=this.failureBuffer.pullAll(),t=0;t<e.length;t++){var n=e[t];this.dataSenderLogFailure.log.warn(n.message,n.extraData)}},e}(Ne.SuperSender),Ne.AccumulationSender=Oe,Le=xe||(xe={}),Fe=Le.Managers||(Le.Managers={}),Me=function(l){function e(e,t,n,r,i,o,a){var s=l.call(this,e,t,n,r,o,a)||this;return s.cleanObject=i,s}return Ie(e,l),e.prototype.getBuffer=function(){return this.buffer},e.prototype.getSenderType=function(){return"ImmediateSender"},e.prototype.send=function(e){if(!this.isEnabled())return!1;var t="string"!=typeof e?this.jsonUtils.toJSON(this.cleanObject(e)):e;return this.dataChannel.isAvailable()?this.dataChannel.send(t):this.getBuffer().push(t),!0},e.prototype.wakeUp=function(){if(!this.isEnabled())return!1;this.loadFromStorage()},e.prototype.sleep=function(){if(!this.isEnabled())return!1;this.getBuffer().save()},e.prototype.linkIsFree=function(){if(!this.isEnabled())return!1;this.sendFromBuffer()},e.prototype.loadFromStorage=function(){if(!this.isEnabled())return!1;for(this.getBuffer().load();this.dataChannel.isAvailable()&&this.getBuffer().count();)this.sendFromBuffer()},e.prototype.sendFromBuffer=function(){if(!this.isEnabled())return!1;var e=this.getBuffer().pull();e&&this.dataChannel.send(e)},e}(Fe.SuperSender),Fe.ImmediateSender=Me,Tt.register("SessionEventSender").asCtor(function(t,n){this.postNewSessionEvent=function(e){t.postEvent(n.EVENT_SENDER_EVENT_TYPES.SessionStart,{type:"walkme"})}}).dependencies("EventSender, Consts"),Tt.register("SessionManager").asCtor(function(t,n,r,e,i,o){var a,s;function l(){n.raiseEvent(r.EVENTS.WalkmeReadyNewSession,a)}this.getCurrentSession=function(){if(!a)return null;return a},this.setCurrentSession=function(e){a=e},this.beginNewSession=function(){var e=t.generateGuid();this.setCurrentSession(e),n.raiseEvent(r.EVENTS.NewSession,a),o.isReady()?l():i.one(r.EVENTS.WalkmeReady,function(){l()});s("New session guid was created : "+a,2)},function(){s=e.wrapCustomerLog(r.FEATURES_LOGS.WalkMeSession)}.apply(this,arguments)}).asSingleton().dependencies("GuidGenerator, CommonEvents, Consts, Logger, WmInternals, FeaturesManager"),Tt.register("SessionPersister").asCtor(function(a,s,e,n,t,r,i,o,l){this.loadOrCreate=v,this.startPersisting=function(){var e=n.get(),t=e.Custom&&e.Custom.sessionLengthOverride;t&&(p=t);S(),i.bindEvents(o(S,f))},this.cleanResources=function(){c&&(c.clear(),c=null)},this.isNewSession=function(){return d};var u,c,d,f=6e4,p=a.keysConfig.session.session.expiry,g=a.keysConfig.session.session.key,h=43200,m=a.keysConfig.session.sessionCreationTime.key;function v(){return new at(function(e){a.runWithLock("sessionCreation",undefined,{timeout:1e3,interval:100,maxRetries:10},function(){y(e)},function(){l.one("WalkMeReady",function(){r.sendServerLog("debug","session creation lock wasn't released, and max retries reached")}),y(e)})})}function y(o){a.refreshGetData(undefined,function(){var e,t,n,r=a.getData(g),i=a.getData(m);!r||(!(n=i)||((new Date).getTime()-n)/1e3>h)?(u("WalkMe Session doesnt exist in storage. Starting new one",1),s.beginNewSession(),d=!0,e=(new Date).getTime(),a.saveData(m,e,2*h),w()):(d=!1,u("WalkMe Session restored from storage: "+(t=r),1),s.setCurrentSession(t)),o()})}function S(){w(),E()}function E(){c&&c.clear(),c=e.setWalkmeTimeout(T,1e3*p)}function T(){v().then(E)}function w(){var e=s.getCurrentSession();a.saveData(g,e,p),u("WalkMe Session ("+e+") was saved for "+p+" seconds.",3)}(function(){u=r.wrapCustomerLog(t.FEATURES_LOGS.WalkMeSession)}).apply(this,arguments)}).asSingleton().dependencies("ClientStorageManager, SessionManager, TimerManager, SiteConfigManager, Consts, Logger, ActivityIndicator, Throttle, WmInternals"),Tt.register("WalkmeVisibleReporter").asCtor(function(t,n,e,r,i,o,a){this.report=function(){try{if(o.isInPreviewMode()||o.isInPlayMode()||a.get())return;if(i.reportEndUser(undefined,!0),n.wasActionPerformed(s.key))return;t.postEvent(t.EVENT_TYPES.Visible,{type:t.EVENT_APPS.Walkme}),n.logActionPerformed(s.key,s.expiry)}catch(e){r.error(e)}};var s=e.walkmeVisibleReporter.walkmeVisibleReported;(function(){}).apply(null,arguments)}).dependencies("EventSender, UserTimeMonitor, StorageKeysConfigurations, Logger, EndUserLoggerManager, AuditSourceProvider, IsInEditor"),Tt.register("ErrorLogFilter").asCtor(function(){var n=5;this.filter=function(e){var t=Et.Deferred();n<=0?t.reject():(t.resolve(e),n--);return t.promise()}}).dependencies(),Tt.register("EventServerBaseUrlProvider").asCtor(function(e,i){var t;this.get=function(){t||(t=e.getSettingsFile().EventServer,(new XMLHttpRequest).withCredentials===undefined&&"undefined"!=typeof window.XDomainRequest&&(t=function(e){var t=i.location.protocol,n=/^http[^s]/i.test(t),r=new RegExp("^(//|"+t+")","i").test(e);if(n&&!r)return e.replace(/^https:/,"http:");return e}(t)));return t}}).dependencies("SettingsFile, win"),Tt.register("EventSenderEventListener").asCtor(function(e,t,n,r,i,o,a){function s(e,n){t.bind(e,function(e,t){n(t)})}this.init=function(){s(e.EVENTS.Goals.GoalReached,n.postEvent),s(e.EVENTS.AbExperimentLinkedGoalReached,n.postEvent),s(e.EVENTS.SmartTips.ValidationFailed,r.postValidationFailedEvent),s(e.EVENTS.SmartTips.ValidationPassed,r.postValidationPassedEvent),s(e.EVENTS.SmartTips.TooltipShown,r.postTooltipShownEvent),s(e.EVENTS.SmartTips.SetTurnedOn,r.postSetActivatedEvent),s(e.EVENTS.SmartTips.SmartTipSegmented,r.postSmartTipSegmentedEvent),s(e.EVENT_SENDER_EVENT_TYPES.Focus,r.postElementEvent),s(e.EVENT_SENDER_EVENT_TYPES.Blur,r.postElementEvent),s(e.EVENT_SENDER_EVENT_TYPES.Click,r.postElementEvent),s(e.EVENTS.Flows.FlowStarted,i.postFlowStartedEvent),s(e.EVENTS.Flows.FlowBranched,i.postFlowBranchedEvent),s(e.EVENTS.Flows.BeforeExecutingFlowStage,i.postBeforeExecutionStageEvent),s(e.EVENTS.Flows.UIFlowStageShown,i.postUIFlowStageShownEvent),s(e.EVENTS.Flows.AfterCompletingFlowStage,i.postAfterCompletionStageEvent),s(e.EVENTS.Flows.FlowStageSkipped,i.postFlowStageSkippedEvent),s(e.EVENTS.Flows.FlowStopped,i.postFlowStoppedEvent),s(e.EVENTS.Flows.SafeStartStatusChanged,i.postFlowSafeStartStatusChangedEvent),s(e.EVENTS.Quizzes.QuizPlay,o.postQuizPlayEvent),s(e.EVENTS.Quizzes.QuizSubmitted,o.postQuizSubmittedEvent),s(e.EVENTS.Quizzes.QuizAnswerSubmitted,o.postAnswerSubmittedEvent),s(e.EVENTS.Quizzes.QuizPass,o.postQuizPassEvent),s(e.EVENTS.Quizzes.QuizFail,o.postQuizFailEvent),s(e.EVENTS.WalkmeReadyNewSession,a.postNewSessionEvent)},function(){}.apply(this,arguments)}).dependencies("Consts, WmInternals, GoalReachedEventSender, SmartTipEventSender, BizFlowEventSender, QuizEventSender, SessionEventSender"),Tt.register("GoalReachedEventSender").asCtor(function(s,l,u,c,d,f){this.postEvent=function(e){try{var t=e.goal,n=d.get(t.GoalType),r=n.getById(t.RelatedObjectId),i=f.getGoalsFromDeployable(r),o=c.map(t.GoalType);return s.postEvent(u.EVENT_SENDER_EVENT_TYPES.GoalReached,{type:o,oId:t.Id,oName:t.Name,pId:e.identifier?e.identifier:-1,total:i.length,owId:r.Id,owName:r.Name,owType:o,main:t.IsMainGoal,interactionGuid:e.interactionGuid})}catch(a){return l.error(a),!0}},function(){}.apply(null,arguments)}).dependencies("EventSender, Logger, Consts, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, WalkMeGoalsManager"),Tt.register("BizFlowEventSender").asCtor(function(s,l,i,o,u,c,r,d){function a(e,t,n){var r=u.getNodeById(e.flowId,e.stageId),i=n&&c.getValue(r,e.value),o=n&&c.getBbCodeData(i,e.firedTrigger),a={type:l.EVENT_SENDER_EVENT_APPS.BizFlowStep,oId:e.uiElementId?e.uiElementId:r.Id,aoId:r.Id,oName:c.getName(r,e.uiElementId),aType:c.getNodeActionName(r),aAppType:c.getNodeActionAppType(r),oType:c.getNodeType(r),owId:e.businessSolutionId,owName:e.businessSolutionName,owType:l.EVENT_SENDER_EVENT_APPS.BizFlow,total:c.getTotalNodes(e.flowId),pId:d.getPlayGuid(),status:t,value:i,pInit:o};s.postEvent(l.EVENT_SENDER_EVENT_TYPES.Play,a)}this.postFlowStartedEvent=function(e){var t=d.getPlayInitiator(),n=o.generateNewPlayGuid(e.businessSolutionId);d.savePlayGuid(n);var r={type:l.EVENT_SENDER_EVENT_APPS.BizFlow,oId:e.businessSolutionId,oName:e.businessSolutionName,pId:n,pInit:i.map(t),oRequestedSubObject:e.requestedStageId,oActualSubObject:e.startingStageId};s.postEvent(l.EVENT_SENDER_EVENT_TYPES.Play,r)},this.postFlowBranchedEvent=function(e){var t={type:l.EVENT_SENDER_EVENT_APPS.BizFlow,oId:e.businessSolutionId,oName:e.businessSolutionName,pId:d.getPlayGuid(),pInit:i.map(e.initiator),oRequestedSubObject:e.requestedStageId,oActualSubObject:e.startingStageId};s.postEvent(l.EVENT_SENDER_EVENT_TYPES.Play,t)},this.postBeforeExecutionStageEvent=function(e){var t=u.getNodeById(e.flowId,e.stageId),n=r.getBeforeExecutionEventStatus(t);a(e,n)},this.postUIFlowStageShownEvent=function(e){var t=r.getUIFlowStageShownEventStatus();a(e,t)},this.postAfterCompletionStageEvent=function(e){var t=r.getAfterCompletionEventStatus(e.isFlowGoingBack);a(e,t,!0)},this.postFlowStageSkippedEvent=function(e){a(e,l.STEP_STATUS.SkippedNotFound)},this.postFlowStoppedEvent=function(e){if(!e.flowId||!e.wasClosedByUser)return;var t=r.getFlowStoppedEventStatus(e.wasClosedByUser);a(e,t)},this.postFlowSafeStartStatusChangedEvent=function(e){var t=d.getPlayInitiator(),n={type:l.EVENT_SENDER_EVENT_APPS.BizFlow,oId:e.businessSolutionId,oName:e.businessSolutionName,pId:d.getPlayGuid(),pInit:i.map(t),oRequestedSubObject:e.requestedStageId,oActualSubObject:e.startingStageId,status:e.status};s.postEvent(l.EVENT_SENDER_EVENT_TYPES.PlayFailed,n)}}).dependencies("EventSender, Consts, ReportInitiatorMapper, PlayGuidGenerator, FlowsContainer, BizFlowStepEventParamsCalculator, BizFlowStepEventStatusProvider, FlowDataPersister"),Tt.register("BizFlowStepEventParamsCalculator").asCtor(function(r,t,n,i,o,a,s){this.getNodeActionName=function(e){return e.ActionType!=r.FLOW_ACTION_TYPE.OnPageAction?e.ActionType?n.map(e.ActionType):"":a.map(e.Settings.actionArgs.onElementAction)},this.getNodeActionAppType=function(e){return e.ActionType?t.map(e.ActionType):""},this.getTotalNodes=function(e){var t=i.getFlowById(e),n=0;for(var r in t.Nodes)n++;return n},this.getName=function(e,t){if(e.Type!=r.FLOW_STEP_TYPE.UI)return e.Name;if(t){var n=Et.grep(e.UIElements,function(e){return e.Id==t});return n[0].Title}return Et.map(e.UIElements,function(e){return e.Title}).join(", ")},this.getNodeType=function(e){return e.Type==r.FLOW_STEP_TYPE.Action?r.STEP_TYPE.Action:e.UIElements[0].Type==r.FLOW_UIELEMENT_TYPE.Popup?r.STEP_TYPE.Popup:r.STEP_TYPE.Normal},this.getValue=function(e,t){if(e.Type==r.FLOW_STEP_TYPE.Action)return t;return o.lastTriggerFired&&o.lastTriggerFired.Type},this.getBbCodeData=function(e,t){if(e&&e==r.FLOW_TRIGGER_TYPE.BbCode)return s.map({objectId:t.Id,type:t.Name})}}).dependencies("Consts, BizFlowStepActionToEventSenderActionAppTypeMapper, BizFlowStepActionToEventSenderStepActionNameMapper, FlowsContainer, FlowPlayerMetadata, BizFlowOnPageActionTypeToEventSenderStepActionNameMapper, ReportInitiatorMapper"),Tt.register("BizFlowStepEventStatusProvider").asCtor(function(t){this.getBeforeExecutionEventStatus=function(e){return"UI"==e.Type?t.STEP_STATUS.SupposedToShow:t.STEP_STATUS.Shown},this.getUIFlowStageShownEventStatus=function(){return t.STEP_STATUS.Shown},this.getAfterCompletionEventStatus=function(e){return e?t.STEP_STATUS.MovedBack:t.STEP_STATUS.Performed},this.getFlowStoppedEventStatus=function(e){if(e)return t.STEP_STATUS.Exited}}).dependencies("Consts"),Tt.register("QuizEventSender").asCtor(function(i,o,r,a,s,l){function t(e,t){var n=t?o.EVENT_SENDER_EVENT_TYPES.Passed:o.EVENT_SENDER_EVENT_TYPES.Failed,r=Et.extend({},u(e),c(e.quiz),{passmark:e.quiz.Passmark,score:e.score});i.postEvent(n,r)}function u(e){return{pId:e.currentPlayGuid}}function c(e,t){var n,r={};return t?(r.owType=o.EVENT_SENDER_EVENT_APPS.Quiz,n="ow"):(r.type=o.EVENT_SENDER_EVENT_APPS.Quiz,n="o"),r[n+"Id"]=e.Id,r[n+"Name"]=l.getQuizName(e),r}this.postQuizPlayEvent=function(e){var t=r.get(),n=Et.extend({},u(e),c(e.quiz),{pInit:a.map(t),globalRatio:l.getCourseCompletionPrecentage(e.quiz),status:s.getQuizStatus(e.quiz)});i.postEvent(o.EVENT_SENDER_EVENT_TYPES.Play,n)},this.postQuizSubmittedEvent=function(e){var t=Et.extend({},u(e),c(e.quiz));i.postEvent(o.EVENT_SENDER_EVENT_TYPES.Submitted,t)},this.postAnswerSubmittedEvent=function(e){var t=Et.extend({},u(e),c(e.quiz,!0),{type:o.EVENT_SENDER_EVENT_APPS.QuizQuestion,oId:e.questionId,aAppType:o.EVENT_SENDER_EVENT_APPS.QuizAnswer,aoId:e.answerId,aType:o.EVENT_SENDER_EVENT_APPS.QuizAnswer,value:e.answer,oName:e.question});i.postEvent(o.EVENT_SENDER_EVENT_TYPES.Submitted,t)},this.postQuizPassEvent=function(e){t(e,!0)},this.postQuizFailEvent=function(e){t(e,!1)}}).dependencies("EventSender, Consts, InitiatorManager, ReportInitiatorMapper, QuizStatusManager, QuizEventParamCalculator"),Tt.register("QuizEventParamCalculator").asCtor(function(o){function t(e){return o.getCourseByQuizId(e.Id)}this.getQuizName=function(e){return t(e).Name+" Quiz"},this.getCourseCompletionPrecentage=function(e){var t=Tt.get("LmsProgressProvider"),n=Tt.get("ObjectsTreeGenerator"),r=o.getCourseByQuizId(e.Id),i=n.generate([r]);return t.getCourseProgress(i[0])},this.getQuizCourseId=function(e){return t(e).Id}}).dependencies("CoursesManager"),Tt.register("BILogger").asCtor(function(a,s,l,e,t,n,r,u,i){var c=this,d=!1;function f(){return u({browserName:o((e=i()).browser,"name"),browserVersion:o(e.browser,"version"),mobile:e.mobile,os:o(e.os,"name"),env:e.env,euId:e.euId,euIdSource:e.euIdSource,permId:e.permId,platform:e.platform,uId:e.uId,local:e.local,libVersion:e.libVersion,publishDate:e.publishDate});var e}function o(e,t){return e?e[t]:undefined}c.send=function(e,t){if(c.isEnabled()){d||(a.setStaticData("Wm-Eu-Data",f()),d=!0);try{var n=l.toJSON((r=e,(i=t).time=(new Date).getTime(),{ns:r,data:u(i)}));a.send(n)}catch(o){throw s&&s.logError(l.toJSON(o.message)),o}var r,i}},c.isEnabled=function(){return e.isEnabled()},function(){}.apply(this,arguments)}).dependencies("DataSenderBI,EventSenderErrorLogger,JsonUtils,EventsCollectorAuditingEnabledIndicator,Base64,FeaturesManager,Consts, WMObjectNameObfMapper,StaticWMDataProvider"),Tt.register("ThrottledBILogger").asCtor(function(e,n){var r,t=this;t.send=function(e,t){if(!r||!n.gamble())return;r.send(e,t)},t.isEnabled=function(){return Math.random()<.01||e.isFeatureEnabled("forcePerfLogs")},function(){if(!t.isEnabled())return;r=Tt.get("BILogger")}.apply(this,arguments)}).dependencies("FeaturesManager, SlowlyDyingChanceCalculator"),Tt.register("PerformanceDataIntegrityKeeper").asCtor(function(e){this.onViolation=function(e){if("visible"!=document.visibilityState)return e();document.addEventListener("visibilitychange",e,!1)},this.unbind=function(e){document.removeEventListener("visibilitychange",e,!1)},this.isEnabled=function(){return"visibilityState"in document&&document.addEventListener}}).dependencies("CommonUtils"),Tt.register("EventBinder").asCtor(function(){function i(e,t,n){return e.on(t,n)}this.bind=i,this.unbind=function(e,t,n){return e.off(t,n)},this.bindBySelector=function(e,t,n,r){return i(Et(e).find(t),n,r)}}),Tt.register("EventCollectorUserDataProvider").asCtor(function(e){this.getUserVars=function(){return{name:e.getPropertyValue("name"),role:e.getPropertyValue("role"),type:e.getPropertyValue("type"),status:e.getPropertyValue("status"),info:e.getPropertyValue("info")}}}).dependencies("AnalyticsPropertiesManager"),Tt.register("DeployableTypeToEventSenderAppTypeMapper").asCtor(function(t){var n;this.map=function(e){return e in n?n[e]:t.EVENT_SENDER_EVENT_APPS.None},function(){(n={})[t.DEPLOYABLE_TYPE.Task]=t.EVENT_SENDER_EVENT_APPS.Task,n[t.DEPLOYABLE_TYPE.Tutorial]=t.EVENT_SENDER_EVENT_APPS.Walkthru,n[t.DEPLOYABLE_TYPE.Shuttle]=t.EVENT_SENDER_EVENT_APPS.Shuttle,n[t.DEPLOYABLE_TYPE.Launcher]=t.EVENT_SENDER_EVENT_APPS.Launcher,n[t.DEPLOYABLE_TYPE.Content]=t.EVENT_SENDER_EVENT_APPS.Content,n[t.DEPLOYABLE_TYPE.ShoutOut]=t.EVENT_SENDER_EVENT_APPS.ShoutOut,n[t.DEPLOYABLE_TYPE.Survey]=t.EVENT_SENDER_EVENT_APPS.Survey,n[t.DEPLOYABLE_TYPE.AbExperiment]=t.EVENT_SENDER_EVENT_APPS.AbTesting,n[t.AUDIT_TYPE.OPEN_TICKET]=t.EVENT_SENDER_EVENT_APPS.Ticket,n[t.DEPLOYABLE_TYPE.BusinessSolution]=t.EVENT_SENDER_EVENT_APPS.BizFlow}.apply(null,arguments)}).dependencies("Consts"),Tt.register("ReportInitiatorMapper").asCtor(function(r,i){function t(e){if(e){var t={};r.setIfDefined(t,e.objectId,"id"),r.setIfDefined(t,e.type,"type");var n=function(e){if(e.appType)return e.appType;return e.type?i.map(e.type):null}(e);return r.setIfDefined(t,n,"appType"),t}}this.map=t,this.mapForExtend=function(e){return{pInit:t(e)}}}).dependencies("Mapper, InitiatorTypeToAppTypeMapper"),Tt.register("InitiatorTypeToAppTypeMapper").asCtor(function(n){var t;function r(e){return t[e]}this.map=r,this.mapBbcodeInitiator=function(e){if(!e)return undefined;var t=r(e.type);return{objectId:e.objectId,type:n.STEP_PLAY_INITIATOR_ENUM.BBCODE,appType:t}},function(){(t={})[n.STEP_PLAY_INITIATOR_ENUM.LAUNCHER]=n.EVENT_SENDER_EVENT_APPS.Launcher,t[n.STEP_PLAY_INITIATOR_ENUM.TASK]=n.EVENT_SENDER_EVENT_APPS.Task,t[n.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT]=n.EVENT_SENDER_EVENT_APPS.ShoutOut,t[n.STEP_PLAY_INITIATOR_ENUM.WALKTHRU]=n.EVENT_SENDER_EVENT_APPS.Walkthru,t[n.STEP_PLAY_INITIATOR_ENUM.STEP]=n.EVENT_SENDER_EVENT_APPS.Step,t[n.STEP_PLAY_INITIATOR_ENUM.RESTART_SWT]=n.EVENT_SENDER_EVENT_APPS.BizFlowStep,t[n.STEP_PLAY_INITIATOR_ENUM.BBCODE]=n.EVENT_SENDER_EVENT_APPS.BizFlowStep,t[n.STEP_PLAY_INITIATOR_ENUM.BRANCHING]=n.EVENT_SENDER_EVENT_APPS.BizFlowStep}.apply(null,arguments)}).dependencies("Consts"),Tt.register("InitiatorTypeToDeployableTypeMapper").asCtor(function(n){var r;this.map=function(e){return r[e]},function(){var e=n.STEP_PLAY_INITIATOR_ENUM,t=n.DEPLOYABLE_TYPE;(r={})[e.LAUNCHER]=t.Launcher,r[e.TASK]=t.Task,r[e.SHOUTOUT]=t.ShoutOut,r[e.WALKTHRU]=t.Tutorial,r[e.STEP]=t.Step}.apply(null,arguments)}).dependencies("Consts"),Tt.register("StepActionToEventSenderActionAppTypeMapper").asCtor(function(n){var r;this.map=function(e){if(e in r)return r[e];return""},function(){var e=n.STEP_ACTION,t=n.EVENT_SENDER_EVENT_APPS;(r={})[e.PlayStep]=t.Step,r[e.Branch]=t.Walkthru}.apply(null,arguments)}).dependencies("Consts"),Tt.register("StepActionToEventSenderStepActionNameMapper").asCtor(function(n,t){var r;this.map=function(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'step action' to 'event sender action name' for step action: "+e),"")},function(){var e=n.STEP_ACTION,t=n.EVENT_SENDER_STEP_ACTION_NAMES;(r={})[e.Redirect]=t.Redirect,r[e.PlayStep]=t.PlayStep,r[e.WaitForCondition]=t.WaitForCondition,r[e.Branch]=t.Branch,r[e.StopWt]=t.StopWt,r[e.Delay]=t.Delay,r[e.Refresh]=t.Refresh,r[e.OpenPlayerMenu]=t.OpenPlayerMenu,r[e.SetWalkMeData]=t.SetWalkMeData,r[e.PassOwnership]=t.PassOwnership}.apply(null,arguments)}).dependencies("Consts, Logger"),Tt.register("BizFlowStepActionToEventSenderActionAppTypeMapper").asCtor(function(n){var r;this.map=function(e){if(e in r)return r[e];return""},function(){var e=n.FLOW_ACTION_TYPE,t=n.EVENT_SENDER_EVENT_APPS;(r={})[e.ConnectToBizflow]=t.BizFlow}.apply(null,arguments)}).dependencies("Consts"),Tt.register("BizFlowStepActionToEventSenderStepActionNameMapper").asCtor(function(n,t){var r;this.map=function(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for step action: "+e),"")},function(){var e=n.FLOW_ACTION_TYPE,t=n.EVENT_SENDER_STEP_ACTION_NAMES;(r={})[e.Redirect]=t.Redirect,r[e.WaitForCondition]=t.WaitForCondition,r[e.ConnectToBizflow]=t.Branch,r[e.Stop]=t.StopWt,r[e.Delay]=t.Delay,r[e.Refresh]=t.Refresh,r[e.OpenMenu]=t.OpenPlayerMenu,r[e.Style]=t.Style,r[e.SetData]=t.SetWalkMeData,r[e.PassOwnership]=t.PassOwnership,r[e.ErrorHandling]=t.ErrorHandling,r[e.Split]=t.Split,r[e.RestartSwt]=t.RestartSwt}.apply(null,arguments)}).dependencies("Consts, Logger"),Tt.register("BizFlowOnPageActionTypeToEventSenderStepActionNameMapper").asCtor(function(n,t){var r;this.map=function(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for On-Page-Action: "+e),"")},function(){var e=n.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE,t=n.EVENT_SENDER_STEP_ACTION_NAMES;(r={})[e.Click]=t.OnPageActionClick,r[e.Hover]=t.OnPageActionHover,r[e.Focus]=t.OnPageActionFocus,r[e.FillText]=t.OnPageActionFillText,r[e.SelectListValue]=t.OnPageActionSelectListValue}.apply(null,arguments)}).dependencies("Consts, Logger"),Tt.register("InteractionEventsInitiatorsProvider").asCtor(function(e,r,t,n){var i;function o(e,t){var n=r.get(t);i.push({eventName:e,callback:n.initiateInteraction})}this.get=function(){return i},function(){i=[],o(e.EVENTS.PlayerClicked),o(e.EVENTS.Launchers.LauncherClicked),o(e.EVENTS.AutoStart.Activated),o(e.EVENTS.PermalinkClicked),o(e.EVENTS.ApiWasCalled,t),o(e.EVENTS.WidgetOpening,n)}.apply(this,arguments)}).dependencies("Consts, InteractionEventInitiatorFactory, ApiWasCalledNewInteractionIndicator, WidgetOpenedNewInteractionIndicator"),Tt.register("InteractionManager").asCtor(function(e,t){var n,r;this.getCurrentInteractionGuid=function(){if(!n)return null;return n},this.setCurrentInteractionGuid=function(e){n=e},this.beginNewInteraction=function(){n=e.generateGuid(),r("New interaction guid was created : "+n,3)};var i="interaction";(function(){r=t.wrapCustomerLog(i)}).apply(this,arguments)}).asSingleton().dependencies("GuidGenerator, Logger"),Tt.register("InteractionInitiationEventListener").asCtor(function(e,r){function i(n){e.bind(n.eventName,function(e,t){n.callback(t)})}this.init=function(){for(var e=r.get(),t=0;t<e.length;t++){var n=e[t];i(n)}},function(){}.apply(this,arguments)}).dependencies("WmInternals, InteractionEventsInitiatorsProvider"),Tt.register("InteractionEventInitiatorFactory").asCtor(function(o){function t(i){this.initiateInteraction=function(e){t=e,r=(n=t)&&n.initiator&&n.initiator.type!=undefined?n.initiator.type:undefined,r&&(t.actualInitiatorType=r),e=t,(!i||i.shouldInitiateNewInteraction(e))&&o.beginNewInteraction();var t,n,r}}this.get=function(e){return new t(e)}}).dependencies("InteractionManager"),Tt.register("ApiWasCalledNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.CHAT_AGENT]};return Tt.create("NewInteractionIndicator",n)}),Tt.register("WidgetOpenedNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.ATTENTION_GRABBER]};return Tt.create("NewInteractionIndicator",n)}),Tt.register("NewInteractionIndicator").asCtor(function(t,e){var n;this.shouldInitiateNewInteraction=function(e){return e.actualInitiatorType==undefined||-1!=t(e.actualInitiatorType,n)},function(e){n=e.initiatorsThatBeginNewInteraction}.apply(this,[e])}).asProto().dependencies("inArrayFunc"),Tt.register("AuditingEnabledIndicator").asCtor(function(o,a,s,l,u,t,n){function r(){var e=!!window.wm_no_audit,t=!!o.getWindowCookie("wm-no-audit"),n=!a.isFeatureEnabled("blockJsonp")||u.hasCorsSupport(),r=s.get(),i=!!r.Settings&&!!r.Settings.noAuditCond&&Tt.get("ConditionTreeEvaluator").evaluate(r.Settings.noAuditCond);return n&&l.get()&&!a.isFeatureEnabled("noAudit")&&!e&&!t&&!i}this.isEnabled=r,this.shouldAudit=function(){var e=Tt.get("WalkMeInfo");return e.getEnvironmentId&&e.getEnvironmentId()!=t.SOURCES.preview&&!n.get()&&r()}}).dependencies("CommonUtils, FeaturesManager, SiteConfigManager, RecorderServerManager,CorsSupportIndicator, Consts, IsInEditor"),Tt.register("GoalsManagerParams").asInstance({checkInterval:2e3}),Tt.register("GoalsManager").asCtor(function(e,s,d,f,p,g,h,m,v){var y,S,E=500,t=5e3,T=this,w=null,C={},b=0,I={},_=0,P=!1;function c(a,e){var t=C[a.Id];if(t){if(a.IsLinkedGoal){var s=v.formatString("Skipping goal watch - Goal is already watched : {0}, type: {1}",a.Name,a.GoalType);return y(s,3),null}T.removeGoalWatch(a.Id)}var n,r,i,o={trackUIChange:!0,evaluationPollingIntervalMs:w,featureName:p.GOALS.LOG_FEATURE,elementName:"Goal: "+a.Name},l=h.createOld(o);C[a.Id]=a,b++,r=e,i=l,I[(n=a).Id]={relatedObjectId:n.RelatedObjectId,goalType:n.GoalType,evaluator:i,goalCompletedFunc:r.goalCompletedFunc,identifier:r.identifier,interactionGuid:r.interactionGuid};var u=e.identifier,c=u?v.formatString(", PlayGuid of : {0}",u):"",s=v.formatString("Start watching Goal : {0}, type: {1} {2}",a.Name,a.GoalType,c);return y(s,3),l.onValueChanged(function(e){e&&k(a)}),l.onPreEvaluation(function(e,t){t||(P?P=!1:0===_&&(S=0,y("============================ CHECKING GOALS ==============================================================",2)),a.goalStart=(new Date).getTime()),g.sendAutomationEvent("CheckingGoal",{GoalId:a.Id,GoalName:a.Name});var n=t?" (async)":"",r=v.formatString("Goal: {0} - Checking Goal , id : {1}, type: {2}, RelatedObjectId: {3}{4}",a.Name,a.Id,a.GoalType,a.RelatedObjectId,n);y(r,3)}),l.onEvaluated(function(e,t){var n=(new Date).getTime(),r=n-a.goalStart,i=t?" (async)":"";if(s=v.formatString("Goal: {0} - checking finished, id : {1}, took {2} ms{3}",a.Name,a.Id,r,i),y(s,4),g.deprecatedRaiseEvent(p.EVENTS.Goals.ConditionEvaluated,{goal:a},{playGUID:u}),!t&&(S+=r,b<=++_&&(y("Done checking "+_+" Goals. took: "+S+" ms",2),y("============================ DONE CHECKING GOALS =========================================================",2),_=0),E<S)){y("Goals tracking time until now is "+S+" ms. It broke the time limit of "+E+" ms. Stopped tracking current goals.");var o=f.keysConfig.goals.blocked;f.getData(o.key)||(s=v.formatString("Goals tracking broke limit and was stopped - user id: {0}, end user id: {1}, time: {2}, browser: {3}, url: {4}",m.getUserGuid(),_makeTutorial.getEndUserId(),S,d.browser.string,window.location.href),_makeTutorial.Logger.error({},s),f.saveData(o.key,!0,o.expiry)),T.removeAllGoalsWatch()}}),a}function A(e){return I[e].evaluator}function k(e){y('Goal "'+e.Name+'" Reached! ',1);var t,n,r=e.Id,i=I[r],o=T.createGoalCompletedParams(e,i);try{i.goalCompletedFunc&&i.goalCompletedFunc(o)}catch(a){s.error(a,"completing goal callback threw an exception.")}T.removeGoalWatch(e.Id),g.raiseEvent(p.EVENTS.Goals.GoalReached,{goal:n=e,identifier:(t=i).identifier,interactionGuid:t.interactionGuid,GoalId:n.Id,GoalName:n.Name}),g.sendAutomationEvent(p.EVENTS.Goals.GoalReached,{GoalId:e.Id,GoalName:e.Name})}this.addGoalsWatch=function(e,t){for(var n=e.length-1;0<=n;n--)for(var r=e[n],i=e.length-1;n<i;i--){var o=e[i];r.Id==o.Id&&e.splice(i,1)}for(var a=[],n=0;n<e.length;n++){var s=c(e[n],t);s&&a.push(s)}for(var n=0;n<a.length;n++){var l=a[n],u=A(l.Id);u.evaluateAsync(l.Settings.Conditions)}},this.cleanResources=function(){for(var e in C){var t=A(e);t&&t.cleanResources()}},this.removeGoalWatch=function(e){if(y(e,5,"goalProblem"),y(C[e],5,"goalProblem"),C[e]){var t=A(e);--b,0==--_&&0<b&&(P=!0),t&&t.cleanResources(),delete C[e],delete I[e]}},this.removeAllGoalsWatch=function(){T.cleanResources(),C={},I={},_=b=0},this.completeGoalById=function(e){var t=C[e];t?k(t):y("Could not complete goal with id "+e+" - it was already completed or does not exist.",3)},T.createGoalCompletedParams=function(e,t){var n={Id:e.Id,GoalType:t.goalType,RelatedObjectId:t.relatedObjectId,Name:e.Name,identifier:t.identifier,interactionGuid:t.interactionGuid};return n},T.getGoalsCountFromDictionary=function(){var e=T.getCheckedGoals(),t=0;for(var n in e)C[n]!=undefined&&C[n].Id!=undefined&&C[n].Settings!=undefined&&t++;return t},function(){w=e.checkInterval==undefined?t:e.checkInterval,y=s.wrapCustomerLog(p.GOALS.LOG_FEATURE)}.apply(null,arguments),T.getCheckedGoals=function(){return C},T.getGoalsCompletionParams=function(){return I}}).dependencies("GoalsManagerParams, Logger, HostData, ClientStorageManager, Consts, CommonEvents, ConditionCheckerFactory, UserGuidContainer, StringUtils"),Tt.register("WalkMeGoalsManager").asCtor(function(l,h,i,o,e,t,n,r,m,s,a,u,v,y){var c=this;c.onGoalCompleted=function(e){b.push(e)},c.enableMultiUserStorage=function(){g=!0},c.startWatchingDeployable=function(e,t){var n=O(e);if(0<n.length){var r=n[0].GoalType,i=(p=t,(g={})[E]=F(e),g[T]=p,g[w]=[],g[C]=m.getCurrentInteractionGuid(),g);u=r,c=t,d=i,f=F(l=e),L(u,F(l),d),x(u,f,c);var o=P(i);h.addGoalsWatch(n,o);var a=v.getDeployableTypeNameByTypeNumber(r),s=y.formatString("Started watching {0} : {1}",a,e.Name);S(s,2)}var l,u,c,d,f;var p,g},c.stopWatchingDeployables=function(e){t=e,n=V(t),l.removeData(n);var t,n},c.init=function(e){var t=k(!0);S("Restoring watched Goals... "+t+" Walk-Thrus are watched.",2),e&&n.libSetTimeout(A,_)},c.getCompletedGoals=function(e,t){if(e==undefined||!t)return;var n=U(e);if(!n)return;var r=n[t];if(!r)return;var i=r[T],o=r[w];return{playGuid:i,finishedGoals:o}},c.getDeployableGoalsByIdAndType=M,c.getWatchedDeployablesOfType=U,c.getGoalsFromDeployable=O,c.getGoalById=function(e,t){for(var n,r=0;r<e.length;r++)if(e[r].Id==t){n=e[r];break}return n};var S,d,f=3600,p="wm-wtchd",E="tID",T="plgd",w="fnsh",C="igd",g=!1,b=[],I={},_=2e3;function P(e){var t=e[T],n=(e[w],e[C]),r={identifier:t,interactionGuid:n,goalCompletedFunc:B};return r}function A(){var e=k(!1);e&&S("New watched deploybles... "+e+" more items are now watched.",2),n.libSetTimeout(A,_)}function k(o){var a=0;return mtjQuery.each(s.DEPLOYABLE_TYPE,function(e,t){var n=U(t);for(var r in n)if(n[r]!=undefined&&n[r][E]!=undefined){var i=n[r];(o||D(t,i))&&(R(i,t),a++)}}),a}function D(e,t){if(!I[e])return!0;var n=t[E];return I[e][n]!=t[T]}function N(e,t,n,r){"true"==e?r(parseInt(e)):"error"==e?(S("Completed goal - Internal Error",3),n()):(S("Completed goal - Unknown Error",3),t())}function O(e){var t=e.Goals;return t||(t=[]),t.slice()}function x(e,t,n){I[e]=I[e]||{},I[e][t]=n}function L(e,t,n){var r=V(e);l.addToDictionary(r,t,n,f)}function F(e){return e.Id?e.Id:e.TutorialId}function M(e,t){var n=i.get(t),r=n.getById(e);return r?O(r):[]}function R(e,t){var n=e[E],r=M(n,t);if(0<r.length){var i=e[T],o=e[w];!function(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var o=e[i].Id;if(o==r){e.splice(i,1);break}}}(r,o),x(t,n,i);var a=P(e);h.addGoalsWatch(r,a)}}var B=function(e){var t=o.getEnvironmentId();t!=s.SOURCES.preview&&function(e){if(!a.isEnabled())return;S("Sending completed Goal info to server ("+e.Name+", "+e.identifier+")",3),d.sendData({Id:e.Id,GoalType:e.GoalType,identifier:e.identifier})}(e),function(e){var t=U(e.GoalType)[e.RelatedObjectId];if(t&&e.identifier==t[T]){t[w].push(e.Id);var n=t[w].length,r=M(e.RelatedObjectId,e.GoalType).length;r==n?(i=e.GoalType,o=e.RelatedObjectId,a=V(i),l.removeFromDictionary(a,o,f)):L(e.GoalType,e.RelatedObjectId,t)}var i,o,a;for(var s=0;s<b.length;s++)b[s](e)}(e)};function U(e){var t=V(e),n=l.getData(t,{});return n}function V(e){var t=y.formatString("{0}-{1}",p,e);if(g){var n=o.getEndUserGuid();n&&(t+="-"+n)}return t}(function(){S=t.wrapCustomerLog(s.GOALS.LOG_FEATURE),d=e.register("go",{actionUrl:"/Statistics/AddCompletedGoal",technicalSuccessHandler:N,defaultDataStorageLifeSeconds:f,prefixForStorage:"go",sendingThreshold:1,dataType:"deployable goal",requestParamsFunc:function(e){var t,n,r=e[0],i=r.GoalType==s.DEPLOYABLE_TYPE.AbExperiment;return{goalId:r.Id,playGuid:r.identifier,permutationId:o.getPermutationId(),endUserGuid:o.getEndUserGuid(),source:o.getEnvironmentId(),localTime:(t=new Date,n=60*t.getTimezoneOffset()*1e3,t.getTime()-n),url:u.get(),isAbTesting:i}}})}).apply(null,arguments)}).dependencies("ClientStorageManager,GoalsManager,DeployablesManagerFactory,WalkMeInfo,ServerDataSenderManager,Logger,TimerManager,CommonEvents, InteractionManager, Consts, AuditingEnabledIndicator, SafeFullUrlProvider, DeployableTypeNameProvider,StringUtils");var Be=function(){function e(e,t,n,r){this.balloonSettingsKey="stepHlObj",this._element=null,this.settings=null,this.highlighterDivs=[],this.balloonSettings={},this._logger=e,this._commonUtils=t,this._lib=r.lib,this._drawableType=r.drawableType,this._drawableId=r.drawableId,this._useDefaultSettings=r.defaultSettings,this._cssKeysValues=r.cssKeysValues,this._useExistingHighlighter="undefined"!=typeof r.useExistingHighlighter&&r.useExistingHighlighter,this._useExisitingHighlighterArray=r.useExisitingHighlighterArray,this._highlighterService=Tt.get("HighlighterService"),this._element=r.element,this.balloonSettings=r.settings,this.customerLog=e.wrapCustomerLog(n.HIGHLIGHTER.LOG_FEATURE)}return e.prototype.shouldShow=function(){},e.prototype.getSettings=function(e,t){return this._highlighterService.getDefaultSettings()},e.prototype.init=function(e){this.settings=this.initSettings(e,this._useDefaultSettings),this._cssClasses=this._highlighterService.generateCssClasses(this.getInstanceName(),this._cssKeysValues)},e.prototype.initSettings=function(e,t){var n=this.getSettings(e,t),r=this._commonUtils.getSettingsValue(e,this.balloonSettingsKey);return!t&&r&&(this._highlighterService.copyFloatProperties(n,r),n.color=r.color||n.color),n},e.prototype.highlight=function(e){try{this.unhighlightElement(),this.createHighlighterDivs(),this.applyStyle(this.highlighterDivs)}catch(t){this._logger.error(t)}},e.prototype.createHighlighterDivs=function(){for(var e=0;e<4;e++)this.highlighterDivs.push(this.createHighlighterDiv(e))},e.prototype.removeHighlighterDiv=function(e){if(e)try{e.remove()}catch(t){this.customerLog("[highlighter] error removing div",3)}},e.prototype.createHighlighterDiv=function(e){var t=this._highlighterService.generateId(this.getClassName(),this._drawableType,e,this._drawableId),n=this.createDiv(t);return n.addClass(this._cssClasses),n.addClass("walkme-custom-"+this.getInstanceName()+"-position-"+e),n},e.prototype.unhighlightElement=function(){for(var e=0;e<this.highlighterDivs.length;e++)this.removeHighlighterDiv(this.highlighterDivs[e]);this.highlighterDivs.length=0},e}(),Ue=function(d){function f(e,t,n,r,i,o,a,s,l){var u=d.call(this,o,t,n,l)||this;u._embeddedElements=[],u._consts=n,u._commonUtils=t,u._siteConfigManager=e,u._highlighterService=r,u._positionHelper=i,u._customerLog=o.wrapCustomerLog(n.HIGHLIGHTER.LOG_FEATURE),u._element=l.element,u._drawableId=l.drawableId,u._drawableType=l.drawableType,u._cssKeysValues=l.cssKeysValues,u._embedInElement=l.embedInElement,u._balloonSettings=l.settings,u._useDefaultSettings=l.defaultSettings,u._shouldDrawInSetTimeout=a.isIEOlderThan(8);var c=u._commonUtils.getSettingsValue(u._balloonSettings,f.STEP_HL_OBJ);return u._settings=u.getSettings(c,l.defaultSettings),u._monitor=l.monitor&&!u._settings.doNotHideOnHover,u._handlerEnterWrapper=Et.proxy(u.handlerEnter,u),u._handlerLeaveWrapper=Et.proxy(u.handlerLeave,u),u._processNum=0,u._featuresManager=s,u._features=n.FEATURES,u}return Ie(f,d),f.prototype.shouldShow=function(){return this._highlighterService.shouldShow(this._balloonSettings)},f.prototype.applyStyle=function(){var e=this;return this._customerLog("Highlighter applyStyle start creating highlighter",3),at.all([this.embedHighliterDiv(this._consts.POSITION_TYPE.Top),this.embedHighliterDiv(this._consts.POSITION_TYPE.Right),this.embedHighliterDiv(this._consts.POSITION_TYPE.Bottom),this.embedHighliterDiv(this._consts.POSITION_TYPE.Left)]).then(function(){e._customerLog("Highlighter applyStyle finished creating highlighter",3)})},f.prototype.embedHighliterDiv=function(t){var n=this,e=this._element,r=this._settings.thickness,i=this._settings.color,o=this._settings.zIndex;this._customerLog("embed Highlighter to div"+this._element,3);var a=this._consts.POSITION_PERIMETER_TYPE.Outside,s=this.createDiv(t),l=this._positionHelper.getMultipleElementsRect(e),u=l.right-l.left,c=l.bottom-l.top;switch(t){case this._consts.POSITION_TYPE.Top:case this._consts.POSITION_TYPE.Bottom:s.css({height:r+"px",width:u+2*r+this._settings.width+"px","background-color":i,"z-index":o});break;case this._consts.POSITION_TYPE.Right:case this._consts.POSITION_TYPE.Left:s.css({height:c+2*r+this._settings.height+"px",width:r+"px","background-color":i,"z-index":o});break;default:return}var d=Tt.get("ElementEmbedderFactory").get(Et(this._element),this._embedInElement);return d.embed(s,a,t).then(function(){var e=d.getElement();n.applyDivSettings(e.getOriginElement(),t),n._embeddedElements.push(e.getTopMostElement())})},f.prototype.createDiv=function(e){var t=this._highlighterService.generateId(f.CLASS_NAME,this._drawableType,e,this._drawableId),n=this._highlighterService.generateCssClasses(f.INSTANCE_NAME,this._cssKeysValues),r=Et("<div/>",{id:t,"class":n+=" walkme-custom-highlighter-position-"+e,style:"position:absolute; left: 0px; top: 0px;"});return this._customerLog("Highlighter createDiv id="+t+" classes="+n,3),r},f.prototype.applyDivSettings=function(e,t){var n=parseFloat(e.css("top").replace("px","")),r=parseFloat(e.css("left").replace("px",""));switch(this._customerLog("Highlighter applyDivSettings before top="+n+" left="+r,3),t){case this._consts.POSITION_TYPE.Top:n=n+this._settings.top-this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Bottom:n=n+this._settings.top+this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Right:n=n+this._settings.top+"px",r=r+this._settings.left+this._settings.width/2+"px";break;case this._consts.POSITION_TYPE.Left:n=n+this._settings.top+"px",r=r+this._settings.left-this._settings.width/2+"px"}this._customerLog("Highlighter applyDivSettings after top="+n+" left="+r,3),e.css({top:n,left:r})},f.prototype.getSettings=function(e,t){var n=this._highlighterService.getDefaultSettings();return t?(n.color=f.DEFAULT_COLOR,n.thickness=f.DEFAULT_THINKNESS):(this._highlighterService.copyFloatProperties(n,e),n.color=n.color||this._siteConfigManager.get().BalloonSettings.HighlighterColor||f.DEFAULT_COLOR,n.thickness=n.thickness||this._siteConfigManager.get().BalloonSettings.HighlighterThickness||f.DEFAULT_THINKNESS),n.zIndex=this.getZIndex(),this._customerLog("Highlighter getSettings highlight settings",3),this._customerLog(n,3),n},f.prototype.getZIndex=function(){var e=this.getDefaultZIndex();return this._commonUtils.getSettingsValue(this._balloonSettings,"z-index",e)},f.prototype.getDefaultZIndex=function(){return this._shouldDrawInSetTimeout?f.DEFAULT_ZINDEX-1:f.DEFAULT_ZINDEX},f.prototype.highlight=function(e){return this._processNum++,this.unhighlightElement(),this.drawAndHandleEvents()},f.prototype.drawAndHandleEvents=function(){var t=this;return this.applyStyle().then(function(){var e=1<t._processNum;if(t._monitor&&(t.unregisterMonitorEvents(),t._commonUtils.registerEventHandler(f.ENTER_ELEMENT_EVENT,t._handlerEnterWrapper,!0,t._element[0]),t._commonUtils.registerEventHandler(f.EXIT_ELEMENT_EVENT,t._handlerLeaveWrapper,!0,t._element[0])),t._processNum--,t._featuresManager.isFeatureEnabled(t._features.BalloonShowDestroySync))return e})},f.prototype.handlerEnter=function(){Et.each(this._embeddedElements,function(e,t){t.hide()})},f.prototype.handlerLeave=function(){Et.each(this._embeddedElements,function(e,t){t.show()})},f.prototype.unregisterMonitorEvents=function(){try{this._commonUtils.unregisterEventHandler(f.EXIT_ELEMENT_EVENT,this._handlerLeaveWrapper,!0,this._element[0]),this._commonUtils.unregisterEventHandler(f.ENTER_ELEMENT_EVENT,this._handlerEnterWrapper,!0,this._element[0])}catch(e){}},f.prototype.unhighlightElement=function(){this.unregisterMonitorEvents(),Et.each(this._embeddedElements,function(e,t){t.remove()}),this._embeddedElements=[]},f.prototype.getClassName=function(){return f.CLASS_NAME},f.prototype.getInstanceName=function(){return f.INSTANCE_NAME},f.STEP_HL_OBJ="stepHlObj",f.DEFAULT_COLOR="#55aaff",f.DEFAULT_ZINDEX=2147483630,f.DEFAULT_THINKNESS=1,f.INSTANCE_NAME="highlighter",f.CLASS_NAME="highlightDiv",f.ENTER_ELEMENT_EVENT="mouseover",f.EXIT_ELEMENT_EVENT="mouseout",f}(Be);Tt.register("Highlighter").asCtor(Ue).asProto().dependencies("SiteConfigManager, CommonUtils, Consts, HighlighterService, PositionHelper, Logger, HostData, FeaturesManager"),Tt.register("HighlighterService").asCtor(function(e,r,i,t){this.shouldShow=function(e){var t=i.getSettingsValue(r.get().Settings,"hlType","none"),n=i.getSettingsValue(e,"hlType",t);return"rect"===n},this.generateId=function(e,t,n,r){var i=e+"-"+t+"-"+n+"-"+r;return i},this.generateCssClasses=function(e,t){var n="walkme-custom-"+e+" walkme-to-remove ";if(t)for(var r=0;r<t.length;r++)n+=" walkme-custom-"+e+"-"+t[r].name+"-"+t[r].id;return n},this.copyFloatProperties=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(i.isNumber(t[n])?e[n]=parseFloat(t[n]):e[n]=t[n])},this.getDefaultSettings=function(){return{left:0,top:0,width:0,height:0}},function(){t.wrapCustomerLog(e.HIGHLIGHTER.LOG_FEATURE)}.apply(null,arguments)}).asProto().dependencies("Consts, SiteConfigManager, CommonUtils, Logger"),Tt.register("HighlighterSettingsProvider").asCtor(function(i,e){this.getHighlighterSettings=function(e,t,n){var r={element:t,settings:e,embedInElement:i.getSettingsValue(e,"embed",!1),drawableType:"balloon",drawableId:n.balloonEntityId,monitor:!n.isViewStep&&!n.isCapture,defaultSettings:!!n.isCapture,cssKeysValues:[{id:n.balloonEntityId,name:"step"},{id:n.containerEntityId,name:"walkthru"}]};return r},function(){}.apply(null,arguments)}).dependencies("CommonUtils");var Ve=function(d){function e(e,t,n,r,i,o,a,s,l,u){var c=d.call(this,e,r,l,u)||this;return c.topMostCssStyleSettter=a,c.STEP_IO_OBJ="stepIoObj",c.DEFAULT_ZINDEX="2147483629",c.DEFAULT_COLOR="#000000",c.containerDiv=null,c._hostData=t,c._positionHelper=n,c._siteConfigManager=i,c._elementInIframeIndicator=o,c._commonEvents=s,c._consts=l,c.balloonSettingsKey=c.STEP_IO_OBJ,d.prototype.init.call(c,u.settings),c}return Ie(e,d),e.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},e.prototype.getSettings=function(e,t){var n=d.prototype.getSettings.call(this,e,t);return n.color=this.DEFAULT_COLOR,n.opacity=.5,n.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),n},e.prototype.getDocumentSize=function(){var e=Et(document),t=document.documentElement.clientWidth;return{height:e.height(),width:t}},e.prototype.getContainer=function(){return Et(document).find("body")},e.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else t=1<this._element.length?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect(),r=this._positionHelper.getOffsetRect(n,i,window);var a=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(a.x,a.y,a.w,a.h,e),this._commonEvents.raiseEvent(this._consts.EVENTS.SpotlightCreated,{spotlightDivs:e})},e.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},e.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin(),s=[0,o.height],l=s[0],u=s[1];this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],l,e+n,Math.floor(o.width-n-e),u),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],l,0,e-.5,u)},e.prototype.setDivCss=function(e,t,n,r,i){e&&e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("position","absolute").css("background-color",this.settings.color)},e.prototype.createContainerDiv=function(){var e=this._highlighterService.generateId(this.getClassName(),this._drawableType,"main",this._drawableId),t=Et('<div id="'+e+'" class="wm-insideouter-container" />').addClass(this._cssClasses).appendTo(this.getContainer());return this.setCssStyle(t,this.settings.zindex),t.css("opacity",this.settings.opacity).css("background-color","").css("display","block").css("top",0).css("left",0).css("width",0).css("height",0),t},e.prototype.createHighlighterDivs=function(){this.containerDiv&&this.unhighlightElement(),this.containerDiv=this.createContainerDiv(),d.prototype.createHighlighterDivs.call(this)},e.prototype.unhighlightElement=function(){this.containerDiv&&this.containerDiv.remove(),this.containerDiv=null,this.highlighterDivs.length=0},e.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},e.prototype.createDiv=function(e){var t=Et("<div id="+e+" />");return this.containerDiv.append(t),t},e.prototype.getInstanceName=function(){return"insideouter"},e.prototype.getClassName=function(){return"insideoutDiv"},e}(Be);Tt.register("Insideout").asCtor(Ve).asProto().dependencies("Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter, CommonEvents, Consts");var We=function(c){function e(e,t,n,r,i,o,a,s,l){var u=c.call(this,t,i,e,l)||this;return u.topMostCssStyleSettter=s,u.STEP_IO_OBJ="stepIoObj",u.DEFAULT_ZINDEX="2147483629",u.DEFAULT_COLOR="#000000",u._hostData=n,u._positionHelper=r,u._siteConfigManager=o,u._elementInIframeIndicator=a,u.balloonSettingsKey=u.STEP_IO_OBJ,c.prototype.init.call(u,l.settings),u}return Ie(e,c),e.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},e.prototype.getSettings=function(e,t){var n=c.prototype.getSettings.call(this,e,t);return n.color=this.DEFAULT_COLOR,n.opacity=.5,n.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),n},e.prototype.getDocumentSize=function(){var e=Et(document),t=document.documentElement.clientWidth;return{height:e.height(),width:t}},e.prototype.getContainer=function(){return Et(document).find("body")},e.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else t=1<this._element.length?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect(),r=this._positionHelper.getOffsetRect(n,i,window);var a=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(a.x,a.y,a.w,a.h,e)},e.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},e.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin();this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],t,e+n,Math.floor(o.width-n-e),r),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],t,0,e-.5,r)},e.prototype.setDivCss=function(e,t,n,r,i){e&&(this.setCssStyle(e,this.settings.zindex),e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("background-color",this.settings.color).css("opacity",this.settings.opacity))},e.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},e.prototype.createDiv=function(e){var t=Et("<div id="+e+" />");return Et(document).find("body").append(t),t},e.prototype.getInstanceName=function(){return"insideouter"},e.prototype.getClassName=function(){return"insideoutDiv"},e}(Be);Tt.register("OldInsideout").asCtor(We).asProto().dependencies("Consts, Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter"),Tt.register("Animator").asCtor(function(n,u,r,c,s,i,o){var d,a=this,l=null,f=null,p=null,g=!1,e=!0,h=!1,m=!1,v=!1,y=null,S=!1,E=!1,T=!1,w=null,C=null,b=[],I=null,_=null,P=1,A="animations",k="marginRight",D=250,N=.3,O=50,x={0:"Top",1:"Left",2:"Top",3:"Left"},L={InitCSS:{display:"inline"},Properties:{},Options:{}};function F(e){return mtjQuery.extend({},e)}function M(){m&&(w.children(":visible").addClass("walkme-balloon-hidden-content").css("display","none"),V(t))}function R(){if(h||T){var e=(t=w,n=function(){{if(h)return J;if(T)return K}}(),r={position:"absolute",top:t.css("top"),left:t.css("left"),height:t.height(),width:t.width(),zIndex:t[0].style.zIndex},i=mtjQuery("<div />").css(r),t.css({top:0,left:0}).wrap(i),n(i,t),r);a.postAnimation(function(){!function(e){T&&(w.css("bottom",""),w.css("right",""));w.unwrap().css(e)}(e)})}var t,n,r,i}function B(e){for(var t=0;t<b.length;t++)"function"==typeof b[t]&&b[t].apply(null,arguments);b.length=0}function U(){w&&w.css(I)}function V(e){_.queue(A,e)}function W(){_.dequeue(A)}function j(e,t){!function(e,t,n){if(parseInt(e.margin)<0)switch(e.marginTop=0,e.marginLeft=0,e.marginRight=0,e.marginBottom=0,n){case i.Bottom:case i.Top:e.marginLeft=t.marginLeft;break;case i.Right:case i.Left:e.marginTop=t.marginTop}else e.marginTop=t.marginTop,e.marginLeft=t.marginLeft,e.marginRight=t.marginRight,e.marginBottom=t.marginBottom}(l,e,t),f.marginTop=e.marginTop,f.marginLeft=e.marginLeft,f.marginRight=e.marginRight,f.marginBottom=e.marginBottom,delete f.margin}function G(e,t,n){if(e){var r={};for(var i in e)if(e.hasOwnProperty(i)){var o=s.isDefined(t[i])?t[i]:i;if(r[o]=e[i],s.isDefined(n[o])){var a=r[o].toString().replace("px","");r[o]=n[o]*a+"px"}}return r}}function H(){!function(e){var u,c,d=z()?"marginTop":"marginLeft",f=y==r.POSITION_TYPE.Bottom||y==r.POSITION_TYPE.Right,p=f?1:-1,g=e.length-1;y==r.POSITION_TYPE.Top&&(u="border-top-width",c="borderTopWidth");y==r.POSITION_TYPE.Bottom&&(u="border-bottom-width",c="borderBottomWidth");y==r.POSITION_TYPE.Right&&(u="border-right-width",c="borderRightWidth");y==r.POSITION_TYPE.Left&&(u="border-left-width",c="borderLeftWidth");mtjQuery(e).each(function(e,t){this.css("visibility","hidden").css("display","block");var n=(parseInt(this.css(u),10)+2)*p,r=this.css(u),i=this[0].style.zIndex,o={};o[c]=r,o.opacity=1,f&&(o[d]=1);var a,s,l={};l.duration=D,l.complete=(a=this,s=i,function(){a.css(d,""),a.css("zIndex",s)}),e==g&&this.css("zIndex",i-1),this.css("visibility",""),f&&this.css(d,n),this.css(u,"0px"),this.animate(o,l)})}(C),n.setWalkmeTimeout(function(){W()},D)}function Y(){mtjQuery(C).each(function(){this.show().css("visibility","")}),W()}function z(){return y==r.POSITION_TYPE.Bottom||y==r.POSITION_TYPE.Top}function t(){w.children(".walkme-balloon-hidden-content").removeClass("walkme-balloon-hidden-content").fadeIn(250,function(){mtjQuery(this).css("direction",mtjQuery(this).css("direction"))})}function Q(){w.bind("click.wm_animation",function(){if(!S){S=!0;var e=0<parseInt(w.css(k))?k:"marginLeft";if(q(w,10,e),C)for(var t=0;t<C.length;t++)q(C[t],10,e)}}),w.find("button,a,.walkme-custom-balloon-close-button").bind("click.wm_animation",function(e){e.stopPropagation()})}function q(e,t,n){if(t<=0)return e.css(n,f[n]),void(S=!1);var r,i=parseInt(e.css(n))-(r=t)*N*(r%2*2-1),o=[];o[n]=i,e.animate(o,O,function(){q(e,t-1,n)})}function K(e,t){var n=parseInt(t.css("border-top-width"),10)+parseInt(t.css("border-bottom-width"),10),r=parseInt(t.css("border-left-width"),10)+parseInt(t.css("border-right-width"),10);t.css("top",""),t.css("left",""),t.css("bottom","-"+n+"px"),t.css("right","-"+r+"px")}function J(e,t){X(e,t),p.step=function(){X(e,t)}}function X(e,t){var n=e.height()/2-t.height()/2,r=e.width()/2-t.width()/2;t.css("top",n),t.css("left",r)}function $(){return!(g||!e)}this.disableAnimation=function(){e=!1},this.setPosition=function(e){y=e,function(){var e={},t={};z()?(e.size="height",e.osize="width"):(e.size="width",e.osize="height");!h&&f.size&&(y==r.POSITION_TYPE.Top&&"height"==e.size||y==r.POSITION_TYPE.Left&&"width"==e.size)&&(T=!0);t.marginTop=y==r.POSITION_TYPE.Bottom?-1:1,t.marginLeft=y==r.POSITION_TYPE.Right?-1:1,e.margin="margin"+x[y],f=G(f,e,t),l=G(l,e,t)}()},this.setPagePositionOffset=function(e,t){j(e,t)},this.postAnimation=function(e){e&&b.push(e)},this.prepare=function(e,t){C=t,I={filter:(w=e).css("filter")},_.clearQueue(A),c.isFeatureEnabled("dontPrepForScrl")||w.css({display:"block",visibility:"hidden",filter:""}),$()?(v&&C?V(H):b.push(Y),M(),R(),a.postAnimation(U),p.complete=B):a.postAnimation(Y),E&&a.postAnimation(Q)},this.animate=function(e){var t;w?(this.postAnimation(e),$()?(g=!0,function(e){!y&&l.margin&&(l.margin=0);mtjQuery(e).css({display:"none",visibility:""}).css(I).css(l)}(w),w.animate(f,p),t=p.duration*P,n.setWalkmeTimeout(W,t)):(mtjQuery(w).css({display:"inline",visibility:""}).css(I),B())):e&&e()},this.stop=function(){w.stop(!0,!1)},this.destroy=function(e){var t=w;if(C)for(var n=0;n<C.length;n++)try{t=t.add(C[n])}catch(l){}var r,i,o,a,s=function(){c.isFeatureEnabled(d.BalloonShowDestroySync)&&t&&t.stop(!0,!1),e&&e()};try{$()?(a=s,(o=t).removeAttr("id").find("div").removeAttr("id"),o.fadeOut(150,function(){u.destroyDivWithIframes(o,a)})):(r=t,i=s,u.destroyDivWithIframes(r,i))}catch(l){s()}},function(){d=r.FEATURES;var e=o.config;_=mtjQuery({});var t=e||L;l=F(t.InitCSS),f=F(t.Properties),p=F(t.Options),n=t.MetaData,n&&(h=s.defaultValue(n.center,!1),m=s.defaultValue(n.hwa,!1),v=s.defaultValue(n.are,!1),P=s.defaultValue(n.delay,1)),E=o.isVibrating;var n}.apply(null,arguments)}).asProto().dependencies("TimerManager, UiUtils, Consts, FeaturesManager, CommonUtils, Positions");var je;function je(u,e,t,p,n,r,i,o,g,a,s,l,h,c,d,f,m,v,y,S,E){var T,w,C,b=this;function I(e,t,n){for(var r=0,i=0;i<e.length;i++){if(t(e[i])&&n<=++r)return!0}return!1}function _(e){return e&&"string"==typeof e&&e.replace?e.replace(/,|\$|\u20AC|\u20AA|¥|¢|£/g,""):e}function P(t){var n=G.walkmeWrap;return n?function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),n.apply(this,e)}:t}function A(e){var t=document.createElement("script");return t.async=!0,t.src=e,t.id="mt_script",t}function k(e){document.getElementsByTagName("head")[0].appendChild(e)}function D(e){return null!=e&&e!=undefined}b.settingsFieldValid=i.settingsFieldValid,b.isSettingsValueExists=i.isSettingsValueExists,b.getSettingsValue=i.getSettingsValue,b.formatString=E.formatString,b.secureEvalJSON=S.secureEvalJSON,b.toJSON=S.toJSON,b.clone=S.clone,b.doAllMeetCondition=function(e,t){return I(e,t,e.length)},b.doesAnyMeetCondition=function(e,t){return I(e,t,1)},b.getInt=function(e,t){return b.isNumber(e)?parseInt(e,10):t},b.filter=d.filter,b.isNumber=function(e){return"boolean"!=typeof e&&!isNaN(e-0)},b.getJQueryElementFinder=function(){return Tt.get("JQueryElementFinder")},b.waitForCondition=function(r,i,o,a){var s=Et.Deferred();return function e(t){if(i<=t)return s.reject();var n=r();if(n)return s.resolve(n);a&&c.customerLog(a),u.libSetTimeout(function(){e(++t)},o)}(0),s.promise()},b.sendMenuEvent=function(e,t,n){try{var r={Type:e};t&&(r.WalkthruId=t),n&&window.mtjQuery.extend(r,n),w.raiseEvent(e,r),walkme_player_event(r)}catch(i){}},b.isIe7or8=function(){return e.isIE(8,"lte")},b.libSetTimeout=u.libSetTimeout,b.elementLastKeeper=Tt.get("ElementLastKeeper"),b.attentionGrabberFactory={create:function(e){return{setupAttenGrab:function(){return m.createAG(e)}}}},b.attentionGrabberClass=function(e){return{setupAttenGrab:function(){m.creataImageAG(e)},remove:function(e){m.remove(e)}}},b.isValidMailTo=function(e){return e&&0==e.indexOf("mailto:")},b.isValidUrl=function(e){return!e||0==e.indexOf("http")||0==e.indexOf("/")},b.setDefault=function(e,t,n){e[t]===undefined&&(e[t]=n)},b.isUiObjectActivatable=function(e){return"category"!=e.type()&&"tab"!=e.type()},b.isTrue=function(e,t,n){var r=b.getSettingsValue(e,t,n);return b.isValueTrue(r)},b.isValueTrue=function(e){return e&&(1==e||"True"==e||"1"==e)},b.isLike=function(e,t){t=(t=(t=t.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&")).replace(new RegExp("[.]","g"),"\\.")).replace(new RegExp("[*]","g"),".*"),e=e.toString().toLowerCase(),t=t.toLowerCase();try{return e.match(t)[0]==e}catch(n){return!1}},b.isBigger=function(e,t){return e=_(e),t=_(t),e=parseFloat(e),t=parseFloat(t),!(!b.isNumber(e)||!b.isNumber(t))&&t<e},b.isSmaller=function(e,t){return e=_(e),t=_(t),e=parseFloat(e),t=parseFloat(t),!(!b.isNumber(e)||!b.isNumber(t))&&e<t},b.addTabIndex=function(t,e,n){h.isFeatureEnabled("accessibility")&&(e=b.defaultValue(e,0),t.attr("tabIndex",e),t.keyup(function(e){13!=e.keyCode||e.shiftKey||(t.click(),e.stopPropagation())}))},b.handleAccessibleElement=function(e,t){b.addTabIndex(e),b.setRole(e,t)},b.setRole=function(e,t){e.attr("role",t||"complementary")},b.getCustomConfiguration=function(){var e=f.get();return(h.isFeatureEnabled("configurationTab")?e.Settings.configuration:e.Custom)||{}},b.isGradientUsingFilter=function(e){return-1==Et("<div style='"+e+"' />").css("background-image").indexOf("gradient")},b.handleCrossDomainError=function(e){if(n=(t=e)&&18==t.code,r=t&&t.message&&0<=t.message.indexOf("denied"),!n&&!r)throw e;var t,n,r},b.encloseCall=function(t){var e=function(e,t){for(var n=[],r=0;r<e.length;r++)t!=r&&n.push(e[r]);return n}(arguments,0);return function(){var e=arguments;return function(){return t.apply(null,e)}}.apply(null,e)},b.registerEventHandler=function(e,t,n,r){r=r||window;var i=P(t);return r.attachEvent?r.attachEvent("on"+e,i):r.addEventListener?r.addEventListener(e,i,!!n):c.customerLog("Element "+r+" doesnt support event handlers. Event: "+e,3),function(){b.unregisterEventHandler(e,i,n,r)}},b.unregisterEventHandler=function(e,t,n,r){(r=r||window).detachEvent?r.detachEvent("on"+e,t):r.removeEventListener&&r.removeEventListener(e,t,!!n)},b.setBodyUtils=function(e){T=e},b.getBody=function(e){return T.getBody(e)},b.postMessageToAllFramesChain=function(e,t){var n=0;if(e)try{e.postMessage(t,"*"),n++,e!=e.parent&&(n+=b.postMessageToAllFramesChain(e.parent,t))}catch(r){c.customerLog("Error in postMessage to frames chain "+r,4)}return n},b.postMessageToFrameAndDescendants=function(t,n){!function e(t,n){!function(e,t){try{e!=window&&e.postMessage(t,"*")}catch(n){}}(t,n);for(var r=t.frames,i=0;i<r.length;i++)e(r[i],n)}(t,n)},b.getFrameIndex=function(t){return function e(t,n){if(t==n)return{frameIndex:0};var r=0;for(var i=0;i<t.frames.length;i++){r++;var o=t.frames[i],a=e(o,n);if(a.frameIndex!==undefined)return a.frameIndex+=r,a;r+=a.totalFrames}return{totalFrames:r}}(top,t||window).frameIndex},b.doForFramesChain=function(e,t){if(e){try{t(e)}catch(n){}e!=e.parent&&b.doForFramesChain(e.parent,t)}},b.addScript=function(e,t,n){if(e){var r=A(e);t&&(r.onload=onloadRunner,r.onreadystatechange=onloadRunner),n&&(r.onerror=n),k(r)}},b.addScriptWithCallback=function(e,t,n,r){if(e&&t){var i,o,a,s=A(e),l=!1;n&&(i=t,o=function(){return l=!0,n.apply(this,arguments)},a=window._walkmeInternals[i],window._walkmeInternals[i]=function(e){return window._walkmeInternals[i]=a,o(e)}),r&&(s.readyState?s.onreadystatechange=function(){"loaded"!=s.readyState&&"completed"!=s.readyState||u.libSetTimeout(function(){!function(){if(l)return;r.apply(this,arguments)}()})}:s.onerror=r),k(s)}},b.checkElementText=function(e){return e.is("input")||e.is("textarea")?e.val():e.is("select")?e.find("option:selected").text():e.text()},b.getElementDocument=function(e){try{return e[0].ownerDocument}catch(t){}return document},b.nl2br=function(e){return e?e.replace(/\n/g,"<br/>"):""},b.getTimer=function(i){return new function(){var r=new Date;return function(e){var t=new Date,n=t-r;return i("Measurer - "+e+" ("+n+" ms)"),r=t,n}}},b.defaultValue=function(e,t){return void 0!==e&&null!=e?e:t},b.createElementInDocument=function(e,t){var n=t.createElement("div"),r=Et(n).html(e).children();return h.isFeatureEnabled(p.FEATURES.ShadowRootsInspector)&&r.find("[onclick]").each(function(e,t){var n=t.getAttribute("onclick");t.removeAttribute("onclick"),t.addEventListener("click",new Function(n))}),r},b.createIframe=function(e,t,n,r,i,o,a,s){o=o||Tt.get("TopContainerProvider").getTopContainer(null,!0)[0];var l=h.isFeatureEnabled(p.FEATURES.ShadowRootsInspector)?o.ownerDocument.createElement("iframe"):document.createElement("iframe");try{o.appendChild(l)}catch(f){l=o.ownerDocument.createElement("iframe"),o.appendChild(l)}if(l.id=t,a||(l.className="walkme-to-remove"),n||(l.style.cssText="display:none;visibility:hidden;"),s)for(attribute in s)s.hasOwnProperty(attribute)&&l.setAttribute(attribute,s[attribute]);function u(e){l.removeEventListener?l.removeEventListener("load",u):l.detachEvent&&l.detachEvent("onload",u),r&&r(e)}if(l.addEventListener){var c={id:t,src:e,callback:r,messageCallback:i,isVisible:n,container:o,dontRemove:a},d=v.send("CreateIFrameUseCapture",c)||!1;l.addEventListener("load",u,d)}else l.attachEvent&&l.attachEvent("onload",u);return i&&g.listen(P(i)),l.src=e,l},b.removeIframeListeners=function(e,t,n){e.removeEventListener?window.removeEventListener(t,n,!1):e.detachEvent&&window.detachEvent("on"+t,n)},b.getTrackData=function(e){return{Id:e.Id,Name:e.Name}},b.getStepTrackData=function(e,t){var n={Id:e.Id,Name:e.StepTitle||e.StepText};return t&&(n.TutorialId=t.Id,n.TutorialName=t.Name),n},b.isImpersonated=function(){return window.editorAPI&&editorAPI.isImpersonated&&editorAPI.isImpersonated()},b.getWindowData=function(e,t){var n=undefined;if(t)switch(e){case p.WINDOW_CUSTOM_DATA_TYPE.Cookie:(n=b.getWindowCookie(t))||(n=undefined);break;case p.WINDOW_CUSTOM_DATA_TYPE.Var:n=b.getWindowVar(t)}return n},b.getWindowCookie=function(e){return r.getCookie(e)},b.getInputGenerator=function(e){return Tt.get("InputGenerator")},b.encodeText=function(e){e=y.decodeHtml(e,["&",'"',"'",">","<"]);var t=Et("<div></div>");return t.text(e),t.html()},b.getWindowVar=function(e){var t=window;return e=y.decodeHtml(e,["&"]),l.getValue(t,e)},b.getPropertyValue=function(e,t,n){var r=l.getValue(e,t);return r||(r=n),r},b.getValue=l.getValue,b.findJspContainer=function(e,t){var n=b.getJspParent(e);return n?Et(n).find(".jspPane"):t},b.getJspParent=function(e){var n=b.getClientjQuery();if(n){var t=e.parents("div");return b.firstMatch(t,function(e){var t=n(e);if(t.data!=undefined&&t.data("jsp")!=undefined)return t})}},b.getClientjQuery=function(){var e=window.jQuery||window.$;return e&&e.fn&&e.fn.jquery?e:undefined},b.firstMatch=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},b.generateGUID=function(){return Tt.get("GuidGenerator").generateGuid()},b.isDefined=D,b.definedOrDefault=function(e,t){return D(e)?e:t},b.executeParallel=function(e){var r,i=e.objectsArray,o=e.selectorFunc,a=e.functionsToExecute,s=e.successCallback,t=e.failCallback,l=!1;function u(){0==--r&&s&&s()}function n(){l||(l=!0,t&&t())}i?function(){if(0==i.length)return s&&s();r=a.length*i.length;for(var e=a.length-1;0<=e;e--)for(var t=i.length-1;0<=t;t--){if(l)return;var n=o?o(i[t]):i[t];a[e](n,u)}}():function(){if(0==a.length)return s&&s();r=a.length;for(var e=a.length-1;0<=e;e--){if(l)return;a[e](u,n)}}()},b.getWinOrigin=function(){return a.location.origin||a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:"")},b.getOrigin=function(){var e=s.get();return 0===e.indexOf("/")?function(){if(!C){var e=window.location;(C=e.origin)||(C=e.protocol+"//"+e.hostname,e.port&&(C+=":"+e.port))}return C}()+e:e},b.getWalkmeInternals=function(){return G},b.isUrlEncoded=function(e){return(e=e||"")!==decodeURIComponent(e)},function(){T=n,w=Tt.get("CommonEvents")}.apply(null,arguments)}mtjQuery.extend(mtjQuery.easing,{easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeOutBack:function(e,t,n,r,i,o){return o==undefined&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;o=a/4}else o=a/(2*Math.PI)*Math.asin(r/s);return s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+n}}),Tt.register("PublishDataManager").asCtor(function(e,t,n){var r,i,o=t.keysConfig.publishData.lastDataVersion;this.init=function(e){i=e&&e.dataVersion||0},this.hasNewDeployables=function(){if(r)return r;var e=t.getData(o.key)||i;return r=e<i},this.saveDataVersion=function(){t.saveData(o.key,i,o.expiry)}}).dependencies("Lib, ClientOrServerStorageManager, Logger"),Tt.register("RegularBodyUtils").asCtor(function(){this.getBody=function(e){return e.body},function(){}.apply(null,arguments)}),Tt.register("TagBodyUtils").asCtor(function(){this.getBody=function(e){return Et("body",e)[0]},function(){}.apply(null,arguments)}),Tt.register("CommonUtils").asCtor(je).dependencies("TimerManager,HostData,AuditSourceManager,Consts,RegularBodyUtils,CookiesManager,SettingsValuesRetriever, ExternalWalkMeConfig,PostMessageListener,win,CdnServer,ObjectJpath,FeaturesManager, Logger, ArrayUtils, SiteConfigManager, AttentionGrabberManagerAPI,MessageSender,HtmlDecoder,JsonUtils,StringUtils"),Tt.register("ComplexHtmlElementsProvider").asCtor(function(i){this.getComplexHtmlElements=function(e,t){var n,r=t.data("iframe");if(e.Settings.complexHtml){if((e.Settings.complexHtml.type==o.TABLE||"table"==e.Settings.complexHtml.type)&&(n=i.findNearestSelfOrParentByType(t,["table"]),e.Settings.complexHtml.settings)){switch(e.Settings.complexHtml.settings.triggerType){case"cell":t=i.findFirstSelfOrChildByType(t,["td","th"])||i.findNearestSelfOrParentByType(t,["td","th"]);break;case"column":t=i.getColumn(t);break;case"row":t=i.findFirstSelfOrChildByType(t,["tr"])||i.findNearestSelfOrParentByType(t,["tr"]);break;case"table":t=i.findNearestSelfOrParentByType(t,["table"])}e.Settings.complexHtml.settings.onTable||(n=undefined)}if(t&&0<t.length)return r&&t.data("iframe",r),{parentElement:n,elements:t}}};var o={TABLE:1,DROPDOWN:2}}).dependencies("PositionHelper"),Tt.register("SettingsValuesRetriever").asCtor(function(){var r=this;r.getSettingsValue=function(e,t,n){if(!r.settingsFieldValid(e))return n;if(!r.isSettingsValueExists(e,t))return n;return e[t]},r.isSettingsValueExists=function(e,t){if(!r.settingsFieldValid(e))return!1;return t in e},r.settingsFieldValid=function(e){if(!e||0==e.length)return!1;return!0}}),Tt.register("UiUtils").asCtor(function(){var c,d,f,p,g,h,m,n=" walkme-override walkme-css-reset",s=this,v=null,e=!1,l={},u="walkme-popup-background",r="syncBalloonDivRemoval";function t(e,t){t.className+=n}function i(n){var r=f.browser,i='<PARAM NAME="WMode" VALUE="Window">';function o(e,t){for(var n=0;n<e.length;n++){var r=e[n].parentNode,i=t?t(e[n]):e[n].outerHTML;e[n].insertAdjacentHTML("beforeBegin",i),r.removeChild(e[n])}}-1!=r.name.indexOf("Firefox")?(mtjQuery("object:has('param[name='wmode'][value!='transparent'][value!='opaque']')",n).append("<param name='wmode' value='transparent'>").wrap("<div></div>").unwrap(),mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",n).attr("wmode","transparent").wrap("<div></div>").unwrap()):-1!=r.name.indexOf("IE")&&function(){var e=mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",n);if(e.attr("wmode","transparent"),o(e),9<=r.version){var t=mtjQuery("object:has('param[name*='wmode'][value!='transparent'][value!='opaque']'), object:not(:has(param[name='wmode']))",n);mtjQuery("param[name='wmode']",t).remove(),t.append("<param name='wmode' value='transparent'>"),o(t)}r.version<=8&&o(mtjQuery("object[classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000']:not(:has(param[name*='wmode']))",n),function(e){var t=e.outerHTML;return-1==t.indexOf(i)?t:e.outerHTML.replace(i,'<PARAM NAME="WMode" VALUE="transparent">')})}(),e=!0}function o(e,t,n){e.hide(),e.remove(),a(t,n)}function a(e,t){e.remove(),t&&t()}s.canDisplayOverlay=function(){var e=!(f.isQuirksMode()||v.shouldHandlePageAsFramesets());return e},this.removeOverlay=function(e){s.removeOverlayById(u,e)},this.removeOverlayById=function(e,t){var n=l[e];n&&n.exist()&&(delete l[e],t?n.fadeOut("slow",function(){Et(this).remove()}):n.remove(),n=null)},s.displayOverlay=function(e,t,n,r){n==undefined&&(n=u);var i=mtjQuery("#"+n).filter(function(){return"none"!=Et(this).css("display")});if(0<i.length)return i[0];var o=p.getTopContainer();o.append(h.formatString('<div id="{0}" class="mt-to-destroy"></div>',n));var a=mtjQuery("#"+n,o);return a.css({opacity:r?r.opct:"0.7",display:"none",position:"fixed",height:"100%",width:"100%",top:"0",left:"0",background:r?r.color:"#000000","z-index":e-1}),s.addBrowserSpecificClasses(a),t?a.fadeIn("slow"):a.css("display",""),l[n]=a},s.getStyle=function(e,t){try{return t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle}catch(n){return null}},s.getAnimationDimentionSize=function(e,t){var n;return n="top"==t||"bottom"==t?"height":"width",e.css(n)},s.addBrowserSpecificClasses=function(e){if(f.isMobile()&&e.addClass("walkme-mobile-device"),f.isIE()){var t=f.browser.version,n=document.documentMode||t,r="walkme-ie-"+n,i="walkme-ie-bm-"+t;e.addClass(r),e.addClass(i)}},s.addWalkmeClasses=function(e){e[0].className+=" walkme-to-destroy"+n,e.find("*").each(t)},s.addBrowserClass=function(e){var t=f.browser.name.replace(/ /g,"").toLowerCase();e.addClass("walkme-"+t)},s.setLangAttribute=function(e){var t=Tt.get("LanguageManager").getCurrentLanguage();t&&e.attr("lang",t)},s.bindFocusAndBlur=function(e,t){e.focus(function(){e.val()==t&&e.val("")}),e.blur(function(){""==e.val()&&e.val(t)})},s.fixFlash=function(){!e&&g.isFeatureEnabled("flashTransparent")&&d.foreachDocument(i,!0)},s.hexToRgba=function(e,t){var n=e.replace("#",""),r=parseInt(n,16),i=r>>16&255,o=r>>8&255,a=255&r;return"("+i+","+o+","+a+","+t+")"},s.closestCanEmbed=function(e){if(!g.isFeatureEnabled("embedInClosestCanEmbed"))return Tt.get("EmbedInClosestCanEmbedElementContainerProvider").get(e)},s.destroyDivWithIframes=function(e,t){if(e){var n=m("iframe",e);0==n.length?g.isFeatureEnabled(r)?a(e,t):c.libSetTimeout(function(){a(e,t)},1):(n.attr("src",""),g.isFeatureEnabled(r)?o(n,e,t):c.libSetTimeout(function(){o(n,e,t)},1))}else t&&t()},function(e,t,n,r,i,o,a,s,l,u){v=e,c=t,d=n,f=r,p=i,g=o,a,s,h=l,m=u}.apply(null,arguments)}).dependencies("FramesetsUtils, TimerManager, DocumentsManager, HostData, TopContainerProvider, FeaturesManager, Consts, CommonEvents, StringUtils, wmjQuery"),Tt.register("Balloon").asCtor(function(m,g,v,c,y,h,o,S,a,d,s,r,n,E,T,l,w,C,u,i,f,p,b,I,_,P,A){var k,D,N,O,x,L,F,M,R,B,U,V,W,j,G,H,Y,z,Q,q,K,J,X,$,Z,ee,te,ne,re=this,ie=null,oe=null,ae=!0,se=!1,le=!1,ue=!1,ce=!1,de="",fe="",pe="",ge="",he="",me="",ve=!1,ye="",Se="",Ee=undefined,Te=0,we=0,Ce=0,be="step",Ie=0,_e="walkthru",Pe=!1,Ae=[],ke=[],De=null,Ne=null,Oe=null,xe=null,Le=null,Fe=null,Me="scroll",Re=800,Be="displayTO",Ue=v.POSITION_TYPE.Bottom,Ve={},We="trigger",je="balloon",Ge=500;function He(e){Q(e,5,je)}function Ye(e,t){var n={balloonEntityId:Ce,containerEntityId:Ie,isCapture:e,isViewStep:t},r=b.getHighlighterSettings(Se,ie,n);H=Tt.create("Highlighter",r),oe&&(r.element=oe,r.drawableType=We,Y=Tt.create("Highlighter",r));var i,o,a=(i=S.isFeatureEnabled("oldSpotlight"),o=d.isIE()&&d.isIEOlderThan(9),i||o?"OldInsideout":"Insideout");z=Tt.create(a,r)}function ze(){var e=me?me.html():r.parse(fe,j),t={title:r.parse(de,j),content:e,customHtml:{inner:ge,outter:he},stepIndexText:pe},n={balloonData:t,userGuid:p.getUserGuid(),nextButton:se,doneButton:le,backButton:ue,configuration:ye,content:fe,title:de,subtext:pe,settings:Se,end:O,stepType:N,submitButton:ce,contentDiv:me};return n}function Qe(e,t){var n,r,i=function(e){if(De)return De;return y.getElementBounds(e,ae,window,Se)}(e),o={element:e,elementBounds:i,isScrollNeeded:t},a=function(e){if(e.isScrollNeeded||!g.isEmbeded(Se)||S.isFeatureEnabled("disableStrongEmbed"))return undefined;var t=ze(),n=(new Date).getTime();M=e.element;for(;M&&M.exist();){var r=Ke(e,t,M);qe(v.EVENTS.BalloonLogs.BalloonPopLocationCalculated,r);var i=!!r&&tt(B,et);qe(v.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,i);var o=!!r&&i;if(o)return r;B&&B.remove();var a=(new Date).getTime(),s=Ge<a-n,l=M.is("body");if(s||l)return M=undefined,undefined}}(o)||(n=o,r=ze(),Ke(n,r,n.element));if(a)return ae&&B.data("iframe",A.element.data("iframe")),function(e,t,n){U=x.drawArrows(ie,Ce,e,t,n,M,be);for(var r=h.getSettingsValue(Se,"z-index",v.NORMAL_BALLOON_Z_INDEX),i=0;i<U.length;i++)f.setTopMostCssStyle(U[i],r);x.fixArrows({balloonDiv:B,arrowsDivs:U,result:e,isInCaptureMode:ve,isQuirksMode:d.isQuirksMode(ie[0])})}(a,R,i),function(e,t){if(Fe.setPosition(t.positionType),1==h.getSettingsValue(Se,"isInvisible",0)){e.hide();for(var n=0;n<U.length;n++)U[n].hide()}else Fe.prepare(e,U)}(B,a),B}function qe(e,t){var n={isEmbeded:g.isEmbeded(Se),containerEntityType:_e,containerEntityId:Ie,balloonEntityType:be,balloonEntityId:Ce,extraData:t};E.raiseEvent(e,n)}function Ke(e,t,n){var r=Je(),i=y.getDrawingArea(ie,!ae,x.shouldScrollToElement()),o=Xe(r.width),a=0<we?we:0;!function(e,t){if(e<=200)return;!S.isFeatureEnabled("noHgtLmt")&&t<=200&&(0!=k&&2!=k&&k!=undefined||(k=1))}(r.width,r.height);var s={};if(!(M=g.getContainer(Se,n,ae,s)).exist())return undefined;!function(){var e={};if(null==Ne&&null==Oe){var e=re.getElementPositionRelativeToContainer(ie);ot(e.top,e.left,e.height,e.width)}}(),B=x.generateBalloonDiv(M,ve,Ie,Ce,N,t,be,_e,$,Z,ee),I.appendToContainer(M,B),g.handleEmbedding(Se,B,s),R=x.fixSize(B,e.element,ae,o,a,Se);var l=function(e,t,n,r,i){var o=h.definedOrDefault(k,Ue),a=x.arrowHeight()+1,s=x.decideWhereToPop(r,t,o,a,i);if(!s)return undefined;s=function(e,t,n,r){var i=h.definedOrDefault(ye.BalloonRadius,15);if(e.positionType==v.POSITION_TYPE.Right||e.positionType==v.POSITION_TYPE.Left){var o,a=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;if(isFinite(a)&&0!==a||(a=1),o=ve||Se.lv&&0<Se.lv?mtjQuery(h.getElementDocument(r)).height()*a:mtjQuery(h.getElementDocument(ie)).height()*a,t.height+e.top>o){var s=x.arrowHeight()+1,l=n.top+n.height/2,u=l-t.height/2,c=l-t.height+s+i/2;c=Math.max(0,c);var d=l-s-i/2,f=o-t.height-1,p=Math.min(f,d);e.top=u,e.top=Math.min(p,e.top),e.top=Math.max(e.top,c),e.top=Math.max(0,e.top)}}return e}(s,t,r,n),g.fixPosition(s,Se,n),x.addPositionClass(e,s);var l=ye.BalloonBorderWidth*(x.hasBorder()?1:0);!function(e,t,n,r){e.css("top",t.top-n+"px"),e.css("left",t.left-n+"px");var i=d.isQuirksMode(ie[0]);t.positionType==v.POSITION_TYPE.Top&&e.css("top",t.top-2*n+1+"px");t.positionType==v.POSITION_TYPE.Bottom&&e.css("top",t.top-1+"px");t.positionType==v.POSITION_TYPE.Left&&(e.css("left",t.left-2*n+1+"px"),i&&e.css("left",t.left-2*n+"px"));t.positionType==v.POSITION_TYPE.Right&&e.css("left",t.left-1+"px");e.css("width",r.width+"px"),i&&e.css("width",r.width+2*n+"px");e.css("height",r.height+"px")}(e,s,l,t);var u=h.getSettingsValue(Se,"z-index",v.NORMAL_BALLOON_Z_INDEX);f.setTopMostCssStyle(e,u),d.isQuirksMode(ie[0])&&x.fixQuirksMode(e);return s}(B,R,M,e.elementBounds,i);return l}function Je(){var e=ae?ie:mtjQuery("body"),t=n.getElementViewport(e);return{height:t.height(),width:t.width(),top:t.top(),left:t.left()}}function Xe(e){var t=0<Te?Te:0;return e<=200&&(0!=k&&2!=k&&k!=undefined||(t=e-ie.position().left-20)<120&&(t=120)),t}function $e(e,t){try{!q&&z.shouldShow(ie,Se)&&z.highlight(),te&&Ze()||function(e,t){var n=S.isFeatureEnabled("noScrlAnm")?T.SCROLL_MODES.Normal:T.SCROLL_MODES.Animated,r=h.getSettingsValue(Se,Me,n);e=e&&T.shouldScroll(ie,r,N);var i,o=!1;e&&(o=T.jspScrollAttempt(ie));var a=(s={element:ie,balloonDrawer:x,settings:Se},Tt.create("ScrollManager",s));var s;N&&N==v.STEP_TYPE.Popup?(l=ie,u={},c=Xe(Je().width),d=0<we?we:0,M=g.getContainer(Se,l,ae,u),B=x.generateBalloonDiv(M,ve,Ie,Ce,N,ze(),be,_e,$,Z,ee),g.handleEmbedding(Se,B,u),I.appendToContainer(M,B),R=x.fixSize(B,l,ae,c,d,Se),re.showPopupBalloon(B),i=B):i=Qe(ie,e);var l,u,c,d;if(!i)return t&&t();(function(){if(!X)return;var e={objectId:Ce,type:v.STEP_PLAY_INITIATOR_ENUM.STEP};X(B,e)})(),f=i,ye.classes&&mtjQuery.each(ye.classes,function(e,t){f.addClass(t)}),E.raiseEvent(v.EVENTS.BalloonCreated,{Element:i,Configuration:ye,PageElement:ie}),Ve.balloonDrawTime=K("Done drawing balloon"),J=h.getTimer(He);var f;var p=function(){Ve.balloonShowTime=J("Done showing balloon"),t&&t(Ve,i),E.raiseEvent(v.EVENTS.BalloonShown)};!o&&e?a.scrollToElementIfNeeded(ie,null,function(){ve||!rt(function(){a.scrollToBalloon(ie,a.getScrollOptions(Se),B)})?Fe.animate(p):p()},Se,k,r,B,U):Fe.animate(p);x.manipulationsForInlineCss(i)}(e,t)}catch(n){o.error(n)}}function Ze(){return S.isFeatureEnabled(ne.BalloonShowDestroySync)}function et(e){return e.is(":wm_interact_all_points")}function tt(e,t){var n=e.css("display"),r="none"==n;r&&B.css("display","block");var i=t(B);return r&&B.css("display",n),i}function nt(){return N==v.STEP_TYPE.Popup}function rt(t){var n,r=!1,i=!1,o=re.getElementPositionRelativeToContainer(ie);!ae&&((n=ie.data("iframe"))&&y.isElementScrolledOut(ie,n,k))&&(r=!0),T.isBalloonPositionVisibleRelativeToParents(ie,k)||(r=!0),De=null;var a,s,l,u,c,d,f,p,g=(a=o.top,s=o.left,l=o.height,u=o.width,null!=Ne&&null!=Oe&&null!=xe&&null!=Le&&(C.check(Ne,a)||C.check(Oe,s)||C.check(xe,l)||C.check(Le,u))),h=(c={stepId:Ce,balloonDiv:B,defaultValue:!(document.webkitFullscreenElement||document.mozFullScreen||document.mozFullscreenElement||document.msFullscreenElement)},E.raiseEvent(v.EVENTS.ShouldChangeBalloonPosition,c),c.returnValue);return g&&h?(i=!0,w.shouldMoveByIntervals(r,B,Se)?(d=o,f=t,p=0,function e(){p<10?(p++,re.moveBalloon(d),m.playSetTimeout(e,30)):f&&f()}()):(Q("Element position changed, destroying it",5,je),ot(o.top,o.left,o.height,o.width),S.isFeatureEnabled(v.FEATURES.CalculateElementBoundsBeforeRedraw)&&(De=y.getElementBounds(ie,ae,window,Se)),re.destroy(!0,function(){Q("Finished destorying balloon",5,je),r||F||(Q("Redrawing balloon",5,je),re.Show(!1,function(){De=null,t&&t()}))}))):t&&t(),i}function it(e,t,n){var r=parseFloat(e.css("left")),i=parseFloat(e.css("top")),o=r-t+"px",a=i-n+"px";e.css("left",o),e.css("top",a)}function ot(e,t,n,r){Ne=e,Oe=t,xe=n,Le=r}this.onDestroy=function(e){Ae.push(e)},this.setReleaseEvents=function(e){ke=e},this.releaseEvents=function(e){for(var t,n=0;n<ke.length;n++)try{ke[n](e)&&(t=!0)}catch(r){}return t},this.SetTimeoutOn=function(e){nt()||L||(L=m.playSetTimeout(function(){re.elementDisplayTimeoutFunction(e)},200))},this.getArrowHeight=function(){return x.arrowHeight()},this.AddSubmitButton=function(){ce=!0},this.getElementPositionRelativeToContainer=function(e){var t={};if(ae){var n=ie.offset();t.top=Math.floor(n.top),t.left=Math.floor(n.left)}else{var r=y.getPosRelativeToWindow(ie[0],window,!0);t.top=r.top,t.left=r.left}return t.height=ie.height(),t.width=ie.width(),y.fixOffsetForIE(ie,t),g.fixPosition(t,Se,M),t},this.showPopupBalloon=function(e){var t=_.Center;Se.hasOwnProperty("pagePosition")&&(t=parseInt(Se.pagePosition,10));var n=Tt.create("PopupPosition",{animator:Fe,pagePosition:t}),r=h.getSettingsValue(Se,"z-index",v.POPUP_BALLOON_Z_INDEX);e.css({"z-index":r,"min-width":x.minPopupWidth()+"px"});var i=parseInt(h.getSettingsValue(Se,"leftOffset",0)),o=parseInt(h.getSettingsValue(Se,"topOffset",0)),a={top:o,left:i};n.positionElementInPage(e,a);var s=c.canDisplayOverlay(),l=P.isSpotlight(Se);s&&l&&c.displayOverlay(r,!0,undefined,Se.overlay);var u=d.isQuirksMode(ie[0]);u&&x.fixQuirksMode(e),Fe.prepare(e),Fe.postAnimation(function(){y.registerResizeAndScrollEvents({element:e,offset:a,callback:t!==_.Center?n.positionElementInPage:undefined})})},this.getBalloonDiv=function(){return B},this.getElement=function(){return ie},this.getBalloonData=function(){return{isEmbeded:g.isEmbeded(Se),containerEntityType:_e,containerEntityId:Ie,balloonEntityType:be,balloonEntityId:Ce}},this.getBalloonHTML=function(){return x.generateHtml(ze())},this.Show=function(t,n){K=h.getTimer(He);var e=ae?i.getDirectHead(ie):Et("head"),r=function(){(function(){var e=[];nt()||!ve&&!H.shouldShow(ie,Se)||(e.push(H.highlight()),Y&&e.push(Y.highlight()));return at.all(e)})().then(function(e){-1===Et.inArray(!0,e)&&$e(t,n)})};ve?r():x.loadResources(e,r)},this.stop=function(){Fe.stop()},this.destroy=function(e,t){if(!(e&&te&&Ze())){te=!0;E.raiseEvent(v.EVENTS.Walkthrus.DestroyStepBalloon,{balloonDiv:B}),nt()&&ie.remove(),e||(F=!0,L&&(L.clear(),L=null),function(){for(var e=0;e<Ae.length;e++)try{Ae[e]()}catch(t){}Ae.length=0}()),function(e){if(!e)return;try{e.unbind(),mtjQuery("*",e).unbind()}catch(t){}}(B),Fe.disableAnimation(),Fe.destroy(function(){try{H.unhighlightElement(ie,"balloon"),Y&&Y.unhighlightElement(oe,We),z.unhighlightElement(ie,"balloon")}catch(e){o.error(e,"error removing highlighting elements for balloon")}te=!1,t&&t()})}},this.elementDisplayTimeoutFunction=function(e){var t=y.isElementVisible(ie,Ee||Se.filter);t?re.handleBalloonDisplay(e):(Q("Element not visible anymore.",5,je),re.destroy(!1,e))},this.handleBalloonDisplay=function(e){rt(),L=m.playSetTimeout(function(){F&&Ze()||re.elementDisplayTimeoutFunction(e)},V)},this.moveBalloon=function(e){var t=ie.height(),n=ie.width(),r=w.getDeltaLeft(Le,n,Oe,e.left),i=w.getDeltaTop(xe,t,Ne,e.top);ot(e.top,e.left,t,n),it(B,r,i);for(var o=0;o<U.length;o++)it(U[o],r,i);nt()||!ve&&!H.shouldShow(ie,Se)||(H.highlight(),Y&&Y.highlight()),!q&&z.shouldShow(ie,Se)&&z.highlight()},function(){ne=v.FEATURES,te=!1,N=v.STEP_TYPE.Normal,ie=A.element,A.parentElement&&(ie=A.parentElement,oe=A.element);G=A.forceEmbedBalloonInIframe,q=A.dontShowIoBalloon,Pe=A.isFirstStep,D=A.isViewStep,W=A.siteConfig,$=A.placeholderConfigurations,Z=A.placeholderVariableValues,ee=A.initiatorData,j=A.stepSettings.v,A.fixedSize&&(Te=A.fixedSize.width,we=A.fixedSize.height);Se=A.stepSettings,Ee=A.visibilityFilter,V=h.getSettingsValue(Se,Be)||h.getSettingsValue(W.Settings,Be)||Re,A.text&&(de=A.text.title,pe=A.text.subText,fe=h.nl2br(A.text.content));O=A.end,A.buttons&&(se=A.buttons.next,le=A.buttons.done,ue=A.buttons.back,ce=A.buttons.submit);me=A.htmlContent,ge=A.innerHtml,he=A.outterHtml,k=A.position,A.data&&(Ce=A.data.balloonEntityId||A.data.stepId,Ie=A.data.containerEntityId||A.data.tutorialId,N=A.data.type,be=A.data.balloonEntityType||"step",_e=A.data.containerEntityType||"walkthru");if(Ye(A.isCaptureBalloon,D),ye=A.configuration,a.fixConfiguration(ye),Q=o.wrapCustomerLog(je),u.setCustomCssIfNeeded(ie),x=A.drawer,!ie)return void(ae=!0);var e=l.isInIframe(ie);ae=!(!h.getSettingsValue(Se,"embed",!1)&&e&&!G&&!S.isFeatureEnabled(v.FEATURES.ForceEmbedInOwnerDocument))||s.shouldHandlePageAsFramesets();A.isCaptureBalloon&&(ve=!0,ae=g.isEmbeded(Se)&&ae,Fe&&Fe.disableAnimation());X=A.bindButtonsFunc,t=ye,n=t.AnimateFirst&&!Pe||ve||D,r=t.Vibrate&&!ve,i={config:t.Animation,isVibrating:r},Fe=Tt.create("Animator",i),n&&Fe.disableAnimation(),E.raiseEvent(v.EVENTS.BalloonInitialized,{params:A});var t,n,r,i}.apply(null,arguments)}).asProto().dependencies("TimerManager, BalloonEmbedder, Consts, UiUtils, PositionHelper, CommonUtils, Logger, FeaturesManager, BalloonUtils, HostData, FramesetsUtils, BBCodeParser, ElementUtils, CommonEvents, ScrollUtils, ElementInIframeIndicator, MoveBalloonByIntervalsHelper, BalloonElementPositionChangedChecker, CustomCssSetter, DirectHeadProvider, TopMostCssStyleSettter, UserGuidContainer, HighlighterSettingsProvider, ContainerAppender, Positions, SpotlightChecker"),Tt.register("BalloonLogEventHandler").asCtor(function(e,t,n){var r;this.init=function(){t.bind(n.EVENTS.BalloonLogs.BalloonPopLocationCalculated,a),t.bind(n.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,s),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,l),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,l)};var i="[BalloonLogEventHandler] ",o="balloonLogEventHandler";function a(e,t){t&&t.isEmbeded&&!t.extraData&&u(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": Something happened while calculaing the position of the balloon, trying to attach it to another element",3)}function s(e,t){t&&t.isEmbeded&&!t.extraData&&u(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": The balloon is partly covered by an element, trying to attach it to another element",3)}function l(e,t){u(t.reason+", trying to attach the balloon to another element. Invalid parent:",3),r(t.currentParent[0])}function u(e,t){r(i+e,t)}r=e.wrapCustomerLog(o)}).dependencies("Logger, WmInternals, Consts"),Tt.register("MoveBalloonByIntervalsHelper").asCtor(function(r){this.shouldMoveByIntervals=function(e,t,n){return r.isFeatureEnabled("moveByIntervals")},this.getDeltaLeft=function(e,t,n,r){return parseFloat(e)-parseFloat(t)},this.getDeltaTop=function(e,t,n,r){return parseFloat(e)-parseFloat(t)}}).asProto().dependencies("FeaturesManager"),Tt.register("BalloonElementPositionChangedChecker").asCtor(function(u,c,d){this.check=function(e,t){var n=u.isFeatureEnabled(c.FEATURES.PositionCheckByChangeThreshold),r=d.get().positionChangePixelsThreshold;return n?(a=e,s=t,l=r,Math.abs(a-s)>l):(i=e,o=t,i!=o);var i,o;var a,s,l}}).asProto().dependencies("FeaturesManager,Consts,BalloonPositionCheckSettingsGetter"),Tt.register("SafeFullUrlProvider").asCtor(function(e,t){this.get=function(){if(e.isFeatureEnabled("disableWidgetOpenFullUrl")||e.isFeatureEnabled("dontSendPageUrl"))return"";return t.getUrl()}}).dependencies("FeaturesManager, HostData"),Tt.register("Encryptor").asCtor(function(t){this.encrypt=function(e){return t.btoa(unescape(encodeURIComponent(e)))}}).dependencies("Base64"),Tt.register("PropagationStopper").asCtor(function(){this.addEventStopPropagation=function(t,e){e.forEach(function(e){t.on(e,function(e){e.preventDefault(),e.stopPropagation()})})}}),Tt.register("StopPropagationWrapper").asCtor(function(n,r){this.wrapWithEvent=function(e,t){e.stopPropagation(),n.raiseEvent(e.type+r.EVENTS.PropagationStoppedSuffix,{originalEvent:e,data:t})}}).dependencies("CommonEvents, Consts"),Tt.register("SlowlyDyingChanceCalculator").asCtor(function(){this.gamble=function(){return!(Math.random()>e||(e/=2,0))};var e=1;function t(){e=1}(function(e){e.bind(t)}).apply(this,arguments)}).dependencies("UIChangeTracker").asProto(),Tt.register("SearchResultActivator").asCtor(function(i,o,e,n,r,a,s){var l=e.wrapCustomerLog("searchResult"),u=[".zendesk.com"],t={width:900,height:500};function c(e){var t=o.getSize(),n=a.to_html('<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',{width:t.width,height:t.height,url:i.isUrlEncoded(e)?e:encodeURI(e)}),r=mtjQuery(n);return r}function d(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://"),n=t||function(e){e=e.toLowerCase();for(var t=0;t<u.length;t++)if(0<=e.indexOf(u[t].toLowerCase()))return!0;return!1}(e);return n&&l("Can't play content in lightbox",3),n}function f(e){l("Started playing content in lightbox",3),WalkMePlayerAPI.isMenuOpen()&&WalkMePlayerAPI.toggleMenu(),o&&o.remove(),o.activate(e,t,"searchResult",!0,c,p)}function p(e){l("Started playing content in new tab",3),window.open(e,"_blank")}this.openSearchResult=function(e){if(i.isValidUrl(e)){l(s.formatString("Content url is :{0}",e),3),n.raiseEvent("LoadingContent",e);var t="true"===r.get().Custom.lightboxEnabled;d(e)||!t?p(e):f(e)}else l(s.formatString("Content url is invalid: {0}",e),3)}}).dependencies("CommonUtils, LightboxDisplayer, Logger, CommonEvents, SiteConfigManager, Mustache, StringUtils");var Ge=__webpack_require__(89).DeployablesManager;Tt.register("DeployablesManagerFactory").asCtor(function(t){var n,r,i;function o(e,t){n[e]||(n[e]=t)}this.get=function(e){i||(i=!0,o(t.DEPLOYABLE_TYPE.Content,Tt.get("ContentsManager")),o(t.DEPLOYABLE_TYPE.Task,Tt.get("TodoListManager")),o(t.DEPLOYABLE_TYPE.Category,Tt.get("CategoriesManager")),o(t.DEPLOYABLE_TYPE.Collection,Tt.get("CollectionsManager")),o(t.DEPLOYABLE_TYPE.AbExperiment,Tt.get("ExperimentsManager")),o(t.DEPLOYABLE_TYPE.Survey,Tt.get("SurveysManager")),o(t.DEPLOYABLE_TYPE.ShoutOut,Tt.get("ShoutOutsManager")),o(t.DEPLOYABLE_TYPE.ConditionBlock,Tt.get("ConditionBlocksManager")),o(t.DEPLOYABLE_TYPE.Tag,Tt.get("TagsManager")),o(t.DEPLOYABLE_TYPE.BusinessSolution,Tt.get("BusinessSolutionsManager")),o(t.DEPLOYABLE_TYPE.TrackedPage,Tt.get("TrackedPagesManager")),o(t.DEPLOYABLE_TYPE.Course,Tt.get("CoursesManager")),o(t.DEPLOYABLE_TYPE.Lesson,Tt.get("LessonsManager")),o(t.DEPLOYABLE_TYPE.TrackedElement,Tt.get("TrackedElementsManager")),o(t.DEPLOYABLE_TYPE.SearchProviderUrl,Tt.get("SearchProviderUrlsManager")));return n[e]||r},this.add=o,n={},r={name:function(){},getById:function(){},getAll:function(){return[]}}}).dependencies("Consts"),Tt.register("DeployableSurveyActivator").asCtor(function(l,u,c,d){this.activateSurvey=function(e,t,n,r,i){l.customerLog("Checking if need to open survey");var o=function(e,t,n){var r={shouldStart:!1,cookiesToSave:[]},i=u.getById(e);if(!i)return l.customerLog("Couldn't find survey with id:"+e,0,"survey"),r;var o=d.survey.repeat.key+"-"+i.Id,a=c.checkRepeatCookie(o,(s=i.Settings,s.repeat||"visit"));var s;a&&a.shouldStart&&(r.cookiesToSave.push(a.store),a=c.checkRepeatCookie(t+"-"+i.Id,n),r.cookiesToSave.push(a.store),r.shouldStart=a.shouldStart);return r}(e,t,n);if(o.shouldStart){l.customerLog("Starting survey");var a=u.activateById(e,r,i);if(a)for(var s=0;s<o.cookiesToSave.length;s++)o.cookiesToSave[s]()}}}).dependencies("Logger, SurveysManager, AutoStartManager, StorageKeysConfigurations"),Tt.register("DeployableTypeNameProvider").asCtor(function(e){this.getDeployableTypeNameByTypeNumber=function(n){var r=undefined;return mtjQuery.each(e.DEPLOYABLE_TYPE,function(e,t){if(n==t)return r=e,!1}),r}}).dependencies("Consts"),Tt.register("TagsInjector").asCtor(function(l){this.inject=function(e,t,n){var r=n.isNewConditions?"ConditionTrees":"Settings";e[r]||(e[r]={});var i=e[r][n.name];if(!t)return i;o=e,a=n.enabled,a&&"true"!==o.Settings[a]&&!o.Settings[a]&&(e.Settings[n.enabled]=1,i=undefined);var o,a;var s=l.get(n.isNewConditions).combine("And",t,i);return e[r][n.name]=s}}).dependencies("ConditionsCombinerFactory"),Tt.register("TagsSegmentationProperties").asCtor(function(e){this.properties={},this.properties[e.DEPLOYABLE_TYPE.Tutorial]={name:"DOCT",enabled:"DOCTEnabled"},this.properties[e.DEPLOYABLE_TYPE.Task]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},this.properties[e.DEPLOYABLE_TYPE.Launcher]={name:"PlayLauncherConditionTree"},this.properties[e.DEPLOYABLE_TYPE.Shuttle]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},this.properties[e.DEPLOYABLE_TYPE.Content]={name:"DisplayCondition"},this.properties[e.DEPLOYABLE_TYPE.BusinessSolution]={name:"DisplayRules",enabled:"segmentationEnabled",isNewConditions:!0,dontInjectTagsIntoAutoStartFeature:"SWT_AutoPlayIgnoreTags"},this.properties[e.DEPLOYABLE_TYPE.Course]={name:"DisplayCondition"},this.properties[e.DEPLOYABLE_TYPE.SearchProviderUrl]={name:"DisplayCondition"}}).dependencies("Consts");var He=function(){function e(e){this.eventSender=e}return e.prototype.map=function(e,t){return{type:this.eventSender.EVENT_APPS.Question,oType:e.getType(),owId:t.surveyJson.Id,owName:t.surveyJson.Name,owType:this.eventSender.EVENT_APPS.Survey,pInit:this.getPInit(t)}},e.prototype.getPInit=function(e){return e.tutorialId?this.getTutorialPInit(e):e.businessSolutionId?this.getBusinessSolutionPInit(e):void 0},e.prototype.getTutorialPInit=function(e){return{id:e.tutorialId,appType:"wt"}},e.prototype.getBusinessSolutionPInit=function(e){return{id:e.businessSolutionId,appType:"bizFlow"}},e}();Tt.register("QuestionToEventMapper").asCtor(He).dependencies("EventSender"),Tt.register("AnalyticsTrackerConsts").asCtor(function(){this.EVENT_NAMESPACE=".wmte",this.LOG_LEVEL_DEFAULT=3,this.FEATURES={analyticsTracking:"analyticsTracking",autoTracking:"autoTracking",pageChangeTracking:"pageChangeTracking"}}),Tt.register("AnalyticsTrackerLogger").asCtor(function(t,n,r){this.customerLog=function(e){t.customerLog(e,n.LOG_LEVEL_DEFAULT,r.FEATURES_LOGS.AnalyticsTracking)},this.error=function(e){t.error(e)}}).dependencies("Logger, AnalyticsTrackerConsts, Consts"),Tt.register("TrackedElementEventBinder").asCtor(function(o,a,s,l,e,u,c){this.bind=function(n,r,i){a.customerLog(c.formatString("TrackedElementEventBinder - binding events to element with id {0}",r.Id)),l.bind(n,o.EVENT_NAMESPACE,function(t){e.get(u.get().getCurrentIndex()).then(function(e){s.send(t,e,r,i,n)})})},this.unbind=function(e,t){a.customerLog(c.formatString("TrackedElementEventBinder - unbinding events from element with id {0}",t.Id)),l.unbind(e,o.EVENT_NAMESPACE)}}).dependencies("AnalyticsTrackerConsts, AnalyticsTrackerLogger, TrackedElementEventDataSender, ElementInteractionEventsBinder, PageVisitGuidProvider, ChangesTrackerFactory, StringUtils"),Tt.register("TrackedElementEventDataSender").asCtor(function(s,l,u){this.send=function(e,t,n,r,i){var o={type:s.EVENT_SENDER_EVENT_APPS.TrackedElement,oId:n.Id,oName:n.Name,owType:s.EVENT_SENDER_EVENT_APPS.TrackedPage,pId:(r?r.Id:"0")+"_"+t};r?(o.owId=r.Id,o.owName=r.Name):(o.owId=0,o.owName="Site-Wide");var a={eventName:e,eventData:o,trackedElement:n,trackedPage:r,element:i};u.raiseEvent(s.EVENTS.TrackedElementBeforeSendEvent,a),l.postEvent(e,o)}}).dependencies("Consts, EventSender, CommonEvents"),Tt.register("TrackedElementInteractionsToggler").asCtor(function(i){this.toggleBinder=function(e,t,n,r){r?i.bind(e,t,n):i.unbind(e,t)},this.stopBinder=function(e,t){e&&i.unbind(e,t)}}).dependencies("TrackedElementEventBinder");var Ye=function(i){function e(e,t,n,r){i.call(this,{lib:e,type:t.DEPLOYABLE_TYPE.TrackedElement}),this.arrayUtils=n,this.trackedElementsVisibilityTrackerFactory=r,this._name="TrackedElement",this.setDeployables([])}return Ie(e,i),e.prototype.getAllByPageId=function(t){return this.arrayUtils.filter(this.getAll(),function(e){return e.TrackedPageId==t})},e.prototype.start=function(){this._trackedElementsVisibilityTracker=this.trackedElementsVisibilityTrackerFactory.create({}),this._trackedElementsVisibilityTracker.startTrack()},e.prototype.releaseAll=function(){this._trackedElementsVisibilityTracker&&this._trackedElementsVisibilityTracker.stopTrack()},e}(Ge);function ze(e,t,n){this.stopTrack=function(){r.stopTrack()},this.startTrack=function(){Et(i).each(function(e,t){r.startTrack(t)})};var r,i=[];i=e.getAllByPageId(n.trackedPage&&n.trackedPage.Id),r=t.create(n)}function Qe(r,i,o,a){var s,l;this.evaluateAsync=function(t){var e=-1;(l=i.getStickyType(a.trackedElement.Settings))!=r.STICKY_TYPE.ONCE&&(e=2e3);var n={logContext:a.trackedElement.Id,findElementParams:{IdentifySettings:a.trackedElement.IdentifySettings},trackUIChanges:!0,elementEvaluationIntervalMs:e};(s=o.create(n)).setOnVisibilityChanged(function(e){t(e==r.VISIBILITY_STATE.VISIBLE),e==r.VISIBILITY_STATE.VISIBLE&&l!=r.STICKY_TYPE.STRONG&&s.cleanResources()}),s.evaluateElementVisibilityAsynch()},this.cleanResources=function(){s&&s.cleanResources()},this.getElement=function(){if(s)return s.getElement()}}Tt.register("TrackedElementsManager").asCtor(Ye).dependencies("Lib, Consts, ArrayUtils, TrackedElementsVisibilityTrackerFactory"),Tt.register("TrackedPageEventDataSender").asCtor(function(r,i){this.send=function(e,t){var n={type:r.EVENT_SENDER_EVENT_APPS.TrackedPage,oId:t.Id,oName:t.Name,pId:t.Id+"_"+e};i.postEvent(r.EVENT_SENDER_EVENT_TYPES.Play,n)}}).dependencies("Consts, EventSender");var qe=function(r){function e(e,t,n){r.call(this,{lib:e,type:t.DEPLOYABLE_TYPE.TrackedPage}),this.trackedPagesEventsListener=n,this._name="TrackedPage",this.setDeployables([])}return Ie(e,r),e.prototype.start=function(){this.trackedPagesEventsListener.startListen()},e.prototype.setDeployables=function(e){e&&(r.prototype.setDeployables.call(this,e),this.trackedPagesEventsListener.init(e))},e.prototype.releaseAll=function(){this.trackedPagesEventsListener.stopListen()},e}(Ge);function Ke(e,t){var n,r;this.evaluate=function(){if(!t.trackedPage.ConditionTrees||!t.trackedPage.ConditionTrees.DisplayRules)return!0;var e=t.trackedPage.ConditionTrees.DisplayRules;return n.getCurrentEvaluationValueAndStopEvaluating(e)},r={featureName:"evaluate tracked page segmentation",elementName:t.trackedPage.Name,stopPollingAfterEvaluateTrue:!1},n=e.createNew(r)}function Je(n,r,t,i,o,e,a,s,l){var u,c,d;function f(e){o.isAutoTrackingOn()||t.send(e,d)}this.stopListen=function(){u.stopTrack()},this.evaluateAndUpdateContainer=function(e){var t=c.evaluate();n.customerLog(s.formatString("TrackedPageEventsListener - for page with id {0}, segmentation condition was{1}met",d.Id,t?" ":" not ")),t?(i.get(e).then(f),u.startTrack(),d.IsComplex&&r.add(d)):(u.stopTrack(),d.IsComplex&&r.remove(d))},u=e.create(l),c=a.create(l),d=l.trackedPage}function Xe(n,t){function r(e){0==e.trackedElement.IsViewsOnly&&n.toggleBinder(e.element,e.trackedElement,e.trackedPage,e.isVisible)}function e(e,t){0==t.IsViewsOnly&&n.stopBinder(e,t)}this.startTrack=function(e){(e.IdentifySettings.IsJquerySelector||1==e.IsViewsOnly)&&t.startTrack(e,r)},this.stopTrack=function(){t.stopTrack(e)}}function $e(t,n){function r(e){t.toggleBinder(e.element,e.trackedElement,e.trackedPage,e.isVisible)}this.startTrack=function(e){n.startTrack(e,r)},this.stopTrack=function(){n.stopTrack(t.stopBinder)}}function Ze(i,o,a,s,l,u,c,d){var f;this.startTrack=function(n,r){if(f[n.Id])return;o.customerLog(c.formatString("TrackedElementVisibilityTracker - trackVisibility for element with id {0}",n.Id));var e={trackedElement:n},t=u.create(e);f[n.Id]={evaluator:t,trackedElement:n},t.evaluateAsync(function(e){var t={isVisible:e,trackedElement:n,trackedPage:d.trackedPage,visibilityCallback:r};!function(t){o.customerLog(c.formatString("TrackedElementVisibilityTracker - visibility changed for element with id {0} to {1}",t.trackedElement.Id,t.isVisible));var n=f[t.trackedElement.Id].evaluator.getElement();t.isVisible&&s.get(l.get().getCurrentIndex()).then(function(e){a.send(i.EVENT_SENDER_EVENT_TYPES.Visible,e,t.trackedElement,t.trackedPage,n)});t.element=n,t.visibilityCallback&&t.visibilityCallback(t)}(t)})},this.stopTrack=function(r){o.customerLog(c.formatString("TrackedElementVisibilityTracker - stopTrack")),Et.each(f,function(e,t){var n=t.evaluator.getElement();r&&r(n,t.trackedElement),t.evaluator.cleanResources()}),f={}},f={}}function et(o,a){this.get=function(e){var t=[],n=[],r=[a.actions.element.mouseover,a.actions.element.mouseout],i=[a.actions.element.focus,a.actions.element.blur];e[o.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(t=t.concat(r),n=n.concat(r));e[o.TOOLTIPS_ACTIVATION_MODES.Focus]&&(t=t.concat(i));return{eventsForElement:t,eventsForDocument:[],eventsForTooltip:n}}}function tt(i,o){this.get=function(e){var t=[],n=[],r=[];e[i.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(t=t.concat([o.actions.element.click]),r=r.concat([o.actions.element.click]),n=n.concat([o.actions.document.click,o.actions.document.touchstart]));return{eventsForElement:t,eventsForDocument:n,eventsForTooltip:r}}}function nt(e){return e.get("isEmulator")?{width:window.innerWidth,height:window.innerHeight}:screen}Tt.register("TrackedPagesManager").asCtor(qe).dependencies("Lib, Consts, TrackedPagesEventsListener"),Tt.register("TrackedPagesEventsListener").asCtor(function(t,n,r,i){var o,a,s=[];function l(e){for(var t=0;t<s.length;t++)s[t].evaluateAndUpdateContainer(e.uiChangeIndex);r.resolveUIChange(e.uiChangeIndex)}this.init=function(e){t.customerLog("TrackedPagesEventsListener - init"),o=e,a=n.get()},this.startListen=function(){t.customerLog("TrackedPagesEventsListener - startListen"),a.bind(l),Et(o).each(function(e,t){var n={trackedPage:t},r=i.create(n);s.push(r)}),l({uiChangeIndex:0})},this.stopListen=function(){t.customerLog("TrackedPagesEventsListener - stopListen"),a.unbind(l);for(var e=0;e<s.length;e++)s[e].stopListen();s=[]}}).dependencies("AnalyticsTrackerLogger, ChangesTrackerFactory, TrackedActivatedPagesContainer, TrackedPageEventsListenerFactory"),Tt.register("PageVisitGuidProvider").asCtor(function(e,t,n){var r,i,o,a;function s(e){i=e.uiChangeIndex,l(),o&&o.resolve(r),o=mtjQuery.Deferred()}function l(){r=t.generateGuid(!0)}this.get=function(e){return e<i?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):e===undefined||e==i?mtjQuery.Deferred().resolve(r):o.promise()},this.releaseResources=function(){mtjQuery(G).off(n.EVENTS.NewSession,l),a.unbind(s)},i=0,(a=e.get()).bind(s),l(),o=mtjQuery.Deferred(),mtjQuery(G).on(n.EVENTS.NewSession,l)}).dependencies("ChangesTrackerFactory, GuidGenerator, Consts"),Tt.register("TrackedElementIndicatorService").asCtor(function(e,t){this.isAutoTrackingOn=function(){return e.isFeatureEnabled(t.FEATURES.autoTracking)}}).dependencies("FeaturesManager, AnalyticsTrackerConsts"),Tt.register("TrackedActivatedPagesContainer").asCtor(function(e){var t,n,r;function i(){return e.getDictionaryValues(r)}this.add=function(e){r[e.Id]=e},this.remove=function(e){delete r[e.Id]},this.getAll=function(e){return e<t?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):e===undefined||e==t?mtjQuery.Deferred().resolve(i()):n.promise()},this.resolveUIChange=function(e){t=e,n&&n.resolve(i()),n=mtjQuery.Deferred()},r={},t=0,n=mtjQuery.Deferred()}).dependencies("DictionaryUtils"),Tt.register("ElementVisibilityEvaluatorFactory").asCtor(function(t,n,r,i,o,a,s,l,u){this.create=function(e){return new un(t,n,r,i,o,a,s,l,u,e)}}).dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator, ElementChangeChecker, StringUtils"),Tt.register("TrackedElementsVisibilityTrackerFactory").asCtor(function(t){this.create=function(e){return new ze(Tt.get("TrackedElementsManager"),t,e)}}).dependencies("TrackedElementVisibilityTrackerFactory"),Tt.register("TrackedElementVisibilityEvaluatorFactory").asCtor(function(t,n,r){this.create=function(e){return new Qe(t,n,r,e)}}).dependencies("Consts, UIElementVisibilityAttributes, ElementVisibilityEvaluatorFactory"),Tt.register("TrackedElementVisibilityTrackerFactory").asCtor(function(e,n,r,i,o,a,s,l,u){var c;this.create=function(e){var t=new Ze(n,r,i,o,a,l,u,e);return c?new Xe(s,t):new $e(s,t)},c=e.isAutoTrackingOn()}).dependencies("TrackedElementIndicatorService, Consts, AnalyticsTrackerLogger, TrackedElementEventDataSender, PageVisitGuidProvider, ChangesTrackerFactory, TrackedElementInteractionsToggler, TrackedElementVisibilityEvaluatorFactory, StringUtils"),Tt.register("TrackedPageEventsListenerFactory").asCtor(function(t,n,r,i,o,a,s,l){this.create=function(e){return new Je(t,n,r,i,o,a,s,l,e)}}).dependencies("AnalyticsTrackerLogger, TrackedActivatedPagesContainer, TrackedPageEventDataSender, PageVisitGuidProvider, TrackedElementIndicatorService, TrackedElementsVisibilityTrackerFactory, TrackedPageSegmentConditionCheckerFactory, StringUtils"),Tt.register("TrackedPageSegmentConditionCheckerFactory").asCtor(function(t){this.create=function(e){return new Ke(t,e)}}).dependencies("ConditionCheckerFactory"),Tt.register("TooltipV1").asCtor(function(t,n,e){var r,i=Tt.create("WalkmeOOP",this),o=i.Prop.Public("contentMargin",15);i.Override("manipulationsForInlineCss",function(e){n.isIE(8,"lte")||r.balloonSettings()}),i.Override("createTemplateData",function(){var e=r.createTemplateData();return e.outerDiv=r.getCustomDivHtml("inner-div"),e.colors.xBtn=r.balloonSettings().XButtonColor,e.top={minHeight:30,textAlign:e.direction.side,content:{sideMargin:o(),oppositeSideMargin:o()-2}},e.shadow=t.calculate(r.balloonSettings().ShadowType,r.balloonSettings().ShadowLevel,r.balloonSettings().ShadowColor),e.isNotIe7=!n.isIEBrowser(7),e}),i.Override("createHtmlTemplate",function(){return function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-tooltip-outer-div walkme-tooltip-v1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-tooltip-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; -webkit-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); -moz-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); font-family: walkme-opensans; border-radius:3px; overflow: hidden;'><div class='walkme-tooltip-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius: 3px; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-tooltip-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius: 3px;'><div class='walkme-tooltip-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'>"),r.s(r.d("data.content",e,t,1),e,t,0,1006,1264,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-tooltip-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; padding: 9px 9px 8px 9px; line-height: 18px; font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b("; overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div></div></div></div>"),r.fl()}}),function(){i.ExtendsInstance(Tt.create("BaseBalloon",e)),r=i._base}.apply(null,arguments)}).asProto().dependencies("ShadowCalculator, HostData"),Tt.register("TooltipDrawerV1").asCtor(function(r,i,o,a,s,t,l,u){var f,n=Tt.create("WalkmeOOP",this),c=[];n.Override("addBalloonDiv",function(e,t){var n=r.createElementInDocument(e,t[0].ownerDocument);return l.isFeatureEnabled("accessibility")&&(focusableElements=n.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),r.addTabIndex(focusableElements),focusableElements.on("focus",function(){Et(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){Et(this).css({outline:"none","outline-offset":"0px"})})),o.setLangAttribute(n),n.css("display","none"),n}),n.Override("decideWhereToPop",function(e,t,n,r,i,o){return u.tooltipPosition!=undefined?s.getPredefinedPosition(e,t,r,i,u.tooltipPosition,u.tooltipPositionOffset):s.findBestPosition(e,t,r,i,u.directionToAvoid)}),n.Override("loadResources",function(e,t){var n=f.balloonSettings().FontsData;n?i.fonts(n,e,t,t):t&&t()}),n.Override("getArrowsColors",function(e){var t=f.balloonSettings(),n=t.Color,r=t.BorderColor;return{innerArrow:n,outterArrow:r}}),n.Override("fixArrows",function(e){var t=e.balloonDiv,n=e.arrowsDivs,r=e.result,i=e.isInCaptureMode,o=(e.isQuirksMode,f.balloonSettings().direction,r.positionType==a.POSITION_TYPE.Left||r.positionType==a.POSITION_TYPE.Right);o?function(e,t,n,r,i){e.show();var o=f.arrowBaseWidth(),a=parseFloat(t[0].css("top")),s=parseFloat(e.css("top")),l=e[0]?e[0].offsetHeight:0,u=a-s,c=l;if(e.hide(),c-u<o&&u<c){var d=s-(c-u);e.css("top",d+"px")}}(t,n):i&&r.positionType==a.POSITION_TYPE.Top&&n[0].css("border-top-color",f.balloonSettings().Color),e.isQuirksMode&&function(e){var t,n=Et(".walkme-tooltip-arrow-inner",e.parent()),r=Et(".walkme-tooltip-arrow-outer",e.parent());if(n.hasClass("walkme-tooltip-arrow-right"))t="right";else{if(!n.hasClass("walkme-tooltip-arrow-left"))return;t="left"}n.css("border-"+t+"-color",f.balloonSettings().Color),r.css("border-"+t+"-color",f.balloonSettings().BorderColor)}(t)}),n.Override("fixQuirksMode",function(e){}),n.Override("finalizeArrowsPosition",function(e,t,n){switch(e){case a.POSITION_TYPE.Top:t.top--;break;case a.POSITION_TYPE.Bottom:t.top++;break;case a.POSITION_TYPE.Left:t.left--;break;case a.POSITION_TYPE.Right:t.left++}}),n.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-tooltip-content",t);n.css("width",e+"px"),t.css("width","auto");var r={width:t.width(),height:t.height()};return r});n.Override("generateIdForBalloon",function(e){return"walkme-tooltip-"+u.itemId}),n.Override("generateClassesForBallon",function(e,t,n){return c}),n.Override("generateClassesForArrows",function(e,t,n){return["walkme-custom-tooltip-arrow","walkme-custom-tooltip-arrow-"+t,"walkme-custom-tooltip-arrow-"+e,"walkme-custom-tooltip-arrow-"+e+"-"+t,"walkme-custom-tooltip-item-"+u.itemId]}),function(){n.ExtendsInstance(Tt.create("BaseBalloonDrawer",u));var e=u.balloonSettings.minPopupWidth?u.balloonSettings.minPopupWidth:300;c=u.cssClasses||[],f=n._base,t.getCurrentPlatform()==a.PLATFORM.MobileWeb&&f.defaultMaxWidth(230),f.balloonClass("TooltipV1"),f.minWidth(0),f.minPopupWidth(e),f.arrowHeight(5),f.arrowBaseWidth(9),f.hasBorder(!1),f.shouldScrollToElement(!1),f.balloonTitleSelector(".walkme-tooltip-content"),f.balloonContentSelector(".walkme-tooltip-content")}.apply(null,arguments)}).asProto().dependencies("CommonUtils, ResourceManager, UiUtils, Consts, BalloonPositionProvider, PlatformsService, FeaturesManager"),Tt.register("Tooltip").asCtor(function(e,t){var r;this.show=function(){var n=Et.Deferred();return r.Show(!1,function(e,t){n.resolve(t)}),n.promise()},this.destroy=function(){var e=Et.Deferred();return r.destroy(!1,function(){e.resolve()}),e.promise()},function(){r=e.createBalloon(t)}.apply(null,arguments)}).asProto().dependencies("TooltipBalloonAdapter"),Tt.register("TooltipBalloonAdapter").asCtor(function(a,o,s,l,u,c){function d(e,t){var n,r,i,o=c.clone(e.BalloonSettings);return r=t,(n=o).Color=r.backColor,n.BorderColor=r.borderColor,n.ContentColor=r.textColor,n.BalloonBorderWidth=1,o.Vibrate=!1,(i=o).Animation&&(i.Animation={Id:a.ANIMATION_TYPES.None,InitCSS:{display:"block"},MetaData:{},Options:{},Properties:{}}),o}this.createBalloon=function(e){var t=u.get(),n=d(t,e.styling),r=Et.extend(!0,{},e.drawingOptions);r.balloonSettings=n;var i={element:e.element,forceEmbedBalloonInIframe:!1,positionHelper:o,stepSettings:r.stepSettings||{},text:{title:"",content:e.text,subText:""},data:{type:a.STEP_TYPE.Normal},configuration:n,logger:s,drawer:Tt.create("TooltipDrawerV1",r),siteConfig:t,bindButtonsFunc:l.addButtonEventsToBalloon};return Tt.create("Balloon",i)}}).dependencies("Consts, PositionHelper, Logger, BalloonButtonsEventsBinder, SiteConfigManager, JsonUtils"),Tt.register("TooltipCreator").asCtor(function(){this.create=function(e,t,n,r){var i={element:e,text:t,styling:n,drawingOptions:r};return Tt.create("Tooltip",i)},function(){}.apply(null,arguments)}).dependencies(),Tt.register("TooltipActions").asCtor(function(){this.actions={element:{mouseover:"mouseover.element",mouseout:"mouseout.element",focus:"focus.element",blur:"blur.element",click:"click.element"},tooltip:{show:"show.tooltip",hide:"hide.tooltip"},document:{click:"click.document",touchstart:"touchstart.document"}}}),Tt.register("TooltipController").asCtor(function(e,t,o,i,a,s,n,l){var u,c,d,f,p,g;this.clean=function(){var e=t(d);return m(e,f),m(e.getDocument(),p),u.reset(),c.destroy()},this.setEvents=function(){r(d,f,v),r(Et(d[0].ownerDocument),p,y)},this.show=function(){u.evaluate(n.actions.tooltip.show)},this.hide=function(){u.evaluate(n.actions.tooltip.hide)};var h=".Walkme.Tooltip."+Math.floor(1e7*Math.random());function r(e,t,n){if(t)for(var r=t.length-1;0<=r;r--){var i=t[r];o.bind(e,i+h,n(i))}}function m(e,t){if(t)for(var n=t.length-1;0<=n;n--){var r=t[n];o.unbind(e,r+h)}}function v(e){return function(){u.evaluate(e)}}function y(t){return function(e){e.target==d[0]||Et.contains(d[0],e.target)||u.evaluate(t)}}function S(e,t){t&&(t.shouldShow?c.draw(d).then(function(e){e&&r(e,g,v)}):t.shouldHide&&c.destroy())}!function(){c=l.tooltipDrawer,d=l.boundElement;var e=a.getConfig(S),t=s.get(l.events);f=t.eventsForElement,p=t.eventsForDocument,g=t.eventsForTooltip,u=i.create(e);for(var n=0;n<e.stateMachineInitialActions.length;n++){var r=e.stateMachineInitialActions[n];r.shouldSimulateAction(d)&&u.evaluate(r.action)}}()}).asProto().dependencies("Consts, wmjQuerySafe, EventBinder, StatesMachineCreator, TooltipStatesMachineConfigProvider, TooltipEventsConfiguration, TooltipActions"),Tt.register("TooltipControllerCreator").asCtor(function(){this.create=function(e,t,n){return Tt.create("TooltipController",{tooltipDrawer:e,boundElement:t,events:n})},function(){}.apply(null,arguments)}),Tt.register("TooltipVisibilityEventsProvider").asCtor(function(n,r){this.getEventsByElement=function(e){var t={};t[n.TOOLTIPS_ACTIVATION_MODES.Mouse]=!0,r.isInput(e)&&(t[n.TOOLTIPS_ACTIVATION_MODES.Focus]=!0);return t},function(){}.apply(null,arguments)}).dependencies("Consts, HtmlElementsDataProvider"),Tt.register("TooltipStatesMachineConfigProvider").asCtor(function(e,t,n){this.getConfig=function(e){var t=u;return t=(t=t.concat(c)).concat(d),{initState:i.hidden,transitions:t,timedOutTransitions:l,globalActionFlags:o,defaultTransitionValuesToReturn:s,onStateChangedCallback:e,stateMachineInitialActions:a}};var r={mouseInside:1,focused:2},i={hidden:"hidden",delayShow:"delayShow",visible:"visible",delayHide:"delayHide"},o={};o[e.actions.element.mouseover]={addFlag:[r.mouseInside]},o[e.actions.element.mouseout]={removeFlag:[r.mouseInside]},o[e.actions.element.focus]={addFlag:[r.focused]},o[e.actions.element.blur]={removeFlag:[r.focused]};var a,s=[{fromState:i.delayShow,toState:i.visible,valueToReturn:{shouldShow:1}},{fromState:i.delayHide,toState:i.hidden,valueToReturn:{shouldHide:1}},{fromState:i.visible,toState:i.hidden,valueToReturn:{shouldHide:1}},{fromState:i.hidden,toState:i.visible,valueToReturn:{shouldShow:1}}],l=[{fromState:i.delayShow,timeout:300,toState:i.visible},{fromState:i.delayHide,timeout:300,toState:i.hidden}],u=[{fromState:i.hidden,onAction:e.actions.tooltip.show,toState:i.delayShow},{fromState:i.delayHide,onAction:e.actions.tooltip.show,toState:i.visible},{fromState:i.visible,onAction:e.actions.tooltip.hide,toState:i.hidden,ifNotFlagged:[r.focused,r.mouseInside]},{fromState:i.delayShow,onAction:e.actions.tooltip.hide,toState:i.hidden}],c=[{fromState:i.hidden,onAction:e.actions.element.mouseover,toState:i.delayShow},{fromState:i.delayShow,onAction:e.actions.element.mouseout,toState:i.hidden},{fromState:i.visible,onAction:e.actions.element.mouseout,toState:i.delayHide,ifNotFlagged:[r.focused]},{fromState:i.delayHide,onAction:e.actions.element.mouseover,toState:i.visible},{fromState:i.hidden,onAction:e.actions.element.click,toState:i.visible},{fromState:i.visible,onAction:e.actions.element.click,toState:i.hidden},{fromState:i.visible,onAction:e.actions.document.click,toState:i.hidden,ifNotFlagged:[r.focused]},{fromState:i.visible,onAction:e.actions.document.touchstart,toState:i.hidden,ifNotFlagged:[r.focused]}],d=[{fromState:i.hidden,onAction:e.actions.element.focus,toState:i.visible},{fromState:i.visible,onAction:e.actions.element.blur,toState:i.hidden,ifNotFlagged:[r.mouseInside]},{fromState:i.delayShow,onAction:e.actions.element.focus,toState:i.visible},{fromState:i.delayHide,onAction:e.actions.element.focus,toState:i.visible}];a=[{shouldSimulateAction:function(e){return t.isInput(e)&&Et(e).is(":focus")},action:e.actions.element.focus}],n.isIEOlderThan(9)||a.push({shouldSimulateAction:function(e){return Et(e).is(":hover")},action:e.actions.element.mouseover})}).dependencies("TooltipActions, HtmlElementsDataProvider, HostData"),e.register(te.PLATFORM.Web,function(){Tt.register("TooltipEventsConfiguration").asCtor(et).dependencies("Consts, TooltipActions")}),e.register(te.PLATFORM.MobileWeb,function(){Tt.register("TooltipEventsConfiguration").asCtor(tt).dependencies("Consts, TooltipActions")}),Tt.register("DisabledCourseQuizzesRemover").asCtor(function(){this.remove=function(e){for(var t=0;t<e.length;t++){var n=e[t].Quiz;n&&!n.IsEnabled&&delete e[t].Quiz}}}),Tt.register("QuizStatusManager").asCtor(function(n){this.setQuizStatus=function(e,t){n.saveData(i(e),t,r.expiry)},this.getQuizStatus=function(e){return n.getData(i(e),null)};var r=n.keysConfig.teachMe.quizResult;function i(e){return r.key+"-"+e.Id}}).dependencies("ClientOrServerStorageManager"),Tt.register("QuizPlayer").asCtor(function(i,o,a,s){var l,u;function c(e){var t=i.get(e.UiComponentId,e);return l.registerXButtonClickedEvent(t),p(t,"quiz-submitted").then(function(e,t,n){for(var r=0;r<n.questionsResults.length;r++){var i=n.questionsResults[r];l.raiseQuizAnswerSubmittedEvent(i)}l.raiseQuizSubmittedEvent()}).pipe(function(e,t,n){var r=1==n.didPassQuiz,i=r?t.SuccessSummeryPage:t.FailSummeryPage;return l.raiseQuizCompletionEvent(r,n.score),o.setQuizStatus(t,n.didPassQuiz),Et.Deferred().resolve(t,i,n)})}function d(e,t,n){var r=i.get(t.UiComponentId,[t,e,n]);return l.registerXButtonClickedEvent(r),p(r,"open-quiz-results").pipe(function(){return n})}function f(e){var t=Tt.create("QuizResultsDisplayer",{quizResults:e});return(u=t).show()}function p(e,t){var n=Et.Deferred();return(u=e).once("append-end",function(){e.show(),n.notify("shown")}),e.once(t,function(){n.resolve.apply(null,arguments)}),"destroy-end"!=t&&e.once("destroy-end",function(){n.reject()}),e.append(),n.promise()}this.releaseAll=function(e){u&&u.destroy(),u=null,e&&e()},this.playQuiz=function(e){return(l=Tt.create("QuizPlayEventRaiser",{quiz:e})).raiseQuizPlayEvent(),(t=e,n=t.WelcomePage,r=i.get(n.UiComponentId,[n,t]),l.registerXButtonClickedEvent(r),p(r,"start-quiz").pipe(function(){return t})).pipe(c).pipe(d).pipe(f).always(function(){s.raiseEvent(a.EVENTS.UIComponentDestroyed),u=null});var t,n,r}}).dependencies("UIComponentsFactory, QuizStatusManager, Consts, CommonEvents"),Tt.register("QuizPlayEventRaiser").asCtor(function(r,i,e,t){var o,a;this.raiseQuizPlayEvent=function(){i.raiseEvent(r.EVENTS.Quizzes.QuizPlay,{currentPlayGuid:a,quiz:o})},this.raiseQuizSubmittedEvent=function(){i.raiseEvent(r.EVENTS.Quizzes.QuizSubmitted,{currentPlayGuid:a,quiz:o})},this.raiseQuizAnswerSubmittedEvent=function(e){for(var t={currentPlayGuid:a,quiz:o,questionId:e.questionId,question:e.question},n=0;n<e.userAnswersIds.length;n++)i.raiseEvent(r.EVENTS.Quizzes.QuizAnswerSubmitted,Et.extend({},t,{answerId:e.userAnswersIds[n],answer:e.userAnswers||e.correctAnswers}))},this.raiseQuizCompletionEvent=function(e,t){var n=e?r.EVENTS.Quizzes.QuizPass:r.EVENTS.Quizzes.QuizFail;i.raiseEvent(n,{currentPlayGuid:a,quiz:o,score:t})},this.registerXButtonClickedEvent=function(e){e.once("x-clicked",function(){i.raiseEvent(r.EVENTS.Quizzes.QuizXButtonClicked)})},o=t.quiz,a=e.generateNewPlayGuid(o.Id)}).asProto().dependencies("Consts, CommonEvents, PlayGuidGenerator"),Tt.register("SuperScriptLauncher").asCtor(function(r,i,o,a,s){this.init=function(){return new at(function(e,t){var n=o.getData(o.keysConfig.superScript.loadSuperScript.key),r=window.self===window.top&&n;if(!r)return e();u(n),a.superScriptLoaded=function(){e()}})},this.launch=u,this.disable=e;var l="/devScripts/superscript.js",t="superscript";function u(e){var t=i.getCdnServerName();s.addScript(t+l);var n=o.keysConfig.superScript.loadSuperScript;o.saveData(n.key,e||r.SUPER_SCRIPT.MODE.VISIBLE,n.expiry)}function e(){var e=document.getElementById(t);e&&e.remove(),o.removeData(o.keysConfig.superScript.loadSuperScript.key)}a.launchSuperScript=u,a.disableSuperScript=e}).dependencies("Consts, SettingsFile, ClientStorageManager, WmInternals, CommonUtils"),Tt.register("ContainerAppender").asCtor(function(){this.appendToContainer=function(e,t){return Et(t).appendTo(e)}}),Tt.register("BaseBalloon").asCtor(function(a,s,t,n,r,e){var l,i=Tt.create("WalkmeOOP",this),o=i.Prop.Protected("lib"),u=i.Prop.Protected("title"),c=i.Prop.Protected("content"),d=i.Prop.Protected("customHtml"),f=i.Prop.Protected("stepIndexText"),p=i.Prop.Protected("balloonSettings"),g=i.Prop.Protected("direction"),h=i.Prop.Protected("userGuid"),m=(i.Prop.Protected("contentDiv"),i.Prop.Protected("fixedWidth"),i.Prop.Protected("fixedHeight"),i.Prop.Protected("stepType")),v=i.Prop.Protected("buttons"),y=(i.Virtual.Public("generateHtml",function(){var e=y(),t=S();return n.to_html(e,t)}),i.Virtual.Protected("createHtmlTemplate")),S=i.Virtual.Protected("createTemplateData",function(){!function(e){if(s.get()[e]){var t=s.get()[e];t=(t=(t=t.replace(/&quot;/gi,'"')).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"),s.get()[e]=t}}("BalloonCloseTooltip");var e=r.shouldDisplayX(l);return{data:{title:u(),content:c(),customHtml:d(),stepIndexText:f(),balloonCloseTooltip:s.get().BalloonCloseTooltip},font:p().Font,cssReset:t.CssResetRules,displayX:e,colors:{mainBg:p().Color,minorBg:p().BalloonColor2,border:p().BorderColor,header:p().HeaderColor,content:p().ContentColor,footerText:p().FooterTextColor,buttonBg:p().ButtonBgColor,buttonBg2:p().ButtonBgColor2,buttonBorder:p().ButtonBorderColor,buttonText:p().ButtonTextColor},radiuses:{balloon:p().BalloonRadius+"px",button:p().BalloonButtonRadius+"px"},direction:{basic:g(),side:"rtl"==g()?"right":"left",oppositeSide:"rtl"==g()?"left":"right"},poweredBy:{showText:"txt"==p().showPoweredByFormat,link:p().showPoweredBy?"http://www.walkme.com/?u="+h():""},buttons:v().buttonsArr,border:{size:p().BalloonBorderWidth+"px"}}}),E=(i.Virtual.Public("manipulationsForInlineCss",function(){}),i.Protected("getCustomDivHtml",function(e){return"<div class='walkme-custom-balloon-custom-div-"+e+"' style='display:none;' ></div>"}),i.Virtual.Protected("generateNormalButtonClasses",function(e,t){return C(t,e)}));function T(e,t,n,r){var i={},o=s.get();return i.backButton=i.nextButton=i.doneButton=i.submitButton=!1,i.buttonsArr=[],e&&(i.backButton={order:2,weak:!0,classes:E("back","weak"),buttonText:o.BackButtonText},i.buttonsArr.push(i.backButton)),t&&(i.nextButton={order:3,normal:!0,classes:E("next","normal"),buttonText:o.NextButtonText},"1"==a.getSettingsValue(l,"isNextToDone","0")&&(i.nextButton.buttonText=o.DoneButtonText),i.buttonsArr.push(i.nextButton)),n&&(i.doneButton={order:3,normal:!0,classes:E("done","normal"),buttonText:o.DoneButtonText},i.buttonsArr.push(i.doneButton)),r&&(i.submitButton={order:4,normal:!0,classes:E("submit","normal"),buttonText:o.SubmitButtonText},i.buttonsArr.push(i.submitButton)),i}function w(e){var t=s.get(),n=e.action||-1;switch(parseInt(n)){case 1:return{order:4,normal:!0,classes:C("normal","start"),buttonText:t.WelcomeStepButtonStartText};case 3:return{order:1,weak:!0,classes:C("weak","cancel"),buttonText:t.WelcomeStepButtonCancelText};case 4:return{order:4,normal:!0,classes:E("submit","normal"),buttonText:t.SubmitButtonText};case 5:return{order:4,normal:!0,classes:C("normal","redirect"),buttonText:e.name};case 6:return{order:2,weak:!0,classes:C("weak","stay"),buttonText:e.name};case 7:return{order:4,normal:!0,classes:C("normal","ok"),buttonText:e.name}}var r=e.name||"",i=e.type,o=e.weak?"weak":"normal";return{order:2,weak:e.weak,normal:!e.weak,classes:C(o,i),buttonText:r}}function C(e,t){var n="walkme-custom-balloon-button walkme-custom-balloon-"+e+"-button";return t&&(n+=" walkme-custom-balloon-"+t+"-button walkme-action-"+t),n}i.Public("initButtons",function(e){var t=function(e,t){var n={};if(n.nextButton=n.doneButton=n.backButton=n.submitButton=!1,n.buttonsArr=[],0==t.length)m()!=te.STEP_TYPE.Popup&&(n=T(e.back,e.next,e.done,e.submit));else for(var r=0;r<t.length;r++){var i=t[r];if(0==i.action){var o=T(!1,e.next,e.done,!1);n.nextButton=o.nextButton,n.doneButton=o.doneButton,0<o.buttonsArr.length&&n.buttonsArr.push(o.buttonsArr[0])}else if(2==i.action){var a=T(e.back,!1,!1,!1);n.backButton=a.backButton,0<a.buttonsArr.length&&n.buttonsArr.push(a.buttonsArr[0])}else n.buttonsArr.push(w(i))}return n}({back:e.backButton,next:e.nextButton,done:e.doneButton,submit:e.submitButton},function(){var e=a.getSettingsValue(l,"customButtons",[]);if(0==e.length){var t=m()==te.STEP_TYPE.Popup,n=t?a.getSettingsValue(l,"popupStepButtons",[]):[];e=n}return e}());v(t)}),function(){o(e.lib),u(e.balloonData.title),c(e.balloonData.content),d(e.balloonData.customHtml),f(e.balloonData.stepIndexText),p(e.balloonSettings),g(e.balloonSettings.direction),h(e.userGuid),m(e.stepType),l=e.settings,e.end}.apply(null,arguments)}).asProto().dependencies("CommonUtils, SiteConfigManager, BalloonTemplatesProvider, Mustache, XButtonDisplayChecker"),Tt.register("ArrowsHelper").asCtor(function(f){function m(e,t,n,r,i){if(r==f.POSITION_TYPE.Left&&"ltr"==n||r==f.POSITION_TYPE.Right&&"rtl"==n||i){var o=r==f.POSITION_TYPE.Left?"left":"right";t[0].css("border-"+o+"-color",e.BalloonColor2)}for(var a=0;a<t.length;a++)t[a].addClass("walkme-custom-balloon-arrow-footer")}this.LocalSVNRevision="$Rev$",this.finalizeArrowsPosition=function(e,t){switch(e){case f.POSITION_TYPE.Top:t.top--;break;case f.POSITION_TYPE.Bottom:t.top++;break;case f.POSITION_TYPE.Left:t.left--;break;case f.POSITION_TYPE.Right:t.left++}},this.fixArrows=function(e){var t,n=e.balloonDiv,r=e.arrowsDivs,i=e.result,o=e.isInCaptureMode,a=e.isQuirksMode,s=e.balloonSettings,l=e.arrowBaseWidth,u=e.balloonSettings.Color,c=e.outerArrowColor,d=s.direction;i.positionType==f.POSITION_TYPE.Left||i.positionType==f.POSITION_TYPE.Right?function(e,t,n,r,i,o,a){t.show();var s=Et(".walkme-custom-balloon-bottom-div",t),l=s[0]?s[0].offsetHeight:0,u=o,c=parseFloat(n[0].css("top")),d=parseFloat(t.css("top")),f=t[0]?t[0].offsetHeight:0,p=c-d,g=f-l;if(t.hide(),g-p<u&&p<g){var h=d-(g-p+1);t.css("top",h+"px"),m(e,n,i,r.positionType,a)}else g<=p&&m(e,n,i,r.positionType,a)}(s,n,r,i,d,l,a):o&&i.positionType==f.POSITION_TYPE.Top&&(t=s,r[0].css("border-top-color",t.Color)),a&&function(e,t,n){var r,i=Et(".walkme-custom-balloon-arrow-inner",e.parent()),o=Et(".walkme-custom-balloon-arrow-outer",e.parent());if(i.hasClass("walkme-custom-balloon-arrow-right"))r="right";else{if(!i.hasClass("walkme-custom-balloon-arrow-left"))return;r="left"}i.css("border-"+r+"-color",n),o.css("border-"+r+"-color",t)}(n,c,u)},function(){}.apply(null,arguments)}).asProto().dependencies("Consts"),Tt.register("BalloonV2").asCtor(function(s,l,u,c,e){var d,f,t=Tt.create("WalkmeOOP",this);t.Override("generateHtml",function(){return d.customHtml()&&d.customHtml().inner||d.generateHtml()}),t.Override("generateNormalButtonClasses",function(e,t){return d.generateNormalButtonClasses(e,t)+" mt-custom-balloon-"+e+"-button CUSTOM-STEP-ID"}),t.Override("createTemplateData",function(){var e=d.createTemplateData(),t=u.get();e.outerDiv=d.getCustomDivHtml("outer-div"),e.title=d.getCustomDivHtml("title"),e.content=d.getCustomDivHtml("content"),e.poweredBy.showImage="img"==d.balloonSettings().showPoweredByFormat,e.buttonShadowWidth=d.balloonSettings().ButtonShadowWidth,e.serverName=t;var n,r,i="rtl"==d.direction()?"right":"left";e.data.stepIndexText=(n=d.stepIndexText(),r=d.direction(),function(e,t,n){if(-1<e.indexOf(c.SUBTEXT_CURRENT_START)&&-1<e.indexOf(c.SUBTEXT_CURRENT_END)&&-1<e.indexOf(c.SUBTEXT_TOTAL_START)&&-1<e.indexOf(c.SUBTEXT_TOTAL_END)){var r="<span style='"+(n="float:"+n+";")+"'>&nbsp;</span>";e=(e=(e=(e=(e="<div class='walkme-custom-balloon-current-step-text' style='"+t+n+"'>"+e).replace(c.SUBTEXT_CURRENT_START,"</div>"+r+"<div class='walkme-custom-balloon-current-step-number' style='"+n+"'>")).replace(c.SUBTEXT_CURRENT_END,"</div>"+r+"<div class='walkme-custom-balloon-total-steps-text' style='"+t+n+"'>")).replace(c.SUBTEXT_TOTAL_START,"</div>"+r+"<div class='walkme-custom-balloon-total-steps-number' style='"+n+"'>")).replace(c.SUBTEXT_TOTAL_END,"</div>"),e+="<div style='clear:both;'></div>"}return e}(n,r="direction:"+r+";",i)),e.ie7LayoutFix="overflow: auto;zoom: 1;",e.buttonsExist=0<d.buttons().buttonsArr.length,e.showBottomDiv=!("no"==d.balloonSettings().showPoweredByFormat&&0==d.stepIndexText().length),l.fixGradientColorsInConfiguration(f,"ButtonBgColor"),l.fixGradientColorsInConfiguration(f,"ButtonBgColor2");var o=f.ButtonBgColor,a=f.ButtonBgColor2;return o==a?e.BackgroundCSS=" background-color: "+o+"; ":(e.BackgroundCSS="background:-moz-linear-gradient(top, "+o+" , "+a+" ); background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+o+"), color-stop(100%,"+a+")); background:-webkit-linear-gradient(top, "+o+" 0%,"+a+" 100%); background:-o-linear-gradient(top, "+o+" 0%,"+a+" 100%); background:-ms-linear-gradient(top, "+o+" 0%,"+a+" 100%); background:linear-gradient(to bottom, "+o+" 0%,"+a+' 100%); filter:progid:DXImageTransform.Microsoft.gradient( startColorstr="'+o+'", endColorstr="'+a+'",GradientType=0 ); ',l.isGradientWithBorderRadiusCompatible()||(e.radiuses.button="0"),s.isGradientUsingFilter(e.BackgroundCSS)&&(e.BackgroundCSS+="background: url("+t+"/player/resources/images/spacer.gif) repeat;")),e}),t.Override("createHtmlTemplate",function(){return function(e,t,n){var r=this;r.b(n=n||""),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div mt-custom-balloon-top-div CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";padding-top:5px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 3px; padding-bottom: 1px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 7px;margin:3px 3px 0 3px;direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='min-height: "),r.s(r.f("buttonsExist",e,t,1),e,t,0,388,390,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("30")}),e.pop());r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("0");r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,460,818,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-close-button walkme-action-close mt-custom-balloon-close-button CUSTOM-STEP-ID walkme-action-close' style='opacity:0.7; font-size: 16px; position: absolute; top: 2px; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 8px; cursor: pointer;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";font-weight:normal;font-family:;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop());r.b("<div class='walkme-custom-balloon-title mt-custom-balloon-title CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";font-weight:bold;margin-top:2px;margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(":14px;font-size:15px;color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";font-family:"),r.b(r.t(r.f("font",e,t,0))),r.b(";'>"),r.b(r.t(r.f("title",e,t,0))),r.b(r.t(r.d("data.title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,1134,1429,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content mt-custom-balloon-content CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(";margin-top: 4px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 6px; font-family:"),n.b(n.v(n.f("font",e,t,0))),n.b(";font-size:14px;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";"),n.b(n.v(n.f("ie7LayoutFix",e,t,0))),n.b("'>"),n.b(n.t(n.f("content",e,t,0))),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop());r.b("</div><div class='walkme-custom-balloon-top-div-bottom mt-custom-balloon-top-div-bottom CUSTOM-STEP-ID' style='clear: both;'>"),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("<div class='walkme-custom-balloon-no-buttons-div' style='height: 10px'></div>");r.s(r.f("buttonsExist",e,t,1),e,t,0,1699,2702,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-buttons-div mt-custom-balloon-buttons-div CUSTOM-STEP-ID' style='clear:both;padding:5px;text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(";direction:"),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("'>"),n.s(n.f("buttons",e,t,1),e,t,0,1902,2684,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b("' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(";-moz-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; -webkit-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.b(n.v(n.f("BackgroundCSS",e,t,0))),n.b("-moz-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); -webkit-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); border: 1px solid "),n.b(n.v(n.d("colors.buttonBorder",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal; font-family: Arial; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static; overflow: visible;' "),n.b(n.v(n.f("wtIdAttribute",e,t,0))),n.b(">"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</button>")}),e.pop()),n.b("</div>")}),e.pop());r.b("</div></div>"),r.s(r.f("showBottomDiv",e,t,1),e,t,0,2749,4329,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-separator' style='display: block; margin: 0 10px; height: 1px; opacity: 0.2; filter: alpha(opacity=20); background-color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; line-height: 0px;'>&#160;</div><div class='walkme-custom-balloon-bottom-div' style='position: relative; height: 23px; display: block;'><div class='walkme-custom-balloon-subtext mt-custom-balloon-subtext CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; display:inline-block;font-family: "),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;margin-top:3px;margin-bottom:0px;color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>"),n.b(n.t(n.d("data.stepIndexText",e,t,0))),n.b("</div><div class='walkme-custom-balloon-powered-by-div mt-custom-balloon-powered-by-div CUSTOM-STEP-ID' style='display:inline-block;position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 10px; top: 3px;text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; width:100px; color:"),n.b(n.v(n.d("color.content",e,t,0))),n.b(";text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(" '>"),n.s(n.d("poweredBy.link",e,t,1),e,t,0,3744,3993,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<a class='walkme-custom-balloon-powered-by-link mt-custom-balloon-powered-by-link CUSTOM-STEP-ID' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank' style='text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>")}),e.pop()),n.s(n.d("poweredBy.showText",e,t,1),e,t,0,4035,4048,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("By WalkMe.com")}),e.pop()),n.s(n.d("poweredBy.showImage",e,t,1),e,t,0,4095,4251,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div title='WalkMe.com' style='border: none; background-image: url("),n.b(n.v(n.f("serverName",e,t,0))),n.b("/player/resources/images/by-walkme.png); width: 49px; height: 18px;'></div>")}),e.pop()),n.s(n.d("poweredBy.link",e,t,1),e,t,0,4294,4298,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("</a>")}),e.pop()),n.b("</div></div>")}),e.pop());return r.fl()}});t.ExtendsInstance(Tt.create("BaseBalloon",e)),d=t._base,f=e.balloonSettings}).asProto().dependencies("CommonUtils, BalloonUtils, CdnServer, Consts"),Tt.register("BalloonV3").asCtor(function(i,o,n,a,s,l,u,c,d,e){var f,p,t=Tt.create("WalkmeOOP",this),r=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 wm-custom-balloon-"),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(" "),r.b(r.v(r.f("designTemplateCssClass",e,t,0))),r.b("' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,369,453,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,841,868,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("customHtml",e,t,1),e,t,0,1258,1274,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.f("customHtml",e,t,0)))}),e.pop()),r.s(r.f("customHtml",e,t,1),e,t,1,0,0,"")||(r.s(r.f("displayX",e,t,1),e,t,0,1317,1737,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close walkme-inspect-ignore' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" font-size: 12px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size:14px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,2084,2505,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; "),n.s(n.f("setLineHeight",e,t,1),e,t,0,2377,2396,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(" line-height: 18px;")}),e.pop()),n.b(" font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop())),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; margin-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 10px; float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div><div class='walkme-custom-side-border' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; width: 4px; height: 100%;  top:0px; "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(":0px; border:"),r.b(r.v(r.d("border.side.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": none; border-top: none; border-bottom: none; position: absolute;'></div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3921,3949,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()},g=t.Prop.Public("contentMargin",15);t.Override("manipulationsForInlineCss",function(e){if(!a.isIE(8,"lte")){var t=f.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}}),t.Override("createTemplateData",function(){var e=f.createTemplateData();e.outerDiv=f.getCustomDivHtml("inner-div"),e.title=f.getCustomDivHtml("title"),e.colors.xBtn=f.balloonSettings().XButtonColor,e.colors.stepInfo=f.balloonSettings().StepInfoColor,e.colors.separator=f.balloonSettings().SeparatorColor,e.stepIndexHeight=46,e.top={minHeight:57,textAlign:e.direction.side,title:{paddingTop:12},content:{sideMargin:g(),oppositeSideMargin:g()-2}},e.data.title&&!e.data.content&&(e.top.minHeight=43),e.bottom={},e.bottom.stepIndexMarginTop=10,i.isDefined(e.buttons)&&0!=e.buttons.length||(e.stepIndexHeight-=8,e.bottom.stepIndexMarginTop-=4),e.stepIndexHeight+="px",e.bottom.poweredByHeight+="px",e.xBtn={marginTop:f.balloonSettings().BalloonBorderWidth+"px",marginHorizental:parseInt(f.balloonSettings().BalloonBorderWidth)+4+"px"};var t,n=f.balloonSettings().BalloonBorderWidth-4;n<0&&(n=0),e.border.side={size:n+"px"},e.shadow=o.calculate(f.balloonSettings().ShadowType,f.balloonSettings().ShadowLevel,f.balloonSettings().ShadowColor),e.isNotIe7=!a.isIEBrowser(7),f.buttons().buttonsArr.sort(function(e,t){return e.order-t.order}),e.buttonsHtml=(t=e,u.to_html(function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,906,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 21px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 5px; padding-right: 5px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,690,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 3px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 10px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1028,1546,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1051,1523,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top:6px; margin-bottom:6px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},t)),e.designTemplateCssClass=s.get(p,l.templateEntityType.balloon),e.setLineHeight=!(p&&d.shouldResetLineHeight(p.Settings));var r=p&&c.get(p.DesignTemplateId,l.templateEntityType.balloon);return r&&(e.customHtml=u.to_html(r,e)),e}),t.Override("createHtmlTemplate",function(){return r}),function(){t.ExtendsInstance(Tt.create("BaseBalloon",e)),f=t._base,p=e.entity}.apply(null,arguments)}).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, SpecificEntityDesignTemplateCssClassGetter, SharedConsts, Mustache, DesignTemplateHtmlGetter, DynamicFontSizeService"),Tt.register("BalloonVM1").asCtor(function(n,r,i,o,a,e){var s,t=Tt.create("WalkmeOOP",this),l=t.Prop.Public("contentMargin",15);t.Override("manipulationsForInlineCss",function(e){if(!o.isIE(8,"lte")){var t=s.balloonSettings();i.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),i.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),i.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),i.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}}),t.Override("createTemplateData",function(){var e,t=s.createTemplateData();return t.outerDiv=s.getCustomDivHtml("inner-div"),t.title=s.getCustomDivHtml("title"),t.colors.xBtn=s.balloonSettings().XButtonColor,t.colors.stepInfo=s.balloonSettings().StepInfoColor,t.colors.separator=s.balloonSettings().SeparatorColor,t.stepIndexHeight=46,t.top={minHeight:57,textAlign:t.direction.side,title:{paddingTop:12},content:{sideMargin:l(),oppositeSideMargin:l()-2}},t.data.title&&!t.data.content&&(t.top.minHeight=43),t.bottom={},t.bottom.stepIndexMarginTop=10,n.isDefined(t.buttons)&&0!=t.buttons.length||(t.stepIndexHeight-=8,t.bottom.stepIndexMarginTop-=4),t.stepIndexHeight+="px",t.bottom.poweredByHeight+="px",t.xBtn={marginTop:s.balloonSettings().BalloonBorderWidth-5+"px",marginHorizental:parseInt(s.balloonSettings().BalloonBorderWidth)+4+"px"},t.shadow=r.calculate(s.balloonSettings().ShadowType,s.balloonSettings().ShadowLevel,s.balloonSettings().ShadowColor),t.isNotIe7=!o.isIEBrowser(7),s.buttons().buttonsArr.sort(function(e,t){return e.order-t.order}),t.buttonsHtml=(e=t,a.to_html(function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,920,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 25px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 7px; padding-right: 7px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,704,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; float: left; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 12px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1042,1581,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1065,1558,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top: 11px; margin-bottom:6px; margin-right: 5px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},e)),t}),t.Override("createHtmlTemplate",function(){return function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-vm1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,305,389,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,779,806,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,1194,1715,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" border-radius: 20px; font-size: 23px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; padding-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 18px; padding-bottom: 6px; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" line-height: 30px; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size: 16px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,2082,2468,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:13px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: hidden;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" padding: 3px 3px 3px 0; min-height:36px; background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" position: absolute; color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; left: 50%; transform: translateX(-65%); float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3616,3644,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()}}),function(){t.ExtendsInstance(Tt.create("BaseBalloon",e)),s=t._base}.apply(null,arguments)}).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, Mustache"),Tt.register("BaseBalloonDrawer").asCtor(function(d,c,y,h,f,E,o,p,t,S,m,v,g,T,w,C,e){var b=["top","right","bottom","left"],r=["center","start","end"],n=Tt.create("WalkmeOOP",this),i=n.Prop.Protected("balloon"),a=n.Prop.Protected("balloonClass"),I=n.Prop.Protected("balloonSettings"),_=n.Prop.Protected("minWidth"),s=n.Prop.Protected("maxWidth"),P=n.Prop.Protected("defaultMaxWidth"),A=(n.Prop.Public("minPopupWidth"),n.Prop.Public("arrowHeight")),k=n.Prop.Public("arrowBaseWidth"),l=n.Prop.Public("hasBorder"),u=n.Prop.Public("shouldScrollToElement"),D=n.Prop.Public("balloonTitleSelector"),N=n.Prop.Public("balloonContentSelector"),O=n.Virtual.Protected("addBalloonDiv"),x=n.Virtual.Public("loadResources",function(e,t){t&&t()}),L=n.Virtual.Protected("getArrowsColors");n.Virtual.Public("fixSize",function(e,t,n,r,i,o,a){var s,l,u,c=(l=e,(!(s=r)||s<=0)&&(u=0,mtjQuery.each(mtjQuery("[width], [style*=width], [style*=WIDTH]",l),function(e,t){mtjQuery(t).width()>u&&(u=mtjQuery(t).width())})),u);e.css("visibility","hidden"),e.show();var d,f,p,g,h={height:(d=e).height(),width:d.width()},m=F(e,t,n,!(f=r)||f<=0?P():f,a,h,c,o);return m.height=M(e,i,m.height),g=m,(p=e).width(g.width+"px"),p.height(g.height+"px"),m});var F=n.Virtual.Protected("fixWidth",function(e,t,n,r,i,o,a,s){var l,u,c,d=g.send(E.EVENTS.BalloonLogs.CalculateBalloonWidthCalled,{settings:s,shouldReturnResult:!0});if(d==undefined){h.isQuirksMode(t[0])&&(o.width=J(e));var f=i!=undefined?i:_();o.width<f&&(o.width=f)}else o.width=d;return l=o.width,c=r,(u=a)&&(l<u||c<u)?o=R(a,e,d,r):o.width>r&&(o=R(r,e,d,r)),d==undefined&&(e.css("width",e.width()+1+"px"),o.width=e.width(),o.height=e.height()),o}),M=n.Virtual.Protected("fixHeight",function(e,t,n){return t&&0<t&&(n=t),n}),R=n.Virtual.Protected("handleWiderElement",function(e,t){return mtjQuery(".walkme-custom-balloon-content",t).css("width",e+"px"),t.css("width","auto"),{width:t.width(),height:t.height()}}),B=n.Virtual.Protected("generateHtmlParams",function(e){return{balloonParams:{balloonSettings:I(),balloonData:e.balloonData,userGuid:e.userGuid,settings:e.settings,end:e.end,stepType:e.stepType,contentDiv:e.contentDiv},buttonsParams:{nextButton:e.nextButton,doneButton:e.doneButton,backButton:e.backButton,submitButton:e.submitButton}}}),U=n.Public("generateHtml",function(e){var t=B(e);return i(Tt.create(a(),t.balloonParams)),i().initButtons(t.buttonsParams),i().generateHtml()}),V=(n.Public("manipulationsForInlineCss",function(e){return i().manipulationsForInlineCss(e)}),n.Public("generateBalloonDiv",function(e,t,n,r,i,o,a,s,l,u,c){var d=v(U(o)),f={html:d,type:T.ENTITY_TYPE.step};w.removeIfShould(d,o.settings),(c=c||{}).bbCodeParserVersion=o.settings.v,m.replace(f,l||[],u||{},c);var p=h.isIE(7)?d[0].outerHTML:d,g=O(p,e,t);return G(g,n,r,i,o,a,s),g}),n.Virtual.Protected("generateIdForBalloon",function(e){return"walkme-balloon-"+e})),W=n.Virtual.Protected("generateClassesForBallon",function(e,t,n,r,i){return["walkme-custom-"+n+"-"+e,"walkme-custom-"+r+"-"+t,"walkme-custom-"+(i==te.STEP_TYPE.Popup?"popup":"simple")+"-step"]}),j=n.Virtual.Protected("generateClassesForArrows",function(e,t,n,r){return["walkme-custom-balloon-arrow","walkme-custom-balloon-arrow-"+t,"walkme-custom-balloon-arrow-"+e,"walkme-custom-balloon-arrow-"+e+"-"+t,"walkme-custom-"+r+"-"+n]}),G=n.Virtual.Protected("addIdentifiers",function(e,t,n,r,i,o,a){e.attr("id",V(n));for(var s=W(t,n,a,o,r),l=0;l<s.length;l++)e.addClass(s[l]);var u=f.getCurrentLanguage()||"default";e.addClass("walkme-custom-language-"+u),c.addBrowserSpecificClasses(e),function(e,t){var n=t.balloonData;n.title||e.addClass("walkme-custom-no-title"),n.content||n.customHtml&&(n.customHtml.inner||n.customHtml.outter)||e.addClass("walkme-custom-no-content");var r=t.settings.customButtons&&0<t.settings.customButtons.length;t.settings.popupStepButtons&&0<t.settings.popupStepButtons.length||r||t.nextButton||t.backButton||t.doneButton||t.submitButton||e.addClass("walkme-custom-no-buttons")}(e,i)}),H=n.Virtual.Protected("addArrowClasses",function(e,t,n,r,i){for(var o=j(t,n,r,i),a=0;a<o.length;a++)e.addClass(o[a])}),Y=(n.Virtual.Public("fixArrows",function(){}),n.Virtual.Public("fixQuirksMode",function(){}),n.Virtual.Protected("finalizeArrowsPosition",function(){})),z=(n.Virtual.Public("drawArrows",function(e,t,n,r,i,o,a){var s=function(e,t,n,r,i){var o,a;if(e.positionType==E.POSITION_TYPE.Top||e.positionType==E.POSITION_TYPE.Bottom){var s=e.left+t.width;o=$(e.left,s,k(),e.positionOffset,n.width,n.left,i.offset().left),a=e.positionType==E.POSITION_TYPE.Top?e.top+t.height:e.top-A()}else if(e.positionType==E.POSITION_TYPE.Left||e.positionType==E.POSITION_TYPE.Right){var l=e.top+t.height;a=$(e.top,l,k(),e.positionOffset,n.height,n.top,i.offset().top),e.positionType==E.POSITION_TYPE.Left?(o=e.left+t.width,h.isQuirksMode(r[0])&&(o-=2)):o=e.left-A()}return{top:a,left:o}}(n,r,i,e,o),l={top:s.top,left:s.left};n.positionType==E.POSITION_TYPE.Top&&(l.top=s.top,s.top=s.top-I().BalloonBorderWidth+1,l.left=s.left-1),n.positionType==E.POSITION_TYPE.Bottom&&(s.top=s.top+I().BalloonBorderWidth-1,l.top=s.top-I().BalloonBorderWidth,l.left=s.left-1),n.positionType==E.POSITION_TYPE.Left&&(h.isQuirksMode(e[0])?(s.left=s.left-I().BalloonBorderWidth+1,l.left=s.left+I().BalloonBorderWidth):(s.left=s.left-I().BalloonBorderWidth+1,l.left=s.left+I().BalloonBorderWidth-1),l.top=s.top-1),n.positionType==E.POSITION_TYPE.Right&&(s.left=s.left+I().BalloonBorderWidth-1,l.left=s.left-I().BalloonBorderWidth,l.top=s.top-1),Y(n.positionType,s,l);var u,c=null,d=b[n.positionType],f=L(d);0<I().BalloonBorderWidth&&(c=X(l,n,o,f.outterArrow,A()+1,A()+1),H(c,"outer",d,t,a)),u=X(s,n,o,f.innerArrow,A(),A()),H(u,"inner",d,t,a);var p=[u];return c&&p.push(c),p}),n.Protected("getBalloonBasicWidth",function(e,t,n){var r=0;r=h.isQuirksMode(t[0])?J(e):e.width();var i=0;return i=n||n<=0?s():n,r<_()&&(r=_()),i<r&&(r=i),r}),n.Public("setConfiguration",function(e){t.fixConfiguration(e),I(e),x()}));function Q(){return A()+1}function q(e){var t=e[0],n=t.getBoundingClientRect(),r=y.getElementDocument(e),i=o.getOffsetRect(t,r,window);return o.getElementBoundsWithRectAndOffset(n,i)}function K(){var e=mtjQuery(document);return e.height=e.height(),e.width=e.width(),e.top=0,e.left=0,e}function J(e){var t=mtjQuery(D(),e).text(),n=0,r=0,i=0,o=mtjQuery(N(),e);if(0<o.length){for(var a=o.html().replace(/<br*">/g,"< >").split("< >"),s=0;s<a.length;s++){var l=a[s].replace(/(<([^>]+)>)/gi,"").length;i<l&&(i=l)}var u=mtjQuery(N()+" span",e);r=0<u.length?parseInt(u.css("font-size").replace(/px/,"")):parseInt(o.css("font-size").replace(/px/,""))}var c=mtjQuery(D()+" span",e);n=0<c.length?parseInt(c.css("font-size").replace(/px/,"")):parseInt(mtjQuery(D(),e).css("font-size").replace(/px/,""));var d=0;return d=t.length*n>i*r?t.length*n:i*r,d*=parseFloat(y.getSettingsValue(p.get().Settings,"quirksModeFactor",.5))}function X(e,t,n,r,i,o){var a,s,l,u,c={width:i,height:o,point_direction:a||0,angle:s||0,color:l||"red",background:u||"transparent"};c.color=r;var d,f,p,g=e.top,h=e.left;t.positionType,E.POSITION_TYPE.Bottom,t.positionType,E.POSITION_TYPE.Right,c.point_direction=t.positionType,c.angle=(d=t.positionOffset,f=c.point_direction,p=.5,d==E.POSITION_OFFSET.Start?p=1:d==E.POSITION_OFFSET.End&&(p=0),2!=f&&3!=f||(p=1-p),p);var m,v,y,S=(m=c,v=n[0].ownerDocument,(y=mtjQuery(v.createElement("div"))).css("display","block"),y.css("width","0"),y.css("height","0"),y.css("border",m.width+"px solid transparent"),y.css("border-"+b[m.point_direction]+"-color",m.color),y.css("line-height","0"),y.css("border-"+b[(m.point_direction+2)%4],"0px"),3==m.point_direction||1==m.point_direction?y.css("border-style","outset solid solid solid"):y.css("border-style","solid outset solid solid"),y);return S.css({visibility:"hidden",top:g+"px",left:h+"px"}),mtjQuery(n.append(S)),S}function $(e,t,n,r,i,o,a){var s,l,u,c;return r==E.POSITION_OFFSET.Center?s=(t+e-n)/2:r==E.POSITION_OFFSET.Start?s=o+(i-n)/2:r==E.POSITION_OFFSET.End?s=o+(i-n)/2:d.error(null,"incorrect offset type: "+r),C.isFeatureEnabled(E.FEATURES.FixArrowsOutsideElement)&&(s=function(e,t,n,r,i){var o=t+n-i<e;if(e<t-i||o){var a=t+n/2-i;return a-r/2}return e}(s,o,i,n,a)),u=e,(c=t-n)<(l=s)?c:l<u?u:l}function Z(e,t,n,r){return{top:e.top-t.height-n>r.top,right:e.right+t.width+n<r.width+r.left,bottom:e.bottom+t.height+n<r.height+r.top,left:e.left-t.width-n>r.left}}n.Public("decideWhereToPopForCaptureBalloon",function(e,t,n,r){try{var i={width:n,height:r},o=K(),a=q(e),s=Q();return ee(a,i,t,s,o,!0)}catch(l){d.error(l)}}),n.Public("getPossiblePositionsForCaptureBalloon",function(e,t,n){try{var r={width:t,height:n},i=K();return Z(q(e),r,Q(),i)}catch(o){d.error(o)}}),n.Public("addPositionClass",function(e,t){var n="walkme-custom-position-"+b[t.positionType];n+=" walkme-custom-offset-"+r[t.positionOffset],e.addClass(n)});var ee=n.Virtual.Public("decideWhereToPop",function(e,t,n,r,i,o){var a,s,l=e.left+e.width/2,u=e.top+e.height/2,c=Z(e,t,r,i),d=l-t.width/2>i.left,f=l+t.width/2<i.width+i.left,p=u-t.height/2>i.top,g=u+t.height/2<i.height+i.top,h=0;n==E.POSITION_TYPE.Top||n==E.POSITION_TYPE.Bottom?(d&&f?s=E.POSITION_OFFSET_TYPE.HorizontalCentered:d?f||(s=E.POSITION_OFFSET_TYPE.SnapToViewportRight):s=E.POSITION_OFFSET_TYPE.ToRight,a=n==E.POSITION_TYPE.Top?E.POSITION_TYPE.Top:E.POSITION_TYPE.Bottom,o&&(a=c.top&&n==E.POSITION_TYPE.Top||n==E.POSITION_TYPE.Bottom&&!c.bottom?E.POSITION_TYPE.Top:E.POSITION_TYPE.Bottom)):n!=E.POSITION_TYPE.Right&&n!=E.POSITION_TYPE.Left||(g&&p?s=E.POSITION_OFFSET_TYPE.VerticallyCentered:g&&p||(s=E.POSITION_OFFSET_TYPE.Below,h=2-A()),a=n==E.POSITION_TYPE.Left?E.POSITION_TYPE.Left:E.POSITION_TYPE.Right,o&&(a=c.left&&n==E.POSITION_TYPE.Left||n==E.POSITION_TYPE.Right&&!c.right?E.POSITION_TYPE.Left:E.POSITION_TYPE.Right));var m=S.getOrientationByName(a),v=S.getOffsetByName(s);return{top:Math.ceil(y.defaultValue(m.getTopPosition(e,t,r,i),v.getTopPosition(e,t,r,i)+h)),left:Math.ceil(y.defaultValue(m.getLeftPosition(e,t,r,i),v.getLeftPosition(e,t,r,i)+h)),positionType:m.type,positionOffset:v.type}});(function(){s(400),P(400),l(!0),D(".walkme-custom-balloon-title"),N(".walkme-custom-balloon-content"),u(!0),z(e.balloonSettings)}).apply(null,arguments)}).asProto().dependencies("Logger, UiUtils, CommonUtils, HostData, LanguageManager, Consts, PositionHelper, SiteConfigManager, BalloonUtils, BalloonOrientationProvider, PlaceholdersReplacer, wmjQuery, MessageSender, SharedConsts, XButtonRemover, FeaturesManager"),Tt.register("BalloonDrawerV2").asCtor(function(i,o,t){var v,n=Tt.create("WalkmeOOP",this);n.Override("addBalloonDiv",function(e,t,n){var r=mtjQuery(t[0].ownerDocument.createElement("div"));return r.addClass("walkme-custom-balloon-outer-div"),r.addClass("mt-custom-balloon-outer-div"),r.css({direction:"ltr",display:"block",visibility:"hidden",top:0}),o.setStyleForBalloon(r,v.balloonSettings(),n),i.setLangAttribute(r),r.html(e),r}),n.Override("addIdentifiers",function(e,t,n,r,i,o,a){v.addIdentifiers(e,t,n,r,i,o,a),Et("*",e).addClass("walkme-custom-step-"+n)}),n.Override("addArrowClasses",function(e,t,n,r,i){v.addArrowClasses(e,t,n,r,i),e.addClass("mt-custom-balloon-arrow-"+t)}),n.Override("getArrowsColors",function(e){var t,n,r,i,o,a,s,l,u,c,d,f,p,g=v.balloonSettings(),h=""==g.BalloonColor2?"transparent":g.BalloonColor2,m=g.BorderColor;switch(e){case"bottom":h=""==g.Color?"transparent":g.Color;break;case"top":break;case"left":case"right":"transparent"==g.Color||"transparent"==g.BalloonColor2||"#00000000"==g.Color||"#00000000"==g.BalloonColor2?h="transparent":(t=g.Color,n=g.BalloonColor2,r=function(e,t){return(e+t)/2},o=function(e){return(e>>0).toString(16)},a=(i=function(e){return parseInt((""+e).replace("#",""),16)})(t),s=i(n),u=function(e){return e>>8&255},c=function(e){return 255&e},d=o(r((l=function(e){return e>>16&255})(a),l(s))),f=o(r(u(a),u(s))),p=o(r(c(a),c(s))),h="#"+(d.length<2?"0"+d:d)+(f.length<2?"0"+f:f)+(p.length<2?"0"+p:p))}return{innerArrow:h,outterArrow:m}}),function(){n.ExtendsInstance(Tt.create("BaseBalloonDrawer",t));var e=t.balloonSettings.minPopupWidth?t.balloonSettings.minPopupWidth:400;(v=n._base).balloonClass("BalloonV2"),v.minWidth(190),v.arrowHeight(13),v.arrowBaseWidth(26),v.minPopupWidth(e)}.apply(null,arguments)}).asProto().dependencies("UiUtils, BalloonUtils"),Tt.register("BalloonDrawerV3").asCtor(function(r,i,o,a,e,t,s,l,n){var u,c,d=Tt.create("WalkmeOOP",this);function f(e,t){e.css("width",t+"px")}function p(){return u.balloonSettings().BorderColor}d.Override("addBalloonDiv",function(e,t){var n=i.createElementInDocument(e,t[0].ownerDocument);return a.setLangAttribute(n),n.css({display:"none",top:0}),n}),d.Override("loadResources",function(e,t){var n=u.balloonSettings().FontsData;n?o.fonts(n,e,t,t):t&&t()}),d.Override("getArrowsColors",function(e){var t=u.balloonSettings(),n=t.Color,r=p(),i=t.direction;switch(e){case"bottom":n=t.Color;break;case"top":n=t.BalloonColor2;break;case"left":"ltr"==i?n=t.Color:(n=t.ButtonBgColor,r=t.ButtonBgColor);break;case"right":"ltr"==i?(n=t.ButtonBgColor,r=t.ButtonBgColor):n=t.Color}return{innerArrow:n,outterArrow:r}}),d.Override("fixArrows",function(e){e.balloonSettings=u.balloonSettings(),e.arrowBaseWidth=u.arrowBaseWidth(),e.outerArrowColor=p(),r.fixArrows(e)}),d.Override("fixQuirksMode",function(e){Et(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",e).hide();var t=Et(".walkme-custom-powered-by-div",e);if(0<t.length){var n=t.css("margin-bottom"),r=t.css("margin-top");t.css("margin-bottom","0px").css("margin-top","0px"),t.css("padding-bottom",n).css("padding-top",r)}}),d.Override("finalizeArrowsPosition",function(e,t,n){r.finalizeArrowsPosition(e,t)}),d.Override("generateHtmlParams",function(e){var t=u.generateHtmlParams(e);return t.balloonParams.entity=c,t}),d.Override("handleWiderElement",function(e,t,n,r){var i=mtjQuery(".walkme-custom-balloon-content",t),o=mtjQuery(".walkme-custom-balloon-title",t);return o.css("width","10px"),n!=undefined?f(t,n):e<=r?f(t,r):(0<i.length?f(i,e):f(o,e),t.css("width","auto"),f(t,t.width())),o.css("width","auto"),{width:t.width(),height:t.height()}}),d.Override("generateClassesForArrows",function(e,t,n,r){var i=u.generateClassesForArrows(e,t,n,r),o=s.get(c,l.templateEntityType.balloon);return o&&i.push(o),i}),function(){d.ExtendsInstance(Tt.create("BaseBalloonDrawer",n));var e=n.balloonSettings.minPopupWidth?n.balloonSettings.minPopupWidth:300;(u=d._base).balloonClass("BalloonV3"),u.minWidth(190),u.minPopupWidth(e),u.arrowHeight(10),u.arrowBaseWidth(18),u.hasBorder(!1),c=n.entity}.apply(null,arguments)}).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, ContainerAppender, SpecificEntityDesignTemplateCssClassGetter, SharedConsts"),Tt.register("BalloonDrawerVM1").asCtor(function(r,i,o,a,e,s,t){var l,n=Tt.create("WalkmeOOP",this);n.Override("addBalloonDiv",function(e,t){var n=i.createElementInDocument(e,t[0].ownerDocument);return s.isFeatureEnabled("accessibility")&&(focusableElements=n.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),i.addTabIndex(focusableElements),focusableElements.on("focus",function(){Et(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){Et(this).css({outline:"none","outline-offset":"0px"})})),a.setLangAttribute(n),n.css("display","none"),n}),n.Override("loadResources",function(e,t){var n=l.balloonSettings().FontsData;n?o.fonts(n,e,t,t):t&&t()}),n.Override("getArrowsColors",function(e){var t=l.balloonSettings(),n=(t.Color,u());return{innerArrow:"top"==e?t.BalloonColor2:t.Color,outterArrow:n}}),n.Override("fixArrows",function(e){e.balloonSettings=l.balloonSettings(),e.arrowBaseWidth=l.arrowBaseWidth(),e.outerArrowColor=u(),r.fixArrows(e)}),n.Override("fixQuirksMode",function(e){var t=Et(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",e);t.hide();var n=Et(".walkme-custom-powered-by-div",e);if(0<n.length){var r=n.css("margin-bottom"),i=n.css("margin-top");n.css("margin-bottom","0px").css("margin-top","0px"),n.css("padding-bottom",r).css("padding-top",i)}}),n.Override("finalizeArrowsPosition",function(e,t,n){r.finalizeArrowsPosition(e,t)}),n.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t),r=mtjQuery(".walkme-custom-balloon-title",t);r.css("width","10px"),n.css("width",e+"px"),t.css("width","auto"),r.css("width","auto");var i={width:t.width(),height:t.height()};return i});function u(){return l.balloonSettings().ButtonBgColor}(function(){n.ExtendsInstance(Tt.create("BaseBalloonDrawer",t));var e=t.balloonSettings.minPopupWidth?t.balloonSettings.minPopupWidth:300;(l=n._base).balloonClass("BalloonVM1"),l.minWidth(190),l.minPopupWidth(e),l.arrowHeight(10),l.arrowBaseWidth(18),l.hasBorder(!1),l.defaultMaxWidth(230)}).apply(null,arguments)}).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, FeaturesManager"),Tt.register("BalloonDrawerFactory").asCtor(function(){this.get=function(e,t){var n;switch(e){case"v3":n=Tt.create("BalloonDrawerV3",t);break;case"vm1":n=Tt.create("BalloonDrawerVM1",t);break;default:n=Tt.create("BalloonDrawerV2",t)}return n},function(){}.apply(null,arguments)}),Tt.register("ClickAndHoverAdder").asCtor(function(){function l(e,t,n){Et(e).css(t,n)}this.addClickAndHover=function(e){var t=e.cssProperty,n=e.regularColor,r=e.hoverColor,i=e.clickColor,o=e.elemSelector,a=!1,s=e.balloonDiv.find(o);s.mouseenter(function(e){a=!0,Et(".walkme-click-and-hover:active")[0]==e.currentTarget?l(e.currentTarget,t,i):l(e.currentTarget,t,r)}),s.mouseleave(function(e){a=!1,l(e.currentTarget,t,n)}),s.mouseup(function(e){l(e.currentTarget,t,a?r:n)}),s.mousedown(function(e){l(e.currentTarget,t,i)})},function(){}.apply(null,arguments)}),Tt.register("ShadowCalculator").asCtor(function(i){var o=1,a=2;this.calculate=function(e,t,n){if(e==o)switch(t){case 0:return"1px 1px 3px 0px rgba(0, 0, 0, 0.2)";case 1:return"0px 0px 13px 0px rgba(0, 0, 0, 0.2)";case 2:return"0px 0px 13px 5px rgba(0, 0, 0, 0.2)"}else if(e==a){var r=i.hexToRgba(n,.6);switch(t){case 0:return"0px 0px 7px 0px rgba"+r;case 1:return"0px 0px 14px 0px rgba"+r;case 2:return"0px 0px 26px 5px rgba"+r}}},function(){}.apply(null,arguments)}).dependencies("UiUtils"),Tt.register("BalloonPositionProvider").asCtor(function(c,o){function g(e,t,n){var r=t.getLeftPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),i=t.getTopPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea);return{left:o.defaultValue(e.left,r),top:o.defaultValue(e.top,i),positionType:e.positionType,positionOffset:t.type}}function h(e,t,n){e.top=t.getTopPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.left=t.getLeftPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.positionType=t.type}this.findBestPosition=function(e,t,n,r,i){var o=c.getOrderedDirections({lowPriorityDirection:i}),a=c.getOrderedOffsets();return function(e,t){for(var n={},r=0;r<t.mainOrientations.length;r++){var i=t.mainOrientations[r];h(n,i,e);for(var o=0;o<t.offsets.length;o++){var a=t.offsets[o];if(a.isRelevant(n)){var s=g(n,a,e);if(s&&(l=s,void 0,c=(u=u=u=e).drawingArea.top<l.top,d=l.left+u.balloonSize.width<u.drawingArea.left+u.drawingArea.width,f=l.top+u.balloonSize.height<u.drawingArea.top+u.drawingArea.height,p=u.drawingArea.left<l.left,c&&d&&f&&p))return s}}}var l,u,c,d,f,p;return undefined}({elementBounds:e,balloonSize:t,marginFromElement:n,drawingArea:r},{mainOrientations:o,offsets:a})},this.getPredefinedPosition=function(e,t,n,r,i,o){var a={},s=c.getOrientationByName(i),l=c.getOffsetByName(o)||c.getOffsetByName(s.defaultOffset),u={elementBounds:e,balloonSize:t,marginFromElement:n,drawingArea:r};return h(a,s,u),g(a,l,u)}}).dependencies("BalloonOrientationProvider, CommonUtils"),Tt.register("BalloonOrientationProvider").asCtor(function(e,t){this.getOrderedDirections=function(e){e=e||{};var t=l()?o:i;return u(c,t,e.lowPriorityDirection)},this.getOrderedOffsets=function(){var e=l()?s:a;return u(d,e)},this.getOrientationByName=function(e){return c[e]},this.getOffsetByName=function(e){return d[e]};var n="Direction",r="rtl",i=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Right,e.POSITION_TYPE.Left],o=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Left,e.POSITION_TYPE.Right],a=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToRight,e.POSITION_OFFSET_TYPE.ToLeft],s=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToLeft,e.POSITION_OFFSET_TYPE.ToRight];function l(){var e=t.get();return e&&e[n]==r}function u(e,t,n){for(var r,i=[],o=0;o<t.length;o++)i.push(e[t[o]]);return n!==undefined&&(r=n,i.sort(function(e,t){return e.type==r?1:t.type==r?-1:0})),i}var c={};c[e.POSITION_TYPE.Top]={type:e.POSITION_TYPE.Top,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.top-t.height-n},getLeftPosition:function(e,t,n,r){return undefined}},c[e.POSITION_TYPE.Bottom]={type:e.POSITION_TYPE.Bottom,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.bottom+n},getLeftPosition:function(e,t,n,r){return undefined}},c[e.POSITION_TYPE.Right]={type:e.POSITION_TYPE.Right,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return e.right+n}},c[e.POSITION_TYPE.Left]={type:e.POSITION_TYPE.Left,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return e.left-t.width-n}};var d={};d[e.POSITION_OFFSET_TYPE.VerticallyCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return Math.ceil(e.top+e.height/2-t.height/2)},getLeftPosition:function(e,t,n,r){return undefined}},d[e.POSITION_OFFSET_TYPE.Above]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.bottom-t.height},getLeftPosition:function(e,t,n,r){return undefined}},d[e.POSITION_OFFSET_TYPE.Below]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.top},getLeftPosition:function(e,t,n,r){return undefined}},d[e.POSITION_OFFSET_TYPE.HorizontalCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return Math.ceil(e.left+e.width/2-t.width/2)}},d[e.POSITION_OFFSET_TYPE.ToRight]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return e.left}},d[e.POSITION_OFFSET_TYPE.ToLeft]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return e.right-t.width}},d[e.POSITION_OFFSET_TYPE.SnapToViewportRight]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return undefined},getLeftPosition:function(e,t,n,r){return r.left+r.width-t.width-1}}}).dependencies("Consts, SiteConfigManager"),Tt.register("BalloonPositionVisibilityChecker").asCtor(function(n,d,a,o){function f(e,t,n){var r=t+n,i=o.get();return e<t-i||r+i<e}this.isBalloonPositionVisibleRelativeToParents=function(e,t){if(d.isFeatureEnabled("disableIEVRTP"))return!0;var n,r="absolute"==(n=e.css("position"))||"fixed"==n;if(r)return!0;var l=function(e,t){var n=e.offset(),r=e.height(),i=e.width(),o={top:n.top,left:n.left};switch(t){case 0:o.left+=i/2;break;case 1:o.top+=r/2,o.left+=i;break;case 2:o.top+=r,o.left+=i/2;break;case 3:o.top+=r/2;break;default:a.error(new Error("Unknown balloon position"))}return o}(e,t),i=e.parents("div"),u=!1,c=!1,o=!s(i,function(e){var e=mtjQuery(e);if(!d.isFeatureEnabled("disableAbsRTP")&&"absolute"==e.css("position"))return u=!0;if(!d.isFeatureEnabled("disableFixRTP")&&"fixed"==e.css("position"))return c=!0;var t,n,r,i,o=e.css("overflow"),a="auto"==(t=o)||"scroll"==t||"hidden"==t,s=(n=l,i=(r=e).offset(),f(n.top,i.top,r.outerHeight())||f(n.left,i.left,r.outerWidth()));return a&&s});return u||c||o};var s=function(e,t){return null!=n.firstMatch(e,t)}}).dependencies("CommonUtils, FeaturesManager, Logger, ElementBoundsBufferGetter"),Tt.register("ElementBoundsBufferGetter").asCtor(function(n){this.get=function(){var e=n.get().Custom,t=e&&e.elementBoundsBuffer;return t==undefined?0:Number(t)}}).dependencies("SiteConfigManager"),Tt.register("PopupBalloonDisplayer").asCtor(function(f,p,g,h,m,v,y,S,E){this.showSpecialPopupBalloon=function(e,t,n,r,i,o,a,s){var l=f.get(!0),u=E.clone(n);i&&(u.displayX=!1);var c=p.get().BalloonSettings;c=E.clone(c),Et.extend(c,o);var d=Tt.create("Balloon",{element:l,forceEmbedBalloonInIframe:!1,positionHelper:g,fixedSize:{width:t,height:0},stepSettings:u,htmlContent:e.htmlContent,text:{title:e.title||"",content:e.text||"",subText:e.subText||""},data:{type:h.STEP_TYPE.Popup},configuration:c,logger:m,drawer:y.getBalloonDrawer(c,s),siteConfig:p.get(),bindButtonsFunc:a?undefined:S.addButtonEventsToBalloon});return new at(function(n){d.Show(!1,function(){var e=mtjQuery(d.getBalloonDiv());if(e.removeClass("walkme-custom-step-undefined"),mtjQuery("*",e).removeClass("walkme-custom-step-undefined"),e.removeClass("walkme-custom-walkthru-undefined"),mtjQuery("*",e).removeClass("walkme-custom-walkthru-undefined"),o&&o.surveyId){var t=o.surveyId;e.attr("id","walkme-survey-balloon-"+t)}r(e,c),n(d)}),v.add(d)})}}).dependencies("PopupStepElementProvider, SiteConfigManager, PositionHelper, Consts, Logger, BalloonsContainer, BalloonDrawerProvider, BalloonButtonsEventsBinder, JsonUtils"),Tt.register("BalloonDrawerProvider").asCtor(function(o,a,s){this.getBalloonDrawer=function(e,t){var n=function(e){var t=s.clone(e),n=o.get();n&&(t.direction=n.Direction,t.showPoweredBy="1"==n.PoweredByLink,t.showPoweredByFormat=n.IsDisplayPoweredBy);return t}(e),r={balloonSettings:n,entity:t},i=n.BalloonVersion;return a.get(i,r)}}).dependencies("SiteConfigManager, BalloonDrawerFactory, JsonUtils"),Tt.register("BalloonButtonsEventsBinder").asCtor(function(n,r,i,o,a,s){this.addButtonEventsToBalloon=function(e,t){n.bind(e,null,t),e.on("click mousedown mouseup",function(e){o.isFeatureEnabled(a.FEATURES.ShadowRootsInspector)||s.wrapWithEvent(e)})},this.attachBalloonXButtonClickEvent=function(e){mtjQuery(".walkme-action-close, .walkme-action-cancel",e).click(function(e){var t;t={ClickEvent:e},i.raiseEvent("UserStoppedWalkthru",t),r.releaseBalloons()})}}).dependencies("BBCodeEventsBinder, LibDestroyer, CommonEvents, FeaturesManager, Consts, StopPropagationWrapper"),Tt.register("XButtonDisplayChecker").asCtor(function(t){this.shouldDisplayX=function(e){return 1==t.getSettingsValue(e,"displayX",!0)||"True"==t.getSettingsValue(e,"displayX","True")||1==t.getSettingsValue(e,"displayX",1)}}).dependencies("CommonUtils"),Tt.register("BalloonsContainer").asCtor(function(e){var t;function n(){t=[]}function r(){return t}this.add=function(e){t.push(e)},this.removeAll=n,this.getAll=r,this.stopAll=function(){e.executeParallel({objectsArray:r(),functionsToExecute:[function(e,t){e.stop(),t&&t()}]})},n()}).dependencies("CommonUtils"),Tt.register("BalloonPositionCheckSettingsGetter").asCtor(function(t,n){this.get=function(){var e=t.get();return e.Custom&&e.Custom.BalloonPositionCheckSettings||{positionChangePixelsThreshold:n.DEFAULT_CHANGE_PIXELS_THRESHOLD}}}).dependencies("SiteConfigManager,Consts"),Tt.register("IconsFilterer").asCtor(function(e){var t;this.getById=function(n){var e=Et(t()).filter(function(e,t){return t.Id==n});if(e)return e[0];return null},t=e.getImages}).asProto(),Tt.register("CustomImagesProvider").dependencies("IconTemplates").asFunction(function(e){return Tt.create("IconsFilterer",{getImages:function(){return e.customImages}})}),Tt.register("HtmlShapesProvider").dependencies("IconTemplates").asFunction(function(e){return Tt.create("IconsFilterer",{getImages:function(){return e.htmlImages}})}),Tt.register("DocumentElementEventsBinder").asCtor(function(o){this.on=function(e,t,n,r){if(!n)return;n=[].concat(n);var i=Et(e[0].ownerDocument);t=t||e;for(var o=0;o<n.length;o++)i.find(t).on(n[o],r)},this.off=function(e,t,n){if(!n)return;n=[].concat(n);var r=o(e).getDocument();t=t||e;for(var i=0;i<n.length;i++)r.find(t).off(n[i])}}).asProto().dependencies("wmjQuerySafe"),Tt.register("AuditTasksManager").asCtor(function(r,i,o,a,s,l){this.auditTaskPlayed=function(e,t){if(!l.isEnabled())return;var n=s.get(e.RelatedDeployableType).getById(e.RelatedDeployableId);r.postEvent(i.EVENT_SENDER_EVENT_TYPES.Play,{type:i.EVENT_SENDER_EVENT_APPS.Task,oId:e.Id,oName:e.Name,pId:"-1",aoId:n.Id,aoName:n.Name,aAppType:a.map(e.RelatedDeployableType),pInit:o.map(t)})},function(){}.apply(null,arguments)}).dependencies("EventSender, Consts, ReportInitiatorMapper, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, AuditingEnabledIndicator"),Tt.register("EndUserLoggerManager").asCtor(function(c,d,f,p,e,g,h,m,v,y,S,E){var T,w,C,n=c.keysConfig.endUserLogging.auditFreq;function b(){return n.key+f.getEndUserGuid()}function I(e,t){c.saveData(b(),t,n.expiryFunc(e))}this.reportEndUser=function(t,e){if(!C){var n=p.get().EndUserSettings?p.get().EndUserSettings.auditFreq:null,r=function(){w===undefined&&(w=p.get().EndUserSettings&&p.get().EndUserSettings.logWalkMeVisible);return w}();if(r&&!n&&(n=1440),n&&(!r||e)){var i=c.getData(b());if(i)C=!0;else{if(0===i)return d.customerLog("Loading WalkMe Failed due to ISV Limitations",1),void(t&&t());if(function(){if(window.walkme_sf_vars&&window.walkme_sf_vars.walkme_error)return!0;return!1}())return o=window.walkme_sf_vars,a="walkme_sf_error:"+E.toJSON(o),void d.customerLog(a,1,"endUser");var o,a,s={permutationId:T(),endUserGuid:f.getEndUserGuid(),domain:window.location.host,source:y.get(),browser:h.browser.string,os:h.os.name,userGuid:S.getUserGuid()};m.isFeatureEnabled("dontReportSF")||(s.organizationName=function(){if(window.walkme_sf_vars)return window.walkme_sf_vars.organizationName}(),s.organizationId=function(){if(window.walkme_sf_vars)return window.walkme_sf_vars.organizationId}(),s.roleId=function(){if(window.walkme_sf_vars)return window.walkme_sf_vars.roleId}(),s.extraData=function(){if(!window.walkme_sf_vars)return;var e=E.clone(window.walkme_sf_vars);return delete e.organizationName,delete e.organizationId,delete e.userId,e}());var l="Logging WalkMe EndUser ("+f.getEndUserGuid()+"). Caused by WalkMe Visible : "+!!e;d.customerLog(l,1,"endUser");var u=E.toJSON(s);C=!0;v.execute({dataType:"jsonp",url:g.get()+"/EndUser/AddEndUserData",data:{endUsersDataSerialized:u},timeout:1e4,success:function(e){"true"==e?I(n,1):"false"==e&&(I(n,0),t&&t())}})}}}},function(){T=e.getCurrentPermutation}.apply(null,arguments)}).dependencies("ClientStorageManager, Logger, EndUsersManager, SiteConfigManager, AbCurrentPermutationProvider, RecorderServerManager, HostData, FeaturesManager, WmAjax, AuditSourceManager, UserGuidContainer, JsonUtils"),e.register([te.PLATFORM.Web,te.PLATFORM.Desktop],function(){Tt.register("screen").asInstance(screen)}),e.register(te.PLATFORM.MobileWeb,function(){Tt.register("screen").asCtor(nt).dependencies("ExternalWalkMeConfig")}),Tt.register("ScreenSizeConditionFunctions").asCtor(function(){var t=Tt.get("screen");this.getFuncList=function(){return e},this.getFuncAssert=function(){return n},this.getAsyncFuncs=function(){return r};var e={widthMoreThan:function(e){return t.width>e.funcArgs.WidthInput},widthLessThan:function(e){return t.width<e.funcArgs.WidthInput},heightMoreThan:function(e){return t.height>e.funcArgs.HeightInput},heightLessThan:function(e){return t.height<e.funcArgs.HeightInput}},n=[],r=[]}).asSingleton().dependencies("screen"),Tt.register("WindowSizeConditionFunctions").asCtor(function(){var t=Tt.get("win");function n(e,t,n){return t!=e.WindowSizeInput&&t>e.WindowSizeInput===n}this.getFuncList=function(){return e},this.getFuncAssert=function(){return r},this.getAsyncFuncs=function(){return i};var e={WindowSizeMoreThan:function(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!0);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!0)}},WindowSizeLessThan:function(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!1);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!1)}}},r=[],i=[]}).asSingleton().dependencies("win");var rt=function(){function e(e,t,n,r){this.args=[];for(var i=0;i<arguments.length;i++)arguments[i]&&this.args.push(arguments[i])}return e.prototype.getFuncList=function(){var n={};return Et.safeEach(this.args,function(e,t){t&&t.getFuncList&&Et.extend(n,t.getFuncList())}),n},e.prototype.getFuncAssert=function(){var n=[];return Et.safeEach(this.args,function(e,t){t&&t.getFuncAssert&&Et.extend(n,t.getFuncAssert())}),n},e.prototype.getAsyncFuncs=function(){var n=[];return Et.safeEach(this.args,function(e,t){t&&t.getAsyncFuncs&&n.push.apply(n,t.getAsyncFuncs())}),n},e}();Tt.register("ConditionFunctionsHandler").asCtor(rt).asSingleton().dependencies("ScreenSizeConditionFunctions, WindowSizeConditionFunctions, HistoricalConditionFunctions, OnboardingConditionFunctions");var wt={};wt.fixed=function(e){var t=new wt.regular;return t.setValue(e),t},wt.noMemory=function(){var t,n,r;this.onGotValue=function(e){},this.getValue=function(e){return e?r:r=n()},this.onResourceClean=function(e){t=e},this.cleanResources=function(){t&&t()},this.onRefresh=function(){},this.refresh=function(){},function(e){n=e}.apply(null,arguments)},wt.regular=function(){var t,n,r,i=[];this.onGotValue=function(e){n=e},this.setValue=function(e){t=e,n&&n()},this.getValue=function(){return t},this.onResourceClean=function(e){i.push(e)},this.cleanResources=function(){for(var e=0;e<i.length;e++)try{i[e]()}catch(t){}i.length=0,n=undefined},this.onRefresh=function(e){r=e},this.refresh=function(){r&&r()},function(e){t=e}.apply(null,arguments)},wt.complex=function(){var r,i,o,t;this.getValue=function(e){return e?t:t=o(r.getValue,i.getValue)},this.onGotValue=function(e){r.onGotValue(e),i.onGotValue(e)},this.cleanResources=function(){r.cleanResources(),i.cleanResources(),undefined},this.refresh=function(){r.refresh(),i.refresh()},function(e,t,n){r=e,i=t,o=n}.apply(null,arguments)},Tt.register("SonarEventHandler").asCtor(function(u,c,d,f,p){this.handleEvent=function(i,o,a,s,l){var e=function(e){c.customerLog("An event was fired for condition checker result. (event:'"+o+"', element specified below) ",3),c.customerLog(i[0],3);var t=f.send("SonarEventRaised",{event:e});if(!t){if(u.isFeatureEnabled("verifySonarAfterEvent")){var n=s(),r=e.srcElement||e.target;if(!n||0<n.length&&r&&!n.is(r))return c.customerLog("triggered element does not match condition selector",5),void a.setValue(!1)}l&&l[e.type]&&!l[e.type](e)||d.wrapSession(function(){a.setValue(!0)})}};(function(e,t,n){if(c.customerLog("Listening to event on element. (event:'"+t+"', element specified below) ",5),c.customerLog(e,5),e){var r=h(t,g);p.bind(e,r,n)}})(i,o,e),a.onResourceClean(function(){t(i,o,e)})},this.unbindEvent=t;var g=".mtCond";function t(e,t,n){try{if(c.customerLog("Stopped listening for event in condition checker result. (event:'"+t+"', element specified below) ",5),c.customerLog(e,5),e){var r=h(t,g);p.unbind(e,r,n)}}catch(i){}}function h(e,t){return e.replace(/ /g,t+" ")+t}}).dependencies("FeaturesManager, Logger, ElementFinder, MessageSender, EventBinder"),Tt.register("ConditionFunctions").asCtor(function(o,r,i,t,a,e,s,c,l,n,u,d,f,p,g,h,m,v,y,S,E,T,w,C){var b=this,I={TRUE:0,FALSE:1,CANNOT_ASSERT:2},_="jQuery",P="SelectedElement",A="Element",k="click mouseup mousedown keydown",D={keydown:C},N=function(){return{Id:-1,ElementDescription:"",StepIndex:-1,ConfigurationId:"1",Configuration:null,StepSensitivity:1,Type:-1,Settings:{},Duration:4,Delay:0}};function O(e,t){return i.isBigger(e,t)}function x(e,t){return i.isSmaller(e,t)}function L(e,t){return i.isLike(e,t)}function F(e,t){var n,r;try{t.regexText&&(r=new RegExp(t.regexText,t.regexFlags),n=r.exec(e))}catch(i){}return null!=n}function M(e){var t=e.split(":"),n=Number(t[0]),r=Number(t[1]);return 60*n+r}function R(e){var t=new RegExp("[ \t"+String.fromCharCode(160)+"\r\n\x0B\f]+","gi");return e=e.replace(t," "),e=Et.trim(e)}function B(e){h.customerLog("jQuery find element for condition",5);var t=r.findElementsByjQueryComplexSelector(e.jQuerySelector);return h.customerLog(t,5),0===t.length&&(t=!1),t}function U(e,t,n){return c(t,e.pollingInterval,function(){return B(e.funcArgs)},n)}this.getElementTextForEditor=function(e){var t=T.secureEvalJSON(e);return b.getElementText(t)},this.getElementStrength=function(e){var t=T.secureEvalJSON(e),n=H(t),r={score:-1},i=o.findElement(n,null,r);if(i)return r.score},this.getElementText=function(e){var t=H(e),n=o.findElement(t,!1,undefined,undefined,undefined,e.ownerChain);return!1!==n&&i.checkElementText(Et(n))};var V=function(e){var t=new Date(f.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t-n==0},W=function(e){return w.processUserUrl(e.funcArgs.UrlInput)==w.processSiteUrl(p.getCurrentLocation())},j=function(e){return 0<=w.processSiteUrl(p.getCurrentLocation()).indexOf(w.processUserUrl(e.funcArgs.UrlInput))};function G(e){return"boolean"==typeof e?e:1===e||0!==e&&("string"==typeof e?"true"==e.toLowerCase()||"1"==e||"false"!=e.toLowerCase()&&"0"!=e&&undefined:undefined)}function H(e){var t=N();return e.IdentifySettings?(t.ElementDescription=T.secureEvalJSON(T.toJSON(e.IdentifySettings.ElementDescription)),t.IsIgnoreText=e.IdentifySettings.IgnoreText===undefined?G(e.IdentifySettings.IsIgnoreText):parseInt(e.IdentifySettings.IgnoreText),t.StepSensitivity=e.IdentifySettings.Sensitivity===undefined?parseInt(e.IdentifySettings.StepSensitivity):parseInt(e.IdentifySettings.Sensitivity),t.IsIgnoreId=e.IdentifySettings.IgnoreId===undefined?G(e.IdentifySettings.IsIgnoreId):parseInt(e.IdentifySettings.IgnoreId),t.IgnorePosition=G(e.IdentifySettings.IgnorePosition),t.IsIdentifyByText=G(e.IdentifySettings.IsIdentifyByText),t.IgnorePageIdentification=G(e.IdentifySettings.IgnorePageIdentification),t.IsValidPageId=G(e.IdentifySettings.IsValidPageId),t.filter=e.IdentifySettings.filter!==undefined?parseInt(e.IdentifySettings.filter):undefined,t.Settings.filter=e.IdentifySettings.Settings&&e.IdentifySettings.Settings.filter!==undefined?parseInt(e.IdentifySettings.Settings.filter):undefined,e.IdentifySettings.ElementDescription&&e.IdentifySettings.ElementDescription.p&&(t.IsJquerySelector=G(e.IdentifySettings.IsJquerySelector),t.JquerySelector=e.IdentifySettings.JquerySelector)):t.ElementDescription=T.secureEvalJSON(T.toJSON(e.ElementDescription)),t}var Y=function(e){return w.processUserUrl(e.funcArgs.UrlInput)==w.processSiteUrl(p.getCurrentUrlPath())},z=function(e){return 0<=p.getCurrentUrlPath().toLowerCase().indexOf(w.processUserUrl(e.funcArgs.UrlInput))},Q=function(e){var t=w.processSiteUrlForLikeOrRegex(p.getCurrentUrlPath()),n=w.processUserUrlForLike(e.funcArgs.UrlInput);return L(t,n)},q=function(e){var t=w.processSiteUrlForLikeOrRegex(p.getCurrentUrlPath()),n=w.processUserUrlForRegex(e.funcArgs.UrlInput);return F(t,n)},K=function(e){var t=H(e.funcArgs);return 0!=o.findElement(t,!1,undefined,undefined,undefined,e.funcArgs.ownerChain)};function J(e,t,n,r,i){var o,a=function(e){return e?o:o=i()},s=new wt.regular,l=c(t,r,function(){return a(!1)}),u=c(n,r,function(){return a(!0)});return l.onGotValue(function(){l.getValue()&&s.setValue(!0)}),u.onGotValue(function(){u.getValue()&&s.setValue(!1)}),s.onResourceClean(function(){l.cleanResources(),u.cleanResources()}),s}function X(e){var t=H(e);h.customerLog("Find element for condition",5);var n=o.findElement(t,null,undefined,undefined,undefined,e.ownerChain);return h.customerLog(n,5),n}function $(e,t,n){return c(t,e.pollingInterval,function(){return X(e.funcArgs)},n)}var Z=function(e){var t=H(e.funcArgs);return 0!=o.findElement(t,!0,undefined,undefined,undefined,e.funcArgs.ownerChain)},ee=function(e){var t=H(e.funcArgs),n=o.findElement(t,!1,undefined,undefined,undefined,e.funcArgs.ownerChain);return Et(n).is(":checked")};function te(e,t){return F(e,t)}function ne(e,t){var n=f.decodeHtml(t,["&",'"',"'",">","<"]);return!1!==e&&R(e.toLowerCase())==R(n.toLowerCase())}function re(e,t){return!ne(e,t)}function ie(e,t){var n=f.decodeHtml(t,["&",'"',"'",">","<"]);return!1!==e&&L(R(e),R(n))}function oe(e){var t=Et.grep(e.split(/\s+/),function(e){return 0!=e.length}).length;return t}function ae(e){return!(!e||""==Et.trim(e))&&(!isNaN(e)||(!!/^[+-]?(?=.)(\d{1,3}(,\d{3})*)?(\.\d+)?$/.test(e)||(!isNaN(e.replace(",","."))||!!/^[+-]?(?=.)(\d{1,3}(\.\d{3})*)?(,\d+)?$/.test(e))))}function se(e){return E.isStringDate(e)}function le(e){var t=e.match(/((2[0-4])|([0-1]?[0-9])):([0-5][0-9])[^:]*/);return null!=t&&e==t[0]}function ue(e){var t=e.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/);return null!=t&&e==t[0]}function ce(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function de(e){var t=e.match(/(https?:\/\/)?[-a-zA-Z0-9@:%_\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/);return null!=t&&e==t[0]}var fe=function(e){return!!e.funcArgs.getSelectedElement()},pe=function(e){return Et(e.funcArgs.getSelectedElement()).is(":checked")},ge=function(e){return!!e.funcArgs.getSelectedElement()},he=function(e){var t=w.processSiteUrlForLikeOrRegex(p.getCurrentLocation()),n=w.processUserUrlForLike(e.funcArgs.UrlInput);return L(t,n)},me=function(e){var t=w.processSiteUrlForLikeOrRegex(p.getCurrentLocation()),n=w.processUserUrlForRegex(e.funcArgs.UrlInput);return F(t,n)},ve=function(e){return w.processUserUrl(e.funcArgs.UrlInput)==w.processSiteUrl(St())},ye=function(e){return 0<=w.processSiteUrl(St()).indexOf(w.processUserUrl(e.funcArgs.UrlInput))},Se=function(e){var t=w.processSiteUrlForLikeOrRegex(St()),n=w.processUserUrlForLike(e.funcArgs.UrlInput);return L(t,n)},Ee=function(e){var t=w.processSiteUrlForLikeOrRegex(St()),n=w.processUserUrlForRegex(e.funcArgs.UrlInput);return F(t,n)},Te=function(e){return L(t.browser.string,"*"+e.funcArgs.BrowserName+"*")},we=function(e){return window.self!==window.top},Ce=function(e){var t=d.getData(l.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY);if(!t)return!1;var n,r=((new Date).getTime()-t)/2,i=4e3<r?4e3:4e3*(n=r,n/=4e3,n--,Math.sqrt(1-n*n));return Tt.get("WalkmeLoadTimeManager").getWalkmeLoadTime()+i>t};var be=function(e){var t=u.getCookie(e.funcArgs.CookieName),n=f.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return!1!==t&&t.toLowerCase()==n.toLowerCase()},Ie=function(e){var t=u.getCookie(e.funcArgs.CookieName),n=f.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return!1!==t&&L(t,n)},_e=function(e){var t=u.getCookie(e.funcArgs.CookieName);return!1!==t},Pe=function(e){var t=v.getData(e.funcArgs.DataKey,undefined);if(t===undefined)return!1;null===t&&(t="null");var n=f.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()},Ae=function(e){var t=v.getData(e.funcArgs.DataKey,undefined);if(t===undefined||null===t)return!1;var n=f.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return L(t,n)},ke=function(e){var t=v.getData(e.funcArgs.DataKey,undefined);return t!==undefined},De=function(e){var t=i.getWindowData(l.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName),n=f.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return t!==undefined&&null!==t&&t.toString().toLowerCase()==n.toLowerCase()},Ne=function(e){var t=i.getWindowData(l.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName),n=f.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return t!==undefined&&null!==t&&L(t.toString(),n)},Oe=function(e){var t=i.getWindowData(l.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName);return t!==undefined&&null!==t},xe=function(e){var t=i.getWindowData(l.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName);return F(t,e.funcArgs.WindowVarInput)},Le=function(e){var t=a.getCurrentLanguage();""===t&&(t="default");var n=f.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]);return n.toLowerCase()==t.toLowerCase()},Fe=function(e){var t=a.getCurrentLanguage();""===t&&(t="default");var n=f.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]);return L(t,n)},Me=function(e){var t=parseInt(e.funcArgs.GoalId);return y.value&&y.value.isGoalReached(t)};function Re(e){var t=parseInt(e.funcArgs.TaskId),n=parseInt(e.funcArgs.GoalId);return Tt.get("TodoListManager").isTaskGoalReached(t,n)}var Be=function(e){var t=Et("#tsidLabel"),n=f.decodeHtml(e.funcArgs.SfTabInput.toString(),["&",'"',"'",">","<"]);return 0!=t.length&&R(t.text().toLowerCase())==R(n.toLowerCase())},Ue=function(e){var t=Et("#tsidLabel"),n=f.decodeHtml(e.funcArgs.SfTabInput,["&",'"',"'",">","<"]);return 0!=t.length&&0<=R(t.text().toLowerCase()).indexOf(R(n.toLowerCase()))},Ve={Accounts:"salesforce.com/001/",Contacts:"salesforce.com/003/",Opportunities:"salesforce.com/006/",Documents:"salesforce.com/015/",Cases:"salesforce.com/500/",Solutions:"salesforce.com/501/",Contracts:"salesforce.com/800/",Reports:"salesforce.com/00O/",Leads:"salesforce.com/00Q/",Dashboards:"salesforce.com/01Z/",CustomTabs1:"salesforce.com/a00/",Products:"salesforce.com/a01/"},We={MainPage:"o",New:"e"},je=function(e){var t=e.funcArgs.SfType,n=e.funcArgs.SfModoule,r={funcArgs:{UrlInput:""+Ve[t]+We[n]}};return j(r)},Ge=function(e,t){var n=i.getWindowData(l.WINDOW_CUSTOM_DATA_TYPE.Var,e);return n!==undefined&&null!==n&&t(n)},He="walkMeWorkday.segmentation.flow.forms";this.WORKDAY_FORMS_VAR_NAME=He;var Ye=function(t){return Ge(He,function(e){return e[t.funcArgs.FormInput]})},ze=function(r){return Ge(He,function(e){var t=f.decodeHtml(r.funcArgs.FormInput,["&",'"',"'"]);for(var n in e)if(0<=n.toLowerCase().indexOf(t.toLowerCase()))return!0;return!1})},Qe=function(r){return Ge(He,function(e){var t=f.decodeHtml(r.funcArgs.FormInput,["&",'"',"'"]);for(var n in e)if(L(n,t))return!0;return!1})},qe=function(e){return i.getWindowData(l.WINDOW_CUSTOM_DATA_TYPE.Var,He)},Ke="walkMeWorkday.segmentation.flow.page";this.WORKDAY_PAGE_VAR_NAME=Ke;var Je=function(n){return Ge(Ke,function(e){var t=f.decodeHtml(n.funcArgs.PageInput,["&",'"',"'"]);return e.toString().toLowerCase()==t.toLowerCase()})},Xe=function(n){return Ge(Ke,function(e){var t=f.decodeHtml(n.funcArgs.PageInput,["&",'"',"'"]);return 0<=e.toLowerCase().indexOf(t.toLowerCase())})},$e=function(n){return Ge(Ke,function(e){var t=f.decodeHtml(n.funcArgs.PageInput,["&",'"',"'"]);return L(e,t)})},Ze=function(e){return Ge(Ke,function(e){return""!==e})},et="walkMeWorkday.segmentation.flow.subPage";this.WORKDAY_SUB_PAGE_VAR_NAME=et;var tt=function(n){return Ge(et,function(e){var t=f.decodeHtml(n.funcArgs.SubPageInput,["&",'"',"'"]);return e.toString().toLowerCase()==t.toLowerCase()})},nt=function(n){return Ge(et,function(e){var t=f.decodeHtml(n.funcArgs.SubPageInput,["&",'"',"'"]);return 0<=e.toLowerCase().indexOf(t.toLowerCase())})},rt=function(n){return Ge(et,function(e){var t=f.decodeHtml(n.funcArgs.SubPageInput,["&",'"',"'"]);return L(e,t)})},it=function(e){return Ge(et,function(e){return""!==e})},ot="walkMeWorkday.segmentation.worklets";function at(t){return Ge(ot,function(e){return e&&e[t.funcArgs.workletUid]})}var st="walkMeWorkday.segmentation.inbox";function lt(t){return Ge(st,function(e){return e&&e[t.funcArgs.inboxItemUid]})}var ut={jQueryTrue:function(e){return 0<r.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length},jQueryFalse:function(e){return 0==r.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length},jQueryLengthBigger:function(e){return r.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length>parseInt(e.funcArgs.jQueryLength)},jQueryClicked:function(e){return U(e=Et.extend(e,{pollingInterval:-1}),k,D)},jQueryClickedSticky:function(e){return U(e,k,D)},jQueryHovered:function(e){return U(e=Et.extend(e,{pollingInterval:-1}),"hover")},jQueryHoveredSticky:function(e){return U(e,"hover")},jQueryHoverSwitch:function(e){return t=e.funcArgs,n="mouseenter",r="mouseleave",i=e.pollingInterval,J(t,n,r,i,function(){return B(t)});var t,n,r,i},jQuerySwiped:function(e){return U(e=Et.extend(e,{pollingInterval:-1}),"swipe")},jQuerySwipedSticky:function(e){return U(e,"swipe")},jQueryLengthSmaller:function(e){return r.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length<parseInt(e.funcArgs.jQueryLength)},jQueryLengthEquals:function(e){return r.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length==parseInt(e.funcArgs.jQueryLength)},jQueryLengthNotEquals:function(e){return r.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length!=parseInt(e.funcArgs.jQueryLength)},UrlEquals:W,UrlNotEquals:function(e){return!W(e)},UrlContains:j,UrlNotContains:function(e){return!j(e)},UrlLike:he,UrlNotLike:function(e){return!he(e)},UrlIsPerRegularExpression:me,UrlIsNotPerRegularExpression:function(e){return!me(e)},UrlPathEquals:Y,UrlPathNotEquals:function(e){return!Y(e)},UrlPathContains:z,UrlPathNotContains:function(e){return!z(e)},UrlPathLike:Q,UrlPathNotLike:function(e){return!Q(e)},UrlPathIsPerRegularExpression:q,UrlPathIsNotPerRegularExpression:function(e){return!q(e)},DateEquals:V,DateNotEquals:function(e){return!V(e)},DateFrom:function(e){var t=new Date(f.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t<=n},DateUntil:function(e){var t=new Date(f.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n<=t},DateIsDay:function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getDay()},DateIsMonth:function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getMonth()},DateIsYear:function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getFullYear()},TimeFrom:function(e){var t=new Date;return 60*t.getHours()+t.getMinutes()>=M(e.funcArgs.TimeInput)},TimeUntil:function(e){var t=new Date;return 60*t.getHours()+t.getMinutes()<=M(e.funcArgs.TimeInput)},ReferrerUrlEquals:ve,ReferrerUrlNotEquals:function(e){return!ve(e)},ReferrerUrlContains:ye,ReferrerUrlNotContains:function(e){return!ye(e)},ReferrerUrlLike:Se,ReferrerUrlNotLike:function(e){return!Se(e)},ReferrerUrlIsPerRegularExpression:Ee,ReferrerUrlIsNotPerRegularExpression:function(e){return!Ee(e)},ElementExists:K,ElementNotExist:function(e){return!K(e)},ElementVisible:Z,ElementNotVisible:function(e){return!Z(e)},ElementClicked:function(e){return $(e=Et.extend(e,{pollingInterval:-1}),k,D)},ElementClickedSticky:function(e){return $(e,k,D)},ElementHovered:function(e){return $(e=Et.extend(e,{pollingInterval:-1}),"hover")},ElementHoveredSticky:function(e){return $(e,"hover")},ElementHoverSwitch:function(e){return t=e,n="mouseenter",r="mouseleave",J(t.funcArgs,n,r,t.pollingInterval,function(){return X(t.funcArgs)});var t,n,r},ElementSwiped:function(e){return $(e=Et.extend(e,{pollingInterval:-1}),"swipe")},ElementSwipedSticky:function(e){return $(e,"swipe")},ElementSelected:ee,ElementNotSelected:function(e){return!ee(e)},BrowserEquals:Te,BrowserNotEquals:function(e){return!Te(e)},ContainerIsIframe:we,ContainerNotIframe:function(e){return!we(e)},WindowIsNew:Ce,WindowIsNotNew:function(e){return!Ce(e)},CookieExists:_e,CookieNotExists:function(e){return!_e(e)},CookieEquals:be,CookieNotEquals:function(e){return!be(e)},CookieBigger:function(e){var t=u.getCookie(e.funcArgs.CookieName);return!1!==t&&O(t,e.funcArgs.CookieInput)},CookieSmaller:function(e){var t=u.getCookie(e.funcArgs.CookieName);return!1!==t&&x(t,e.funcArgs.CookieInput)},CookieLike:Ie,CookieNotLike:function(e){return!Ie(e)},WalkMeDataExists:ke,WalkMeDataNotExists:function(e){return!ke(e)},WalkMeDataEquals:Pe,WalkMeDataNotEquals:function(e){return!Pe(e)},WalkMeDataBigger:function(e){var t=v.getData(e.funcArgs.DataKey,undefined);return t!==undefined&&O(t,e.funcArgs.DataValue)},WalkMeDataSmaller:function(e){var t=v.getData(e.funcArgs.DataKey,undefined);return t!==undefined&&x(t,e.funcArgs.DataValue)},WalkMeDataLike:Ae,WalkMeDataNotLike:function(e){return!Ae(e)},LanguageEquals:Le,LanguageNotEquals:function(e){return!Le(e)},LanguageLike:Fe,LanguageNotLike:function(e){return!Fe(e)},WindowVarEquals:De,WindowVarNotEquals:function(e){return!De(e)},WindowVarBigger:function(e){var t=i.getWindowData(l.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName);return t!==undefined&&O(t,e.funcArgs.WindowVarInput)},WindowVarSmaller:function(e){var t=i.getWindowData(l.WINDOW_CUSTOM_DATA_TYPE.Var,e.funcArgs.WindowVarName);return t!==undefined&&x(t,e.funcArgs.WindowVarInput)},WindowVarLike:Ne,WindowVarNotLike:function(e){return!Ne(e)},WindowVarExists:Oe,WindowVarNotExists:function(e){return!Oe(e)},WindowVarIsPerRegularExpression:xe,WindowVarIsNotPerRegularExpression:function(e){return!xe(e)},TaskGoalReached:function(e){return!!Re(e)},TaskGoalNotReached:function(e){var t=Re(e);return null==t?null:!t},ExperimentGoalReached:Me,ExperimentGoalNotReached:function(e){return!Me(e)},SalesforceTabEquals:Be,SalesforceTabNotEquals:function(e){return!Be(e)},SalesforceTabContains:Ue,SalesforceTabNotContains:function(e){return!Ue(e)},SalesforceUrlEquals:je,SalesforceUrlNotEquals:function(e){return!je(e)},ConditionBlockTrue:function(e){if(0<e.funcArgs.conditionBlockId)return n.activateById(e.funcArgs.conditionBlockId,undefined);return!1},FormEquals:Ye,FormNotEquals:function(e){return!Ye(e)},FormContains:ze,FormNotContains:function(e){return!ze(e)},FormLike:Qe,FormNotLike:function(e){return!Qe(e)},FormCount:function(r){return Ge(He,function(e){var t=0;for(var n in e)t++;return t.toString()===r.funcArgs.FormInput})},FormExists:qe,FormNotExists:function(e){return!qe(e)},PageEquals:Je,PageNotEquals:function(e){return!Je(e)},PageContains:Xe,PageNotContains:function(e){return!Xe(e)},PageLike:$e,PageNotLike:function(e){return!$e(e)},PageExists:Ze,PageNotExists:function(e){return!Ze(e)},SubPageEquals:tt,SubPageNotEquals:function(e){return!tt(e)},SubPageContains:nt,SubPageNotContains:function(e){return!nt(e)},SubPageLike:rt,SubPageNotLike:function(e){return!rt(e)},SubPageExists:it,SubPageNotExists:function(e){return!it(e)},SelectedElementVisible:fe,SelectedElementNotVisible:function(e){return!fe(e)},SelectedElementSelected:pe,SelectedElementNotSelected:function(e){return!pe(e)},SelectedElementExists:ge,SelectedElementNotExist:function(e){return!ge(e)},WorkletExists:at,WorkletNotExists:function(e){return!at(e)},InboxItemExists:lt,InboxItemNotExists:function(e){return!lt(e)}},ct={TextPerRegularExpression:te,TextNotPerRegularExpression:function(e,t){return!te(e,t)},TextEquals:ne,TextNotEquals:re,TextLike:ie,TextNotLike:function(e,t){return!ie(e,t)},TextEmpty:ne,TextNotEmpty:re,TextBigger:function(e,t){return!1!==e&&O(e,t)},TextSmaller:function(e,t){return!1!==e&&x(e,t)},TextLengthIsLessThan:function(e,t){return(e=Et.trim(e)).length<parseInt(t)},TextLengthIsEqualTo:function(e,t){return(e=Et.trim(e)).length==parseInt(t)},TextLengthIsGreaterThan:function(e,t){return(e=Et.trim(e)).length>parseInt(t)},TextWordCountIsLessThan:function(e,t){return oe(e)<parseInt(t)},TextWordCountIsEqualTo:function(e,t){return oe(e)==parseInt(t)},TextWordCountIsGreaterThan:function(e,t){return oe(e)>parseInt(t)},TextNumeric:ae,TextNotNumeric:function(e){return!ae(e)},TextIsDate:se,TextIsNotDate:function(e){return!se(e)},TextIsTime:le,TextIsNotTime:function(e){return!le(e)},TextIsUSPhoneNumber:ue,TextIsNotUSPhoneNumber:function(e){return!ue(e)},TextIsEmail:ce,TextIsNotEmail:function(e){return!ce(e)},TextIsWebAddress:de,TextIsNotWebAddress:function(e){return!de(e)},TextIsDayOfWeek:function(e,t){var n=E.parseTwoDigitDateString(e);return n&&n.getDay()==t},TextIsNotDayOfWeek:function(e,t){var n=E.parseTwoDigitDateString(e);return n&&n.getDay()!=t}};for(var dt in ct)ct.hasOwnProperty(dt)&&(ft(ct[dt],dt),pt(ct[dt],dt),gt(ct[dt],dt));function ft(n,e){var t=_+e;ut[t]=function(e){var t=r.getjQueryElementText(e.funcArgs.jQuerySelector);return e.funcArgs.jQueryText||""==e.funcArgs.jQueryText?n.call(this,t,e.funcArgs.jQueryText):n.call(this,t)}}function pt(n,e){var t=P+e;ut[t]=function(e){var t=i.checkElementText(Et(e.funcArgs.getSelectedElement()));return e.funcArgs.ElementText||""==e.funcArgs.ElementText?n.call(this,t,e.funcArgs.ElementText):n.call(this,t)}}function gt(n,e){var t=A+e;ut[t]=function(e){var t=b.getElementText(e.funcArgs);return!1!==t&&(e.funcArgs.ElementText||""==e.funcArgs.ElementText?n.call(this,t,e.funcArgs.ElementText):n.call(this,t))}}Et.extend(ut,e.getFuncList());var ht=[];ht.LanguageEquals=!1,ht.LanguageNotEquals=!1,ht.LanguageLike=!1,ht.LanguageNotLike=!1,ht.TaskGoalReached=!1,ht.TaskGoalNotReached=!1,ht.jQueryClicked=!1,ht.jQueryClickedSticky=!1,ht.jQueryHovered=!1,ht.jQueryHoveredSticky=!1,ht.jQuerySwiped=!1,ht.jQuerySwipedSticky=!1,ht.ElementClicked=!1,ht.ElementClickedSticky=!1,ht.ElementHovered=!1,ht.ElementHoveredSticky=!1,ht.ElementSwiped=!1,ht.ElementSwipedSticky=!1,ht.ExperimentGoalReached=!1,ht.ExperimentGoalNotReached=!1,Et.extend(ht,e.getFuncAssert());var mt=["ElementClicked","ElementHovered","ElementHoverSwitch","jQueryClicked","jQueryHovered","jQueryHoverSwitch","jQuerySwiped","ElementSwiped","LikelyToVisitUrlContains","LikelyToVisitUrlNotContains","LikelyToVisitUrlLike","LikelyToVisitUrlNotLike","LikelyToVisitUrlEquals","LikelyToVisitUrlNotEquals","LikelyToVisitUrlIsPerRegularExpression","LikelyToVisitUrlIsNotPerRegularExpression","NotLikelyToVisitUrlContains","NotLikelyToVisitUrlNotContains","NotLikelyToVisitUrlLike","NotLikelyToVisitUrlNotLike","NotLikelyToVisitUrlEquals","NotLikelyToVisitUrlNotEquals","NotLikelyToVisitUrlIsPerRegularExpression","NotLikelyToVisitUrlIsNotPerRegularExpression","LikelyToChurn","NotLikelyToChurn","TeachMeQuizCompletion","StepPlayed","StepNotPlayed","StepCompleted","StepNotCompleted","StepExists","StepNotExists","StepCanPlay","StepCannotPlay","StepIsVisible","StepIsNotVisible","WidgetModesCondition"];mt.push.apply(mt,e.getAsyncFuncs()),this.isFuncAsync=function(e){return 0<=m.inArray(e,mt)};var vt=["jQueryHoveredSticky","jQueryClickedSticky","jQuerySwipedSticky","ElementClickedSticky","ElementHoveredSticky","ElementSwipedSticky"];function yt(e,t){if(t.identifySettings&&s.checkIfTreeContainsSelectedElement(e)){var n=t.identifySettings;e.funcArgs.getSelectedElement=function(){return o.findElement(n,!1)}}}this.isFuncSticky=function(e){return 0<=m.inArray(e,vt)},this.hasCoreFunction=function(e){return!!ut[e]},this.getFunctionsByLibNameType=function(e){return ut[e]||S.get(e)},this.canAssertFunction=function(e){return ut[e]?ht[e]==undefined||0!=ht[e]:S.canAssert(e)},this.evaluationPreviewForEditor=function(e){var t=T.secureEvalJSON(e);return yt(t.node,t),b.evaluationPreview(t.node)},this.evaluationPreview=function(e){var t=this.getFunctionsByLibNameType(e.funcName);if(!this.canAssertFunction(e.funcName))return I.CANNOT_ASSERT;var n={funcArgs:e.funcArgs,conditionId:-1,pollingInterval:-1},r=t(n);return r instanceof wt.regular&&(r=r.getValue()),r?I.TRUE:I.FALSE},this.evaluationTreePreviewForEditor=function(e){var t,n=T.secureEvalJSON(e);return(t=n).node&&t.node.Root&&(t.node=g.convert(t.node.Root)),function(i){var t=i.node;if(null==t)return I.TRUE;return function e(t){if("Func"==t.nodeType)return yt(t,i),b.evaluationPreview(t);var n=e(t.leftSon);var r=e(t.rightSon);if("And"==t.nodeType)return n==I.TRUE&&r==I.TRUE?I.TRUE:n==I.CANNOT_ASSERT||r==I.CANNOT_ASSERT?I.CANNOT_ASSERT:I.FALSE;if("Or"==t.nodeType)return n==I.TRUE||r==I.TRUE?I.TRUE:n==I.CANNOT_ASSERT||r==I.CANNOT_ASSERT?I.CANNOT_ASSERT:I.FALSE}(t)}(n)};var St=function(){return document.referrer}}).dependencies("Lib,JQueryElementFinder,CommonUtils,HostData,LanguageManager,ConditionFunctionsHandler,ConditionTreeUtils,PollingCommonInteracted,Consts,ConditionBlocksManager,CookiesManager,ClientStorageManager,HtmlDecoder,LocationService,NewToOldConditionConverter,Logger,ArrayUtils,ClientOrServerStorageManager,AbTestingGoalsManagerInstance,ExternalConditionsHandlers,DateConditions,JsonUtils,UrlComparePreparer,KeyDownClickVerifier"),Tt.register("DateConditions").asCtor(function(i){this.isStringDate=function(e){var t=i.formatString("(({0}{2}{0}\\4{1})|({1}{2}{0}\\9{0})|({0}{2}{0}\\14{0}))","([1-9]\\d?|0?[1-9])","([1-9]\\d\\d\\d)","([.\\-/ ])"),n=new RegExp(t,"i"),r=n.exec(e);return null!=r&&e==r[0]},this.parseTwoDigitDateString=function(e){var t,n,r,i,o,a,s=e.split(new RegExp("[.\\-/ ]","i")),l=parseInt(s[1]),u=parseInt(s[0]),c=(n=s[2])&&2==n.length?parseInt(s[2])+2e3:null;return 0<(a=u)&&a<=12&&(i=u,o=c,0<(r=l)&&r<=new Date(o,i,0).getDate())&&c&&(t=new Date(c,u-1,l)),t}}).dependencies("CommonUtils"),Tt.register("IsElementAttached").asFunction(function(){return function(e){var t;try{t=e[0].ownerDocument}catch(r){return!1}var n=t.defaultView||t.parentWindow;return!(!n||n.top!=window.top||!e.is(":mt_visible"))}}),Tt.register("PollingCommonInteracted").asFunction(function(u,c,d,f){return function(t,n,r,i){var o,a,s=new wt.regular(!1);function l(){u.customerLog("0)"<"Poll Element: start search for element (polling: "+n,5),o&&o.clear();var e=!!a&&f(a);e||(d.unbindEvent(a,t),a=r(),u.customerLog("Poll Element: element matched: ",5),u.customerLog(a,5),a?d.handleEvent(a,t,s,r,i):0<=n&&s.setValue(!1)),0<=n&&(o=c.libSetTimeout(l,n))}return s.onResourceClean(function(){n=-1}),s.onRefresh(function(){s.getValue()&&s.setValue(!1),l()}),s.getValue()||l(),s}}).dependencies("Logger,TimerManager,SonarEventHandler,IsElementAttached"),Tt.register("KeyDownClickVerifier").asFunction(function(n,r,i){return function(e){if(!e)throw"Event has to be defined";if(!n.isFeatureEnabled(r.FEATURES.ClickTriggerWithKeyboard)||"keydown"!=e.type)return!1;var t=e.keyCode||e.which;return-1!=i.inArray(t,[13,32])}}).dependencies("FeaturesManager,Consts,ArrayUtils"),Tt.register("ExternalConditionsHandlers").asCtor(function(e,t,l,n){var u={},c=t.wrapCustomerLog(e.LOG_FEATURES.EXTERNAL_CONDITIONS_HANDLERS);this.get=function(e){if(!e)throw new Error("A handler name must be defined");var t=n.get(e,u[e]&&u[e].func);return c("Got a "+(u[e]?"real":"dummy")+" handler for "+e),t},this.register=function(e,t,n){if(c("Register called for "+e+" function."),!e||!t)throw new Error("Name and handler must be defined.");if(r=e,Tt.get("ConditionFunctions").hasCoreFunction(r))throw new Error(e+" is a core condition. Core conditions cannot be overridden.");var r;return c((u[e]?"Replacing":"Registering")+" a condition handler for "+e),u[e]={func:t,canAssert:!!n&&!!n.editorPreview},a=e,s=l.get(a),c(a+" had "+s.length+" pending results."),Et(s).each(function(e,t){u[a].func(t.asyncResult,t.params)}),c("Finished handling pending results for "+a),i=e,o=t,function(){u[i]?u[i].func==o?(u[i]=undefined,c(i+" handler unregistered.")):c(i+" wasn't unregistered. A new handler might have been registered."):c(i+" was already unregistered.")};var i,o;var a,s},this.canAssert=function(e){return!!u[e]&&u[e].canAssert}}).dependencies("Consts, Logger,PendingResultsContainer,ExternalHandlerWrapper"),Tt.register("PendingResultsContainer").asCtor(function(e,t,i){this.add=function(e,t,n){var r=function(e){var t=a[e];t||(t=[],a[e]=t);return t}(e);c(t,e),r.push({asyncResult:t,params:n}),u++,c(t,e),s("Pending result for "+e+" added."),o<u&&!l&&(i.logError("ExternalConditionsHandler: The Pending results excceded the the current threshold.",{threshold:o}),l=!0)},this.get=function(e){var t=a[e];t?(s("Returning "+t.length+"pending results for "+e),a[e]=undefined,u-=t.length):s(e+" doesn't have pending results.");return t||[]};var o=100,a={},s=t.wrapCustomerLog(e.LOG_FEATURES.EXTERNAL_CONDITIONS_HANDLERS),l=!1,u=0;function c(r,i){r.onResourceClean(function(){var e,n,t;n=r,(t=a[e=i])&&(a[e]=Et(t).filter(function(e,t){return t.asyncResult!=n}).toArray())})}}).dependencies("Consts,Logger,EventSenderErrorLogger"),Tt.register("ExternalHandlerWrapper").asCtor(function(i){this.get=function(e,t){return t?(r=t,function(e){var t=new wt.regular(!1);return r(t,e),t}):(n=e,function(e){var t=new wt.regular(!1);return i.add(n,t,e),t});var n;var r}}).dependencies("PendingResultsContainer");var it=function(){function u(e,t,n,r,i,o,a,s,l){this.timerManager=e,this.conditionFunctions=t,this.uiChangeTracker=n,this.commonEvents=o,this.consts=a,this.debuggerManager=s,l=l||{},this._conditionCheckerPollingIntervalMs=l.evaluationPollingIntervalMs&&!l.onlyPollConditionFunctions?l.evaluationPollingIntervalMs:u.NO_POLLING,this._conditionFunctionsPollingInterval=l.evaluationPollingIntervalMs||u.NO_POLLING,this._getSelectedElement=l.getSelectedElement,this._stopPollingAfterEvaluateTrue=l.stopPollingAfterEvaluateTrue===undefined||l.stopPollingAfterEvaluateTrue,this._evaluateSonar=l.evaluateSonar===undefined||l.evaluateSonar,this._featureName=l.featureName,this._elementName=l.elementName,this._ownerChain=l.ownerChain,this._trackUIChange=l.trackUIChange,this._logger=r.wrapCustomerLog("ConditionChecker"),this._subTreesResults={},u.registerInstance(this),l=null}return u.prototype.getCurrentEvaluationValueAndStopEvaluating=function(e){this.onValueChanged(undefined),this.evaluateAsync(e);var t=this.getCachedValue();return this.cleanResources(),t},u.prototype.getValue=function(){return this.innerGetValue(!1)},u.prototype.innerGetValue=function(e){return this._result.getValue(e)},u.prototype.getCachedValue=function(){return this.innerGetValue(!0)},u.prototype.isPollingEvaluation=function(){return 0<=this._conditionCheckerPollingIntervalMs&&!this._isStopEvaluate},u.prototype.cleanResources=function(){this._oldValue=!1,this._isStopEvaluate=!0,this._logger(this._elementName+" - ConditionChecker cleans resources",5,this._featureName),this.cleanResultAndTimer(),this.uiChangeTracker.unbind(this._uiChangeCallback),u.unregisterInstance(this),this._getSelectedElement=undefined,this.cleanTree(this._dirtyTree)},u.prototype.cleanTree=function(e){e&&(e.funcArgs&&delete e.funcArgs.getSelectedElement,this.cleanTree(e.leftSon),this.cleanTree(e.rightSon))},u.prototype.cleanResultAndTimer=function(){this._result&&this._result.cleanResources(),this._timerHandle&&this._timerHandle.clear()},u.prototype.onValueChanged=function(e){this._onValueChanged=e},u.prototype.callOnValueChangedIfExist=function(e,t){this.raiseEventWithSubTreesResults(),this._onValueChanged&&(t=t!==undefined&&t,this._logger(this._elementName+" - ConditionChecker calls onValueChanged",4,this._featureName),this._onValueChanged(e,t))},u.prototype.raiseEventWithSubTreesResults=function(){this.debuggerManager.isDebuggerOnWindow()&&this.commonEvents.raiseEvent(this.consts.EVENTS.ConditionTreeResult,this._subTreesResults)},u.prototype.onPreEvaluation=function(e){this._onPreEvaluation=e},u.prototype.callOnPreEvaluationIfExist=function(e,t){this._onPreEvaluation&&(t=t!==undefined&&t,this._logger(this._elementName+" - ConditionChecker calls onPreEvaluation",5,this._featureName),this._onPreEvaluation(e,t))},u.prototype.onEvaluated=function(e){this._onEvaluated=e},u.prototype.callOnEvaluatedIfExist=function(e,t){this._onEvaluated&&(t=t!==undefined&&t,this._logger(this._elementName+" - ConditionChecker calls onEvaluated",5,this._featureName),this._onEvaluated(e,t))},u.prototype.onSonar=function(e){this._onSonar=e},u.prototype.callOnSonarIfExist=function(){this._onSonar&&this._onSonar()},u.prototype.evaluateAsyncAndDontEvaluateImmediately=function(e){u.registerInstance(this);this.innerEvaluateAsync(e,!0)},u.prototype.evaluateAsync=function(e){u.registerInstance(this);this.innerEvaluateAsync(e,!1)},u.prototype.innerEvaluateAsync=function(e,t){this._dirtyTree=e,this._isStopEvaluate=!1,this.handleUIChangeTracking(),this.evaluateAsyncCall(e,t)},u.prototype.handleUIChangeTracking=function(){var e=this;this._uiChangeCallback=function(){e._result.refresh(),e._trackUIChange&&e.reEvaluate(!0)},this.uiChangeTracker.bind(this._uiChangeCallback)},u.prototype.evaluateAsyncCall=function(e,t){this.firstEvaluation(e,t),this.startPollingEvaluation(e)},u.prototype.firstEvaluation=function(e,t){this._logger(this._elementName+" - ConditionChecker evaluates async tree",5,this._featureName),this.prepareResult(e),this._oldValue=undefined,t?this._oldValue=!1:this.reEvaluateResult(!0)},u.prototype.prepareResult=function(e){var t=this;this._result=this.createResult(e),this._result.onGotValue(function(){if(t.callOnSonarIfExist(),t._evaluateSonar){var e=t.reEvaluateResult(!0);t._stopPollingAfterEvaluateTrue&&e&&t.cleanResources()}})},u.prototype.startPollingEvaluation=function(e){var t=this;this.isPollingEvaluation()&&(this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs))},u.prototype.reEvaluate=function(e){var t=this;if(!this._isStopEvaluate){var n=this.reEvaluateResult(e),r=this.shouldPollingStop(n);!this.isPollingEvaluation()||r||e?r&&this.cleanResources():this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs)}},u.prototype.reEvaluateResult=function(e){this.callOnPreEvaluationIfExist(undefined,e),this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName);var t=this.getValue();return this._oldValue!==t&&(this.callOnValueChangedIfExist(t,e),this._oldValue=t),this.callOnEvaluatedIfExist(t,e),t},u.prototype.shouldPollingStop=function(e){return!(!e||(this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName),!this._stopPollingAfterEvaluateTrue))&&(this._elementName,this._featureName,!0)},u.prototype.createResult=function(e){var a=this,n={Func:function(e){var t=a.conditionFunctions.isFuncSticky(e.funcName),n=a.conditionFunctions.getFunctionsByLibNameType(e.funcName);e.funcArgs.getSelectedElement=a._getSelectedElement,e.funcArgs.ownerChain=a.getConditionOwnerChain(e.ConditionId,t);var r={conditionId:e.ConditionId,funcArgs:e.funcArgs,pollingInterval:t?a._conditionFunctionsPollingInterval:u.NO_POLLING};function i(){return n.call(this,r)}var o=t||a.conditionFunctions.isFuncAsync(e.funcName)?i():new wt.noMemory(i);return s(o,e),o},And:t(function(e,t){return e()&&t()}),Or:t(function(e,t){return e()||t()})};return null==e?wt.fixed(!0):o(e);function o(e){var t=n[e.nodeType];return!!t&&t(e)}function t(i){return function(e){var t=o(e.leftSon),n=o(e.rightSon),r=new wt.complex(t,n,i);return s(r,e),r}}function s(e,n){var r=e.getValue;e.getValue=function(e){var t;return n.result=r(e),a._subTreesResults[n.ConditionId]={id:(t=n).ConditionId,type:t.nodeType,result:t.result},n.result}}},u.prototype.getConditionOwnerChain=function(e,t){if(e)return{owner:this._ownerChain,id:e,type:this.consts.ELEMENT_OWNER_TYPE_NAMES.CONDITION,stickyType:t}},u.registerInstance=function(e){u.instances[e._id]||(e._id=u.sequence,++u.sequence,u.instances[e._id]=e)},u.unregisterInstance=function(e){delete u.instances[e._id]},u.cleanResources=function(){for(var e in u.instances)u.instances.hasOwnProperty(e)&&u.instances[e].cleanResources();u.instances={}},u.NO_POLLING=-1,u.instances={},u.sequence=0,u}();Tt.register("ConditionCheckerType").asInstance(it),Tt.register("ConditionChecker").asCtor(it).asProto().dependencies("TimerManager, ConditionFunctions, UIChangeTracker, Logger, FeaturesManager, CommonEvents, Consts, DebuggerManager"),Tt.register("ConditionCheckerFactory").asCtor(function(t,n,r,i,o,a,s,l,u,c,d){function f(e){return new n(r,i,o,a,s,l,u,d,c,e)}function p(e){return new t(r,i,o,a,s,l,u,d,e)}this.createConditionChecker=function(e,t){return e&&e.Root?f(t):p(t)},this.createNew=f,this.createOld=p}).dependencies("ConditionCheckerType,NewConditionCheckerType,TimerManager,ConditionFunctions,UIChangeTracker,Logger,FeaturesManager,CommonEvents,Consts,NewToOldConditionConverter,DebuggerManager");var ot=function(c){function e(e,t,n,r,i,o,a,s,l,u){c.call(this,e,t,n,r,i,o,a,s,u),this.newToOldConditionConverter=l}return Ie(e,c),e.prototype.evaluateAsync=function(e){var t=this.newToOldConditionConverter.convert(e.Root);c.prototype.evaluateAsync.call(this,t)},e.prototype.evaluateAsyncAndDontEvaluateImmediately=function(e){var t=this.newToOldConditionConverter.convert(e.Root);c.prototype.evaluateAsyncAndDontEvaluateImmediately.call(this,t)},e}(it);Tt.register("NewConditionCheckerType").asInstance(ot),Tt.register("OldConditionsCombiner").asCtor(function(){this.combine=function(e,t,n){{if(!t)return n;if(!n)return t}return{nodeType:e,leftSon:t,rightSon:n,nodeDepth:0}}}),Tt.register("NewConditionsCombiner").asCtor(function(a,s,l){this.combine=function(e,t,n){var r=n?s.convert(n.Root):undefined,i=t&&t.Root?s.convert(t.Root):t,o=a.combine(e,i,r);return l.convert(o)}}).dependencies("OldConditionsCombiner, NewToOldConditionConverter, OldToNewConditionConverter"),Tt.register("ConditionsCombinerFactory").asCtor(function(){this.get=function(e){return e?Tt.get("NewConditionsCombiner"):Tt.get("OldConditionsCombiner")}}),Tt.register("EngagementRulesDataSynchronizer").asCtor(function(u,c,d,t,f,p,g,h,m){this.init=function(){var e=u.getData(r,null);if(!e)return o();return t.setWalkmeTimeout(o,n),f.when(e)};var v="loadEngagementRules",n=5e3,y="/engagementRulesReports/",S=u.keysConfig.engagementRules.fileExists.key,E=u.keysConfig.engagementRules.fileExists.expiry,r=u.keysConfig.engagementRules.uniqueData.key,i=u.keysConfig.engagementRules.uniqueData.expiry;function o(){return function(){var n=f.Deferred(),e=function(e){var t=c.getEndUserGuid(),n=g.encrypt(t),r=d.getSettingsFile();if(T(r,e))return;var i=r.BaseUserCdnFolder;if(T(i,e))return;return i+y+n+".json"}(n);if(T(e,n))return n.promise();var t=e,r=h.browser.name;if(("Chrome"==r||"Safari"==r)&&!u.getData(S,!1)){var i=e.indexOf("users"),o=e.substring(i,e.length),a=m.get()+"/FilesContentRetriever/LoadFileByName";t=a+"?fileName="+o}var s=(l=n,Tt.create("EngagementRulesErrorTimer",{loadScriptDeferred:l}));var l;return p.addScriptWithCallback(t,v,function(e){0!=e.length&&u.saveData(S,!0,E);var t=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}(e);s.clear(),n.resolve(t)},function(){s.clear(),n.resolve({})}),n.promise()}().then(e)}function T(e,t){return!e&&(t.resolve({}),!0)}function e(e){u.saveData(r,e,i)}}).dependencies("ClientStorageManager, EndUsersManager, SettingsFile, TimerManager, wmjQuery, CommonUtils, Encryptor, HostData, RecorderServerManager"),Tt.register("EngagementRulesErrorTimer").asCtor(function(t,n,r,i){var o;this.clear=function(){o.clear()},function(){var e=i.loadScriptDeferred;o=t.setWalkmeTimeout(function(){e.isResolved()||(n.error(null,"Error trying to get engagement rules data from player server"),e.resolve({}),r.removeWalkMe("Failed loading engagement rules data after 5 seconds"))},5e3)}.apply(null,arguments)}).asProto().dependencies("TimerManager, Logger, LibDestroyer"),Tt.register("EngagementRulesRepository").asCtor(function(e,t,n){this.init=function(){t.isFeatureEnabled("engagementRules")?r=e.init().then(o):(o({}),r=n.when())},this.isReady=function(e){r.then(e)},this.get=function(){return i};var r,i={};function o(e){i=e}}).dependencies("EngagementRulesDataSynchronizer, FeaturesManager, wmjQuery"),Tt.register("HistoricalConditionFunctions").asCtor(function(n){this.getFuncList=function(){return i},this.getFuncAssert=function(){return r},this.getAsyncFuncs=function(){return e};var r=[],e=[],i={};function t(e,n){Et.each(e,function(e,t){i[t]=n,r[t]=!1})}function o(e){var t=n.get()[e.conditionId];return!!t}t(["UserWebsiteVisitedBefore","UserWebsiteVisitedAfter","UserWebsiteVisitedMoreThan","UserWebsiteVisitedInLast","UserTrackedElementClickedMoreThan","UserTrackedElementClickedInLast","UserTrackedElementClickedAfter","UserTrackedElementClickedBefore","UserTrackedPageVisitedInLast","UserTrackedPageVisitedBefore","UserTrackedPageVisitedAfter","UserTrackedPageVisitedMoreThan"],o),t(["UserWebsiteVisitedFirstTime","UserWebsiteVisitedLessThan","UserWebsiteNotVisitedEver","UserWebsiteNotVisitedBefore","UserWebsiteNotVisitedAfter","UserWebsiteNotVisitedInLast","UserTrackedElementClickedLessThan","UserTrackedElementNotClicked","UserTrackedElementNotClickedAfter","UserTrackedElementNotClickedBefore","UserTrackedElementNotClickedInLast","UserTrackedPageVisitedLessThan","UserTrackedPageNotVisited","UserTrackedPageNotVisitedBefore","UserTrackedPageNotVisitedAfter","UserTrackedPageNotVisitedInLast"],function(e){return!o(e)})}).asSingleton().dependencies("EngagementRulesRepository"),Tt.register("OnboardingConditionFunctions").asCtor(function(n){this.getFuncList=function(){return r},this.getFuncAssert=function(){return t},this.getAsyncFuncs=function(){return e};var t=[],e=[],r={UserOnboardingProgressMoreThan:function(e){return n.getTasksCompletionProgress()>e.funcArgs.UserOnboardingProgressInput},UserOnboardingProgressLessThan:function(e){return n.getTasksCompletionProgress()<e.funcArgs.UserOnboardingProgressInput},UserOnboardingProgressNotStarted:function(e){return 0==n.getTasksCompletionProgress()},UserOnboardingProgressOngoing:function(e){var t=n.getTasksCompletionProgress();return 0<t&&t<100},UserOnboardingProgressComplete:function(e){return 100==n.getTasksCompletionProgress()}};Et.each(r,function(e){t[e]=!1})}).asSingleton().dependencies("TasksPercentageCalculator"),Tt.register("BizFlowShowInMenuChecker").asCtor(function(r,i,e,t){this.isShowInMenu=function(e){if(t=e.Settings,"False"==r.getSettingsValue(t,"IsVisible",!0))return!1;var t;var n=function(e){if(1!=r.getSettingsValue(e.Settings,o.enabled,0))return!1;return e.ConditionTrees&&e.ConditionTrees[o.name]}(e);if(!n)return!0;return i.checkConditions(n,e)};var o=t.properties[e.DEPLOYABLE_TYPE.BusinessSolution]}).dependencies("CommonUtils, DisplayConditionChecker, Consts, TagsSegmentationProperties"),Tt.register("DeployableShowInMenuChecker").asCtor(function(r){this.isShowInMenu=function(e){var t=(n=e,n.Settings&&n.Settings.DisplayCondition);var n;if(!t)return!0;return r.checkConditions(t,e)}}).dependencies("DisplayConditionChecker"),Tt.register("ShowInMenuCheckerFactory").asCtor(function(e,t,n,r,i){this.getDisplayConditionCheckerFunc=function(e){return o[e]||s},this.isSupportedDeployableInMenu=function(e){return e!==i.DEPLOYABLE_TYPE.Course&&o[e]!==undefined};var o={};function a(e){return r.isTaskDisplayed(e)}function s(){return!0}(function(){o[i.DEPLOYABLE_TYPE.Task]=a,o[i.DEPLOYABLE_TYPE.Tutorial]=e.canShowTutorial,o[i.DEPLOYABLE_TYPE.BusinessSolution]=t.isShowInMenu,o[i.DEPLOYABLE_TYPE.Content]=n.isShowInMenu,o[i.DEPLOYABLE_TYPE.Shuttle]=n.isShowInMenu,o[i.DEPLOYABLE_TYPE.Course]=n.isShowInMenu}).apply(null,arguments)}).dependencies("Lib, BizFlowShowInMenuChecker, DeployableShowInMenuChecker, TodoListManager, Consts"),Tt.register("DisplayConditionChecker").asCtor(function(n){this.checkConditions=function(e,t){if(!e)return!0;return n.createConditionChecker(e,{featureName:r,elementName:t.Name}).getCurrentEvaluationValueAndStopEvaluating(e)};var r="uiProperties"}).dependencies("ConditionCheckerFactory"),Tt.register("ConditionTreeGetter").asCtor(function(e,i){this.get=function(e,t,n){var r=a[e]?a[e]:o;return i.getSettingsValue(t[r],n,"")};var o="Settings",a={};a[e.BusinessSolution]="ConditionTrees"}).dependencies("DeployableTypes, CommonUtils"),Tt.register("ConditionTreeTraverser").asCtor(function(i){this.containsFuncName=function(t,n){r=t,r.Root&&(t=i.convert(t.Root));var r;return function e(t,n){return"Func"==t.nodeType?-1<Et.inArray(t.funcName,n):("And"==t.nodeType||"Or"==t.nodeType)&&(e(t.leftSon,n)||e(t.rightSon,n))}(t,n)}}).dependencies("NewToOldConditionConverter"),Tt.register("ConditionTreeEvaluator").asCtor(function(o){this.evaluate=function(t){return null==t||function e(t){{if("Func"==t.nodeType){var n=o.getFunctionsByLibNameType(t.funcName),r=[];r.push({funcArgs:t.funcArgs});var i=n.apply(this,r);return i instanceof wt.regular&&(i=i.getValue()),t.result=i}if("And"==t.nodeType){var i=e(t.leftSon)&&e(t.rightSon);return t.result=i}if("Or"==t.nodeType){var i=e(t.leftSon)||e(t.rightSon);return t.result=i}return!1}}(t)}}).dependencies("ConditionFunctions"),Tt.register("ConditionEvaluator").asCtor(function(t){var i=this;i.supportedFunctions={isExistJQ:function(e,t){t==undefined&&(t=1);return mtjQuery(e).length>=t},isTextValueJQ:function(e,t){return mtjQuery(e).text()==t},isLocationMatch:function(e){return t.isLocationMatchString(e)}};var a=new st;function s(e,t,n){for(var r=Array(),i=n,o=e.indexOf(t);-1<o;){if("("!=e.charAt(o+t.length))throw"Ilegal function definition in expression";for(var a=o+t.length+1,s=Array(),l=a;(")"!=e.charAt(l)||0!=s.length)&&l<e.length;){if("'"==e.charAt(l)||'"'==e.charAt(l))if(0==s.length)s.push(e.charAt(l));else{var u=s.pop();u!=e.charAt(l)&&(s.push(u),s.push(e.charAt(l)))}l++}if(")"!=e.charAt(l))throw"Ilegal function definition in expression";r[i]=e.substring(o,l+1),e=e.substring(0,o)+"["+i+"]"+e.substr(l+1),i++,o=e.indexOf(t)}return[r,e]}function l(e){if(e==undefined||e.length<=0)throw"Ilegal function definition";for(var t=e.substr(0,e.indexOf("(")),n=e.substring(e.indexOf("(")+1,e.length-1).split(","),r=0;r<n.length;r++)n[r]=n[r].replace(/^\s+|\s+$/g,""),("'"==n[r].charAt(0)&&"'"==n[r].charAt(n[r].length-1)||'"'==n[r].charAt(0)&&'"'==n[r].charAt(n[r].length-1))&&(n[r]=n[r].substring(1,n[r].length-1));return function(){return i.supportedFunctions[t].apply(this,n)}}this.evaluate=function(e){if(function(e){if((e=(e=(e=(e=e.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"))==undefined||e.length<=0)throw"Ilegal Expression";var t=0;for(var n in this.supportedFunctions)if(this.supportedFunctions.hasOwnProperty(n)){var r=s(e,n,t);e=r[1];for(var i=t;i<r[0].length;i++){var o=l(r[0][i]);a.setFunction(o,t++)}}a.setExpression(e)}(e),a!=undefined)return a.evaluate();throw"Evaluator is undefined"},this.addSupportedFunction=function(e,t){if(this.supportedFunctions[e])throw"Function '"+e+"' already exist";this.supportedFunctions[e]=t}}).dependencies("LocationMatcher");var st=function(){this.functions=Array(),this.treeNode=null,this.errorStack=Array();var l=this;function u(e){return e?new t(e):(l.errorStack.push("Failed to create NOT node."),!1)}function c(e,t,n){if(t&&n){if("OR"==e.toUpperCase())return new i(t,n);if("AND"==e.toUpperCase())return new r(t,n)}return l.errorStack.push("Failed to create "+e.toUpperCase()+" node."),!1}function d(e){for(var t=Array(),n=0;n<e.length;n++)if("("==e.charAt(n))t.push("(");else if(")"==e.charAt(n)){if(0==t.length)return!1;t.pop()}return 0==t.length}function f(e){return!!(e.match(/not/i)||e.match(/or/i)||e.match(/and/i))}function r(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()&&this.rightSon.evaluate()}}function i(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()||this.rightSon.evaluate()}}function t(e){this.son=e,this.evaluate=function(){return!this.son.evaluate()}}function p(e){this.func=e,this.evaluate=function(){return this.func()}}this.setFunction=function(e,t){if(e==undefined||t==undefined||t<0)throw"Wrong arguments.";return this.functions[t]=e,!0},this.evaluate=function(){if(null!=this.treeNode)return this.treeNode.evaluate();throw"Evaluation tree doesn't exist - No expression was set."},this.setExpression=function(t){if(t!=undefined&&0<t.length&&d(t)){if(this.treeNode=function e(t){var n=function(e){if("("!=(e=(e=(e=(e=(e=(e=mtjQuery.trim(e)).replace("  "," ")).replace("( ","(")).replace(/not\(/gi,"not (")).replace(/and\(/gi,"and (")).replace(/or\(/gi,"or (")).charAt(0)||")"!=e.charAt(e.length-1))return e;var t=e.substring(1,e.length-1);return d(t)?t:e}(t);var r=n.split(" ");switch(r.length){case 0:l.errorStack.push("Error - a try to build tree with empty expression");break;case 1:return function(e){if(new RegExp("^\\[\\d+\\]$","i").test(e)){var t=parseInt(e.substring(1,e.length-1));return l.functions.length>=t&&l.functions[t]!=undefined?new p(l.functions[t]):(l.errorStack.push("Function id doesn't exist!"),!1)}return l.errorStack.push("function token isn't in the form [funcId]. recieved:"+e),!1}(r[0]);case 2:return"NOT"==r[0].toUpperCase()?u(e(r[1])):(l.errorStack.push("Ilegal expression"),!1);case 3:return"NOT"==r[0].toUpperCase()?u(e(r[1]+" "+r[2])):c(r[1],e(r[0]),e(r[2]));default:for(var i=Array(),o=0;o<r.length;o++){if(0==o&&3<=r[o].length&&"NOT"==r[o].substr(0,3).toUpperCase())return u(e(r.join(" ").substr(3)));for(var a=!1,s=0;s<r[o].length;s++)"("==r[o].charAt(s)?(a=!0,i.push("(")):")"==r[o].charAt(s)&&(a=!0,i.pop());if(!a&&0==i.length&&f(r[o]))return c(r[o],e(r.splice(0,o).join(" ")),e(r.splice(1,r.length-1).join(" ")))}return l.errorStack.push("Ilegal expression"),!1}}(t),this.treeNode)return!0;var n=this.errorStack.join("\n");throw this.errorStack=this.errorStack.splice(),n}return this.errorStack.push("Ilegal expression!"),!1}};function lt(){var r,i;this.saveToStorage=function(e,t,n){i.saveData(e+r,t,n)},this.getFromStorage=function(e,t){return i.getData(e+r,t)},this.removeFromStorage=function(e){return i.removeData(e+r)},this.refreshGetData=function(e,t){return i.refreshGetData(e,t)},function(e,t){r=t,i=e}.apply(null,arguments)}function ut(){var t,a,s,l,u,c,n,r=86400;function d(e){return n+s+"_"+e}function f(e){var t={};return t.p=l(),t.g=e,t}function i(e){var t=a.retrieveLocalData(d(e));return t&&l()==t.p?t:null}this.asyncRetrieveCompletedGoals=function(r,e,i,t){var n,o=(n=e,{userGuid:s,endUserId:r,source:u(),permutationId:l(),goalsToCheck:n});a.loadServerData(c,o,d(r),function(e){var t=d(r),n=f(e);a.updateLocalData(t,n),i&&i(e)},t,!0)},this.syncRetrieveCompletedGoals=function(e){var t=i(e);return t?t.g:null},this.updateGoalCompleted=function(e,t){var n=d(e),r=i(e)||f([]);r.g.push(t),a.updateLocalData(n,r)},this.tempClearUserCompletedGoals=function(e){a.updateLocalData(d(e),{})},function(e){t=e.serverAddress,s=e.userGuidContainer.getUserGuid(),e.lib.Logger.error,l=e.getPermutationId,e.getEndUserGuid,u=e.getAuditSource,c=t+"/AbTesting/UserCompletedGoals",n=Tt.get("StorageKeysConfigurations").abTestingGoals.endUserUniqueKey.key,a=Tt.create("RemoteDataSynchronizer",{storageManager:e.storageManager,storageLifetime:r})}.apply(null,arguments)}function ct(){var i,o=null,t=null;var n=this;var a=function(e){t.updateGoalCompleted(e)};this.startWatchingTasks=function(){var e=t.getTasksGoalsNotCompleted();mtjQuery.each(e,function(e,t){t.TaskId&&n.startWatchingTask(t)})},this.startWatchingTask=function(e){var t,n=(t=e).GoalsNotCompleted?t.GoalsNotCompleted:[];if(0<n.length){var r={goalCompletedFunc:a};o.addGoalsWatch(n,r)}i("Started watching Task : "+e.Name,2)},function(e){o=e.goalsManager,t=e.todoListManager,i=_makeTutorial.Logger.wrapCustomerLog(e.consts.TASKS.LOG_FEATURE)}.apply(null,arguments)}function dt(){this.extend=function(e,t,n,r,i,o){var a=function(e,t){var n={};for(var r in t){n[r]=t[r];var i="function"==typeof t[r],o="function"==typeof e[r];i&&!o?e[r]=t[r]:i&&o&&t[r].WM_VIRTUAL&&(t[r]=e[r])}return n}(e,new t(n,r,i,o));e._base=a},this.VIRTUAL=function(e){return e.WM_VIRTUAL=!0,e};var e=this.VIRTUAL(function(){throw"Function is pure virtual. must override"});this.WM_PURE_VIRTUAL=function(){return e}}Tt.register("DummyClientStorageManager").asInstance({saveData:function(e,t,n,r){},getData:function(e,t,n){return t},getStorageType:function(){return{type:"jstorage"}}}),Tt.register("RemoteDataSynchronizer").asCtor(function(e){var s,l,r,i,u,c=this,n=Tt.get("TimerManager"),a=function(e){if(e){var t=arguments;n.libSetTimeout(function(){e.apply(this,Array.prototype.slice.call(t,1))},0)}},d={};function f(e,t){for(var n=t?d[e].success:d[e].fail,r=[].splice.call(arguments,2,arguments.length-2),i=0;i<n.length;i++)try{a.apply(this,[n[i]].concat(r))}catch(o){}d[e]=undefined}this.loadServerData=function(e,t,r,n,i,o){var a,s,l,u=!!d[r];s=n,l=i,d[a=r]||(d[a]={success:[],fail:[]}),s&&d[a].success.push(s),l&&d[a].fail.push(l),u||Tt.get("WmAjax").execute({url:e,data:t,traditional:o,success:function(e,t,n){e.ErrorMessage?f(r,!1,e.ErrorMessage):(c.updateLocalData(r,e),f(r,!0,e))},error:function(e,t,n){f(r,!1,t)}})},this.retrieveData=function(e,t,n,r,i,o){var a=l.getData(n,null);a&&(t=u?u(a):a,s=t),s!==undefined?r&&r(s):c.loadServerData(e,t,n,r,i,o)},this.retrieveLocalData=function(e){var t=l.getData(e,null),n=u&&t?u(t):t;return n&&(s=n),s},this.updateLocalData=function(e,t){s=t;var n=i&&t?i(t):t;l.saveData(e,n,r)},this.updateRemoteData=function(e,t,r,i){Tt.get("WmAjax").execute({url:e,data:t,success:function(e,t,n){e.ErrorMessage?a(i,e.ErrorMessage):a(r)},error:function(e,t,n){a(i,t)}})},function(){l=e.storageManager,r=e.storageLifetime,i=e.encodeStorageData,u=e.decodeStorageData}.apply(null,arguments)}).asProto(),Tt.register("TodoListDataSynchronizer").asCtor(function(e,t,n,r,l,u,f,i,c,d,p,g,o,h,a,s,m){var v,y,S,E,T,w,C,b,I,_=this,P=3600,A="/ToDoList/UserCompletedTasksByIdsAndGoalsIds";function k(e,t,n){return{userGuid:n||u.getUserGuid(),endUserId:e,taskGoalsIds:p.toJSON(t),source:u.getEnvironmentId()}}function D(e){var r=[];return mtjQuery.each(e,function(e,t){if(t.TaskId){var n=mtjQuery.extend(!0,{},t);O(n,"TaskId","t"),O(n,"IsCompleted","c"),O(n,"CompletedGoals","g"),r.push(n)}}),r}function N(e){var r={};return mtjQuery.each(e,function(e,t){if(t.t){var n=mtjQuery.extend(!0,{},t);O(n,"t","TaskId"),O(n,"c","IsCompleted"),O(n,"g","CompletedGoals"),r[n.TaskId]=n}}),r}function O(e,t,n){e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t])}function x(e){try{var t=Tt.get("UiDataProvider").uiTasksTree(),n=d.getCompletionData(t[0],"task"),r=Number((n.completedPercent/100).toFixed(2));a=(o=n).completedTasks.map(function(e){return e.id()}),s=o.visibleTasks.filter(function(e){return-1==a.indexOf(e.id())}).map(function(e){return e.id()}),m.log.info("Tasks progressUpdate: visible tasks",{completedTasks:a,uncompletedTasks:s}),g.saveData(L(e),!0,b.expiry);var i={type:f.EVENT_APPS.Task};u.setAnalyticsCustomFields(1,n.visibleTasks.length),u.setAnalyticsCustomFields(2,r),f.postEvent(f.EVENT_TYPES.ProgressUpdate,i)}catch(l){S(l),m.log.error("Tasks progressUpdate error",{errorMessage:l.message,stackTrace:l.stack})}var o,a,s}function L(e){return b.key+u.getEnvironmentId()+"_"+u.getUserGuid()+"_"+e}function F(e,t){if(e&&0!==e.length)for(var n=e.length-1;0<=n;n--)e[n].taskId==t.taskId&&e[n].goalId==t.goalId&&e[n].permutationId==t.permutationId&&e[n].source==t.source&&e[n].endUserGuid==t.endUserGuid&&e.splice(n,1)}_.init=function(r,i){T=w.register("tg",{beforeSendingManipulationFunc:F,actionUrl:"/ToDoList/UpdateUserTasksCompleted",prefixForStorage:"tg",sendingThreshold:1,dataType:"task goal",dataIdFieldName:"Id",requestParamsFunc:function(e){return{userCompletedTasksSerialized:p.toJSON(e),userGuid:u.getUserGuid()}}}),I&&h.shouldAudit()&&s.one(a.EVENTS.WalkmeReady,function(){var e,t,n;t=i,n=L(e=r),g.getData(n,!1)||_.asyncRetrieveCompletedTasks(e,t,function(){x(e)})})},_.getEndUserUniqueDataKey=function(e,t){return t=t||u.getUserGuid(),C+u.getEnvironmentId()+"_"+t+"_"+e},this.asyncRetrieveCompletedTasks=function(e,t,n,r,i){if(i=i||{},v){var o=k(e,t,i.userGuid);1948<Et.param(o).length&&(o.taskGoalsIds=null),y.retrieveData(v+A,o,_.getEndUserUniqueDataKey(e,i.userGuid),n,r,!0)}},this.syncRetrieveCompletedTasks=function(e,t,n){if(n=n||{},!v)return null;var r=y.retrieveLocalData(_.getEndUserUniqueDataKey(e,n.userGuid));return r?(l.customerLog("syncRetrieveCompletedTasks - found completed in local data: "+p.toJSON(r),4),r):(l.customerLog("syncRetrieveCompletedTasks - going to fetch data from DB",4),y.loadServerData(v+A,k(e,t,n.userGuid),_.getEndUserUniqueDataKey(e,n.userGuid),null,null,!0),null)},this.updateTaskCompleted=function(e,t,n,r,i){l.customerLog(c.formatString("updateTaskCompleted for {0} {1}",t?"task":"goal",t?t.Id:n.Id),4);var o=_.getEndUserUniqueDataKey(e);l.customerLog("Mark task as completed in storage, data = "+p.toJSON(r),4),y.updateLocalData(o,r);var a=Tt.get("DictionaryUtils").getDictionaryKeys(i).length;if(h.shouldAudit()){var s={endUserId:e,taskId:t?t.Id:-1,goalId:n?n.Id:-1,tasksCount:a,permutationId:u.getPermutationId(),endUserGuid:u.getEndUserGuid(),source:u.getEnvironmentId()};T.sendData(s),f.isReportingEnabled()&&(function(e,t,n,r){try{if(e&&e!=={}){var i=Tt.get("DeployablesManagerFactory").get(e.RelatedDeployableType),o=i.getById(e.RelatedDeployableId),a=function(e,t){var n=0;for(var r in e){var i=e[r];e.hasOwnProperty(r)&&i.IsCompleted&&t[i.TaskId]&&n++}return n}(t,n),s=a/r,l=Number(s.toFixed(2)),u=Tt.get("DeployableTypeToEventSenderAppTypeMapper"),c={type:f.EVENT_APPS.Task,oId:e.Id,oName:e.Name,pId:"-1",total:n?r:-1,aoId:o.Id,aoName:o.Name,aAppType:u.map(e.RelatedDeployableType),ratio:l};f.postEvent(f.EVENT_TYPES.Complete,c)}}catch(d){S(d)}}(t,r,i,a),I&&x(e))}},function(){E=i.get(),v=t.get();var e=c.getSettingsValue(E.Settings,"remoteDataLifeTime",P);y=Tt.create("RemoteDataSynchronizer",{storageManager:n,storageLifetime:e,encodeStorageData:D,decodeStorageData:N}),S=l.error,w=r,C=n.keysConfig.todoList.endUserUniqueKey.key,b=n.keysConfig.todoList.progressPercentDataKey,I=o.isFeatureEnabled("tasksProgressUpdates")}.apply(null,arguments)}).dependencies("Lib, RecorderServerManager, ClientStorageManager, ServerDataSenderManager, Logger, WalkMeInfo,EventSender, SiteConfigManager, CommonUtils, ObjectTreePercentageCalculator, JsonUtils,ClientOrServerStorageManager, FeaturesManager, AuditingEnabledIndicator, Consts, WmInternals,EventCollectorLogger"),Tt.register("TasksPercentageCalculator").asCtor(function(t,e){var n;function r(){n=undefined}this.getTasksCompletionProgress=function(){if(n===undefined){var e=Tt.get("UiDataProvider").uiTasksTree();e&&0<e.length&&(n=t.calculate(e[0],"task"))}return n},e.bind(r)}).asSingleton().dependencies("ObjectTreePercentageCalculator, UIChangeTracker"),Tt.register("VisibleObjectTree").asCtor(function(r){this.getTree=function(e,t){return r.getDictionaryValues(function n(e,r,i){var t=e.children();o=e,a=r,o.type()==a&&!o.properties().hasProperty("phantom")&&o.properties().hasProperty("visible")&&(i[e.id()]=e);var o,a;t&&Et.each(t,function(e,t){n(t,r,i)});return i}(e,t,{}))}}).asSingleton().dependencies("DictionaryUtils"),Tt.register("FramesetsUtils").asCtor(function(e,n,a,t){var s,r="FramesetsUtils",i=5,o=null,l=[],u=undefined,c=null,d=undefined,f=this;function p(){for(var e=[],t=g(),n=0;n<t.length;n++)e.push(t[n].contentWindow.document);return e}function g(e,t){return t===undefined&&(t=[]),mtjQuery("frame",e).each(function(){try{0<mtjQuery("frame, frameset",this.contentWindow.document).length&&(t=g(this.contentWindow.document,t)),t.push(this)}catch(e){s("Frame is cross-domain, we can't access it",i)}}),t}function h(){for(var e=0;e<u.length;e++){var t=u[e];f.isFrameActive(t)||null!=t&&null!=t.contentWindow&&m(t)}}function m(e){if(!function(e){for(var t=0;t<l.length;t++)if(l[t]==e)return!0;return!1}(e)){if(l.push(e),t.isFeatureEnabled("useDocumentReadyForIframeLoad"))return void mtjQuery(e.contentWindow.document).ready(function(){y(e)});n.isIE(9,"lte")?e.addEventListener?e.addEventListener("load",v,!1):e.attachEvent("onload",v):mtjQuery(e).bind("load.walkme",function(){y(e)})}}function v(e){y(e.currentTarget)}function y(e){var t;t=e,n.isIE(9,"lte")?t.removeEventListener?t.removeEventListener("load",v,!1):t.detachEvent("onload",v):mtjQuery(t).unbind("load.walkme"),function(e){for(var t=0;t<l.length;t++)l[t]==e&&l.splice(t,1)}(e)}function S(){null!=o&&(o.clear(),o=null)}function E(){for(var e=0;e<l.length;e++)mtjQuery(l[e]).unbind("load.walkme");l=[]}function T(e){return e.height!==undefined&&e.width!==undefined?e.height*e.width:mtjQuery(e).height()*mtjQuery(e).width()}f.isFramesetsPage=function(){d===undefined&&(d=0<Et("frameset").length);return d},f.checkIfAnyFrameIsUnloaded=function(e){a.libSetTimeout(S,e),u=g(),l=[],o=a.playSetInterval(h,5),null!=c&&c.clear();c=a.libSetTimeout(E,7e3)},f.waitForFramesToLoad=function(){return t=Et.Deferred(),function e(){return 0<l.length?(a.libSetTimeout(e,200),t.promise()):t.resolve()}();var t},f.isFrameActive=function(e){{if(null==e)return s("Frame is not active (Frame is null)",i),!1;if(null==e.contentWindow)return s("Frame is not active (frame.contentWindow is null)",i),!1;if(null==e.contentWindow.document)return s("Frame is not active (frame.contentWindow.document is null)",i),!1;if(0==mtjQuery("head",e.contentWindow.document).length)return s('Frame is not active (mtjQuery("head", frame.contentWindow.document).length == 0)',i),!1;if(0==mtjQuery("body",e.contentWindow.document).length&&0==mtjQuery("frameset",e.contentWindow.document).length)return s('Frame is not active (mtjQuery("body", frame.contentWindow.document).length == 0)',i),!1}return!0},f.getAllFramesDocuments=p,f.waitForFramesHeadsAndBodies=function(r){if(!f.isFramesetsPage())return void r();var i=40,o=0;!function e(){var t=f.findBiggestFrame();var n=f.isFrameActive(t);if(n)return s("Biggest frame is active. waitCount: "+o,5,"FramesetsUtils"),void r();if(i<o)return void s("Failed waiting for head and body in biggest frame. Stopping execution"+o,1,"FramesetsUtils");a.setWalkmeTimeout(function(){s("Biggest frame wasn't ready on attempt "+ ++o,5,"FramesetsUtils"),e()},200)}()},f.shouldHandlePageAsFramesets=function(){return!t.isFeatureEnabled("oldframesets")&&f.isFramesetsPage()},f.findBiggestFrame=function(e,r){e=e||document;var i=r?T(r):-1;return mtjQuery("frame",e).each(function(){try{if(0<mtjQuery("frame, frameset",this.contentWindow.document).length){var e=this.contentWindow.document;e&&(r=f.findBiggestFrame(e,r),i=r?T(r):-1)}else{var t=T(this);i<t&&(i=t,r=this)}}catch(n){}}),r},f.doForAllFrames=function(e){for(var t=p(),n=0;n<t.length;n++)e(t[n])},function(){s=e.wrapCustomerLog(r)}.apply(null,arguments)}).dependencies("Logger, HostData, TimerManager, FeaturesManager"),Tt.register("DocumentsManager").asCtor(function(e,t,n){var r=e,i=t,o=n.wrapCustomerLog("documentsManager");this.foreachDocument=function(n,e){n(document),r.doForAllFrames(n),i.foreachIframe(function(e){try{n(e.iframe.contentWindow.document)}catch(t){o("DocumentsManager - Skipping inaccessible document",3)}})}}).dependencies("FramesetsUtils, IFramesManager, Logger");var dt=new dt;function ft(){var o,a,s,l,u=this,c=Tt.get("Consts"),d=Tt.get("StringUtils"),f=c.PLAY_MODE;function p(e){Tt.get("CommonUtils").isValidUrl(e.Url)?(s.deprecatedRaiseEvent(c.EVENTS.LoadingContentInNewTab),l(d.formatString("Opening content in new tab. Url: {0}",e.Url)),window.open(e.Url,"_blank")):l(d.formatString("Content url is invalid: {0}",e.Url))}u.getContentTypeName=dt.WM_PURE_VIRTUAL(),u.createContentElement=dt.WM_PURE_VIRTUAL(),u.needsNewTabButton=dt.WM_PURE_VIRTUAL(),u.defaultLightboxSize=dt.WM_PURE_VIRTUAL(),u.cannotPlayInLightbox=function(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://");return t&&l("Can't play content in lightbox"),t},u.activateContent=function(e,t,n){var r,i=parseInt(Tt.get("SettingsValuesRetriever").getSettingsValue(e.Settings,"ContentPlayMode",f.NewTab));switch(l(d.formatString("Started playing content, play mode is :{0}",i)),o.SendClickAudit(c.DEPLOYABLE_TYPE.Content,e.Id,{type:t,id:n},{contentType:e.Type}),e.Url=Tt.get("HtmlDecoder").decodeHtml(e.Url,["&"]),l(d.formatString("Content url is :{0}",e.Url)),s.deprecatedRaiseEvent(c.EVENTS.LoadingContent,e),i){case f.Widget:!function(e){throw"activateContentInWidget is unimplemented"}();break;case f.LightBox:u.cannotPlayInLightbox(e.Url)?(l("Falling back to playing content in a new tab instead"),p(e)):(r=e,(a=Tt.create("LightboxDisplayer")).activate(r,u.defaultLightboxSize(),u.getContentTypeName(),u.needsNewTabButton(),u.createContentElement,p));break;case f.NewTab:p(e)}},u.removeContent=function(e){a&&a.remove()},u.getLightboxSize=function(){return a.getSize()},function(e){e.lib,e.cdnServer,o=e.clickAuditManager,l=Tt.get("Logger").wrapCustomerLog(c.RESOURCES.LOG_FEATURE_CONTENT_ACTIVATOR),s=Tt.get("CommonEvents")}.apply(null,arguments)}function pt(){var l,u,c,t=this,n=Tt.get("Consts"),d=Tt.get("StringUtils"),f="VideoParameters";function p(){var e=t.getLightboxSize();return d.formatString('width="{0}" height="{1}"',e.width,e.height)}t.getContentTypeName=function(){return"video"},t.createContentElement=function(e){return function(e){var t=(n=e,r=Tt.get("SettingsValuesRetriever").getSettingsValue(n.Settings,f,""),r=function(e,t){e=(e=e.replace(/&quot;/gi,'"')).replace(/((width|height)="[^\\"]+)"/gi,"");var n=p();return e+=" "+n}(r),r+=' wmode="opaque"');var n,r;if("html5video"==l){var i="";i+=p();var o=mtjQuery("<video controls "+i+' src="'+c.Url+'"></video>');return-1<t.indexOf("autoplay")&&o.attr("autoplay",1),o}var a=d.formatString("[{0} {1}]{2}[/{3}]",l,t,u,l),s=Tt.get("BBCodeParser").parse(a);return mtjQuery(s)}(e)},t.needsNewTabButton=function(){return!1},t.defaultLightboxSize=function(){return{width:420,height:315}},function(e){dt.extend(t,ft,e),e.lib,l=e.vendorName,u=e.videoId,c=e.content,Tt.get("Logger").wrapCustomerLog(n.RESOURCES.LOG_FEATURE_CONTENT_ACTIVATOR)}.apply(null,arguments)}function gt(){var r=this;r.getContentTypeName=function(){return"article"},r.createContentElement=function(e){return function(e){if(!Tt.get("CommonUtils").isValidUrl(e.Url))return;var t=r.getLightboxSize(),n=Tt.get("Mustache").to_html('<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',{width:t.width,height:t.height,url:encodeURI(e.Url)});return mtjQuery(n)}(e)},r.needsNewTabButton=function(){return!0},r.defaultLightboxSize=function(){return{width:900,height:500}},function(e){dt.extend(r,ft,e),e.lib,Tt.get("Logger").wrapCustomerLog(Tt.get("Consts").RESOURCES.LOG_FEATURE_CONTENT_ACTIVATOR)}.apply(null,arguments)}function ht(){var t,i,d,o,f,p,g,h,m,n="ABTesting",v={};var a=function(e){var t,n=e.GoalType==g.DEPLOYABLE_TYPE.AbExperiment,r=(t=e.Id,v[t]!=undefined);if(n||r){var i,o,a,s,l,u=p(),c=d.syncRetrieveCompletedGoals(u);if(-1==m.inArray(e.Id,c))f("Experiment Goal was completed! Goal ID:"+e.Id+", Goal Name : "+e.Name,1),i=u,o=e,d.updateGoalCompleted(i,o.Id),n||(s=v[(a=e).Id],l={goal:{Id:a.Id,GoalType:g.DEPLOYABLE_TYPE.AbExperiment,RelatedObjectId:s,Name:a.Name},identifier:a.identifier,interactionGuid:a.interactionGuid},h.raiseEvent(g.EVENTS.AbExperimentLinkedGoalReached,l))}};function s(e,t){for(var n=[],r=[],i=0;i<e.Goals.length;i++){var o=e.Goals[i];-1<m.inArray(o.Id,t)?n.push(o):r.push(o)}e.Goals=r,e.CompletedGoals=n}var l=!1;function u(e,t){!function(e){for(var t=0;t<o.length;t++)s(o[t],e)}(e);for(var n=0;n<o.length;n++){var r=o[n];f("Start watching Experiment goals. ExperimentID : "+r.Id,2),i.startWatchingDeployable(r,undefined)}t&&t()}this.startWatching=function(t){if(!l){l=!0;var e=[];if(function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.Goals.length;i++){var o=r.Goals[i];t.push(o.Id),1==o.IsLinkedGoal&&(v[o.Id]=r.Id)}}(o,e),0==e.length)return f("No AbTesting goals were defined"),void(t&&t());i.onGoalCompleted(a);var n=p(),r=d.syncRetrieveCompletedGoals(n);r?(f("Completed goals data exists. Starting goals watch"),h.raiseEvent("ABTestingGoalsFetched"),u(r,t)):(f("No completed goals data exists locally. Fetching from server"),d.asyncRetrieveCompletedGoals(n,e,function(e){f("Completed goals data recieved. Starting goals watch"),h.raiseEvent("ABTestingGoalsFetched"),u(e,t)},function(){f("WalkMe ABTesting - Error when fetching end-user goals. Removing WalkMe",1),Tt.get("LibDestroyer").removeWalkMe("AbTesting - Cannot fetch EndUser Goals",{sendLog:!0})}))}},this.isGoalReached=function(e){for(var t=d.syncRetrieveCompletedGoals(p()),n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},function(e){i=e.deployablesGoalManager,o=e.experiments,t=e.lib,p=e.getEndUserGuid,f=Tt.get("Logger").wrapCustomerLog(n),h=e.commonEvents,d=new ut({lib:t,serverAddress:e.serverAddress,getPermutationId:e.getPermutationId,getEndUserGuid:e.getEndUserGuid,getAuditSource:e.getAuditSource,storageManager:e.storageManager,userGuidContainer:e.userGuidContainer}),g=Tt.get("Consts"),m=Tt.get("ArrayUtils")}.apply(null,arguments)}function mt(n){this.deployableCanAutoplay=function(e,t){n.get(e).run(e,t)},this.deployableCannotAutoplay=function(){},this.deployablesChecksStarting=function(){}}function vt(n){this.get=function(e,t){return{trackUIChange:!0,stopPollingAfterEvaluateTrue:!1,evaluationPollingIntervalMs:2e3,onlyPollConditionFunctions:!0,featureName:n.AUTOSTART.LOG_FEATURE,elementName:t.Name}}}function yt(l,u){this.iterate=function(e){for(var t=u.getDeployableTypes(),n=0;n<t.length;n++)for(var r=t[n],i=l.get(r),o=i.getAll(),a=0;a<o.length;a++){var s=o[a];e(i,r,s)}}}function St(){var t;this.set=function(e){t=e},this.get=function(){return t},function(e){t=e}.apply(this,arguments)}function Ct(){this.run=function(){}}Tt.register("WalkmeInheritance").asInstance(dt),Tt.register("POVisibleIframeChecker").asCtor(function(){this.executeIfVisible=function(t){if(!o||window==top)return t();f.push(t);try{var n={wm:!0,type:c};!function e(t,n){var r=t&&t.parent;if(!r||r==t)return;l.apply(r,[n,"*"]);e(r,n)}(window,u.toJSON(n))}catch(r){a.error(r)}},this.reset=function(){f=[]};var o,a,s,l,u,c="isVisibleFrameAsk",d="isVisibleFrameAnswer",f=[];function p(e){try{var t=u.secureEvalJSON(e.data);if(!t.wm)return;switch(t.type){case c:var n=function r(i,e){if(null===e)return;var o=undefined;Et("iframe,frame",e).each(function(e,t){if(t.contentWindow==i)return o=Et(t).is(":mt_visible"),!1;try{if((o=r(i,t.contentDocument))!==undefined)return!1}catch(n){}});return o}(e.source);n===undefined&&(n=!0),e.source.postMessage(u.toJSON({wm:!0,type:d,isVisible:n}),"*");break;case d:if(t.isVisible){var i=f.shift();i&&i()}}}catch(o){}}(function(e,t,n,r,i){a=n,u=e,s=r,o=t.isFeatureEnabled("sfLightningPo"),l=i,u=e,o&&s.listen(p)}).apply(null,arguments)}).dependencies("JsonUtils,FeaturesManager,Logger,PostMessageListener, PostMessage"),Tt.register("PreExecutionPassOwnershipWrapper").asCtor(function(){var n,r;function i(){o(undefined,undefined)}function o(e,t){n=e,r=t}this.wrap=function(e,t,n){o(e,t);var r=n();return i(),r},this.setCurrent=o,this.getCurrent=function(){return n},this.clearCurrent=i,this.getCurrentStepData=function(){return r}}),Tt.register("PassOwnershipRouter").asCtor(function(i,t,o,n){function a(e){return t.load(),n.get(e)}this.evaluateOwnership=function(e,t,n){var r=a(n);return r?r.evaluateOwnership(e,t):i.PASS_OWNERSHIP.EvaluateOwnership.NotOwner},this.loseOwnership=function(){o.raiseEvent("loseOwnership");var e=n.get();return e&&e.lostOwnership()},this.gainOwnership=function(e,t,n){o.raiseEvent("gainOwnership");var r=a();return r&&r.gainedOwnership(e,t,n)},this.evaluateOwnershipByPeeking=function(){var e=a();return e&&e.evaluateOwnershipByPeeking()}}).dependencies("Consts,FlowStack, CommonEvents, OwnershipManagerProvider"),Tt.register("OwnershipManagerProvider").asCtor(function(t,n,r,i){var o,a;function e(e,t,n){o[e]=t,n&&(a=t)}this.addOwnershipManager=e,this.get=function(e){return e?o[e]:i.isEmpty()&&!r.getData(t.FLOW_BEFORE_PLAY_KEY)?a:n},o={},e(t.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow,n)}).dependencies("Consts, BizflowOwnershipManager, ClientStorageManager, FlowStack"),Tt.register("BizflowOwnershipManager").asCtor(function(n,r,i,o,a,s,t,e,l,u,c){this.determineOwner=function(e,t){p({flowId:e,stageId:t}),n.get().optimizedDetermineOwnership()||(n.get().reset(),i.isPassOwnershipNode(f())&&n.get().setOwnershipCondition({flowId:e,stageId:t}))},this.evaluateOwnership=function(e,t){var n=function(e){var t={};if(e)t.node=g(e.flowId,e.node.Id),t.flowId=e.flowId;else{var n=l.getData(d);n?(t.node=g(n.flowId,n.stageId),t.flowId=n.flowId):t=function(){var e=l.getData(r.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE);if(e)return{node:g(e.flowId,e.stageId),flowId:e.flowId}}()}return t}(t);n&&!n.node&&c.loadByFlowId(n.flowId);return i.evaluateOwnership(n.node)},this.evaluateOwnershipByPeeking=function(){var e=f();return i.isPassOwnershipNode(e)},this.gainedOwnership=function(t,e,n){var r=l.getData(d);r?(p(null),function(e,t,n){var r=g(e,t);if(r)return n({flowId:e,node:r});c.loadByFlowId(e,function(){return n({flowId:e,node:g(e,t)})})}(r.flowId,r.stageId,function(e){!function(e,t){var n=t.node;if(!n)return;var r=n.Id;!e&&i.isPassOwnershipNode(n)&&(r=n.Links[0].TargetFlowNodeId);a.play(t.flowId,r)}(t,e)})):u.restore();t&&n&&s.resumeAllTimeouts()},this.lostOwnership=function(){a.pause()};var d=l.keysConfig.flow.beforePlay.key;function f(){var e=l.getData(d)||t.peek();return g(e.flowId,e.stageId)}function p(e){l.saveData(d,e,l.keysConfig.flow.beforePlay.expiry),l.refreshGetData()}function g(e,t){return o.getNodeById(e,t)}e.on(r.EVENTS.Flows.FlowStopped,function(){n.get().reset()}),e.on(r.EVENTS.Flows.FlowCompleted,function(){n.get().loseOwnership()})}).dependencies("CrossDomainManager, Consts, BizflowPassOwnershipDeterminator, FlowsContainer, FlowsPlayer, TimerManager,FlowStack, WmInternals, ClientStorageManager, FlowsRestorer, FlowNodesLoader"),Tt.register("BizflowPassOwnershipDeterminator").asCtor(function(n,r){function i(e){return e&&e.ActionType==n.FLOW_ACTION_TYPE.PassOwnership}this.isPassOwnershipNode=i,this.evaluateOwnership=function(e){return i(e)?(t=e,r.createNew({featureName:"SwitchToFrameNode",elementName:t.Name}).getCurrentEvaluationValueAndStopEvaluating(t.ConditionTrees.SwitchToFrame)?n.PASS_OWNERSHIP.EvaluateOwnership.Owner:n.PASS_OWNERSHIP.EvaluateOwnership.NotOwner):n.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined;var t}}).dependencies("Consts, ConditionCheckerFactory"),Tt.register("PassOwnershipManager").asCtor(function(i,n,s,t,l,u,r,c,o,a,d){var f=this;f.enabled=J,f.start=function(e){r=function(){n.raiseEvent(i.EVENTS.PassOwnership.PriorityInitialized,{priority:v}),mtjQuery(window).bind("focus",ve),mtjQuery(window).bind("mouseenter",ve),fe()&&pe(),M("starting cross domain listening..."),R=e,_e()},function(e){if(M("[po_frames] restoring priority, temp priority is: "+x,4),window==top)c.sessionGetData(w,0,b,e);else{var n=ye();if(n&&n.length){var r=de(function(){try{return top.frames,top}catch(e){return window}}());n.sort(function(e,t){return t<e?-1:e<t?1:0}),M("[po_frames] used priorities: "+l.toJSON(n),4);for(var i=0;i<n.length&&!x;i++)-1==Et.inArray(n[i],r)&&(r.push(n[i]),sessionStorage.setItem(H,l.toJSON(r)),x=n[i])}!function t(e,n){var r;e&&(r=e,-1==Et.inArray(r,de(top)))?n&&n(e):ve(null,function(e){t(e,n)})}(x,e)}}(function(e){var n=parseInt(e,10)||0;M("got priority "+n+" from sessionStorage",4),ge(n,function(e){var t;0===n||e?(M((e?"inherited priority from parent":"priority is zero")+", getting a new priority",4),ve(null,r,!0)):(v=n,O?(t=r,ge(v,function(e){e?ve(null,t,!0):t&&t()})):r&&r())})});var r},f.reset=function(){if(!J())return;k=0,M("reset ownership",4),Ie(),Te(),P=!1},f.stop=function(){if(!J())return;mtjQuery(window).unbind("focus",ve),mtjQuery(window).unbind("mouseenter",ve),u.unregisterEventHandler("message",he),M("stop ownership",4),P=!1,c.releaseCallback(re)},f.isConditionMet=se,f.isOwnerByDefault=ee,f.getPriority=function(){return v||x},f.loseOwnership=te,f.determineOwnership=function e(t,n){if(!J())return;ae(t);var r=se(n);r||be();O&&!n?ve(null,function(){e(t,!0)},!0):(M("switching owner..."),r||(le(),Te(),c.setSyncFlag(b)));return r},f.optimizedDetermineOwnership=function(){if(!J())return ie().gainOwnership(),!0;return se()?(P=!0,Ee(v),ie().gainOwnership(),!0):(be(),!1)},f.setOwnershipCondition=ae,f.getSampleRate=Z;var p,g,h,m,v,y,S,E,T,w,C,b,I,_,P,A,k,D,N,O,x,L,F,M,R,B,U=300,V=3e3,W=2e3,j="wm-qp-req",G="wm-qp-res",H="walkme-priorities",Y=100,z=1,Q=10,q=0,K=!1;function J(){return t.isFeatureEnabled("passOwnership")}function X(){return $()||a.isIEBrowser(10,"gte")}function $(){return a.isIEBrowser(9,"lte")}function Z(){var e=200;return $()&&(e*=2),e}function ee(){return L}function te(e,t){J()&&(M("losing ownership..."+document.location.href),P&&(e&&(M("reset state: reseting the ownership condition"),Ie()),t?(K=!(P=!1),M("saving data to resume after unload",3),ae(F),I=!0,F=null,s.setWalkmeTimeout(ne,V)):P=!1))}function ne(){M("continue listening after "+V+" milliseconds",3),K=!1,_e()}function re(){var e,t=Se();k&&(k--,1)||(P&&v!=t&&(M("owner killed, losing ownership",3),le(),d.reset()),P||(!t&&function(){try{if(F=c.getData(i.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,!1,b))return ie().evaluateOwnership(!0)==i.PASS_OWNERSHIP.EvaluateOwnership.Owner;if(ee())return M("no ownership condition, owner by default",5),!0}catch(e){r.error(e,"Error determining the owner of a cross domain step")}return!1}()||oe()?(e={priority:v,asyncCallback:we},n.raiseEvent(i.EVENTS.PassOwnership.PORegisterPriority,e)):v==t&&(ce(),ve()))),s.libSetTimeout(_e,I?W:B),R&&(R(),R=null)}function ie(){return A||(A=Tt.get("PassOwnershipRouter")),A}function oe(){if(ie().evaluateOwnershipByPeeking())return M("[passownership] owner by peeking",5),Q<=++q;q=0}function ae(e){F=e,c.saveData(C.key,e,C.expiry,b)}function se(e,t,n){var r=ie().evaluateOwnership(e,t,n);return r==i.PASS_OWNERSHIP.EvaluateOwnership.Owner||r==i.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined&&ee()}function le(){M("owner killed, losing ownership",3),ie().loseOwnership(),te()}function ue(){c.refreshGetData(_,function(){D=null;var e=function(){var e=c.getData(T.key,!1,b);M("registered priorities: "+l.toJSON(e),4);var t=0,n=g;for(;!t&&n<h;){for(var r in e)if(e.hasOwnProperty(r)){var i=parseInt(r,10);Ce()-e[r]<n&&t<i&&(t=i)}n+=p}return t}(),t=Se(),n=oe();!e||v!=e||t&&!n?!n&&t&&t!=v&&be():(M("priority is highest, gaining ownership - "+v,4),Ee(v),ce())})}function ce(){M("gaining ownership: "+document.location.href,3),P=!0,ie().gainOwnership(I,v+":"+window.location.href,!0),I=!1}function de(e){var t=[];try{if(e!=window&&e._walkmeInternals){var n=e._walkmeInternals.ctx.get("CrossDomainManager");if(n&&n.isReady())var r=n.get().getPriority();r&&b==e._walkmeInternals.ctx.get("UserGuidContainer").getUserGuid()&&t.push(parseInt(r,10))}}catch(a){}try{for(var i=e.frames,o=0;o<i.length;o++)t=t.concat(de(i[o]))}catch(a){}return t}function fe(){return a.isIE()||O}function pe(){var e=y.key+v,t=c.getData(e,undefined,b);1<=t&&c.increment(e,null,y.expiry,b),s.libSetTimeout(pe,U)}function ge(e,t){var n,o,a;e?fe()?(M("checking if priority is inherited using clientStorageManager",4),n=e,o=t,a=y.key+n,c.increment(a,null,y.expiry,b,function(){var n=!0,r=s.libSetTimeout(i,m);function i(e){e=!!e,c.saveData(a,0,y.expiry,b),c.removeData(a,b),n=!1,r&&r.clear(),o&&o(e)}!function t(){n&&c.refreshGetData(_,function(){if(n){var e=c.getData(a,undefined,b);1<e&&i(!0),s.libSetTimeout(t,Y)}})}()})):(M("checking if priority is inherited using window.opener",4),function(r,t){if(window.opener){var n,i,o;function a(e){M("is priority inherited: "+e,4),i&&i.clear(),n&&n(),t&&t(e)}n=u.registerEventHandler("message",function(e){try{var t=l.secureEvalJSON(e.data);t.requestType==G&&(t.priority==r?(k=z,a(!0)):0==--o&&a())}catch(n){M("Error in priority inherited message event "+n,4)}}),i=s.libSetTimeout(function(){a(!1)},1e3),0==(o=u.postMessageToAllFramesChain(window.opener,l.toJSON({requestType:j})))&&a(!1)}else t&&t(!1)}(e,t)):t&&t(!1)}function he(e){var t;try{switch((t=l.secureEvalJSON(e.data)).requestType){case j:e.source.postMessage(l.toJSON({requestType:G,priority:v}),"*")}}catch(n){t&&r.error(n,"error handling priority message from parent")}}var me=[];function ve(e,t,n){if(t&&me.push(t),!N&&!K){var r=v;N=!0;var i=n?null:v;c.increment(S.key,i,S.expiry,b,function(e){e!==v&&(M("updating priority from "+r+" to "+e,4),function(e){var t=v=e;(function(e){if(e=parseInt(e,10),window==top)c.sessionSetData(w,e,b);else{var t=l.secureEvalJSON(sessionStorage.getItem(H)||"[]");-1==Et.inArray(e,t)&&t.push(e),M("[po_frames] storing priority "+e+" in the session",4),sessionStorage.setItem(H,l.toJSON(t))}})(v=e),(P||Se()==t)&&(M("is running during set priority - setting current owner",4),Ee(v));M("updated priority: "+v,4)}(e),function(e){var t=ye();if(M("[po_frames] removing priority "+e+" from session",4),t&&e){var n=Et.inArray(e,t);0<=n&&(t.splice(n,1),sessionStorage.setItem(H,l.toJSON(t)))}}(r));var t=me;N=!(me=[]);for(var n=0;n<t.length;n++)t[n](v)})}}function ye(){var e=sessionStorage.getItem(H);if(M("[po_frames] getting session priorities: "+e,4),e)return l.secureEvalJSON(e)}function Se(){return c.getData(E.key,!1,b)}function Ee(e){return M("setting owner to: "+document.location.href+"owner id:"+e,4),k=z,c.saveData(E.key,e,E.expiry,b)}function Te(){M("removing current owner",4),c.saveData(E.key,null,E.expiry,b)}function we(){d.executeIfVisible(function(){M("register in queue with priority "+v,4),c.addToDictionary(T.key,v,Ce(),T.expiry,b),D&&!D.cleared||(D=s.libSetTimeout(ue,p))})}function Ce(){return(new Date).getTime()}function be(){M("po_tabs - clear priorities queue",4),c.saveData(T.key,null,T.expiry,b)}function Ie(){c.saveData(C.key,!1,C.expiry,b)}function _e(){c.refreshGetData(_,re)}(function(){O=t.isFeatureEnabled("po_doubleCheck"),L=window.top==window,B=Z(),p=2*B,g=X()?5e3:800,h=X()?2e4:5e3,m="Chrome"==a.browser.name?1200:700,b=o.getUserGuid(),_=o.getAllUserGuids(),M=r.wrapCustomerLog(i.PASS_OWNERSHIP.LOG_FEATURE),e=c.keysConfig.tabbedOwnership,y=e.priorityCheck,S=e.lastPriority,E=e.currentOwner,T=e.prioritiesQueue,w=e.priority.key,C=c.keysConfig.passOwnership.play,J()&&u.registerEventHandler("message",he);var e}).apply(null,arguments)}).dependencies("Consts,CommonEvents,TimerManager,FeaturesManager,JsonUtils,CommonUtils,Logger,ClientStorageManager,UserGuidContainer,HostData,POVisibleIframeChecker"),Tt.register("AbPermutationManager").asCtor(function(E,T,w,C,b,I,e){var _,n,r,t="ABTesting",P=E.keysConfig.abPermutation;function A(e,t){return P.forcedPermutation.key+"-"+e+"-"+t}function i(e,t,r,i){var n=parseInt(E.getData(P.permutationOverride.key));if(!isNaN(n))return b.setCurrentPermutation(n),_("Using debug permutation from 'wm-force-permutation' key: "+n,1),void i(n);if(e){var o=T.getEndUserGuid(!0);if(!1===o)return _("WalkMe ABTesting - Cannot retrieve end user. Stopping execution",1),void I.removeWalkMe("AbTesting - Cannot fetch EndUser",{sendLog:!0});var a,s,l=(s=o,P.currentPermutation.key+"-"+s),u=null!=r,c=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].PermutationId);t&&n.push(t.PermutationId);return n}(e,t),d=function(e,t){var n=parseInt(E.getData(e));if(!isNaN(n)){if(-1<Et.inArray(n,t))return _("permutation exists in storage: "+n,1),n;_("permutation exists in storage but was out of date: "+n,1)}return _("no valid permutation exists in storage",2),undefined}(l,c);if(d!=undefined&&!u)return b.setCurrentPermutation(d),_("using permutation from storage: "+d,1),void i(d);if(u){!0;var f=function(e,t,n){if(n==t)return!1;var r=A(e,t);return 1!=E.getData(r)}(o,r,d);if(!f)return _("using permutation from activation rule: "+r,1),b.setCurrentPermutation(r),void i(r);_("got permutation from activation rule: "+r,2),a=r}else a=function(e){for(var t=0,n=Math.random(),r=0;r<e.length;r++)if(t+=e[r].Percentage,n<=t)return e[r].PermutationId;return e[e.length-1].PermutationId}(e),_("permutation was drawn: "+a,1);_("sending permutation id to server: "+a,2);var p,g,h,m,v,y,S=t?t.PermutationId:undefined;p=o,g=a,h=c,m=S,v=u,y=function(e){var t;if(_("server returned permutation id : "+e,2),_("saving permutation in storage : "+e,3),E.saveData(l,e,P.currentPermutation.expiry),u){_("Activation rule was used.",2);var n=A(o,r);E.saveData(n,1,P.forcedPermutation.expiry),t=a}else t=e;b.setCurrentPermutation(t),_("Final permutation: "+t,1),C.postEvent(u),i(t)},w.sendPermutationToServer(p,g,h,m,v,y,k)}else i(-1)}function k(){_("WalkMe ABTesting - Error when saving end-user permutation. Removing WalkMe",1),I.removeWalkMe("AbTesting - Cannot fetch EndUser Permutation",{sendLog:!0})}this.setPermutations=function(e,t){n=e,r=t},this.getPermutations=function(){return n},this.initGetPermutation=function(e,t){i(n,r,e,function(e){b.setCurrentPermutation(e),t(e)})},this.getPermutation=function(){return b.getCurrentPermutation()},this.getPermutationById=function(e){for(var t=0;t<n.length;t++)if(n[t].PermutationId==e)return n[t];return!1},function(){_=e.wrapCustomerLog(t)}.apply(null,arguments)}).dependencies("ClientStorageManager,EndUsersManager,AbPermutationManagerServerCaller, AbTestingEventCollectorCaller, AbCurrentPermutationProvider, LibDestroyer, Logger"),Tt.register("AbCurrentPermutationProvider").asCtor(function(){this.setCurrentPermutation=function(e){t=e},this.getCurrentPermutation=function(){return t};var t=-1}),Tt.register("AbPermutationManagerServerCaller").asCtor(function(l,u,c,d,f,p){this.sendPermutationToServer=function(e,t,n,r,i,o,a){var s=u.execute({url:l.get()+"/AbTesting/SaveEndUserPermutation",dataType:"jsonp",data:{endUser:e,walkmeUserGuid:f.getUserGuid(),source:d.get(),permutationId:t,isForcedPermutation:i,availablePermutationsSerialized:p.toJSON(n),browser:c.browser.string,os:c.os.name,timeout:1e4,defaultPermutation:r}});s.success(function(e){"error"===e?a():o(e)}),s.error(function(e,t,n){a()})},function(){}.apply(null,arguments)}).dependencies("RecorderServerManager, WmAjax, HostData, AuditSourceManager, UserGuidContainer, JsonUtils"),Tt.register("AbTestingEventCollectorCaller").asCtor(function(i,o,a){this.postEvent=function(e){try{var t={type:i.EVENT_SENDER_EVENT_APPS.AbTesting,reason:(n=e,n?i.EVENT_SENDER_AB_TESTING_DRAW_REASONS.ActivationRule:i.EVENT_SENDER_AB_TESTING_DRAW_REASONS.Draw)};o.postEvent(i.EVENT_SENDER_EVENT_TYPES.Draw,t)}catch(r){a.error(r)}var n}}).dependencies("Consts, EventCollectorEventSender, Logger"),Tt.register("UserAgent").asFunction(function(e){return e.navigator.userAgent}).asProto(),Tt.register("HostData").asFunction(function(n){var o=Tt.create("UserAgent",n),a=n.document,s=function(e){var t=o.substring(e).indexOf(".");return o.substring(e,e+t)},l=function(){var e,t,n,r;if(-1!=(r=o.indexOf("MSIE")))e="IE",t=s(r+5);else if(-1!=o.indexOf("Trident")&&-1!=(r=o.indexOf("rv:")))e="IE",t=s(r+3);else if(-1!=(r=o.indexOf("Edge/")))e="Edge",t=s(r+5);else if(-1!=(r=o.indexOf("Chrome")))e="Chrome",t=o.substring(r+7,o.lastIndexOf(" "));else if(/Firefox\/(\S+)/.test(o))e="Firefox",t=RegExp.$1;else if(r=-1!=o.indexOf("Safari"))e="Safari",/Version\/(\S+)/.test(o)&&(t=RegExp.$1);else if(-1!=(r=o.indexOf("Opera")))if(e="Opera",/Version\/(\S+)/.test(o))t=RegExp.$1;else{var i=Math.max(o.lastIndexOf(" "),o.lastIndexOf("/"));t=o.substring(i+1)}else(n=o.lastIndexOf(" ")+1)<(r=o.lastIndexOf("/"))&&(e=o.substring(n,r),t=o.substring(r+1));return{name:e,version:t,string:e+" "+t,documentMode:a.documentMode}},u=function(e,t,n){switch(e){case"lt":return t<n;case"lte":return t<=n;case"gt":return n<t;case"gte":return n<=t;default:return t==n}},i=function(e,t){var n=l();return"IE"==n.name&&(!e||u(t,n.version,e))};var c=function(e,t,n){var r=l();if("IE"!=r.name)return!1;if(!e)return!0;var i=n&&n.ownerDocument||a,o=i.documentMode;return o||("BackCompat"==i.compatMode?o=5:"7"==r.version&&(o=7)),u(t,o,e)},t=function(e,t,n,r){return r?i(e,t)&&c(e,t,n):i(e,t)||c(e,t,n)};var r=[{n:"Android",os:"Android"},{n:"Linux",os:"Linux"},{n:"X11",os:"UNIX"},{n:"iPad",os:"iOS"},{n:"iPod",os:"iOS"},{n:"iPhone",os:"iOS"},{n:"Mac",os:"MacOS"},{n:"Win",os:"Windows"}],d=function(){for(var e,t=0;t<r.length;t++){var n=r[t].n;if(-1!=o.indexOf(n)){e=r[t].os;break}}return e||(e="Unknown"),{name:e}};return{browser:l(),getUrl:function(){return n.location.href},getUrlWithoutQueryString:function(){return[n.location.protocol,"//",n.location.host,n.location.pathname].join("")},getPageTitle:function(){return a.title},os:d(),isIE:t,isIEOlderThan:function(e){return t(e,"lt")},isIEDoc:c,isIEBrowser:i,isQuirksMode:function(e){return c(5,null,e)},getWinSize:function(){try{var e=Et(n);return{height:Math.round(e.height()),width:Math.round(e.width())}}catch(t){return null}},isMobile:function(){return/android|ipad|android.+mobile|blackberry|iemobile|ip(hone|od)|phone|symbian|windows (ce|phone)/i.test(o||n.navigator.vendor||n.opera)},isAndroid:function(e,t){if("android"!=d().name.toLowerCase())return!1;if(!e)return!0;var n=(r=o.match(/android\s([0-9\.]*)/i),!!r&&r[1]);var r;if(!n)return!1;return u(t,n,e)},isFirefox:"Firefox"==l().name,isEdge:function(){return"Edge"==l().name}}}).dependencies("win"),Tt.register("PopupNotificationsService").asCtor(function(i,o,r,a,s,l){function u(e){var t=e.isOldBalloon?"21px":"14px",n=r.parse(e.alertText,e.bbCodeVersion);return"<h1 class='walkme-custom-first-step-not-available-text mt-custom-first-step-not-available-text CUSTOM-TUTORIAL-ID' balloon-entityId-id='"+e.balloonEntityId+"' style='CSS-RESET font-family: "+e.balloonSettings.Font+";color: "+e.balloonSettings.HeaderColor+"; font-size: "+t+"; border: none; margin: 10px; word-wrap: break-word;'>"+n+"</h1>"}this.showFailedToStartPopup=function(e,t,n,r){!function(e){var t=Et("<div></div>");t.append(e);i.showSpecialPopupBalloon({htmlContent:t},446,{popupStepButtons:[{id:0,name:"OK",action:7}]},function(e){mtjQuery(".walkme-action-ok",e).click(function(){o.releaseBalloons(),l.removeOverlay()})},!0).then(function(){a.raiseEvent(s.EVENTS.FirstStepNotAvailable)})}(u({balloonSettings:e.BalloonSettings,alertText:t,bbCodeVersion:n,balloonEntityId:r}))},this.createHtmlForNotAvailablePopup=u}).dependencies("PopupBalloonDisplayer, LibDestroyer, BBCodeParser, CommonEvents, Consts, UiUtils"),Tt.register("ClickAuditEventSender").asCtor(function(d,f,p,o){function a(e,t,n,r,i){var o,a,s,l=d.get(t),u={};if(l){var c=l.getById(n);c&&(o=c.Name,u=l.getActionData(c),a=l.isWithAction(c))}switch(e){case f.EVENT_APPS.Launcher:return{type:e,oId:n,oName:o,aType:(s=u).Type,aAppType:s.aAppType,aoId:s.ItemId,aoName:s.Name,pId:"-1"};case f.EVENT_APPS.Content:return function(e,t,n,r,i,o){var a=g(e,t,n,r,i);o&&null!=o.contentType?a.oType=o.contentType:p.error(null,"No contentType was not provided for resouce params");return a}(e,n,o,r,a,i);default:return g(e,n,o,r,a)}}function g(e,t,n,r,i){return{type:e,oId:t,oName:n,pInit:o.map(r),pId:"-1",oIsWithAction:i}}this.send=function(e){try{var t=f.getEventAppByDeployable(e.auditType),n={type:e.initiatorType,objectId:e.initiatorId},r=a(t,e.auditType,e.objectId,n,e.additionalParams),i=function(e){switch(e){case f.EVENT_APPS.Launcher:return f.EVENT_TYPES.Click;default:return f.EVENT_TYPES.Play}}(t);f.postEvent(i,r)}catch(o){p.error(o)}},function(){}.apply(null,arguments)}).dependencies("DeployablesManagerFactory, EventSender,Logger, ReportInitiatorMapper"),Tt.register("HtmlElementsDataProvider").asCtor(function(e,i){var t;function n(e,t){var n=Et(e),r=n.prop("nodeName");return r&&-1!=i(r.toLowerCase(),t)}this.isInput=function(e){return n(e,t)},this.isSelectInput=function(e){return n(e,["select"])},function(){t=["input","textarea","select"]}.apply(null,arguments)}).dependencies("Consts, inArrayFunc"),Tt.register("LoadingTimeInformer").asCtor(function(o,a,s,l,u){this.run=function(){if(s.isFeatureEnabled("addLoadingTime")){var e,t,n,r=(e="snippetStartInit",t="walkmeReadyEnd",(n=l.timing.map)[t]-n[e]);a.raiseEvent(o.EVENTS.WalkMeTotalLoadingTime,{totalLoadTime:r});var i="WalkMe total loading time was "+r+" ms";u.customerLog(i,3,o.EVENTS.WalkMeTotalLoadingTime)}}}).dependencies("Consts, CommonEvents, FeaturesManager, WmInternals, Logger"),Tt.register("FontLoadManager").asCtor(function(t,n){this.shouldReturnWhenFontLoadFailed=function(e){return!t.isFeatureEnabled(n.FEATURES.DisableReturnWhenFontLoadFailed)&&e}}).dependencies("FeaturesManager, Consts"),__webpack_require__(275).registerToCtx(Tt),Tt.register("ElementTextExtractor").asCtor(function(){var c=70;function d(e,t,n,r){if(0<n[0]){var i=!0;if(r&&!1===r(e)&&(i=!1),i)if(!e||3!==e.nodeType&&4!==e.nodeType){if(e&&1===e.nodeType&&!e.tagName.match(/^(script|style)$/i))for(var o=e.childNodes,a=0,s=o.length;a<s;a++)d(o[a],t,n,r)}else{var l=(u=(u=(u=(u=(u=(u=e.nodeValue).replace(new RegExp(String.fromCharCode(160),"g")," ")).replace(new RegExp(String.fromCharCode(10),"g"),"")).replace(new RegExp(String.fromCharCode(13),"g"),"")).replace(new RegExp(String.fromCharCode(9),"g"),"")).replace(new RegExp(" ","g"),""),u=(u=mtjQuery.trim(u)).substring(0,c));(l=function(e){if(t=e,null==/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(t))return e;var t;var n=-1,r=e.length,i="";for(;++n<r;){var o=e.charAt(n);/[\uD800-\uDBFF]/.test(o)||/[\uDC00-\uDFFF]/.test(o)?i+=(a=void 0,a=o.charCodeAt(0),s=a.toString(16).toUpperCase(),l=2<s.length,"\\"+(l?"u":"x")+("0000"+s).slice(l?-4:-2)):i+=o}var a,s,l;return i}(l=l.toLowerCase()))&&(t.push(l),n[0]--)}}var u}this.getElementTextArray=function(e,t){var n=[];return d(e,n,[3],t),n}}),Tt.register("ElementLastKeeper").asCtor(function(r,n,o,a){var s=".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front:visible",i=!0,l=[];function u(){if(i){for(var e=[],t=0;t<l.length;t++)try{c(l[t],t)}catch(n){e.push(t)}for(var t=e.length-1;0<=t;t--)l.splice(t,1)}l.length&&r.libSetTimeout(u,3e3)}function c(e,t){var n=e.parent(),r=n.contents().length;if(!(0<e.nextAll(s).length)&&function(e){var t=0;for(;e=e.previousSibling;)t++;return t}(e[0])+t+1!=r){var i=document.activeElement;e.appendTo(n),o.raiseEvent(a.EVENTS.ElementLocationChanged,{activeElement:i,element:e})}}this.addElement=function(e,t){n.isFeatureEnabled("noElk")||(l.length||r.libSetTimeout(u,3e3),t?l.unshift(e):l.push(e))},this.removeElement=function(e){if(!n.isFeatureEnabled("noElk")){var t=Et.inArray(e,l);-1!=t&&l.splice(t,1)}},this.setState=function(e){n.isFeatureEnabled("noElk")||(i=e)},function(){}.apply(null,arguments)}).asSingleton().dependencies("TimerManager, FeaturesManager, CommonEvents, Consts"),Tt.register("AnalyticsManager").asCtor(function(a,s,l,u,c,d){var f,p="uniqueEndUser";this.auditUniqueEndUser=function(e,t,n){try{var r=a.getData("wm-ueuT")!=n;if(r){!function(e,t,n){if(!d.isEnabled())return;try{u.postEvent(u.EVENT_TYPES.Loaded,{type:u.EVENT_APPS.Walkme})}catch(a){s.error(a)}var r=c.get();if(!r)return;var i=r+"/Analytics/UniqueEndUser",o={userId:e,permutationId:t,endUserGuid:n};l.execute({url:i,data:o})}(e,t,n),s.customerLog("auditUniqueEndUser: sent unique user request. userGuid="+e+" permutationId="+t+"endUserGuid="+n,3,p);var i=a.keysConfig.analytics.lastAuditedUser;a.saveData(i.key,n,i.expiryFunc())}}catch(o){f(o,"Failed while auditing unique end users")}},function(){f=s.error,s.customerLog("Analytics manager was created",3,p)}.apply(null,arguments)}).dependencies("ClientStorageManager, Logger, WmAjax, EventSender, PetaServerNameManager, AuditingEnabledIndicator"),Tt.register("ClickAuditManager").asCtor(function(c,e,d,l,t,f,p,u,g,i,h,m,v,y,S){var E,o,T;function w(){return(new Date).getTime()+"-"+t.generateGuid()}function C(e){var t,n,r=e[0],i=r.auditType,o=r.objectId;if(i!=undefined&&o!=undefined&&(t=c.get(i))&&t.getById&&(n=t.getById(o))&&n.userGuid)return n.userGuid;var a=e[0].shoutOutId;return a!=undefined&&(t=c.get(f.ShoutOut))&&t.getById&&(n=t.getById(a))&&n.userGuid?n.userGuid:u.getUserGuid()}function n(e){var t=C(e),n=l.browser.string,r=l.os.name,i=u.getEnvironmentId(),o=u.getEndUserGuid(),a=u.getPermutationId(),s=y.get();return{serizlizedClickAudits:S.toJSON(e),userGuid:t,fullUrl:s,source:i,browser:n,os:r,permutationId:a,endUserGuid:o}}this.SendClickAudit=function(e,t,n,r){var i,o;t=v.isDefined(t)?t:-1,n?(i=n.type,o=n.hasOwnProperty("objectId")?n.objectId:n.id):i=m.STEP_PLAY_INITIATOR_ENUM.NONE;if(e===undefined||!h.isEnabled())return!0;var a=w(),s={auditType:e,objectId:t,auditGuid:a,playInitiator:i,initiatorId:o};return E.sendData(s),g.send({auditType:e,objectId:t,initiatorType:i,initiatorId:o,additionalParams:r}),a},this.SendWidgetOpen=function(e){if(!h.isEnabled()||!o)return!0;var t={userId:u.getUserGuid(),fullUrl:y.get(),source:u.getEnvironmentId(),browser:l.browser.string,os:l.os.name,permutationId:u.getPermutationId(),endUserGuid:u.getEndUserGuid(),auditGuid:w()};o.sendData(t);try{var n;return e&&(n=i.map(e)),p.postEvent(p.EVENT_TYPES.Open,{type:p.EVENT_APPS.Player,pInit:n})}catch(r){return d.error(r),!0}},this.SendShoutOutAudit=function(e,t,n,r){if(!h.isEnabled())return!0;var i={shoutOutId:e,deployableType:t,clickType:n,auditGuid:w(),relatedClickAuditGuid:r};T.sendData(i);try{var o=c.get(f.ShoutOut),a=o.getById(e);if(n===m.SHOUTOUT_CLICK_TYPE.Action){var s=o.getActionData(a);return p.postEvent(p.EVENT_TYPES.Click,{type:p.getEventAppByDeployable(t),oId:e,oName:a.Name,aType:s.Type,aAppType:s.aAppType,aoId:s.ItemId,aoName:s.Name,pId:"-1"})}if((l=n)===m.SHOUTOUT_CLICK_TYPE.Close||l===m.SHOUTOUT_CLICK_TYPE.XButton||l===m.SHOUTOUT_CLICK_TYPE.RemindMeLater)return p.postEvent(p.EVENT_TYPES.Close,{type:p.getEventAppByDeployable(t),oId:e,oName:a.Name,pId:"-1",reason:n})}catch(u){return d.error(u),!0}var l},this.init=function(){E=e.register("ca",{actionUrl:"/Statistics/AddClickAudits",prefixForStorage:"ca",sendingThreshold:1,dataType:"click audit",dataIdFieldName:"Id",requestParamsFunc:n}),o=e.register("wo",{actionUrl:"/Statistics/AddWidgetOpens",prefixForStorage:"wo",sendingThreshold:1,dataType:"widget open",dataIdFieldName:"Id",requestParamsFunc:function(e){return{serizlizedWidgetOpens:S.toJSON(e)}}}),T=e.register("ac",{actionUrl:"/Statistics/AddShoutOutAudits",prefixForStorage:"ac",sendingThreshold:1,dataType:"shoutOut click",dataIdFieldName:"Id",requestParamsFunc:n})},function(){d.wrapCustomerLog(m.LOG_FEATURES.AUDIT_STEPS)}.apply(null,arguments)}).dependencies("DeployablesManagerFactory, ServerDataSenderManager, Logger,HostData, GuidGenerator, DeployableTypes, EventSender, WalkMeInfo,ClickAuditEventSender, ReportInitiatorMapper, AuditingEnabledIndicator,Consts, CommonUtils, SafeFullUrlProvider, JsonUtils"),Tt.register("JQueryElementFinder").asCtor(function(n,g,h,a,m,r,v,y,S,i){var o=this,s=["parent","children","next"];function l(e){return"object"==typeof e&&null!==e}function u(e,t,n){return l(e)?E(e,t,n):S.run(e,n)}function c(e,t){var n;e.method!=undefined&&(!function(e){if(e!=undefined&&-1<mtjQuery.inArray(e,s))return!0;return!1}(n=l(e.method)?e.method.name:e.method)?(v.customerLog("Unknown jQuery Selector Method : '"+n+"'"),t=Et()):t=function(e,t){var n;try{n=e[t]().eq(0)}catch(r){v.error(r,"runJqueryMethod : element has no method named '"+t+"'"),n=Et()}return n}(t.eq(0),n));return t}function E(e,t,n){try{var r=function(e,t,n){var r=undefined;if(e!=undefined&&0<(r=u(e,t,n)).length){var i=m.getElementTagName(r[0]);"IFRAME"==i||"FRAME"==i?(t&&(t.ElementDescription.extended.elementIframe&&r.data("iframe",t.ElementDescription.extended.elementIframe),t.ElementDescription.extended.elementIframe=r),r=a.getFrameContents(r)):t&&(t.ElementDescription.extended.elementIframe=!1)}return r}(e.context,t,n),i=u(e.element,t,r);return i=c(e,i)}catch(o){return v.customerLog("jQuery Element Finder: Could not parse input"),Et()}}function T(e){if(e=Et.trim(e),!y.startsWith(e,"{")){var t=new Object;return t.element=e,t}try{return i.secureEvalJSON(e)}catch(n){return null}return null}o.findElementsByjQueryComplexSelector=function(e){var t=T(e=r.decodeHtml(e,["&",'"',"'",">"])),n=E(t);return n},o.getjQueryElementText=function(e){var t=o.findElementsByjQueryComplexSelector(e);return n.checkElementText(t)},o.findElements=function(e,t){if(!e.JquerySelector)return[];var n,r=e.JquerySelector;r=(r=(r=(r=(r=r.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&")).replace(/&gt;/gi,">");var i=",element:";if(y.startsWith(r,"context:")){var o=r.substr("context:".length),a=o.substr(o.indexOf(i)+i.length);o=o.substr(0,o.indexOf(i));var s=S.run(o);if(!(0<s.length))return[];"IFRAME"==m.getElementTagName(s[0])?e.ElementDescription.extended.elementIframe=s:e.ElementDescription.extended.elementIframe=!1,s=s.contents(),n=S.run(a,s),v.customerLog("jQuery selector found these elements:",5),v.customerLog(d,5)}else if(y.startsWith(r,"func:"))try{var l=r.substr("func:".length),u=mtjQuery.parseJSON(l),c=function(e){function t(e,t){for(var n=e.split("."),r=t,i=0;i<n.length;i++)r=r[n[i]];return r}var n={result:null,iframe:null},r=new Array;if(e.params)for(var i=0;i<e.params.length;i++)r.push(e.params[i].value);var o=window;if(e.iframe){if(0==(o=mtjQuery(e.iframe)).length)throw"Iframe not found: "+e.iframe;o=(o=o.contents()[0]).parentWindow||o.defaultView,n.iframe=mtjQuery(e.iframe)}var a,s=t(e["function"],o);if(!s)throw"Function not found: "+e["function"];if(e["this"]){if(!(a=t(e["this"],o)))throw"'This' not found: "+e["this"]}else a=-1==e["function"].indexOf(".")?null:t(e["function"].substring(0,e["function"].lastIndexOf(".")),o);var l=s.apply(a,r);return n.result=l,n}(u);c.iframe&&(e.ElementDescription.extended.elementIframe=mtjQuery(c.iframe));var d=mtjQuery(c.result);return(t==undefined||t)&&(d=d.filter(g.getVisibleFilter(e))),v.customerLog("func selector found these elements:",5),v.customerLog(d,5),d}catch(p){return h.get()?(console.log("Using jQuery selector with function raised an exception:"),console.log(p)):(v.customerLog("Using jQuery selector with function raised an exception:"),v.customerLog(p)),[]}else{var f=T(r);n=E(f,e)}return 0<n.length&&(t==undefined||t)&&(n=n.filter(g.getVisibleFilter(e))),v.customerLog("jQuery selector found these elements:",5),v.customerLog(n,5),n}}).dependencies("CommonUtils, PositionHelper, IsInEditor, FrameContentsProvider, ElementUtils,HtmlDecoder, Logger, StringUtils, JQuerySelectorRunner, JsonUtils"),Tt.register("JQuerySelectorRunner").asCtor(function(){this.run=function(e,t){return mtjQuery(e,t)}}).dependencies(""),Tt.register("AbTasksValidator").asCtor(function(t,n,r,i,o){function a(e){if("task"==e.type())return!0;var t=e.children();if(!t||0===t.length)return!1;for(var n=0;n<t.length;n++)if(a(t[n]))return!0;return!1}this.shouldTrackAbTasks=function(){var e=parseInt(t.get().TodoListSettings.isActive);return!(!e||!function(){for(var e=i.uiTasksTree(),t=0;t<e.length;t++)if(a(e[t]))return!0;return!1}())||(!!r.hasTaskGoalCompletionCondition()||!(o.isFeatureEnabled("untrack_tasks")&&!e)&&function(){if(!n.isIEBrowser(9,"lte"))return!0;var e="abTasksIE"+n.browser.version;if(o.isFeatureEnabled(e))return!0;return!1}())},function(){}.apply(null,arguments)}).dependencies("SiteConfigManager, HostData, TodoListManager, UiDataProvider, FeaturesManager"),Tt.register("ResourceInjector").asCtor(function(){this.inject=function(e,t){e.append(t)}}),Tt.register("ResourceManager").asCtor(function(c,d,f,l,u,n,p,g,h,m,v,s){var y,S,E=this,T={},a="walkme-framesets-fix-id",e="resources",w="walkme-",C="Comic Sans MS",b="QW@HhsXJ",I=50,_=2500,P=function(e,t,n){var r=this;return r.b(n=n||""),r.b("@font-face {"),r.b("\n"+n),r.b("font-family: '"),r.b(r.v(r.f("family",e,t,0))),r.b("';"),r.b("\n"+n),r.b("src: url("),r.b(r.v(r.f("src",e,t,0))),r.b(") "),r.s(r.f("format",e,t,1),e,t,0,69,89,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("format('"),n.b(n.v(n.f("format",e,t,0))),n.b("')")}),e.pop()),r.b(";"),r.b("\n"+n),r.b("font-weight: "),r.b(r.v(r.f("weight",e,t,0))),r.b(";"),r.b("\n"+n),r.b("font-style: "),r.b(r.v(r.f("style",e,t,0))),r.b(";"),r.b("\n"+n),r.b("}"),r.fl()},A=Tt.get("TimerManager");function k(e){return("widget-font"==(t=e).name||"lib-font"==t.name)&&f.isAndroid("4.3","lt")&&"Chrome"!=f.browser.name;var t}function D(e,t,n,r){var i,o,a;y("Start loading embeded file for font '"+e.name+"'",4),i=t,o=n,a=w+e.name,T[a]={name:a,tagId:i,heads:[o[0]]},s.load(r)}function N(t){t&&(!function e(t){try{var n=Et("head",t.document);F("",a,n),A.libSetTimeout(function(){n.find("#"+a).remove()},100)}catch(o){}var r=t.frames;for(var i=0;i<r.length;i++)e(r[i])}(top),A.libSetTimeout(function(){N(t-1)},100))}function O(t,n,r,i){if(r||i){y("Start tracking font '"+t.name+"'",4);var o=Et(n.createElement("span")).addClass("walkme-font-tester").important({position:"absolute",top:"-9999px",left:"-9999px",visibility:"hidden","font-family":C,"font-size":"250px","line-height":"normal"}).html((t.dummeyText||b)+"a").appendTo(Et("body",n).or("html",n)),a=o[0].offsetWidth,s=o[0].offsetHeight,l=w+t.name;o.important("font-family",l+","+C),function e(t,n,r,i,o,a,s){if(!h(t).isSafe())return;y("================================================================================",5);y("Tracking font '"+o+"'",5);y("Comparison tester width: "+n+" === "+t[0].offsetWidth,5);y("Comparison tester height: "+r+" === "+t[0].offsetHeight,5);y("================================================================================",5);n===t[0].offsetWidth&&r===t[0].offsetHeight?i<0?(y("Finished with failure tracking font '"+o+"'",4),t.remove(),S[o]=!0,s&&s()):A.libSetTimeout(function(){e(t,n,r,i-I,o,a,s)},I):(y("Finished successfully tracking font '"+o+"'",4),t.remove(),S[o]=!1,a&&a())}(o,a,s,_,l,r,i)}else y("Stop Tracking font '"+t.name+"' because we don't have success/fail Callback",4)}function x(){return!!document.createStyleSheet}function L(e,t,n,r,i){try{(function(e,t,n,r,i){var o=l._walkmeInternals;{if(o&&o.customInjectStyleSheetFuncs){y("Attempting to use custom CSS Injector");for(var a=0;a<o.customInjectStyleSheetFuncs.length;a++){var s=o.customInjectStyleSheetFuncs[a];"function"==typeof s&&s(e,t,n,r,i)}return!0}return!1}})(e,t,n,r,i)||function(e,t,n,r,i){var o,a=t?t[0].ownerDocument:Et("body")[0].ownerDocument;i&&(o=function(e,t){for(var n=t.styleSheets,r=0;r<n.length;r++)if(n[r].owningElement.id==e)return r}(i,a));var s=o===undefined?a.createStyleSheet(""):a.createStyleSheet("",o);s.cssText=e,s.owningElement.id=r,s.walkmeToRemove=!0,s[n]=!0}(e,t,n,r,i)}catch(o){throw y("Cannot inject style sheet"),o}}function F(e,t,n,r,i){var o,a=n||Et("head");u.get()&&mtjQuery("#"+t,a).remove();var s=Et('<style type="text/css" class="walkme-to-remove">'+(i?"":e)+"</style>");if(t&&s.attr("id",t),r&&(o=a.find("#"+r)),o&&0<o.length?o.first().before(s):p.inject(a,s),i){var l=s.prop("styleSheet");l?l.cssText=e:s.append(e)}return s}E.font=function(e,t,n,r){if(g.isFeatureEnabled("noFonts"))n&&n();else{if(t&&t.length||(t=Et("head")),!t.length)return c.error(null,"cannot inject font - head element does not exist"),void(r&&r());var i=t[0].ownerDocument;if(f.isIEDoc(8,"lte",t[0])&&"widget-font"!=e.name&&!g.isFeatureEnabled("loadAllFonts"))return y("Not loading font '"+e.name+"' (IE7/8), to load all fonts enable the loadAllFonts feature",4),void(n&&n());y("Start loading font '"+e.name+"'",4);var o="wm-font-"+e.id,a=Et("#"+o,t);if(a&&a.length)O(e,i,n,r);else{var s=T[w+e.name];if(s)return-1==Et.inArray(t[0],s.heads)&&s.heads.push(t[0]),void O(e,i,n,r);if(v.shouldReturnWhenFontLoadFailed(S[w+e.name]))r();else{var l,u=E.getResourcePath(e.url);if(f.isIEDoc(8,"lte",t[0])){if(function(e,t){for(var n=0;n<e[0].ownerDocument.styleSheets.length;n++)if(e[0].ownerDocument.styleSheets[n][t])return!0;return!1}(t,e.name))return void O(e,i,n,r);!function(e,t,n,r){y("Start loading eot file for font '"+e.name+"'",4),r+=".eot",f.isIEBrowser(8)&&g.isFeatureEnabled("fixFontsCompatibility")&&(r+="?frame="+d.getFrameIndex(n[0].ownerDocument.parentWindow));var i=m.to_html(P,{family:w+e.name,src:r,weight:"normal",style:"normal"});f.isIEBrowser(8)?F(i,t,n):L(i,n,e.name,t)}(e,o,t,u)}else k(e)&&(u=u.concat("_svg")),D(e,o,t,u);l=f.isIEDoc(8,null,t[0])?function(){g.isFeatureEnabled("highPerf")||N(5),n&&n()}:n,O(e,i,l,r)}}}},E.preloadResources=function(e,t){e=e||Et("head");for(var n=0;n<t.length;n++){var r=E.getResourcePath(t[n].url);r+=f.isIEDoc(8,null,e[0])?".eot":".js";var i=new Image;i.src=r,i.onload=function(){}}},E.fonts=function(e,t,n,r){var i=e.length,o=!1;if(i||n&&n(),n||r)for(var a=0;a<e.length;a++)E.font(e[a],t,function(){0==--i&&(o?r&&r():n&&n())},function(){o=!0,0==--i&&r&&r()});else for(var a=0;a<e.length;a++)E.font(e[a],t)},E.finishFontLoad=function(e,t){y("finish loading font '"+e+"'",4);for(var n="",r=0;r<t.length;r++)n+=m.to_html(P,{family:e,src:t[r].src,format:t[r].format,weight:t[r].weight,style:t[r].style});var i=T[e];delete T[e];for(var r=0;r<i.heads.length;r++)E.injectCss(n,i.tagId,Et(i.heads[r]),e,null,!0)},E.getResourcePath=function(e){if(e&&e.indexOf("/"))return e;var t=n.get();return e=t+e},E.injectCss=function(e,t,n,r,i,o){x()?L(e,n,r,t,i):F(e,t,n,i,o)},E.refreshContentCss=function(e,t){var n=F(t+" :before,"+t+" :after{content:none !important;}",null,e);A.libSetTimeout(function(){n.remove()},0)},E.emptyStyleSheets=function(){if(x())for(var e=document.styleSheets,t=0;t<e.length;t++)e[t].walkmeToRemove&&(e[t].disabled=!0)},function(){y=c.wrapCustomerLog(e),"Edge"==f.browser.name&&(C="Arial");S={}}.apply(null,arguments)}).dependencies("Logger, CommonUtils, HostData, win, IsInEditor, CdnServer, ResourceInjector, FeaturesManager, wmjQuerySafe, Mustache, FontLoadManager, EmbededFontLoader"),Tt.register("EmbededFontLoader").asCtor(function(){this.load=function(e){Et.ajax({type:"GET",url:e+".js",dataType:"script",cache:!0})}}),Tt.register("IFramesManager").asCtor(function(t,s,n){this.remapTopIframes=function e(){if(y())return;u&&u.clear();var t=(new Date).getMilliseconds();d++;var n=[];Et(document).find(c).each(function(){for(var e=!1,t=0;t<l.length;t++)if(l[t].iframe==this){l[t].foundInRemap=d,e=!0;break}e||n.push(this)});for(var r=0;r<l.length;r++)if(l[r].foundInRemap!=d){var i=l[r];g(i.iframe),l.splice(r,1)}for(var r=n.length-1;0<=r;r--)p(n[r],undefined);var o=(new Date).getMilliseconds();var a=o-t;f("Remapping top iframes took "+a+" ms",5);u=s.libSetTimeout(e,1e4)};var l,r,u,c="iframe:not(#walkme-hidden-iframe),frame",d=-1,i=!1,o=[],f=t.wrapCustomerLog("IFramesManager");function a(e,t,n){var r=(new Date).getMilliseconds();if(Et(e).find(c).each(function(){var e=p(this,t);e.documentAccessible&&a(Et(e.iframe.contentWindow.document),e),n&&h(e)}),t==undefined){var i=(new Date).getMilliseconds(),o=i-r;f("Mapping iframes took "+o+" ms",5)}}function p(e,t){var n={iframe:e,documentAccessible:v(e),children:[]};return t?t.children.push(n):l.push(n),h(n),Et(e).on("load.wmIframeManager",function(){n.children=[],v(e)&&(a(Et(e.contentWindow.document),n,!0),h(n))}),n.documentAccessible||f("Cross domain iframe detected: "+e.src,4),n}function g(e){try{Et(e).off("load.wmIframeManager")}catch(t){}}function h(e){for(var t=o.length-1;0<=t;t--)o[t](e)}function m(){r={children:l=[]}}function v(e){try{e.contentWindow.document}catch(t){return!1}return!0}function y(){return n.isFeatureEnabled("dontMapIframes")}this.mapIframes=function(){y()?m():(i||(m(),a(document,undefined)),i=!0)},this.getAll=function(){return l},this.foreachIframe=function(i,o){!function e(t){for(var n=0;n<t.children.length;n++){var r=t.children[n];o&&!r.documentAccessible||(i(r),e(r))}}(r)},this.onIframeLoad=function(e){o.push(e)},this.unbindIframeLoad=function(e){for(var t=o.length-1;0<=t;t--)if(o[t]===e){o.splice(t,1);break}},this.releaseEvents=function(){if(l)for(var e=0;e<l.length;e++)g(l[e].iframe)}}).dependencies("Logger, TimerManager, FeaturesManager"),Tt.register("PageVisitIdProvider").asCtor(function(e,t,n,r){var i,o=!1,a=[t.UI_CHANGE_NOTIFIERS.HASH,t.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS,t.UI_CHANGE_NOTIFIERS.HISTORY,t.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR];function s(e){(function(e){for(var t=a.length-1;0<=t;t--)if(e[a[t]])return!0;return!1})(e.notifiers)&&l()}function l(){u(),i=n.generateGuid(!0),e.raiseEvent(t.EVENTS.PageVisitIdUpdated,{id:i})}function u(){if(!1===o)throw new Error("PageVisitIdProvider is not initialized")}this.init=function(){!1===o&&(o=!0,r.bind(s),l())},this.get=function(){return u(),i},this.update=l,this.updateNotifiers=function(e){a=e}}).dependencies("CommonEvents, Consts, GuidGenerator, UIChangeTracker"),Tt.register("ScrollManager").asCtor(function(S,E,T,t,f,w,p,C,o,i,e,n){var r,g,b,I,_,P=this;function h(p,g,h,m,v,y){return!t.isQuirksMode(r[0])&&(!!e("html")||!P.isElementVisibleBeforeScroll(g,P.calculateScrollMargins(g,h),m)&&e("body"));function e(e){var t,n,r,i,o,a,s,l,u,c,d={duration:"slow",rootElement:e,elementToFindScrollableFor:g,complete:function(){y&&y()},heightLimit:!T.isFeatureEnabled("noHgtLmt"),customScrollElement:_.Custom.customScrollElement,forceFindScrollable:T.isFeatureEnabled(w.FEATURES.ForceFindScrollable),isElementInIFrame:C.isInIframe(g)};if(h){var f=v.height();d.endScroll={scrollOptions:h,balloonHeight:(a=g,s=m,l=f,u=a.height(),c=parseInt(S.getSettingsValue(I,"topOffset",0)),0==s?l+b.arrowHeight()+1-c:2==s?u+l+b.arrowHeight()+1-c:u<l?l-c:(u-l)/2+l-c),totalDrawnHeight:(t=g,n=m,r=f,i=t.outerHeight(),o=E.getElementViewport(t).height()-0,A(i,r,n,b.arrowHeight(),o)?r:0==n||2==n?i+r+b.arrowHeight()+1-parseInt(S.getSettingsValue(I,"topOffset",0)):Math.max(i,r))}}return p.scrollintoview(d)}}function m(e,t,n,r){t&&!r?window.scrollTo(0,e.offset().top-a(e,t)):i.doNormalScroll(e,n,t)}function a(e,t){return"px"==t.unit?t.distance:E.getElementViewport(e).height()*t.distance/100}function A(e,t,n,r,i){return 0==n||2==n?i<e+t+r:i<e}P.scrollToElementIfNeeded=function(e,t,n,r,i,o,a,s){try{var l,u=!1,c=P.getScrollOptions(r);if(p.shouldTryAnimateScroll(e,o,r)){l=function(e,t,n,r,i){var o,a=i[0],s=e,l=E.getElementViewport(e),u=P.calculateScrollMargins(e,n),c=g.top<r.offset().top||g.top+e.height()<r.offset().top+r.height(),d=l.top()-0+l.height()-0;!n||1!=t&&3!=t?c?(o=d-u.bottom<=g.top+e.height()+r.height()+a.height()?"down":"up",s="down"==o?r:e):(o=l.top()+u.top>=g.top-r.height()-a.height()?"up":"down",s="down"==o?e:r):s=e.outerHeight()>r.height()?e:r;A(e.height(),r.height(),t,a.height(),l.height()-0)&&(s=r);return s}(e,i,c,a,s);try{h(l,e,c,i,a,n)&&(u=!0)}catch(d){}}u&&o!=p.SCROLL_MODES.Normal||function(e,t,n,r,i){var o=P.calculateScrollMargins(e,r);P.isElementVisibleBeforeScroll(e,o,n)||m(e,r,!0,C.isInIframe(t));i&&i()}(l=e,e,i,c,n)}catch(d){f.error(d)}},P.getScrollOptions=function(e){var t=S.getSettingsValue(e,"endScroll",-1);if(0<=t)return{distance:parseInt(t,10),unit:S.getSettingsValue(e,"scrollUnit","%"),force:S.getSettingsValue(e,"forceScroll",0)}},P.scrollToBalloon=function(e,t,n){var r=P.calculateScrollMargins(e,t);if(!o.isElementInViewport(n,r)){var i=e.offset().top>n.offset().top;m(n,t,i)}},this.calculateScrollMargins=function(e,t){if(t&&t.force){var n=a(e,t);return{top:n,bottom:0}}return w.DEFAULT_POSITIONS},P.isElementVisibleBeforeScroll=function(e,t,n){return o.isElementInViewport(e,t)&&p.isBalloonPositionVisibleRelativeToParents(e,n)},function(){r=n.element,b=n.balloonDrawer,I=n.settings,g=r.offset(),_=e.get()}.apply(null,arguments)}).asProto().dependencies("CommonUtils, ElementUtils, FeaturesManager, HostData, Logger, Consts, ScrollUtils, ElementInIframeIndicator, PositionHelper, IFrameScrollManager, SiteConfigManager"),Tt.register("IFrameScrollManager").asCtor(function(a){this.doNormalScroll=function(e,t,n){e[0].scrollIntoView(t);var r="hidden"===Et("html").css("overflow"),i="hidden"===Et("body").css("overflow");if(a.isQuirksMode(e[0])||r||i){var o=Et("html");o[0].scrollIntoView()}},function(){}.apply(null,arguments)}).dependencies("HostData"),Tt.register("AutoStartHelper").dependencies("CrossDomainManager").asCtor(function(a){this.addAutoStartHelper=function(e,t){r[t]=e},this.clearCache=function(e){var t=s(e,"clearCache");t&&t.clearCache()},this.checkShouldAutoStart=function(e,t,n){var r=s(e),i=r&&r.checkShouldAutoStart(e,t,n);{if(i==undefined&&a.get().enabled()){var o=l(e);return!o||o.checkShouldAutoStart(e,t,n)}if(i==undefined)return!0}return i};var n,r={};function s(e,t){return a.get().enabled()?function(e){n||(n=Tt.get("PassOwnershipAutoStartHelper"));if(n[e])return n}(t):l(e)}function l(e){return r[e]}}),Tt.register("PassOwnershipAutoStartHelper").asCtor(function(a,s,e,l,u){this.checkShouldAutoStart=function(e,t){var n=function(e){var t=undefined;e==s.Tutorial?t=a.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru:e==s.BusinessSolution&&(t=a.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow);return t}(e);if(n!=undefined){var r=(o=t,e==s.Tutorial?{walkthruId:o.Id,step:o.Steps[0]}:{flowId:o.Flow.Id,node:u.getNodeById(o.Flow.Id,o.Flow.RootFlowNodeId)}),i=l.get().isConditionMet(!0,r,n);if(!i)return l.get().isOwnerByDefault()?c("AutoStartHelper - not top window, not starting"):c("AutoStartHelper - condition not met, not starting"),!1}var o};var c=e.wrapCustomerLog(a.AUTOSTART.LOG_FEATURE)}).dependencies("Consts, DeployableTypes, Logger, CrossDomainManager, FlowsContainer"),Tt.register("AutoStartManager").asCtor(function(s,a,u,e,l,c,d,I,t,f,p,n,g,_,P,A,h,m){var v=this,k=a.wrapCustomerLog(f.AUTOSTART.LOG_FEATURE);function D(e,t,n){if(r=t,!I.getSettingsValue(r.Settings,"ASEnabled",0))return k("Deployable doesn't support auto start: "+t.Name,4),!1;var r,i=function(e,t){var n={forceStart:!1,canStart:!1},r=t?t+"-":"",i=s.keysConfig.remindMeLater.remindMeLater.key+"-"+r+e.Id,o=s.getData(i,undefined,undefined,undefined);if(o){var a=m.secureEvalJSON(o);a.expiry&&a.expiry<Date.now()&&(n.forceStart=!0,n.startResult={shouldStart:!0,repeatCookieExpiry:-1,store:function(){s.removeData(i)}})}else n.canStart=!0;return n}(t,n);return i.forceStart?(k("Deployable can auto start (remind me later): "+t.Name,4),i.startResult):!!i.canStart&&function(e,t,n){if(e.autoStartEnabled(t.Id)){var r=function(e,t){var n=(i=e,o=t,a=c.keysConfig.autoStart.repeat.key,0==i?a+"-"+o.Id:a+"-"+i+"-"+o.Id),r=I.getSettingsValue(t.Settings,"ASRep","visit");var i,o,a;""===r&&(r="visit");return v.checkRepeatCookie(n,r)}(n,t);if(r.shouldStart)return k("Deployable can auto start (storage): "+t.Name,4),r}return!1}(e,t,n)}function i(e,t,n,r){var i=I.getSettingsValue(n.Settings,"ASCTEnabled",0);if(1!=i)return k("Non-conditional autostart, trying to auto start "+n.Name,3),O(t,n,r);k("Autostart is enabled for deployable: "+n.Name,3);var o,a,s,l,u,c,d,f,p,g,h,m,v,y,S,E,T,w,C=P.get(t,n,"ASCT");if(""!=C)try{o=e,a=t,s=n,l=r,u=C,c=_.get(a,s),d=A.createConditionChecker(u,c),y=a,S=s,E=l,T=u,N((w=d).getCurrentEvaluationValueAndStopEvaluating(T),y,S,E,E,w),f=o,p=a,g=s,h=l,m=u,(v=d).onEvaluated(function(e){var t=D(f,g,p);t&&N(e,p,g,t,h,v,!0)}),v.evaluateAsyncAndDontEvaluateImmediately(m)}catch(b){}}function N(e,t,n,r,i,o,a){e?(k("Autostart condition met, trying to auto start: "+n.Name,3),function(t,n,r,i,o,a){function e(){u.clearCache(t);var e=O(t,n,r,a);e&&-1!=i.repeatCookieExpiry&&o.cleanResources()}t==l.Tutorial?Tt.get("WalkthruStepsLoader").afterStepsLoaded(n.TutorialId,e):e()}(t,n,r,i,o,a)):k("Condition didn't meet, not starting deployable: "+n.Name,3),p.deprecatedRaiseEvent(f.EVENTS.AutoStart.ConditionEvaluated,n,{result:e})}function O(r,i,o,t){if(h.bind(f.EVENTS.AutoStart.Activated,function e(t,n){h.unbind(f.EVENTS.AutoStart.Activated,e);n.deployableType==r&&n.deployable==i&&o.store()}),a=r,s=i,l=t,u.checkShouldAutoStart(a,s,l)){var n=parseFloat(I.getSettingsValue(i.Settings,"Delay",0));return n?d.libSetTimeout(function(){g.deployableCanAutoplay(r,i)},1e3*n):g.deployableCanAutoplay(r,i),!0}var a,s,l;return g.deployableCannotAutoplay(r,i),!1}this.run=function(){g.deployablesChecksStarting(),k("Trying to find a deployable that can auto start",1),u.clearCache(),t.wrapSession(function(){n.iterate(function(e,t,n){var r=D(e,n,t);r?i(e,t,n,r):g.deployableCannotAutoplay(t,n)})})},this.checkRepeatCookie=function(e,t,n){var r={shouldStart:!0,repeatCookieExpiry:-1},i=n?c:s;if("always"==t);else{"visit"==t&&(e+="-v");var o=i.getData(e,undefined,undefined,1);1==o?r.shouldStart=!1:I.isNumber(t)?r.repeatCookieExpiry=t:"visit"==t?r.repeatCookieExpiry=f.ONE_DAY_SECONDS:"once"==t?r.repeatCookieExpiry=f.COOKIE_LIFE_2_YEARS:a.error(new Error("checkRepeatCookie bad value: "+t))}return r.store=function(){0<=r.repeatCookieExpiry&&i.saveData(e,1,r.repeatCookieExpiry)},r},function(){}.apply(null,arguments)}).dependencies("ClientOrServerStorageManager, Logger, AutoStartHelper, DeployablesManagerFactory, DeployableTypes, ClientStorageManager, TimerManager, CommonUtils,ElementFinder, Consts, CommonEvents, AutoStartDeployablesIterator, AutostartDeployablesOrchestrator, AutoStartConditionParamsProvider, ConditionTreeGetter, ConditionCheckerFactory, WmInternals, JsonUtils"),Tt.register("AutoStartStoragePersister").asCtor(function(o,i){function a(e,t,n){return i.AUTOSTART.STOP_CONDITION_KEY+t+"-"+e.Id+"-"+n}this.setStopCondition=function(e,t,n){if(e.Settings.stopOn&&e.Settings.stopOn[n]){var r=a(e,t,n);o.saveData(r,1,i.COOKIE_LIFE_2_YEARS)}},this.isStopConditionDataExsit=function(e,t,n,r){if(!r)return!1;var i=a(e,t,n);return!!o.getData(i,!1)||void 0}}).dependencies("ClientOrServerStorageManager, Consts"),Tt.register("AutostartStopConditionChecker").asCtor(function(i){this.check=function(e,t){var n=e.Settings.stopOn;for(var r in n)if(n.hasOwnProperty(r)&&i.isStopConditionDataExsit(e,t,r,n[r]))return!1;return!0}}).dependencies("AutoStartStoragePersister"),Tt.register("DeployablesRunnerFactory").asCtor(function(e,t,n){this.get=function(e){return r[e]};var r=[];r[e.ShoutOut]=t,r[e.Tutorial]=n,r[e.BusinessSolution]=n,r[e.Survey]=n}).dependencies("DeployableTypes, ImmediateDeployablesRunner, QueueDeployableRunner"),Tt.register("ImmediateDeployablesRunner").asCtor(function(n,r,i,e){var o;this.run=function(e,t){o("Autostarting: "+t.Name,3),r.raiseEvent(n.EVENTS.AutoStart.Activated,{deployableType:e,deployable:t}),i.get(e).activateById(t.Id,{type:n.STEP_PLAY_INITIATOR_ENUM.AUTOSTART})},o=e.wrapCustomerLog(n.AUTOSTART.LOG_FEATURE)}).dependencies("Consts, CommonEvents, DeployablesManagerFactory, Logger"),Tt.register("QueueDeployableRunner").asCtor(function(n,r){this.run=function(e,t){i.push({deployableType:e,deployable:t}),r.isSomeoneRunning().then(o).fail(function(){var e=i.shift();n.run(e.deployableType,e.deployable)})};var i=[];function o(){i=[]}}).dependencies("ImmediateDeployablesRunner, AutoStartRunningState"),Tt.register("AutoStartRunningState").asCtor(function(i){this.isSomeoneRunning=function(){var n=Et.Deferred(),r=i.getRunningStateServices();return function e(){var t=r.shift();t?t.isRunning().then(n.resolve,e):n.reject()}(),n.promise()},this.cleanResources=function(){for(var e=i.getRunningStateServices(),t=0;t<e.length;t++)e[t].cleanResources&&e[t].cleanResources()}}).dependencies("AutoStartTypes"),Tt.register("EventBasedRunningState").asCtor(function(a,e){var t;this.isRunning=function(){return t.promise()},this.cleanResources=function(){n(!1)};var s=[{eventNames:e.resetEvents,method:r},{eventNames:e.startingEvents,method:function(){t=Et.Deferred()}},{eventNames:e.resolvingEvents,method:function(){t.resolve()}},{eventNames:e.rejectingEvents,method:function(){t.reject()}}];function n(e){for(var t=e?a.bind:a.unbind,n=0;n<s.length;n++)for(var r=s[n],i=0;i<r.eventNames.length;i++){var o=r.eventNames[i];t(o,r.method)}}function r(){(t=Et.Deferred()).reject()}r(),n(!0)}).asProto().dependencies("WmInternals"),Tt.register("SurveyRunningState").dependencies("Consts").asFunction(function(e){return Tt.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Surveys.SurveyCompleted],startingEvents:[e.EVENTS.Surveys.StartSurvey],resolvingEvents:[e.EVENTS.Surveys.SurveyPlayed],rejectingEvents:[e.EVENTS.Surveys.SurveyFailedShowing]})}),Tt.register("BizFlowRunningState").dependencies("Consts").asFunction(function(e){return Tt.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Flows.FlowStopped,e.EVENTS.Flows.FlowCompleted],startingEvents:[e.EVENTS.Flows.RestoringFlow,e.EVENTS.Flows.FlowStarted],resolvingEvents:[e.EVENTS.Flows.UIFlowStageShown],rejectingEvents:[e.EVENTS.Flows.FailedToStart]})}),e.register([te.PLATFORM.Web,te.PLATFORM.MobileWeb,te.PLATFORM.Desktop],function(){Tt.register("AutostartDeployablesOrchestrator").asCtor(mt).dependencies("DeployablesRunnerFactory")}),e.register([te.PLATFORM.Web,te.PLATFORM.MobileWeb,te.PLATFORM.Desktop],function(){Tt.register("AutoStartConditionParamsProvider").asCtor(vt).dependencies("Consts")}),Tt.register("AutoStartTypes").asCtor(function(e,t,n){var a;this.addDeployable=function(e,t,n){var r=(i=n,o=-1,Et.each(a,function(e,t){t.type==i&&(o=e)}),o);var i,o;a.splice(r+1,0,{type:e,runningState:t})},this.getDeployableTypes=function(){return Et.map(a,function(e){return e.type})},this.getRunningStateServices=function(){return Et(a).filter(function(e,t){return t.runningState}).map(function(e,t){return t.runningState}).toArray()},a=[{type:e.ShoutOut},{type:e.BusinessSolution,runningState:t},{type:e.Survey,runningState:n}]}).dependencies("DeployableTypes, BizFlowRunningState, SurveyRunningState"),e.register([te.PLATFORM.Web,te.PLATFORM.MobileWeb,te.PLATFORM.Desktop],function(){Tt.register("AutoStartDeployablesIterator").asCtor(yt).dependencies("DeployablesManagerFactory, AutoStartTypes")}),Tt.register("PermalinkDeployableProvider").asCtor(function(o,a,s,l){this.getByString=function(e){var t=function(){var e;e=l.get().IsDisplayPoweredBy===s.IS_DISPLAY_POWERED_BY.Hide?/(?:walkme|walkthroughid)=([0-9]+)-?([0-9]*)/:/walkme=([0-9]+)-?([0-9]*)/;return e}().exec(e);if(t&&1<t.length){var n=t[2]||t[1],r=t[2]?t[1]:a.Tutorial,i={type:parseInt(r,10),id:parseInt(n,10)};if(function(e){var t=o.get(e.type);if(!t)return;if(!t.getById(e.id))return;return!0}(i))return i}}}).dependencies("DeployablesManagerFactory, DeployableTypes, Consts, SiteConfigManager"),Tt.register("PermalinkString").asFunction(function(e){return e.location.href}).asProto(),Tt.register("PermalinkManager").asCtor(function(u,c,e,t,d,f,p,g,h){var m,v=this;v.window=window,v.isTrainingInStartingMode=function(){return m};var y=[t.Tutorial,t.BusinessSolution];v.run=function(){if(!u.get().enabled()||u.get().isOwnerByDefault()){var e=h.getByString(Tt.create("PermalinkString",v.window));if(e){var t=-1!=Et.inArray(e.type,y),n=c.get(e.type),r=n.getById(e.id),i=(o=r,a=t,s=1e3*parseFloat(d.getSettingsValue(o.Settings,"Delay",0)),l=a&&u.get().enabled()?2*u.get().getSampleRate():1,Math.max(s,l));g.libSetTimeout(function(){p.raiseEvent(f.EVENTS.PermalinkClicked),n.activateById(e.id,{type:f.STEP_PLAY_INITIATOR_ENUM.PERMALINK}),t&&(m=!1)},i),t&&(m=!0)}}var o,a,s,l}}).dependencies("CrossDomainManager, DeployablesManagerFactory, Lib, DeployableTypes, CommonUtils, Consts, CommonEvents, TimerManager, PermalinkDeployableProvider"),Tt.register("RecorderServerManager").asCtor(St).args([""]),Tt.register("PetaServerNameManager").asCtor(St),Tt.register("AuditSourceManager").asCtor(function(n){var r;this.set=function(e){var t=n.SOURCES[e];r=t!=undefined?t:parseInt(e)},this.get=function(){return r},r=n.SOURCES.production}).dependencies("Consts"),Tt.register("IsInEditor").asCtor(St).args([!1]),Tt.register("IconTemplates").asInstance({customImages:[],htmlImages:[]}),Tt.register("IsInScreenshot").asCtor(St).args([!1]),Tt.register("IsInWYSIWYG").asCtor(St).args([!1]),Tt.register("FeaturesManager").asCtor(function(n){this.isFeatureEnabled=function(e){var t=n.get();return!("undefined"==t.Features||!t.Features)&&-1<t.Features.indexOf(e)},this.isReady=function(){var e=n.get();return e&&0!==e.length}}).dependencies("SiteConfigManager"),Tt.register("LanguageManager").asCtor(function(n,e,s,l,u){var c=s.keysConfig.language.current.key,r=s.keysConfig.language.current.expiry,d="_default_",f="",p=[],g=[];function o(){var e=s.getData(c);if(e==d&&(e=f),!e&&e!==f&&n.walkme_get_language)try{e=n.walkme_get_language()}catch(t){}return e&&i(e,p)?e:f}function a(e,t,n){var r=e.url;return t&&i(t,e.languages)&&(r=(r=r.substring(0,r.length-3))+"_"+t+".js"),r}function i(e,t){for(var n=0;n<t.length;n++)if(t[n].shortName==e)return!0;return!1}this.setLanguages=function(e){p.length=g.length=0;var t=s.getData(c);t==d&&(t=f);for(var n=!1,r=0;r<e.length;r++){var i=e[r].languages;l.raiseEvent(u.EVENTS.BeforeLanguageSet,{languages:i});for(var o=0;o<i.length;o++){var a=i[o];p.push(a),a.showInPlayer&&g.push(a),a.shortName===t&&(n=!0)}}n||s.removeData(c)},this.getAllLanguages=function(){return p},this.getMenuLanguages=function(){return g},this.getCurrentLanguage=function(){var e=o();return i(e,p)?e:f},this.changeLanguage=function(e){var t=e;return e===f&&(t=d),!(function(e){var t=o();t===f&&(t=d);return t===e}(t)||!i(e,p))&&(s.saveData(c,t,r),!0)},this.fixLanguageUrlInDataFiles=function(e,t){for(var n=o(),r=0;r<e.length;r++){var i=e[r];i.url=a(i,n,t)}return e},this.isLanguageSupported=function(e){return i(e,p)}}).dependencies("win, Lib, ClientOrServerStorageManager, CommonEvents, Consts"),Tt.register("OverlayManager").asCtor(function(){var i,o,a=[];function s(e){i||(i=Et('<div id="walkme-overlay-all" style="position: fixed; height: 100%; width: 100%; top: 0; left: 0;"/>')),i.css({zIndex:e.zIndex,backgroundColor:e.color||"#000",opacity:e.opacity||.7})}function l(e){s(e),i.insertBefore(e.element)}function u(e,t){return e.zIndex>t.zIndex||e.zIndex==t.zIndex&&e.index>t.index}this.create=function(e,t,n){var r={element:e,color:n,opacity:t};return{remove:function(){var e,t;e=r,-1<(t=Et.inArray(e,a))&&a.splice(t,1),r==o&&((o=function(){if(!a.length)return;for(var e=a[0],t=1;t<a.length;t++)u(a[t],e)&&(e=a[t]);return e}())?l(o):(i.remove(),i=null))},show:function(){r.zIndex=e[0].style.zIndex,r.index=e.index(),Et.inArray(r,a)<0&&a.push(r),o&&o!=r&&!u(r,o)||l(o=r)},getOverlayElement:function(){return i||s(r),i}}}}).asSingleton().dependencies(),Tt.register("SettingsCacheBusterActivator").asCtor(function(e,t,o,a,s){this.activeIfPublishedRecently=function(e){if(!a)return;if(n=e,r=((new Date).getTime()-n)/1e3,i=r<c,l("SettingsCacheManager.shouldActivateSettingsCacheBuster - secondsSincePublish: "+r,5),i){var t=new Date(e+1e3*c);!function(e){l(o.formatString("SettingsCacheManager - Will fetch newset settings file until {}",e),3);var t=e.getTime()-(new Date).getTime();if(t<=0)return;a.setItem("walkMe_"+u,s.toJSON({val:"true",exp:(new Date).getTime()+t}))}(t)}var n,r,i};var l,u="wm-settings-cache-bust",c=900;(function(){l=t.wrapCustomerLog("SettingsCacheBusterActivator")}).apply(null,arguments)}).asSingleton().dependencies("Lib, Logger, CommonUtils, LocalStorageService, JsonUtils"),Tt.register("SettingsCacheManager").asCtor(function(e,o,t,r,n,a,s,l,i){var u,c=1e3;function d(e){var t=o.getUrl()+"?"+e.queryStringParams;u("SettingsCacheManager - Fetching newest settings file from: "+t,3),n.execute({url:t,cache:!1,dataType:"jsonp",jsonpCallback:"fixedCallback",success:e.onSuccess,error:e.onFailure})}function f(e,t,n){var r,i;(u("SettingsCacheManager.settingsFileReceived - publishDate: "+new Date(e.PublishDate),5),e.PublishDate)&&(s.activeIfPublishedRecently(e.PublishDate),r=e,i=o.getSettingsFile().PublishDate!=r.PublishDate,u("SettingsCacheManager.shouldActivateSettingsCacheBuster - isNewPublish: "+i,5),i&&(l.raiseEvent(te.EVENTS.SettingsFileNewPublish,{settingsData:e}),a.setWalkmeTimeout(function(){d({onFailure:p,queryStringParams:"b="+(new Date).getTime()})},c)))}function p(e,t,n){u(r.formatString("SettingsCacheManager - Error fetching settings file. jqXHR: {0}, textStatus: {1}, errorThrown: {2}",e,t,n))}this.start=function(){u("SettingsCacheManager.start - Check if need to fetch settings ",5),i?d({onSuccess:f,onFailure:p,queryStringParams:"forceUpdate="+(new Date).getTime()}):u("SettingsCacheManager - storage is not enabled , settings file will not be checked",3)},function(){u=t.wrapCustomerLog("SettingsCacheManager")}.apply(null,arguments)}).asSingleton().dependencies("Lib,SettingsFile,Logger,CommonUtils,WmAjax,TimerManager, SettingsCacheBusterActivator,CommonEvents, LocalStorageService"),Tt.register("EndUserDataConverter").asCtor(function(d,r,f,p,e,u,t){this.registerConverter=function(e){o.push(e)},this.convertData=function(){if(r.shouldUpdateOldKeys&&r.shouldUpdateOldKeys()){var n=r.getInternalKeys(i);!function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=a(t,e);n.Key&&r.saveData(n.Key,n.Value,n.Expiry,i)}}(n),Et.each(o,function(e,t){t.convert(n,i)})}};var i,o,n=e.get(),c=n.fixedKeys,g=n.keyNamesWithSuffixes,h=n.repeatKeysWithRelatedObject,m=n.keysWithRepeat,v="-",y=n.keysWithThreeParts;function a(e,t){var n,r,i,o,a={};if(c[e])n=c[e];else if(m[e])r=m[e],i=r.SettingsKey,o=r.PropertyForKey,n=S(p.getSettingsValue(u.get().Settings[i],o,undefined));else{var s=function(e){var t,n,r=e.split(v);if(1<r.length){var i,o=r[0]+v+r[1];2<r.length&&(i=o+v+r[2]),-1<Et.inArray(i,y)?(t=i,n=r.slice(3)):(t=o,n=r.slice(2))}return{KeyWithoutSuffix:t,SuffixParts:n}}(e);if(s){var l=s.KeyWithoutSuffix;g[l]?n=g[l]:h[l]&&(n=function(e){var t=h[e.KeyWithoutSuffix],n=e.SuffixParts;if("v"==n[n.length-1])return d.ONE_DAY_SECONDS;for(var r=0;r<t.length;r++){var i=t[r];if(i.Parts==n.length){var o,a,s=i.DeployableTypeIndex,l=s!==undefined?n[s]:i.DeployableType,u=f.get(parseInt(l)),c=u.getById(n[i.DeployableIdIndex]);return i.SubSettings?o=p.getSettingsValue(c.Settings,i.SubSettings,undefined):c&&(o=c.Settings),o&&(a=p.getSettingsValue(o,i.SettingsKey,undefined)),S(a)}}}(s))}}return n&&(a.Key=e,a.Value=t[e],a.Expiry=n),a}function S(e){var t;return p.isNumber(e)&&e>=d.ONE_DAY_SECONDS?t=e:"once"==e&&(t=d.COOKIE_LIFE_2_YEARS),t}(function(){i=t.getUserGuid(),o=[]}).apply(null,arguments)}).dependencies("Consts, ClientOrServerStorageManager, DeployablesManagerFactory, CommonUtils, EndUserDataConverterConfig, SiteConfigManager, UserGuidContainer"),Tt.register("EndUserDataConverterConfig").asCtor(function(e){this.get=function(){return{fixedKeys:{"wm-lang":e.ONE_YEAR_SECONDS,"wm-ldv":e.COOKIE_LIFE_2_YEARS,"wm-ag-rep-v":e.ONE_DAY_SECONDS,"wm-ag-d":e.COOKIE_LIFE_2_YEARS},keyNamesWithSuffixes:{"wm-stpcond":e.COOKIE_LIFE_2_YEARS},repeatKeysWithRelatedObject:{"wm-ASRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"ASRep",DeployableType:e.DEPLOYABLE_TYPE.Tutorial},{Parts:2,DeployableTypeIndex:0,DeployableIdIndex:1,SettingsKey:"ASRep"}],"wm-SrvWtRep":[{Parts:2,DeployableIdIndex:0,SubSettings:"survey",SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Tutorial}],"wm-SrvRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Survey}]},keysWithRepeat:{"wm-ag-rep":{SettingsKey:"AG",PropertyForKey:"repeat"}},keysWithThreeParts:["wm-ag-rep"]}}}).dependencies("Consts"),Tt.register("WalkmeConfigManager").asCtor(function(n,i,o){var a=this;a.init=function(r){var e=i.getSettingsFile(),t=e.WalkMeConfigFile;t?(o.measure("loadWalkmeConfigStart"),n.loadTextFile(t,"WalkMeConfigCallback",function(e,t,n){o.measure("loadWalkmeConfigEnd"),window._walkmeInternals.walkmeConfig=e,a.Data=e,r&&r()},undefined,!0)):r&&r()},function(){}.apply(null,arguments)}).dependencies("WmAjax, SettingsFile, PerformanceAPI"),Tt.register("ShoutOutActionDataProvider").asCtor(function(t,o,e,n){var a={};function s(e){return n.get(e.Type).Type==t.DEPLOYABLE_ACTION_TYPES.Action}a={playWt:{idField:"wtId",deployableType:t.DEPLOYABLE_TYPE.Tutorial,eventType:t.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:t.EVENT_SENDER_EVENT_APPS.Walkthru},playContent:{idField:"contentId",deployableType:t.DEPLOYABLE_TYPE.Content,eventType:t.EVENT_SENDER_ACTIONS.PlayResource,aAppType:t.EVENT_SENDER_EVENT_APPS.Content},playShuttle:{idField:"shuttleId",deployableType:t.DEPLOYABLE_TYPE.Shuttle,eventType:t.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:t.EVENT_SENDER_EVENT_APPS.Shuttle},openMenu:{eventType:t.EVENT_SENDER_ACTIONS.OpenMenu},none:{eventType:t.EVENT_SENDER_ACTIONS.None},playBf:{idField:"bfId",deployableType:t.DEPLOYABLE_TYPE.BusinessSolution,eventType:t.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:t.EVENT_SENDER_EVENT_APPS.BizFlow}},this.fillActionData=function(e,t){var n;if(t=t||{},e.Actions&&(n=Et.grep(e.Actions,function(e){return s(e)})[0])){var r=a[n.Type];if(r){t.Type=r.eventType;var i=n.Args;i&&i[r.idField]&&(t.ItemId=i[r.idField].toString(),t.Name=o.getDeployableName(r.deployableType,t.ItemId),t.aAppType=r.aAppType)}}return t},this.isWithAction=function(e){var t=e.Actions;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(s(r)&&"none"!=r.Type)return!0}return!1},function(){}.apply(null,arguments)}).dependencies("Consts, DeployablesDataProvider, CommonUtils, ActionsFactory"),Tt.register("DeployablesRestorer").asCtor(function(e,t){var i,o;function n(e,t){i.push(e),t&&o++}this.restore=function(n){if(t.get().enabled())return;var r=0;Et.each(i,function(e,t){t.restore(function(){++r==o&&n&&n()})}),0==o&&n&&n()},this.addRestorer=n,o=0,i=[],n(e)}).dependencies("BusinessSolutionsManager, CrossDomainManager"),Tt.register("RunningDeployablesStopper").asCtor(function(e){var t;this.stop=function(n){Et.each(t,function(e,t){t.stop(n)})},this.addStopper=function(e){t.push(e)},t=[e]}).dependencies("FlowsPlayer"),Tt.register("DeployablesDataProvider").asCtor(function(i){this.getDeployableName=function(e,t){if(null==e||null==t)return;var n=i.get(e);if(!n)return;var r=n.getById(t);if(r)return r.Name;return},function(){}.apply(null,arguments)}).dependencies("DeployablesManagerFactory"),e.register(te.PLATFORM.Web,function(){Tt.register("PlatformInitializer").asCtor(Ct)}),e.register(te.PLATFORM.MobileWeb,function(){Tt.register("PlatformInitializer").asCtor(Ct)}),e.register(te.PLATFORM.Desktop,function(){Tt.register("PlatformInitializer").asCtor(Ct)}),Tt.register("WindowBeforeUnloadHandler").asCtor(function(e){this.init=function(){i(),t=e.onbeforeunload,e.onbeforeunload=r},this.register=function(e){n.push(e)},this.cleanResources=i;var t,n=[];function r(){if(function(){for(;n.length;)n.shift()()}(),t)return t.apply(e,arguments)}function i(){e.onbeforeunload===r&&(e.onbeforeunload=t)}}).dependencies("win"),Tt.register("CrossDomainManager").asCtor(function(){var e;function t(){return!!e}this.isReady=t,this.get=function(){t()||(e=Tt.get("PassOwnershipManager"));return e}}),Tt.register("PageIdentifiersAPI").asCtor(function(e,t,n){this.setPageIdentifiers=function(e){if(!r.isEnabled())return;if(r.resetCollection(),e)for(var t=0;t<e.length;t++){var n=e[t];r.addSerializedPage(n.PageDescription,n.Id)}},this.capture=function(){if(!r.isEnabled())return null;var e=r.captureCurrentPage();return t.toJSON(e)};var r=e.getPageComparerCacheManagerEditorApi();function i(){r.isEnabled()&&r.updateCurrentPage()}!function(){if(!r.isEnabled())return;n.bind(i),r.updateCurrentPage()}()}).dependencies("ElementFinder, JsonUtils, UIChangeTracker"),Tt.register("jQueryCacheCleaner").asCtor(function(e,t){var n;function r(){!function(){try{for(var e in Et.cache){var t=Et.cache[e],n=i(t);n&&delete Et.cache[e]}}catch(r){}}(),n=t.setWalkmeTimeout(r,1e4)}function i(e){try{if(e&&e.handle&&e.handle.elem)return o(e.handle.elem);if(e&&e.data&&e.data.iframe)return o(mtjQuery(e.data.iframe)[0])}catch(t){return!0}return!1}function o(e){var t=e.documentElement;t&&(e=e.documentElement);var n=e.parentNode;if(!n)return!0;var r=e.ownerDocument,i=r.defaultView||r.parentWindow;return!i||void 0}this.init=function(){r()},this.destroy=function(){n&&(n.clear(),n=null)}}).dependencies("HostData, TimerManager"),Tt.register("wmjQuerySafe").asInstance(function(e){return Tt.create("wmjQuerySafeProxy",{element:e})});var bt=function(){function e(e,t,n,r){this.wmjQuery=e,this.wmjQuerySafe=t,this.eventBinder=n,this._element=e(r.element)}function t(i){return function(){var t=this,n=arguments,r=t;return t.safeExecute(function(){var e=t._element[i].apply(t._element,n);r=t.wmjQuerySafe(e)}),r}}return e.prototype.isSafe=function(){try{return this._element[0].ownerDocument,!0}catch(e){return!1}},e.prototype.getDocument=function(){var e=this,t=this;return this.safeExecute(function(){t=e.wmjQuerySafe(e._element[0].ownerDocument)}),t},e.prototype.off=function(e,t){var n=this;return this.safeExecute(function(){n.eventBinder.unbind(n._element,e,t)}),this},e.prototype.stop=t("stop"),e.prototype.remove=t("remove"),e.prototype.find=t("find"),e.prototype.show=t("show"),e.prototype.safeExecute=function(e){try{e()}catch(t){this._element=this.wmjQuery()}},e}();Tt.register("wmjQuerySafeProxy").asCtor(bt).asProto().dependencies("wmjQuery, wmjQuerySafe, EventBinder"),Tt.register("PopupStepElementProvider").asCtor(function(i){this.get=function(e){var t=i.getTopContainer();if(0==t.length)return!1;var n=mtjQuery(".walkme-popup-element",t);if(n.length<=0||e){var r="walkme-popup-element";e&&(r+="-"+n.length),(n=mtjQuery(t[0].ownerDocument.createElement("div"))).attr("id",r),n.attr("class","walkme-popup-element"),n.css("width","0px;"),n.css("height","0px;"),mtjQuery(t.append(n))}return n}}).dependencies("TopContainerProvider"),Tt.register("UserGuidContainer").asCtor(function(t,n,e){this.getUserGuid=function(){return r},this.setUserGuid=function(e){e=t.defaultValue(e,"No-User-Guid"),-1==n.inArray(e,i)&&i.push(e);r=e},this.getAllUserGuids=function(){return e.getAllUserGuids()||i};var r=null,i=[]}).dependencies("CommonUtils, ArrayUtils, SettingsFile"),Tt.register("TopMostCssStyleSettter").asCtor(function(){this.setTopMostCssStyle=function(e,t){e.css("position","absolute"),e.css("z-index",t),e.addClass("SkipThisFixedPosition")}}),Tt.register("ElementCenterer").asCtor(function(s,l,u,c){function d(e,t,n,r,i,o,a,s){if(a==undefined||null==a)var a={top:0,left:0};500<n&&(n=0);var l=(o-mtjQuery(e).outerHeight())/2+r+a.top,u=(i-mtjQuery(e).outerWidth())/2+n+a.left;l=Math.round(0<l?l:0),u=Math.round(0<u?u:0),Math.abs(l-mtjQuery(e).offset().top)<2&&Math.abs(u-mtjQuery(e).offset().left)<2||(l+="px",u+="px",mtjQuery(e).css({position:"absolute",margin:0}),t?(s=s||{duration:400},mtjQuery(e).animate({top:l,left:u},s)):mtjQuery(e).css({top:l,left:u}))}function f(n,r){FB.Canvas.getPageInfo(function(e){var t;d(n,r,(t=e).scrollLeft,t.scrollTop,mtjQuery(window).width(),t.clientHeight)})}this.centerElementInPage=function(e,t,n,r){var i=window;s.shouldHandlePageAsFramesets()&&(i=l.getBiggestFrame().contentWindow);{if(c.isInFacebookCanvas())return f(e,t);var o={top:0,left:0};n&&(o.top+=n.top,o.left+=n.left);var a=u.calculateOffset(e.parent()[0],i);return o.top-=a.top,o.left-=a.left,d(e,t,mtjQuery(i).scrollLeft(),mtjQuery(i).scrollTop(),mtjQuery(i).width(),mtjQuery(i).height(),o,r)}}}).dependencies("FramesetsUtils, BiggestFrameProvider, PositionHelper, FacebookCanvasIndicator"),Tt.register("PositionHelper").asCtor(function(i,s,l,g,y,S,E,f,p,u,a,c,d,o,r,h,t){var m,v,n,T,w=this,C={ALL_POINTS:0,ANY_POINT:1},b={0:"mt_visible",1:"wm_vsb_st",2:"wm_interact_any_point",3:"wm_interact_all_points"};function I(e){var t=0,n=0,r=mtjQuery(e),i=r.offset();if(t=i.top,n=i.left,S.isFeatureEnabled("iframepadding")&&r.is("iframe")&&(n+=parseFloat(r.css("padding-left")),t+=parseFloat(r.css("padding-top"))),e.ownerDocument){var o=_(g.getBody(e.ownerDocument)),a=_(e.ownerDocument.documentElement);t-=o.top==a.top?o.top:o.top+a.top,n-=o.left==a.left?o.left:o.left+a.left}var s={left:n,top:t};return s}function _(e){return e?{top:e.scrollTop||0,left:e.scrollLeft||0}:{top:0,left:0}}function P(e){for(var t=0,n=0;"FRAME"==E.getElementTagName(e)?(t+=mtjQuery(e).offset().top,n+=mtjQuery(e).offset().left):(t+=e.offsetTop||0,n+=e.offsetLeft||0),e=e.offsetParent;);var r={left:n,top:t};return r}function A(e,t){var n={};return e.left>t.right||t.left>e.right?null:e.bottom<t.top||t.bottom<e.top?null:(n.left=Math.max(e.left,t.left),n.right=Math.min(e.right,t.right),n.top=Math.max(e.top,t.top),n.bottom=Math.min(e.bottom,t.bottom),n.height=n.bottom-n.top,n.width=n.right-n.left,n)}function k(e,t){var n=t.left,r=t.top;e.left+=n,e.right+=n,e.top+=r,e.bottom+=r}function D(e,t,n){t.top=n.top,t.left=n.left;var r=e.outerWidth(),i=e.outerHeight();if(1<e.length){var o=w.getMultipleElementsRect(e);r=o.right-o.left,i=o.bottom-o.top}t.height=i,t.width=r,t.bottom=t.top+t.height,t.right=t.left+t.width}function N(e,n,r,i,o){w.removeScrollAndResizeEvents(i);var t=O(i);mtjQuery(e).bind(t,function(){var e,t;n.stop(!1,!0),t={offset:e=r,eventName:i,defaultValue:e},a.raiseEvent(y.EVENTS.Scrolls.ScrollFired,t),o(n,r=t.returnValue)})}function O(e){return e=e||"walkme",t.formatString("scroll.{0}, resize.{0}, scrollstop.{0}, orientationchange.{0}",e)}function e(e,t){Et.expr.filters[e]=t}function x(e){if(L(e))return!0;var t=!1;return e.parents().each(function(){if(L(Et(this)))return!(t=!0)}),t}function L(e){if(0==e.css("opacity"))return!0;var t=e[0].filters;return t&&t.alpha&&0===t.alpha.opacity}function F(e,t){var n=(t.tagName||"").toUpperCase();return e("OPTION"===n?Et(t).parent()[0]:t)}function M(t){var n=Et.expr.filters.mt_hidden;Et.expr.filters.mt_hidden=function(e){return n(e)||t(Et(e))}}function R(t){M(t);var n=Et.expr.filters.wm_vsb_st,r=Et.expr.filters.wm_interact_any_point,i=Et.expr.filters.wm_interact_all_points;Et.expr.filters.wm_vsb_st=function(e){return n(e)&&!t(Et(e))},Et.expr.filters.wm_interact_any_point=function(e){return r(e)&&!t(Et(e))},Et.expr.filters.wm_interact_all_points=function(e){return i(e)&&!t(Et(e))}}function B(e){for(var t=e.parents().add(e),n=t.length-1;0<n;n--)if(U(Et(t[n]),Et(t[n-1])))return!1;return!0}function U(e,t){if("absolute"==e.css("position"))return!1;if("hidden"!=t.css("overflow"))return!1;var n=q(t,"border-top"),r=q(t,"padding-top"),i=t.offset().top,o=n+r+i,a=t.height(),s=o+a,l=t.offset().left,u=l+t.width();if(o==s)return!0;var c=q(e,"border-top"),d=q(e,"padding-top"),f=e.offset().top,p=c+d+f,g=e.height(),h=p+g,m=e.offset().left,v=m+e.width(),y=h<o,S=s<p,E=v<l,T=u<m;return y||S||E||T}function V(e,t){var n=e.ownerDocument,r=Et(e),i=r.parents("html"),o=r.parents("body"),a=o.scrollTop()||i.scrollTop(),s=o.scrollLeft()||i.scrollLeft(),l={element:r,html:i,topScroll:a,leftScroll:s,workingDocument:n};return t==C.ALL_POINTS?function(e){for(var t=u.length-1;0<=t;t--)if(!W(u[t],e))return!1;return!0}(l):function(e){for(var t=u.length-1;0<=t;t--)if(W(u[t],e))return!0;return!1}(l)}function W(e,t){var n=t.element,r=e(n),i=r.x-t.leftScroll,o=r.y-t.topScroll,a=t.workingDocument.elementFromPoint(i,o);return a==n[0]||Et.contains(n[0],a)}function j(){var e={top:0,left:0};if(!S.isFeatureEnabled("collapsedMargins"))return e;var t,n=Et("body"),i=0;if((t=n).offset().top<=0&&"relative"==t.css("position")&&(!c.isIE()||"visible"==t.css("overflow-x")&&"visible"==t.css("overflow-y"))&&(!c.isIEBrowser(9)||function(e){try{var t=Et("<div />");t.important({position:"absolute",top:0,visibility:"hidden"}),e.append(t);var n=t.offset().top;return t.remove(),0<n}catch(r){return!1}}(t))){n.css("margin-top");n.find("> div").each(function(){var e=Et(this),t=e.offset().top,n=e.position().top;if(0<parseInt(e.css("margin-top"),10)){var r=t-n;i<r&&(i=r)}})}return e.top+=i,e}function G(e,t,n){"static"!=n.position&&(e.top+=w.tryParsingStyleValue(n.top),e.left+=w.tryParsingStyleValue(n.left))}function H(e,t,n,r){e.top+=w.tryParsingStyleValue(n[r+"Top"]),e.left+=w.tryParsingStyleValue(n[r+"Left"])}function Y(e,t,n){/(html|body)/i.test(t.tagName)||(e.top+=z(n.borderTopWidth),e.left+=z(n.borderLeftWidth))}function z(e){var t=0;switch(e){case"thin":t=1;break;case"medium":t=3;break;case"thick":t=5;break;default:t=Math.round(parseFloat(e))}return t}function Q(t){for(var n=function e(t,n){var r=t.data("iframe");n||(n=[]);r&&(n.push(r),e(r,n));return n}(t),r={top:0,left:0},i=0;i<n.length;i++){var o=n[i].offset(),a=n[i][0].contentWindow.document||n[i][0].contentDocument,s=g.getBody(a);r.top+=o.top,r.top-=s.scrollTop||a.documentElement.scrollTop,r.left+=o.left,r.left-=s.scrollLeft||a.documentElement.scrollLeft}return r}function q(e,t){var n=e.css(t);return n?parseFloat(n):0}w.getVisibleFilterKey=function(e){var t=e.Settings&&e.Settings.filter;return t===undefined&&(t=e.filter||0),t},w.getVisibleFilter=function(e){return":"+b[w.getVisibleFilterKey(e)]},this.getPosRelativeToWindow=function(e,t,n){var r,i,o,a,s=0,l=0;for(t=t||top,n&&!window.opera&&e&&e.tagName&&"input"==e.tagName.toLowerCase()&&(s+=e.scrollLeft,l+=e.scrollTop);e;){if(i=e.ownerDocument,o=p.getDocumentWindow(i),n&&o==t){var u=f.getScrollOffset(i);s+=u.Left,l+=u.Top}if(a=!o||o==t,r=n?I(e):P(e),s+=r.left,l+=r.top,a)break;e=o.frameElement}var c={left:s,top:l};return c},this.getRectRelativeToWindow=function(e,t,n){var r,i,o,a,s,l,u=!1,c={left:0,top:0};for(o=1<e.length?w.getMultipleElementsRect(e):t.getBoundingClientRect(),n=n||top;!u;){r=t.ownerDocument,i=p.getDocumentWindow(r);var d=r.documentElement.getBoundingClientRect();if(!(o=A(o,d)))return o;(u=!i||i==n)||(c=i.frameElement.getBoundingClientRect(),k(o,c),t=i.frameElement)}return a=o,s=r,l=f.getScrollOffset(s),a.left+=l.Left,a.right+=l.Left,a.top+=l.Top,a.bottom+=l.Top,o},this.getDrawingArea=function(e,t,n){if(!n||w.isElementInViewport(e))return r=t?mtjQuery("body"):e,{height:(i=E.getElementViewport(r)).height(),width:i.width(),top:i.top(),left:i.left()};var r,i,o=mtjQuery(document);return{top:0,left:0,height:o.height(),width:o.width()}},this.isElementScrolledOut=function(e,t,n){var r=d.getFrameContents(t),i=e.offset().top,o=e.offset().left,a=e.outerHeight(),s=e.outerWidth(),l=parseInt(n);return l==y.POSITION_TYPE.Bottom&&(i+=a),l==y.POSITION_TYPE.Right&&(o+=s),r.scrollTop()>i||t.height()+r.scrollTop()<i||(r.scrollLeft()>o||t.width()+r.scrollLeft()<o)},w.getCenterPositionByBounds=function(e){var t=e.left+e.width/2,n=e.top+e.height/2;return{left:t,top:n}},w.getEmbedInElementPosition=function(e,t){var n={},r=parseInt(h.getSettingsValue(t,"leftOffset",0)),i=parseInt(h.getSettingsValue(t,"topOffset",0));return D(e,n,{top:i,left:r}),n},this.getElementBounds=function(e,t,n,r){var i,o,a,s,l={},u=e[0];if(t){var c=w.getMultipleElementsRect(e),d=g.getElementDocument(e),f=w.getOffsetRect(u,d,n);l=w.getElementBoundsWithRectAndOffset(c,f)}else{var p=w.getPosRelativeToWindow(u,n,!0);D(e,l,p)}return i=l,o=r,a=parseInt(h.getSettingsValue(o,"leftOffset",0)),s=parseInt(h.getSettingsValue(o,"topOffset",0)),i.top=i.top+s,i.left=i.left+a,i.right=i.right+a,i.bottom=i.bottom+s,l=i},w.getMultipleElementsRect=function(e){for(var t,n,r,i,o,a=0;a<e.length;a++)o=e[a].getBoundingClientRect(),(t===undefined||o.left<t)&&(t=o.left),(n===undefined||o.top<n)&&(n=o.top),(i===undefined||o.bottom>i)&&(i=o.bottom),(r===undefined||o.right>r)&&(r=o.right);return{top:n,left:t,right:r,bottom:i}},w.isElementVisible=function(e,t){var n=!0;try{e[0].tagName}catch(i){n=!1}if(n){var r=":"+b[t=t||0];Et(e).filter(r).length!=Et(e).length&&(n=!1)}return n},w.registerResizeAndScrollEvents=function(e){var t=e.callback;t||(t=function(e,t){i.centerElementInPage(e,!0,t)});var n=r.shouldHandlePageAsFramesets()?o.getBiggestFrame().contentWindow:window;N(n,e.element,e.offset,e.eventNameSuffix,t)},w.getWindowSize=function(){var e=Et(r.shouldHandlePageAsFramesets()?o.getBiggestFrame().contentWindow:window),t={height:e.height(),width:e.width()};return t},w.removeScrollAndResizeEvents=function(e){var t=window;if(i.shouldHandlePageAsFramesets()){var n=o.getBiggestFrame();null!=n&&(t=n.contentWindow)}var r=O(e);mtjQuery(t).unbind(r)},w.centerElementInParent=function(e,t){var n=t.outerHeight()/2-e.outerHeight()/2,r=t.outerWidth()/2-e.outerWidth()/2;e.css("top",n+"px"),e.css("left",r+"px")},w.extendVisibilityFilters=function(){if(v=!1,Et.expr.filters.mt_hidden=m,S.isFeatureEnabled("strongMtVisible")&&(v=!0,M(function(e){return!B(e)})),S.isFeatureEnabled("anyPointInteractable")&&M(function(e){return!V(e[0],C.ANY_POINT)}),S.isFeatureEnabled("nonVisibleIframe")){var e=function(e){var t=e.data("iframe");return!(!t||!t.is(":mt_hidden"))};M(e),R(e)}var t,n;if(S.isFeatureEnabled("visibleOpacity")&&(M(x),R(x)),c.isIE()&&S.isFeatureEnabled("ieAdaptVisibility")&&(t=F,n=Et.expr.filters.mt_visible,Et.expr.filters.mt_visible=function(e){return t(n,e)}),window._walkmeInternals&&window._walkmeInternals.customMtHiddenFuncs)for(var r=window._walkmeInternals.customMtHiddenFuncs,i=r.length-1;0<=i;i--)M(r[i])},w.findNearestSelfOrParentByType=function(e,t){var n=e[0];if(n){for(var r=[],i=0;i<t.length;i++)r.push(t[i].toLowerCase());for(var o=n.tagName.toLowerCase();"body"!=o&&"frameset"!=o&&"head"!=o;){if(-1<Et.inArray(o,r))return Et(n);n=n.parentNode,o=n.tagName.toLowerCase()}}},w.findFirstSelfOrChildByType=function(e,t){if(e.exist()){var n=t.join(", ");if(e.is(n))return e.first();var r=e.children(n).first();return r.exist()?r:e.is("table")?function(e,t){var n;if((n=w.findFirstSelfOrChildByType(e.children("tr"),t))&&n.exist())return n;if((n=w.findFirstSelfOrChildByType(e.children("thead").children("tr"),t))&&n.exist())return n;if((n=w.findFirstSelfOrChildByType(e.children("tbody").children("tr"),t))&&n.exist())return n;if((n=w.findFirstSelfOrChildByType(e.children("tfoot").children("tr"),t))&&n.exist())return n}(e,t):void 0}},w.getColumn=function(e){var t=[],n=w.findNearestSelfOrParentByType(e,["table"]);if(n){var r,i=["td","th"];if(r=e.is(i)?e:e.is("table")||e.is("tr")?w.findFirstSelfOrChildByType(e,i):w.findNearestSelfOrParentByType(e,i)){var o,a,s=null,l=r.index(),u=Et([]);Et.merge(u,n.children("tr")),Et.merge(u,n.children("thead, tbody, tfoot").children("tr"));for(var c=0;c<u.length;c++)(o=u[c].cells[l])&&(null==s&&(s=o.colSpan),o.colSpan<s&&(t.length=0,s=o.colSpan),o.colSpan==s&&(a=Et(o)).height()&&a.width()&&t.push(o));return Et(t,n)}}},this.getBodyInheritedMargin=function(){var e={top:0,left:0};if(!S.isFeatureEnabled("calcInheritedMargin"))return e;var l=!1,t=mtjQuery("body").find("div").filter(function(){if(l)return!1;var e=mtjQuery(this);if("relative"!=e.css("position"))return!1;var n,t=null,r=null,i=parseInt(e.css("margin-top")),o=0!=i&&parseInt((r=e.position()).top)==-1*parseInt((t=e.offset()).top),a=!1;if(!o){var s=parseInt(e.css("margin-left"));a=0!=s&&parseInt(null!=r?r.left:e.position().left)==-1*parseInt(null!=t?t.left:e.offset().left)}return l=(o||a)&&(n=!0,e.parentsUntil("html").each(function(e,t){"relative"!=mtjQuery(t).css("position")&&(n=!1)}),n)}).eq(0);return 0<t.length&&(e={top:parseInt(t.css("margin-top")),left:parseInt(t.css("margin-left"))}),e},w.fixFirefoxAutoMarginBug=function(e,t,n,r){if(c.isFirefox&&function(e,t){if("BODY"==e.tagName&&"relative"==t.position&&"auto"==e.style.marginLeft&&"auto"==e.style.marginRight&&0==w.tryParsingStyleValue(t.marginLeft))return!0}(t,n)){e.top+=w.tryParsingStyleValue(n.marginTop);var i=s.getStyle(t.parentElement,r),o=(w.tryParsingStyleValue(i.width)-w.tryParsingStyleValue(n.width))/2;if(o<0)return;e.left+=o}},w.tryParsingStyleValue=function(e){return"string"==typeof e&&(e=e.replace("px","")),isNaN(e)?0:parseInt(e)},w.getCollapsedMargin=function(){return n&&(e=T,t=5e3,(new Date).getTime()-e<t)||(n=j(),T=(new Date).getTime()),n;var e,t},w.getOffsetRect=function(e,t,n){try{var r=g.getBody(t),i=f.getScrollTop(t,r),o=f.getScrollLeft(t,r),a=w.calculateOffset(r,n);return i-=a.top,o-=a.left,{top:Math.round(i),left:Math.round(o)}}catch(s){l.error(s)}},w.calculateOffset=function(e,t){for(var n=e,r=s.getStyle(e,t);r&&"static"==r.position;)n=n.parentNode,r=s.getStyle(n,t);var i=w.getBodyInheritedMargin();i.top=w.tryParsingStyleValue(i.top),i.left=w.tryParsingStyleValue(i.left);var o={top:i.top,left:i.left},a=w.getCollapsedMargin();if(o.top+=a.top,o.left+=a.left,r)for(H(o,n,r,"margin"),Y(o,n,r),G(o,n,r),w.fixFirefoxAutoMarginBug(o,n,r,t),n=n.parentNode,r=s.getStyle(n,t);r;)H(o,n,r,"margin"),H(o,n,r,"padding"),Y(o,n,r),G(o,n,r),n=n.parentNode,r=s.getStyle(n,t);return o},w.getElementBoundsWithRectAndOffset=function(e,t){var n=e.left+t.left,r=e.top+t.top,i=e.right-e.left,o=e.bottom-e.top,a=e.right+t.left,s=e.bottom+t.top;return{top:r,left:n,width:i,height:o,right:a,bottom:s}},w.isElementInViewport=function(e,t){t=Et.extend({},y.DEFAULT_POSITIONS,t);var n=Q(e),r=e.offset();n.top+=r.top,n.left+=r.left,w.fixOffsetForIE(e,n);var i,o,a,s,l,u,c,d=S.isFeatureEnabled("fixIframeScroll")?E.getElementViewport(e):E.getWindowViewport(),f=S.isFeatureEnabled("bodyClientHeight")?Et("body")[0].clientHeight:d.height(),p=d.top()+t.top,g=d.left()+t.left,h=f-t.bottom+(d.top()-0),m=d.width()-t.right+(d.left()-0),v=(i=n.top,o=n.left+e.width(),a=n.top+e.height(),s=n.left,l=p,u=m,c=g,a<=h&&l<=i&&c<=s&&o<=u);return v},w.fixOffsetForIE=function(e,t){if(function(e){try{if("1.7.1"!=e.jquery)return;var t=e[0].ownerDocument.documentMode;if(7==t||8==t){var n=e.data("iframe");if(n&&"FRAME"==n[0].tagName)return!0}}catch(r){}}(e)){var n=e[0].ownerDocument,r=je.getBody(n);t.top+=r.scrollTop||n.documentElement.scrollTop,t.left+=r.scrollLeft||n.documentElement.scrollLeft}},function(){m=Et.expr.filters.mt_hidden,e("wm_hdn_st",function(e){var t=Et(e);return t.is(":mt_hidden")||!v&&!B(t)}),e("wm_vsb_st",function(e){return!Et.expr.filters.wm_hdn_st(e)}),e("wm_interact_any_point",function(e){return V(e,C.ANY_POINT)}),e("wm_interact_all_points",function(e){return V(e,C.ALL_POINTS)})}.apply(null,arguments)}).dependencies("Lib, UiUtils, Logger, CommonUtils, Consts, FeaturesManager, ElementUtils, ScrollUtils, DocumentUtils, FindElementCornerFunctions, CommonEvents, HostData, FrameContentsProvider, BiggestFrameProvider, FramesetsUtils, SettingsValuesRetriever, StringUtils"),Tt.register("PopupPosition").asCtor(function(l,n,e){var u,c;this.positionElementInPage=function(e,t){u===l.Center?n.centerElementInPage(e,!1,t):function(e,t,n){e.css({position:"fixed"});var r=null,i="",o="wm-position-",a=n.top||0,s=n.left||0;switch(u){case l.Top:i=o+"top",r={top:0,left:"50%",marginLeft:-e.outerWidth()/2+s,marginTop:a};break;case l.Right:i=o+"right",r={right:0,top:"50%",marginTop:-e.outerHeight()/2+a,marginRight:-s};break;case l.Bottom:i=o+"bottom",r={bottom:0,left:"50%",top:"auto",marginLeft:-e.outerWidth()/2+s,marginBottom:-a};break;case l.Left:i=o+"left",r={left:0,top:"50%",marginTop:-e.outerHeight()/2+a,marginLeft:s};break;case l.TopLeft:i=o+"top-left",r={left:0,top:0,marginTop:a,marginLeft:s};break;case l.TopRight:i=o+"top-right",r={right:0,top:0,marginTop:a,marginRight:-s};break;case l.BottomRight:i=o+"bottom-right",r={right:0,bottom:0,top:"auto",marginBottom:-a,marginRight:-s};break;case l.BottomLeft:i=o+"bottom-left",r={left:0,bottom:0,top:"auto",marginBottom:-a,marginLeft:s}}e.addClass(i),e.css(r),t&&c.setPagePositionOffset({marginTop:r.marginTop,marginLeft:r.marginLeft,marginBottom:r.marginBottom,marginRight:r.marginRight},u)}(e,!0,t)},function(){c=e.animator,u=e.pagePosition}.apply(null,arguments)}).asProto().dependencies("Positions, Lib"),Tt.register("DomEventDispatcher").asCtor(function(t,n,r){var i;function o(e,t,n){if(i){var r=a(t,e,n);e.dispatchEvent(r)}else if(window.dispatchEvent){var r=function(e,t,n){var r;if(n){r=document.createEvent("MouseEvent");var i=s(t);r.initMouseEvent(e,!0,!0,window,1,i.pageX,i.pageY,i.clientX,i.clientY,!1,!1,!1,!1,0,null)}else(r=document.createEvent("UIEvents")).initUIEvent(e,!0,!0,window,1);return r}(t,e,n);e.dispatchEvent(r)}else"input"==t&&(t="propertychange"),e.fireEvent("on"+t)}function a(e,t,n){return n?new MouseEvent(e,s(t)):new Event(e,{bubbles:!0,composed:l(t)})}function s(e){var t={screenX:1,screenY:1,pageX:1,pageY:1,clientX:1,clientY:1,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0,composed:l(e)};return e&&e.getBoundingClientRect&&(t.pageX=t.clientX=e.getBoundingClientRect().left,t.pageY=t.clientY=e.getBoundingClientRect().top),t}function l(e){return!!e&&(n.isFeatureEnabled("composedTrueOnDispatchEvent")||r.fnHelpers&&r.fnHelpers.isInShadow&&r.fnHelpers.isInShadow(e))}this.dispatchEvent=function(e,t){o(e,t,!1)},this.dispatchMouseEvent=function(e,t){o(e,t,!0)},function(){if(!t.isIEBrowser())try{a("click");i=!0}catch(e){i=!1}}.apply(null,arguments)}).dependencies("HostData, FeaturesManager, wmjQuery"),Tt.register("InputGenerator").asCtor(function(r,i,e,s,o,t,a,l,u,c,d,f,p,g){var h,m=this;m.click=function(e,t){n=e,n.is("option")&&n.parent().is("select")&&m.select(e.parent(),e[0].value);var n;(function(n){if(n[0]){var e,t,r=c.isFeatureEnabled("mouseEvents");p.each((e=r,t=f.get().Custom.modifiedClickCustomAction,e&&t&&t.events?(d.sync("customInputGeneratorClickEvent"),t.events):[].concat("mousedown","mouseup").concat(c.isFeatureEnabled("autoClickNoMouseover")?[]:"mouseover").concat(e?"click":[])),function(e,t){r?i.dispatchMouseEvent(n[0],t):v(n[0],t)}),r||(n[0].click(),l.raiseEvent(a.EVENTS.Walkthrus.InputGeneratedClick,{element:n}))}})(e),t&&t()},m.hover=function(e,t){i=e,n=i.closest("a"),i=0!==n.length?n:i,p.each(y,function(e,t){var n,r;T(i,t,p),g.jQuery&&T(i,t,g.jQuery),n=t,r=w(i,!0),p.each(r,function(e,t){v(t,n)})}),o.addElementClass(e,":hover")?u.bind(a.EVENTS.BeforeWalkmeRemoved,S):e.is("a")&&e.parent().is("li")?E(e.parent()):E(e);var i,n;t&&t()},m.focus=function(e,t){n(e,"focus",t)},m.text=function(n,r,t,i,o,a){t=t||0,v(n[0],"focus"),s.setWalkmeTimeout(function(){var e=c.isFeatureEnabled("injectTextPasteFirst")?["paste","inject","input"]:["inject","paste","input"];p.each(e,function(e,t){h[t](n,r,o)}),s.setWalkmeTimeout(function(){v(n[0],"change"),v(n[0],a?"keyup":"blur"),i&&i()},t)},t)},m.select=function(e,t,n){e.val()!=t&&(v(e[0],"focus"),e.val(t),v(e[0],"change"));n&&n()},m.selectByText=function(e,t,n){if(e.find("option:selected").text()!=t){v(e[0],"focus");for(var r=e[0].options,i=0;i<r.length;i++)if(r[i].text==t){p(r[i]).attr("selected","selected"),v(e[0],"change");break}}n&&n()},m.swipe=function(e,t){n(e,"swipe",t)};var v=i.dispatchEvent,y={MouseEnter:"mouseenter",MouseOver:"mouseover",MouseMove:"mousemove"};function S(){u.unbind(a.EVENTS.BeforeWalkmeRemoved,S),o.removeElementClass()}function n(e,t,n){v(e[0],t),e[t](),n&&n()}function E(e){var t=e.find("*:mt_hidden");t.filter(function(){return"none"==p(this).css("display")}).css("display","block"),t.css("visibility","visible"),t.css("opacity","1")}function T(e,n,r){var t=w(e,!0);p.each(t,function(e,t){!function(e,t){switch(t){case y.MouseMove:e.trigger(y.MouseMove);break;case y.MouseOver:e.trigger(y.MouseOver);break;case y.MouseEnter:default:e.trigger(y.MouseEnter)}}(t=r(t),n)})}function w(e,t){var n=e.find("*:mt_visible");return t&&n.push(e[0]),n}(function(){h={inject:function(e,t,n){r.injectText(e,t,n&&n.ElementDescription)},paste:function(e){t.isIEBrowser()||v(e[0],"paste")},input:function(e){v(e[0],"input")}}}).apply(null,arguments)}).dependencies("TextInjector, DomEventDispatcher, Logger, TimerManager, CssInjector, HostData, Consts,CommonEvents, WmInternals, FeaturesManager, EventsTriggerSyncer, SiteConfigManager, wmjQuery, win"),Tt.register("TextInjector").asCtor(function(e,o){var n;function r(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i],a=s(o,t,n,r);if(a!==undefined)return a}}function s(e,t,n,r){try{if(e.canInject(n))return e[t](n,r)||!1}catch(i){o.error(i,"error in executing text action "+t)}}this.injectText=function(e,t){r(n,"inject",e,t)},this.retrieve=function(e){return r(n,"retrieve",e)},this.adaptText=function(e,t){return r(n,"adaptText",e,t)},n=e.get()}).dependencies("TextInjectorsProvider, Logger"),Tt.register("QuillTextInjector").asCtor(function(n){this.canInject=function(e){return e.hasClass(".ql-container")||0<e.parents(".ql-container").length},this.inject=function(e,t){(e.hasClass("ql-editor")?e:e.parents(".ql-editor")).focus(),n.inject(e,t)},this.adaptText=function(e,t){return t},this.retrieve=n.retrieve}).dependencies("JQueryTextInjector"),Tt.register("CkEditorTextInjector").asCtor(function(){function n(e){var t=r(e),n=i(e);return n.CKEDITOR.instances[t]}function r(e){return e.find('[style*="visibility: hidden"]').attr("id")}function i(e){var t=e[0].ownerDocument;return t.defaultView||t.parentWindow}this.inject=function(e,t){n(e).setData(t)},this.canInject=function(e){return i(e).CKEDITOR&&0<e.find(".cke").length&&r(e)},this.retrieve=function(e){return n(e).getData()},this.adaptText=function(e,t){return t.replace(/(\r\n|\r|\n)/g,"<br>")}}),Tt.register("JQueryTextInjector").asCtor(function(n){this.inject=function(e,t){n.isInput(e)?e.val(t):e.text(t)},this.canInject=function(){return!0},this.retrieve=function(e){return n.isInput(e)?e.val():e.text()},this.adaptText=function(e,t){return t}}).dependencies("HtmlElementsDataProvider"),Tt.register("TextInjectorsProvider").asCtor(function(e,t,n){this.get=function(){return[n,t,e]}}).dependencies("JQueryTextInjector, CkEditorTextInjector, QuillTextInjector");var It=function(){function e(){this._overlayManager=Tt.get("OverlayManager"),this._uiUtils=Tt.get("UiUtils"),this._canDisplayOverlay=this._uiUtils.canDisplayOverlay()}return e.prototype.setUiObject=function(e){this._uiObject=e},e.prototype.setSettings=function(e){this._settings=e},e.prototype.getOverlay=function(){if(this._canDisplayOverlay&&this._settings.overlay){var e=this._settings.overlay.opct,t=this._settings.overlay.color;return this._overlay=this._overlay||this._overlayManager.create(this._uiObject,e,t),this._overlay}},e.prototype.removeOverlay=function(){this._canDisplayOverlay&&this._overlay&&this._overlay.remove()},e}();Tt.register("PopupUIUtil").asCtor(It).asProto(),Tt.register("GuidGenerator").asCtor(function(){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}this.generateGuid=function(e){var t=e?"":"-";return n()+n()+t+n()+t+n()+t+n()+t+n()+n()+n()}}),Tt.register("BalloonUtils").asCtor(function(l,n,t,u){var c=this;c.setStyleForBalloon=function(e,t,n){e.css("border",t.BalloonBorderWidth+"px solid "+t.BorderColor),c.fixGradientColorsInConfiguration(t,"Color"),c.fixGradientColorsInConfiguration(t,"BalloonColor2");var r=t.BalloonColor2!=undefined?t.BalloonColor2:t.Color,i=t.BalloonRadius!=undefined?t.BalloonRadius:15,o=i+"px";if(e.css("-moz-border-radius",o),e.css("-webkit-border-radius",o),e.css("border-radius",o),t.Color==r?e.css("background",t.Color):(e.css("background","-moz-linear-gradient(top, "+t.Color+", "+r+")"),e.css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+t.Color+"), color-stop(100%,"+r+"))"),e.css("background","-webkit-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","-o-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","-ms-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","linear-gradient(to bottom, "+t.Color+" 0%,"+r+" 100%)"),e.css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr='"+t.Color+"', endColorstr='"+r+"',GradientType=0 )"),-1==e.css("background-image").indexOf("gradient")&&(e.css("background-image","url('"+u.get()+"/player/resources/images/spacer.gif')"),e.css("background-repeat","repeat")),c.isGradientWithBorderRadiusCompatible()||e.css("border-radius","0px")),!n){var a="0px 0px";switch(parseInt(t.Position)){case l.POSITION_TYPE.Top:a="-3px -3px";break;case l.POSITION_TYPE.Right:a="4px -4px";break;case l.POSITION_TYPE.Bottom:a="4px 4px";break;case l.POSITION_TYPE.Left:a="-4px 4px"}var s=" 3px rgba(0, 0, 0, 0.2)";e.css("-moz-box-shadow",a+s),e.css("-webkit-box-shadow",a+s),e.css("box-shadow",a+s)}},c.fixGradientColorsInConfiguration=function(e,t){e[t]&&"transparent"!=e[t]||(e[t]=n.isIE()?"#00000000":"transparent")},c.isGradientWithBorderRadiusCompatible=function(){return!n.isIE(9,"lte")},c.fixConfiguration=function(e){return e.BalloonColor2=t.isDefined(e.BalloonColor2)?e.BalloonColor2:e.Color,e.ButtonBgColor2=t.isDefined(e.ButtonBgColor2)?e.ButtonBgColor2:e.ButtonBgColor,e.BalloonBorderWidth=t.isDefined(e.BalloonBorderWidth)?parseInt(e.BalloonBorderWidth):1,e.BalloonButtonRadius=t.isDefined(e.BalloonButtonRadius)?parseInt(e.BalloonButtonRadius):15,e.ButtonShadowWidth=t.isDefined(e.ButtonShadowWidth)?parseInt(e.ButtonShadowWidth):0,e.BalloonRadius=t.isDefined(e.BalloonRadius)?parseInt(e.BalloonRadius):15,e.FooterTextColor=t.isDefined(e.FooterTextColor)?e.FooterTextColor:e.HeaderColor,e}}).dependencies("Consts, HostData, CommonUtils, CdnServer"),Tt.register("ElementUtils").asCtor(function(n,r,i){function o(e){var t=e.document,n=mtjQuery(e);return n.left=function(){return r.getScrollOffset(t).Left+r.getWinOffset(e.document.body,top,"left")},n.top=function(){return r.getScrollOffset(t).Top+r.getWinOffset(e.document.body,top,"top")},n}this.getElementTagName=function(e){var t=e.tagName;return t.toUpperCase&&(t=t.toUpperCase()),t},this.getElementViewport=function(e){var t=n.getElementDocument(e);return o(i.getDocumentWindow(t))},this.getWindowViewport=function(){return o(window)}}).dependencies("CommonUtils, ScrollUtils, DocumentUtils"),Tt.register("DynamicFontSizeService").asCtor(function(i,o,e,t,a){var n=!1;this.resetLineHeight=function(e){var t=a.clone(e),r=t.children,n=i.getDictionaryKeys(r);return o.forEach(n,function(t){var e=i.getDictionaryKeys(r[t].attributes),n=o.filter(e,function(e){return"line-height"===e});o.forEach(n,function(e){delete r[t].attributes[e]})}),t},this.shouldResetLineHeight=function(e){return n&&t.isValueTrue(e.dynamicFontSize)},function(){n=e.isFeatureEnabled("enableDynamicFontSize")}.apply(null,arguments)}).asSingleton().dependencies("DictionaryUtils, ArrayUtils, FeaturesManager, CommonUtils, JsonUtils"),Tt.register("CleanObject").asInstance(function(t){if("object"==typeof t&&"[object Array]"!==Object.prototype.toString.call(t))return function e(t,n){for(var r in t)if(null===t[r]||t[r]===undefined)delete t[r];else if("[object Array]"===Object.prototype.toString.call(t[r]))0===t[r].length&&delete t[r];else if("[object String]"===Object.prototype.toString.call(t[r]))0===t[r].length&&delete t[r];else if("object"==typeof t[r]){if(_t<n)throw new Error("max object depth exceeded");t[r]=e(t[r],n+1),Et.isEmptyObject(t[r])&&delete t[r]}return t}(t,0);return t});var _t=10;Tt.register("DocumentUtils").asCtor(function(){this.getDocumentWindow=function(e){return e.parentWindow||e.defaultView}}),Tt.register("ScrollUtils").asCtor(function(a,n,s,l,u){var c=this;c.SCROLL_MODES={Animated:0,Normal:1,None:2},c.getScrollOffset=function(e){var t=a.getBody(e);return{Top:c.getScrollTop(e,t),Left:c.getScrollLeft(e,t)}},c.getScrollTop=function(e,t){return e.documentElement.scrollTop||t.scrollTop},c.getScrollLeft=function(e,t){return e.documentElement.scrollLeft||t.scrollLeft},c.jspScrollAttempt=function(e){var t=a.getJspParent(e),n=a.getClientjQuery();return!!t&&(n(t).data("jsp").scrollToElement(e,!0,!1),!0)},c.shouldScroll=function(e,t,n){return n!=s.STEP_TYPE.Popup&&t!=c.SCROLL_MODES.None&&"fixed"!=e.css("position")},c.shouldTryAnimateScroll=function(e,t,n){var r,i=l.isFeatureEnabled(s.FEATURES.AvoidCheckInIframe),o=t===c.SCROLL_MODES.Animated&&(r=n,1!=a.getSettingsValue(r,"scrollOld","0"));return i||(o=o&&!u.isInIframe(e)),o},c.isBalloonPositionVisibleRelativeToParents=function(e,t){return n.isBalloonPositionVisibleRelativeToParents(e,t)},c.getWinOffset=function(e,t,n){var r=Tt.get("PositionHelper");return l.isFeatureEnabled(s.FEATURES.FixIframeViewport)?r.getPosRelativeToWindow(e,t,!0)[n]:0}}).dependencies("CommonUtils, BalloonPositionVisibilityChecker, Consts,FeaturesManager, ElementInIframeIndicator"),Tt.register("CookieValueCalculator").asCtor(function(n){this.calculate=function(e){var t=n.getCookie(e);if(!1===t)return undefined;return t}}).dependencies("CookiesManager"),Tt.register("JQueryValueCalculator").asCtor(function(n){this.calculate=function(e){var t=n.getjQueryElementText(e);if(""===t)return undefined;return t}}).dependencies("JQueryElementFinder"),Tt.register("VariableValueCalculator").asCtor(function(t){this.calculate=function(e){return t.getWindowVar(e)}}).dependencies("CommonUtils"),Tt.register("LocalStorageValueCalculator").asCtor(function(t){this.calculate=function(e){return t?t.getItem(e):undefined}}).dependencies("LocalStorageService"),Tt.register("ValueCalculatorFactory").asCtor(function(t,n,r,i,o,a){this.get=function(e){switch(e){case n.VALUE_CALCULATOR_TYPE.JQuery:return i;case n.VALUE_CALCULATOR_TYPE.Cookie:return r;case n.VALUE_CALCULATOR_TYPE.Variable:return o;case n.VALUE_CALCULATOR_TYPE.LocalStorage:return a;default:t.error(new Error("Unknown calculation method"))}}}).dependencies("Logger, Consts, CookieValueCalculator, JQueryValueCalculator, VariableValueCalculator, LocalStorageValueCalculator"),Tt.register("CssClassesAppender").asCtor(function(){this.appendClasses=function(e,t){if(t)for(var n=0;n<t.length;n++)e.addClass(t[n])}}),Tt.register("ImageLoader").asCtor(function(o){this.getImageSize=function(e,t){var n,r=Et("<img />");function i(){var e={width:r[0].width,height:r[0].height};t(e),clearInterval(n),r.unbind("load")}r.on("load",i),r.attr("src",e),n=o.setWalkmeInterval(function(){r[0].width&&r[0].height&&i()},a)};var a=100}).dependencies("TimerManager"),Tt.register("focusableBalloonSelectors").asInstance({TITLE:".walkme-custom-balloon-title",CONTENT:".walkme-custom-balloon-content",ACTION_BUTTON:".walkme-custom-balloon-button",CLOSE_LINK:".walkme-custom-balloon-close-button"}),Tt.register("JawsAccessibilityUtil").asCtor(function(e,r,i){var o=this;o.init=function(){var n;e.isFeatureEnabled(t)&&(G.bind("LauncherIsShown",v),G.bind("show-end",y),n=window.walkme_event,window.walkme_event=function(e){if(n&&n(e),"BalloonCreated"==e.Type){var t=e.ExtraData.Element;!function(e){var t=g(i,e);S(e,t.selectors);var n=Et(t.elemWithContent);n.on("focus",function(){Et(this).addClass(s)}),n.on("blur",function(){Et(this).removeClass(s)});var r=Et(i.CLOSE_LINK,e);m(e,r),n.keyup(h),o.setFocus(n.first())}(t)}},Et.each(p,function(e,t){t.bindEvents()}))},o.register=function(e){p.push(e)};var u="alt",t="accessibility",a="body",s="walkme-accessibility",l=1,n=27,c=32,d={TITLE:".wm-title",CONTENT:".wm-template-text",ACTION_BUTTON:".wm-blue-btn",CLOSE_LINK:".wm-close-link",CLOSE_BUTTON:".wm-close-button"},f={TITLE:1,CONTENT:2,ACTION_BUTTON:3,CLOSE_LINK:7,CLOSE_BUTTON:8},p=[];function g(t,e){var n={elemWithContent:[],selectors:{}};for(var r in t)t.hasOwnProperty(r)&&Et(t[r]+":visible",e).each(function(){var e=Et(this);e.text()&&(n.selectors[r]=t[r],n.elemWithContent.push(e[0]))});return n}function h(e){e.keyCode===c&&(e.srcElement?e.srcElement:e.target).click()}function m(e,t){0<t.length&&Et(e).keyup(function(e){e.keyCode===n&&t.click()})}function v(e,t,n){var r,i,o,a,s=n.launcherDiv,l=s.attr("title");r=s,i=n.customText?n.customText:n.name,a=i,(o=l)&&(i?a+=". "+o:a=o),a&&r&&r.attr(u,a)}function y(e,t){if(t&&t._uiComponent&&t._uiComponent.UiComponentId==l){var n=Et("#wm-shoutout-"+t._uiComponent.Id),r=g(d,n),i=Et(r.elemWithContent);S(n,r.selectors),m(n,Et(d.CLOSE_BUTTON,n)),i.keyup(h),o.setFocus(i.first())}}function S(e,t){for(var n in e=e||Et(a),t)if(t.hasOwnProperty(n)){var r=Et(t[n],e);f?E(r,f[n]):E(r)}}function E(e,t){if(t===undefined)for(var n=0;n<e.length;n++)r.addTabIndex(e.eq(n),0);else for(n=0;n<e.length;n++)r.addTabIndex(e.eq(n),t+n)}o.setFocus=function(e){r.libSetTimeout(function(){e.focus()},800)}}).dependencies("FeaturesManager, CommonUtils,focusableBalloonSelectors"),Tt.register("Mapper").asCtor(function(){this.setIfDefined=function(e,t,n){if(t===undefined||null===t)return;e[n]=t}}),Tt.register("PromiseUtils").asCtor(function(){function a(e){return Et.when.apply(Et,e)}this.executePromiseChain=function(e,t){var n=Et.when(t);for(;e.length;){var r=e[0];n=n.pipe(r),e.splice(0,1)}return n},this.executeParallely=a,this.executeParallelyOnArray=function(e,t){if(!e||0==e.length)return Et.when();for(var n=[],r=0;r<e.length;r++){var i=e[r],o=t(i);n.push(o)}return a(n)}}),Tt.register("ConditionTreeUtils").asCtor(function(o){this.anyMatchesCondition=a,this.checkIfTreeContainsSelectedElement=function(e){return a(e,function(e){return"Func"==e.nodeType&&0==e.funcName.indexOf(t)})};var t="SelectedElement";function a(e,t){if(e&&e.Root&&(e=o.convert(e.Root)),!e||!e.nodeType)return!1;var n=t(e);if(n)return!0;var r=!1,i=!1;return e.leftSon&&(i=a(e.leftSon,t)),e.rightSon&&(r=a(e.rightSon,t)),i||r}}).dependencies("NewToOldConditionConverter"),Tt.register("DictionaryUtils").asCtor(function(){this.getDictionarySize=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},this.getDictionaryKeys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},this.getDictionaryValues=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},this.reverseDictionary=function(e){if(!e)return{};var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];i=n,n=isNaN(i)?n:parseFloat(n),t[r]=n}var i;return t}}),Tt.register("LocationService").asCtor(function(e,t,n){this.getUrlResourceName=function(){return e.remove(n.location.href)},this.getUrlLocation=function(e){return function(e){if(0==(e=t.decodeHtml(e,["&"])).length)return e;return"/"==e.charAt(0)?n.location.protocol+"//"+n.location.hostname+(n.location.port?":"+n.location.port:"")+e:e}(e)},this.getCurrentLocation=function(){return n.location.href},this.getCurrentUrlPath=function(){return n.location.pathname}}).dependencies("UrlCommonStringsRemover, HtmlDecoder, win"),Tt.register("RedirectService").asCtor(function(i,n,o,a){function r(e){var t=o.getUrlResourceName(),n=o.getUrlLocation(e);n=a.remove(n);var r=t.split("#"),i=n.split("#");return 1<i.length&&(1<r.length?r[0]==i[0]&&r[1]!=i[1]:r[0]==i[0])}this.redirect=function(e){var t=r(e);return n.location=o.getUrlLocation(e),t},this.canRedirect=function(e,t){if(!i.isValidUrl(e))return!1;var n=o.getUrlResourceName(),r=o.getUrlLocation(e);return r=a.remove(r),t||n!=r},this.isUrlDifferentFromCurrentOnlyInHash=r}).dependencies("CommonUtils, win, LocationService, UrlCommonStringsRemover"),Tt.register("UrlCommonStringsRemover").asCtor(function(){this.remove=function(e){"/"==(e=(e=(e=e.replace("http://","")).replace("https://","")).replace("www.","")).charAt(e.length-1)&&(e=e.substr(0,e.length-1));return e}}),Tt.register("UrlComparePreparer").asCtor(function(t,n,r,i){function o(e){return n.decodeHtml(e,["&"])}function a(e){var t=r.send(i.EVENTS.BeforeUsingUrl,{url:e});return t===undefined&&(t=e),t}this.processUserUrl=function(e){return t.remove(o(a(e)).toLowerCase())},this.processSiteUrl=function(e){return t.remove(a(e).toLowerCase())},this.processUserUrlForLike=function(e){return t.remove(o(a(e)))},this.processUserUrlForRegex=function(e){return e.regexText=a(e.regexText),e},this.processSiteUrlForLikeOrRegex=function(e){return t.remove(e)}}).dependencies("UrlCommonStringsRemover, HtmlDecoder, MessageSender, Consts"),Tt.register("Stack").asCtor(function(){var t;function e(e){t=e||[]}function n(){return 0==r()}function r(){return t?t.length:0}this.init=e,this.peek=function(){return n()?null:t[t.length-1]},this.pop=function(){return t.pop()},this.push=function(e){t.push(e)},this.clear=function(){e()},this.isEmpty=n,this.length=r,this.getAll=function(){return t},e()}).asProto(),Tt.register("DisabledElementsRemover").asCtor(function(){this.remove=function(e,t){if(!e)return;var n=e.length;for(;0<n--;){var r=e[n];t(r)&&e.splice(n,1)}}}),Tt.register("PlayGuidGenerator").asCtor(function(n){this.generateNewPlayGuid=function(e){var t=n.generateGuid();return t=(new Date).getTime()+"-"+e+"-"+t}}).dependencies("GuidGenerator"),Tt.register("DevModeAlertRaiser").asCtor(function(n,d,f,r,i,p){var g="-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;";function o(e,t,n){var r,i,o,a,s,l="position: fixed !important;top: 3px !important;left: 30px !important;width: auto !important;max-width: 50px;height: 20px !important;padding: 4px !important;border: none !important;border-radius: 10px !important;margin: 0 !important;box-sizing: content-box !important;font-family: Verdana, sans-serif !important;font-size: 14px !important;line-height: 21px !important;opacity: 0.7;overflow: hidden !important;white-space: nowrap !important;cursor: pointer !important;transition: all 400ms !important;"+(e===d.PLATFORM.MobileWeb?g:""),u="<div id='walkme-dev-mode-alert' class='walkme-to-remove' style='"+l+"z-index: {{{popupBalloonZindex}}} !important; background-color: {{{backgroundColor}}} !important;'><span id='walkme-env-wrapper' style='pointer-events: none !important;'>{{{env}}}</span><span id='walkme-message-wrapper' style='display: none !important; pointer-events: none !important;'> - {{{message}}}</span></div>";r=u,i=t,o=n,a=p.to_html(r,{popupBalloonZindex:d.POPUP_BALLOON_Z_INDEX,backgroundColor:function(e){var t;switch(e=e.toLowerCase()){case"dev":t="lightblue";break;case"qa":t="red";break;case"test":t="yellow";break;case"local":t="lightgreen";break;default:t="pink"}return t}(walkme_lib_notify_ServerName),message:i,env:o}),s=f.getTopContainer(null,!0),mtjQuery("#walkme-dev-mode-alert",s).remove(),s.append(a);var c=y();c.mouseenter(v),c.mouseleave(m),c.click(h),e===d.PLATFORM.MobileWeb&&(c.touchstart(v),c.touchend(m))}function h(){var e=y()[0],t=e.style.left;t?(e.style.left="",e.style.right=t):(e.style.left=e.style.right,e.style.right="")}function m(){var e=y()[0];e.style["max-width"]="50px",e.style.opacity="0.7",e.children[1].style.display="none"}function v(){var e=y()[0];e.style["max-width"]="1100px",e.style.opacity="1",e.children[1].style.display="inline"}function y(){return mtjQuery("#walkme-dev-mode-alert")}this.devModeAlert=function(){var e=Tt.get("ExternalWalkMeConfig").get("platform"),t="Lib on "+walkme_lib_notify_ServerName+": "+i.SVNRevision;window.walkme_lib_version&&(t+=", Version: "+walkme_lib_version);window.walkme_lib_upload_date&&(t+=", Uploaded On: "+walkme_lib_upload_date);window.walkme_lib_uploader&&(t+=", By: "+walkme_lib_uploader);if(r.isQuirksMode())return void n.customerLog(t,5);o(e,t,walkme_lib_notify_ServerName)}}).dependencies("Logger, Consts, TopContainerProvider, HostData, Lib, Mustache"),Tt.register("getTopContainer").dependencies("TopContainerProvider").asFunction(function(e){return e.getTopContainer}),Tt.register("TopContainerProvider").asCtor(function(o,a,s,l,u,c){function i(e,t,n){var r,i;return 0!=(r=t?t.parents(e):u.isFeatureEnabled(c.FEATURES.ShadowRootsInspector)?mtjQuery(document.getElementsByTagName(e)):mtjQuery(e)).length&&"FRAMESET"!=(i=r[0],l.getElementTagName(i))||(r=t?t.parents("html"):n||!a.shouldHandlePageAsFramesets()?mtjQuery("html"):mtjQuery(e,s.getFrameContents(mtjQuery(o.getBiggestFrame())))),r}this.getTopContainer=function(e,t,n){var r;n&&(r=i(n,e,t));r&&r.length||(r=i("body",e,t));return r}}).dependencies("BiggestFrameProvider, FramesetsUtils, FrameContentsProvider, ElementUtils, FeaturesManager, Consts"),Tt.register("HtmlDecoder").asCtor(function(y){this.decodeHtml=function(e,t){var n,r={"&amp;":"&","&apos;":"'","&#39;":"'","&quot;":'"',"&lt;":"<","&gt;":">"},i=[],o=0,a=0,s=0;for(;o<e.length;){if(n=!1,"&"==e.charAt(o)){var l=e.substring(o,o+6).toLowerCase(),u=r[l];s=u?6:s;var c=e.substring(o,o+5).toLowerCase(),d=r[c];s=d?5:s;var f=e.substring(o,o+4).toLowerCase(),p=r[f];s=p?4:s;var g=p||d||u,h=-1!=y.inArray(g,t);if(g&&h){var m=e.substring(a,o);i.push(m),i.push(g),a=o+=s,n=!0}}n||o++}var v=e.substring(a,o);return i.push(v),i.join("")}}).dependencies("ArrayUtils"),Tt.register("FacebookCanvasIndicator").asCtor(function(){this.isInFacebookCanvas=function(){try{if(FB._inCanvas&&FB.Canvas.getPageInfo)return 1!=window.walkme_dont_use_fb_scroll}catch(e){return!1}}}),Tt.register("LocationMatcher").asCtor(function(i,o,a){this.isLocationMatchString=function(e){var t,n;if(a.startsWith(e,"regexp:")){e=e.substr("regexp:".length),n=o.getCurrentLocation();try{t=n.match(e)}catch(r){return!1}}else{e=(e=e.replace(new RegExp("[*]","g"),".*")).replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),n=o.getUrlResourceName(),e=i.remove(e),n=n.toLowerCase(),e=e.toLowerCase();try{t=n.match(e)}catch(r){return!1}}return null!=t&&t[0]==n}}).dependencies("UrlCommonStringsRemover, LocationService, StringUtils"),Tt.register("StringUtils").asCtor(function(){this.startsWith=function(e,t){return 0==e.indexOf(t)},this.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)+t.length==e.length},this.formatString=function(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t]||"")}return e}}),Tt.register("Throttle").asInstance(function(t,n){var r=0;return function(){var e=(new Date).getTime();r<=e-n&&(r=e,t.apply(null,arguments))}}),Tt.register("ActionsFactory").asCtor(function(a,s,i,l,u,c,d,f,p){this.get=function(e,t,n,r){return new(o[e]||o.none)(t||{},n,r)},this.addActions=function(e){Et.extend(o,e)};var o={none:function(e){this.Type=s.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){}},playBf:function(r,i,o){this.isValid=function(){return!0},this.Type=s.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){var e=r&&r.playBfFromBeginning?undefined:r.NodeId;try{l.activateById(r.bfId,{type:i,objectId:o.Id},e)}catch(n){var t=p.formatString("Failed playing BizFlow with id {0} starting from step {1}. Exception is: {2}",r.bfId,e,f.toJSON(n));d.customerLog(t)}}},openMenu:function(e,t,n){this.Type=s.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{window.WalkMePlayerAPI!=undefined&&WalkMePlayerAPI.toggleMenu(r(t,n))}catch(e){d.customerLog(p.formatString("Failed opening menu. Exception: {0}",f.toJSON(e)))}}},playContent:function(r,i,o){this.isValid=function(){return!0},this.Type=s.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var e=r.contentId;WalkMeAPI.startContentById(e,i,o.Id)}catch(n){var t=p.formatString("Failed playing content with id {0}. Exception is: {1}",r.wtId,f.toJSON(n));d.customerLog(t)}}},playSurvey:function(i,o,a){this.isValid=function(){return!0},this.Type=s.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var e=i.surveyId,t={type:o,objectId:a?a.Id:undefined};WalkMeAPI.startSurveyById(e,t)}catch(r){var n=p.formatString("Failed playing survey with id {0}. Exception is: {1}",i.surveyId,f.toJSON(r));d.customerLog(n)}}},shoutOut:function(t,n,r){this.Type=s.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){try{Tt.get("ShoutOutsManager").activateById(t.id,{type:n,objectId:r.Id})}catch(e){d.customerLog(p.formatString("Failed playing deployable with id {0}. Exception is: {1}",t.wtId,f.toJSON(e)))}}},destroy:function(e){this.isValid=function(){return!0},this.doAction=function(){e&&e.uiComponent&&e.uiComponent.destroy()},this.Type=s.DEPLOYABLE_ACTION_TYPES.Close},playShuttle:function(i,o,a){this.isValid=function(){return!0},this.doAction=function(){try{var e={type:o};a&&(e.objectId=a.Id);var t=i.shuttleId;c.get(s.DEPLOYABLE_TYPE.Shuttle).activateById(t,e)}catch(r){var n=p.formatString("Failed playing shuttle with id {0}. Exception is: {1}",i.wtId,f.toJSON(r));d.customerLog(n)}},this.Type=s.DEPLOYABLE_ACTION_TYPES.Action},remindMeNextDay:function(e,t,n){this.doAction=function(){var e=new Date;e.setDate(e.getDate()+1),g(e,t,n)},this.Type=s.DEPLOYABLE_ACTION_TYPES.RemindMeLater},remindMeNextTime:function(e,t,n){this.doAction=function(){g(new Date,t,n)},this.Type=s.DEPLOYABLE_ACTION_TYPES.RemindMeLater},openTeachMe:function(e,t,n){this.Type=s.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{window.TeachMePlayerAPI!=undefined&&TeachMePlayerAPI.toggleMenu(r(t,n))}catch(e){d.customerLog(p.formatString("Failed opening TeachMe menu. Exception: {0}",f.toJSON(e)))}}},checkMyForm:function(r,e,t){this.isValid=function(){return!0},this.Type=s.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var e=i.getSetManagerById(r.businessSolutionId);e?e.turnOnWithImmediateValidations():d.customerLog("Failed to run set's validation. No set for Id : "+r.businessSolutionId)}catch(n){var t=p.formatString("Failed to run set's validations",r.businessSolutionId,f.toJSON(n));d.customerLog(t)}}}};function r(e,t){var n={type:e};if(t){n.objectId=t.Id;var r=t.Settings.action;n.collectionId=r&&r.arguments&&r.arguments.collectionId}return n}function g(e,t,n){var r=u.map(t),i=a.keysConfig.remindMeLater.remindMeLater.key+"-"+r+"-"+n.Id,o={expiry:e.getTime()};a.saveData(i,f.toJSON(o),s.ONE_YEAR_SECONDS)}}).dependencies("ClientOrServerStorageManager, Consts, SmartTipSetsManager, BusinessSolutionsManager, InitiatorTypeToDeployableTypeMapper, DeployablesManagerFactory, Logger, JsonUtils, StringUtils"),Tt.register("PropertyUtils").asCtor(function(e,r,t,a,n){var s=this;function i(e){var t=e.properties().hasProperty(r.UI_PROPERTIES.Visible);return n.isFeatureEnabled("displayOnlyInSearch")&&(t=t&&!e.properties().hasProperty(r.UI_PROPERTIES.DisplayOnlyInSearch)),t}s.isGroup=function(e){return!!e&&e.LinkedDeployables!==undefined},s.isCollection=function(e){return e&&e.deployableType==r.DEPLOYABLE_TYPE.Collection},s.isSearchEnabled=function(){var e=t.get();return e.Settings&&Number(e.Settings.search)},s.hasChildren=function(e){for(var t=e.LinkedDeployables,n=0;n<t.length;n++){var r=a.get(t[n].DeployableType),i=r.getById(t[n].DeployableID),o=s.isGroup(i)?s.hasChildren(i):i;if(o)return!0}return!1},s.hasVisibleChildren=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(i(r))return!0}return!1},s.supportsDeployableType=function(e,t){var n=e.Settings,r=n&&n.DeployableTypes;return!(!r||-1==mtjQuery.inArray(t+"",e.Settings.DeployableTypes))},s.hasUncompletedChildren=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._typeId===r.DEPLOYABLE_TYPE.Category){if(s.hasUncompletedChildren(n._children))return!0}else if(i(n)&&!n.properties().hasProperty(r.UI_PROPERTIES.Completed))return!0}return!1},s.isTab=function(e){var t=e.Settings;return t&&t.DeployableTypes},s.isTasksTab=function(e){return s.isGroup(e)&&s.supportsDeployableType(e,r.DEPLOYABLE_TYPE.Task)},s.isHelpTab=function(e){return s.isGroup(e)&&s.supportsDeployableType(e,r.DEPLOYABLE_TYPE.Tutorial)},s.isCourse=function(e){return e&&e.deployableType==r.DEPLOYABLE_TYPE.Course}}).dependencies("Lib, Consts, SiteConfigManager, DeployablesManagerFactory, FeaturesManager"),Tt.register("PropertiesFactory").asCtor(function(n,r,i,o,a,s,e,l){var u,c;this.generateAll=function(e){var t=[new At(e,s,i),new Lt(e,n,r,i,o,a,u),new xt(e,i,a,s),new kt(e,i,a),new Nt(e,i,s),new Dt(e,i),new Ot(e,i)];return c&&(t=t.concat(new Ft(e,i,s,l))),t},u=e.wrapCustomerLog("showWidget"),xt._tasksManager=s.get(i.DEPLOYABLE_TYPE.Task),c=n.isFeatureEnabled("displayOnlyInSearch")}).dependencies("FeaturesManager, CommonEvents, Consts, ShowInMenuCheckerFactory, SiteConfigManager, DeployablesManagerFactory, Logger, ArrayUtils");var Pt=function(){function e(e){this.logger=null,this.lib=null,this.deployable=null,this.isLoaded=!1,this.properties=[],this.propertyNames=[],this.utils=null,this.children=[],this.lib=e.lib,this.deployable=e.deployable,this.utils=e.utils,this.children=e.children}return e.prop=function(e){return e.toLowerCase()},e.prototype.getAll=function(){return this.isLoaded||this.load(),this.properties},e.prototype.hasProperty=function(e,t){return!t&&this.isLoaded||this.load(),-1!=Et.inArray(e,this.properties)},e.prototype.load=function(){this.isLoaded=!0},e.prototype.clear=function(){this.properties=[],this.isLoaded=!1},e.prototype.generateSingle=function(e,t){var n=t?[e]:[];this.properties=n},e.prototype.canGenerate=function(e){return-1!=Et.inArray(e,this.propertyNames)},e}(),At=function(r){function e(e,t,n){r.call(this,e),this.deployablesManagerFactory=t,this.consts=n,this.propertyNames=[]}return Ie(e,r),e.prototype.load=function(){var e=this.deployable.Settings;if(this.properties=[],e&&e.DeployableTypes){for(var t=0;t<e.DeployableTypes.length;t++){var n=this.deployablesManagerFactory.get(e.DeployableTypes[t]).name();n||parseInt(e.DeployableTypes[t])!==this.consts.DEPLOYABLE_TYPE.Tutorial||(n="walkthru"),this.properties.push(Pt.prop("contains-"+n))}r.prototype.load.call(this)}},e}(Pt),kt=function(r){function e(e,t,n){r.call(this,e),this.consts=t,this.siteConfigManager=n,this.propertyNames=[t.UI_PROPERTIES.Search,t.UI_PROPERTIES.SearchProviders]}return Ie(e,r),e.prototype.load=function(){var e=[];this.utils.isTab(this.deployable)&&this.utils.supportsDeployableType(this.deployable,this.consts.DEPLOYABLE_TYPE.Tutorial)&&(e.push(Pt.prop(this.consts.UI_PROPERTIES.Search)),this.isSearchEnabled()&&e.push(Pt.prop(this.consts.UI_PROPERTIES.SearchProviders))),this.properties=e,r.prototype.load.call(this)},e.prototype.isSearchEnabled=function(){var e=this.siteConfigManager.get();return e.Settings&&Number(e.Settings.search)},e}(Pt),Dt=function(n){function e(e,t){n.call(this,e),this.consts=t,this.propertyNames=[t.UI_PROPERTIES.Default]}return Ie(e,n),e.prototype.load=function(){je.isTrue(this.deployable.Settings,this.consts.UI_PROPERTIES.Default,!1)&&this.utils.hasUncompletedChildren(this.children)&&this.generateSingle(this.consts.UI_PROPERTIES.Default,!0),n.prototype.load.call(this)},e}(Pt),Nt=function(r){function i(e,t,n){r.call(this,e),this.consts=t,this.deployablesManagerFactory=n,this.propertyNames=[i._videoProperty,i._articleProperty]}return Ie(i,r),i.prototype.load=function(){if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Content){var e=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.Content).types();switch(this.deployable.Type){case e.Video:this.generateSingle(i._videoProperty,!0);break;case e.Article:this.generateSingle(i._articleProperty,!0)}}r.prototype.load.call(this)},i._videoProperty=Pt.prop(Tt.get("Consts").UI_PROPERTIES.Video),i._articleProperty=Pt.prop(Tt.get("Consts").UI_PROPERTIES.Article),i}(Pt),Ot=function(n){function e(e,t){n.call(this,e),this.consts=t,this.propertyNames=[t.UI_PROPERTIES.Accessible]}return Ie(e,n),e.prototype.load=function(){var e=!this.utils.isTab(this.deployable);this.generateSingle(this.consts.UI_PROPERTIES.Accessible,e),n.prototype.load.call(this)},e}(Pt),xt=function(i){function n(e,t,n,r){i.call(this,e),this.consts=t,this.siteConfigManager=n,this.deployablesManagerFactory=r,this._parentType=e.parentType,this._isLmsDeployable=this._parentType==t.DEPLOYABLE_TYPE.Course||this._parentType==t.DEPLOYABLE_TYPE.Lesson,this._parentId=e.parentId,this.propertyNames=[t.UI_PROPERTIES.Completed,t.UI_PROPERTIES.StrikedOut,t.UI_PROPERTIES.Uncompleted,t.UI_PROPERTIES.Active,t.UI_PROPERTIES.Inactive,t.UI_PROPERTIES.Phantom,t.UI_PROPERTIES.ProgressBar]}return Ie(n,i),n.prototype.load=function(){this._isLmsDeployable?this.handleLmsCompletion():this.handleTaskCompletion(),i.prototype.load.call(this)},n.prototype.handleLmsCompletion=function(){Tt.get("LmsCompletionManager").isCompleted(this.deployable.deployableType,this.deployable.Id,this._parentType,this._parentId)?this.generateSingle(this.consts.UI_PROPERTIES.Completed,!0):this.generateSingle(this.consts.UI_PROPERTIES.Uncompleted,!0)},n.prototype.handleTaskCompletion=function(){var e=[];if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Task){var t=n._tasksManager.isTaskCompleted(this.deployable);this.handleCompletionProperties(e,t),this.handleActiveProperties(e,t),this.handlePhantomTask(e,this.deployable.Settings)}else this.utils.isTasksTab(this.deployable)&&e.push(Pt.prop(this.consts.UI_PROPERTIES.ProgressBar));this.properties=e},n.prototype.handleCompletionProperties=function(e,t){if(t){e.push(Pt.prop(this.consts.UI_PROPERTIES.Completed));var n=this.siteConfigManager.get();Number(n.TodoListSettings.strikeOutCompletedTasks)&&e.push(Pt.prop(this.consts.UI_PROPERTIES.StrikedOut))}else e.push(Pt.prop(this.consts.UI_PROPERTIES.Uncompleted))},n.prototype.handleActiveProperties=function(e,t){this.isActive(t)?e.push(Pt.prop(this.consts.UI_PROPERTIES.Active)):e.push(Pt.prop(this.consts.UI_PROPERTIES.Inactive))},n.prototype.isActive=function(e){var t=n._tasksManager.isTaskActive(this.deployable);return e&&!this.shouldPlayAfterCompletion()&&(t=!1),t},n.prototype.shouldPlayAfterCompletion=function(){var e=this.siteConfigManager.get();return Number(e.TodoListSettings.allowPlayAfterCompletion)},n.prototype.handlePhantomTask=function(e,t){t.Phantom&&e.push(Pt.prop(this.consts.UI_PROPERTIES.Phantom))},n}(Pt),Lt=function(s){function l(e,t,n,r,i,o,a){s.call(this,e),this.featuresManager=t,this.commonEvents=n,this.consts=r,this.showInMenuCheckerFactory=i,this.siteConfigManager=o,this.customerLog=a,this.propertyNames=[l._visiblePropertyName,l._invisiblePropertyName]}return Ie(l,s),l.prototype.load=function(){var e=!0;this.checkTasksCondition(this.deployable)&&this.checkDisplayCondition(this.deployable)||(e=!1),e&&this.utils.isGroup(this.deployable)&&(e=this.getGroupVisibility(this.deployable,this.children)),this.generateVisibleProprty(e),s.prototype.load.call(this)},l.prototype.getGroupVisibility=function(e,t){return this.utils.isTab(e)?this.getTabVisibility(e,t):this.utils.isCourse(e)?this.getCourseVisibility(e,t):this.utils.hasVisibleChildren(e,t)},l.prototype.getCourseVisibility=function(e,t){var n=this.utils.hasVisibleChildren(e,t),r=!!e.Quiz;return n||r},l.prototype.getTabVisibility=function(e,t){var n;this.featuresManager.isFeatureEnabled("dontShowTabsWithNoVisibleChildren")?n=this.utils.hasVisibleChildren(e,t):n=this.doesSupportSearchProviders(e)||this.utils.hasChildren(e);return n||(this.utils.isTasksTab(e)&&this.customerLog("Show widget - not showing tasks tab because there are no tasks and the tab doesn't support search.",2),this.utils.isHelpTab(e)&&this.customerLog(je.formatString("Show widget - not showing tab named {0} because there are no children and the tab doesn't support search.",this.deployable.Name),2)),n},l.prototype.generateVisibleProprty=function(e){e?this.generateSingle(l._visiblePropertyName,!0):this.generateSingle(l._invisiblePropertyName,!0)},l.prototype.doesSupportSearchProviders=function(e){var t=!1;return this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Tutorial)&&this.utils.isSearchEnabled()&&(t=!0),t},l.prototype.checkTasksCondition=function(e){var t=!0,n=this.siteConfigManager.get().TodoListSettings,r=this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Task);return n&&(r?(t=this.hasUncompletedChildren(n)&&1==n.isActive)&&(t=this.checkCondition(n)):this.utils.isCollection(e)&&1==n.showOnlyTasksTab&&(t=!1)),t},l.prototype.checkCondition=function(e){var t=e.activateCondition,n=!0;return t&&((n=Tt.get("ConditionTreeEvaluator").evaluate(t))||this.customerLog("Show widget - not showing tasks tab because it was segmented out by a condition in todo list settings.",2),this.commonEvents.deprecatedRaiseEvent(this.consts.EVENTS.TasksConditionEvaluated,this.siteConfigManager.get())),n},l.prototype.hasUncompletedChildren=function(e){if(e.hideComplete&&parseInt(e.hideComplete)){var t=this.utils.hasUncompletedChildren(this.children);return t||this.customerLog("Show widget - not showing tasks tab because all tasks are completed",2),t}return!0},l.prototype.checkDisplayCondition=function(e){return this.showInMenuCheckerFactory.getDisplayConditionCheckerFunc(e.deployableType)(e)},l._visiblePropertyName=Pt.prop(Tt.get("Consts").UI_PROPERTIES.Visible),l._invisiblePropertyName=Pt.prop(Tt.get("Consts").UI_PROPERTIES.Invisible),l}(Pt),Ft=function(o){function e(e,t,n,r){var i=o.call(this,e)||this;return i.consts=t,i.deployablesManagerFactory=n,i.arrayUtils=r,i.propertyNames=[t.UI_PROPERTIES.DisplayOnlyInSearch],i._parentType=e.parentType,i._parentId=e.parentId,i}return Ie(e,o),e.prototype.getParentDeployable=function(){var e=this.deployablesManagerFactory.get(this._parentType);return e?e.getById(this._parentId):undefined},e.prototype.load=function(){var e=!1;if(this._parentType&&this._parentId&&!this.utils.isGroup(this.deployable)){var t=this.deployable.Id,n=this.getParentDeployable();if(n&&n.LinkedDeployables){var r=this.arrayUtils.filter(n.LinkedDeployables,function(e){return e.DeployableID===t&&e.Settings})[0];e=r&&r.Settings.displayOnlyInSearch,this.generateSingle(this.consts.UI_PROPERTIES.DisplayOnlyInSearch,e)}}o.prototype.load.call(this)},e}(Pt),Mt=function(){function e(e,t,n,r){this._lib=e,this._propertyUtils=t,this._propertiesFactory=n,this._deployable=r.deployable,this._deployableChildren=r.deployableChildren,this._parentType=r.parentType,this._parentId=r.parentId,this.createNewProperties()}return e.prototype.getAll=function(){var t=this,n=[];return this._lib.wrapFESession(function(){for(var e=0;e<t._properties.length;e++)n=n.concat(t._properties[e].getAll())}),n},e.prototype.clearCache=function(){for(var e=0;e<this._properties.length;e++)this._properties[e].clear()},e.prototype.hasProperty=function(e,t){for(var n=0;n<this._properties.length;n++)if(this._properties[n].canGenerate(e)&&this._properties[n].hasProperty(e,t))return!0;return!1},e.prototype.createNewProperties=function(){var e={lib:this._lib,deployable:this._deployable,logger:{},children:this._deployableChildren,utils:this._propertyUtils,parentType:this._parentType,parentId:this._parentId};this._properties=this._propertiesFactory.generateAll(e)},e}();Tt.register("PropertiesGeneratorFactory").asCtor(function(t,n,r){this.create=function(e){return new Mt(t,n,r,e)}}).dependencies("Lib,PropertyUtils,PropertiesFactory");var Rt=function(){function e(e){var t=e.id;this._type=e.type,this._typeId=e.typeId,this._id=t,this._description=e.description,this._children=e.childNodes,this._name=e.name,this._propertiesGenerator=e.propertiesGenerator,this._keywords=e.keywords?e.keywords:[];var n=e.activateFunction;this.activate=function(e){n(t,e)}}return e.prototype.children=function(){return this._children},e.prototype.properties=function(e){return e&&this._propertiesGenerator.clearCache(),this._propertiesGenerator},e.prototype.type=function(){return this._type.toLowerCase()},e.prototype.typeId=function(){return this._typeId},e.prototype.name=function(){return this._name},e.prototype.id=function(){return this._id},e.prototype.description=function(){return this._description||""},e.prototype.keywords=function(){return this._keywords},e}();Tt.register("DeployableTreeNodeCreator").asInstance(function(e){return new Rt(e)}),Tt.register("DeployableTreeNodeFactory").asCtor(function(t,r,e,a,s,i){function l(n){return e({typeId:n.deployable.deployableType,type:n.deployableManager.name(),id:n.deployable.Id,activateFunction:function(e,t){n.deployableManager.activateById(e,t)},description:n.deployable.Description,childNodes:n.children,name:n.deployable.Name,propertiesGenerator:n.propertiesGenerator,keywords:function(e){switch(e.deployableType){case t.DEPLOYABLE_TYPE.BusinessSolution:return e.KeyWords?r.secureEvalJSON(i.decodeHtml(e.KeyWords,['"'])):[];default:return e.Keywords}}(n.deployable)})}this.generate=function(e,t,n){var r=s.get(e.deployableType),i={deployable:e,deployableChildren:t};n&&(i.parentType=n.deployableType,i.parentId=n.Id);var o=a.create(i);return l({deployable:e,deployableManager:r,children:t,propertiesGenerator:o})}}).dependencies("Consts, JsonUtils, DeployableTreeNodeCreator, PropertiesGeneratorFactory, DeployablesManagerFactory, HtmlDecoder"),Tt.register("UiDataProvider").asCtor(function(t,n,r,e,i,o){this.uiObjectsTree=function(){var e=s(u(a));return o.raiseEvent(t.EVENTS.UIObjectsTreeCreated,{uiObjectsTree:e}),e},this.uiTasksTree=function(){return s(e.filter(u(a),l))};var a=t.DEPLOYABLE_TYPE.Collection;function s(e){return n.generate(e)}function l(e){return i.supportsDeployableType(e,t.DEPLOYABLE_TYPE.Task)}function u(e){for(var t=r.get(e).getAll(),n=0;n<t.length;n++)t[n].deployableType=e;return t}}).dependencies("Consts, ObjectsTreeGenerator, DeployablesManagerFactory, ArrayUtils, PropertyUtils, CommonEvents"),Tt.register("ObjectsTreeGenerator").asCtor(function(s,i){function l(e){if(!e.LinkedDeployables)return null;for(var t=[],n=e.LinkedDeployables,r=0;r<n.length;r++){var i=o(n[r].DeployableType,n[r].DeployableID);i&&t.push(i)}return t}function o(e,t){var n=i.get(e),r=n.getById(t);return r&&(r.deployableType=e),r}this.generate=function(t){return n=t,n&&n.sort(function(e,t){return e.OrderIndex-t.OrderIndex}),function e(t,n){if(t){for(var r=[],i=0;i<t.length;i++){var o=l(t[i]),a=e(o,t[i]);r.push(s.generate(t[i],a,n))}return r}}(t,null);var n}}).dependencies("DeployableTreeNodeFactory, DeployablesManagerFactory"),Tt.register("ObjectTreePercentageCalculator").asCtor(function(l,u){function n(e,t){var n,r,i,o=l.getTree(e,t),a=(n=o,Et.grep(n,function(e){return u.customerLog("ObjectTreePercentageCalculator - Task "+e.id()+" completed: "+c(e),4),c(e)})),s=a&&a.length||0;return{completedPercent:(r=s,i=o.length,0<i?Math.round(100*r/i):0),completedTasks:a,visibleTasks:o}}function c(e){return e.properties().hasProperty("completed")}this.calculate=function(e,t){return n(e,t).completedPercent},this.getCompletionData=n}).asProto().dependencies("VisibleObjectTree, Logger");var Bt=function(r){function e(e,t){var n={deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Category};r.call(this,n),this._name="Category"}return Ie(e,r),e}(Ge);Tt.register("CategoriesManager").asCtor(Bt).dependencies("Lib, Consts");var Ut=function(w){function e(e,t,n,r,i,o,a,s,l,u,c,d,f,p,g,h,m,v,y){var S=this;w.call(this,{lib:e,type:t.DEPLOYABLE_TYPE.Task}),this.consts=t,this.siteConfigManager=n,this.recorderServerManager=r,this.clientStorageManager=i,this.logger=o,this.walkMeInfo=a,this.contentsManager=s,this.commonEvents=l,this.auditTasksManager=u,this.deployablesManagerFactory=c,this.dictionaryUtils=d,this.conditionCheckerFactory=f,this.settingsValuesRetriever=p,this.arrayUtils=g,this.conditionTreeEvaluator=h,this._todoListDataSynchronizer=m,this.featuresManager=v,this.jsonUtils=y,this._name="Task",this.customerLog=_makeTutorial.Logger.wrapCustomerLog(t.TASKS.LOG_FEATURE),this._isPreviewMode=a.getEnvironmentId()==t.SOURCES.preview,this._isPlayMode=a.getEnvironmentId()==t.SOURCES.play,this._siteConfig=n.get();var E=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition),T=r.get();this._endUserId=e.getEndUserId(),this._logError=o.error,this.setDeployables([]),this.customerLog('Initializing TodoListManager (isActive: "'+E+'", serverAddress: "'+T+'", userGuid: "'+a.getUserGuid()+'", endUserId: "'+this._endUserId+'")',3),window.walkMeRemoveTasksData&&(i.removeData(this._todoListDataSynchronizer.getEndUserUniqueDataKey(this._endUserId)),window.walkMeRemoveTasksData=!1),s.onActivated(function(e,t){S.updateDeployableCompleted(e,t)})}return Ie(e,w),e.prototype.init=function(){this._todoListDataSynchronizer.init(this._endUserId,this.getTaskGoalsIds(this.deployablesDict))},e.prototype.setDeployables=function(e){if(e){w.prototype.setDeployables.call(this,e);var t=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition);t=t&&e&&0<e.length,this.setActiveState(t),this.removeInvalidTasks()}},e.prototype.activateById=function(e,t){var n=this.getById(e),r=this.deployablesManagerFactory.get(n.RelatedDeployableType);try{(t=t||{type:this.consts.STEP_PLAY_INITIATOR_ENUM.NONE}).objectId=t.id==undefined?t.objectId:t.id,this.auditTasksManager.auditTaskPlayed(n,t)}catch(o){this._logError(o)}var i={type:this.consts.STEP_PLAY_INITIATOR_ENUM.TASK,objectId:e};r.activateById(n.RelatedDeployableId,i)},e.prototype.getById=function(e){var t=w.prototype.getById.call(this,e);return t&&this.validateTask(t)?t:undefined},e.prototype.isTaskCompleted=function(e){var t=this.getCompletedTasks();return!!t&&-1<this.arrayUtils.inArray(e.Id,t)},e.prototype.isTaskConditionsPassed=function(e){var t=!0;switch(e.RelatedDeployableType){case this.consts.DEPLOYABLE_TYPE.Tutorial:if(e.RelatedDeployableId){var n=Tt.get("WalkthrusContainer").getWalkthruById(e.RelatedDeployableId);t=_makeTutorial.canShowTutorial(n)}}return t},e.prototype.isTaskActive=function(e){var t=e.Settings;return!parseInt(t.ActivateConditionEnabled)||this.conditionTreeEvaluator.evaluate(t.ActivateCondition)},e.prototype.isTaskDisplayed=function(e){var t=e.Settings;return!parseInt(t.DisplayConditionEnabled)||this.conditionCheckerFactory.createOld({bypassUIChange:!0,featureName:this.consts.TASKS.LOG_FEATURE,elementName:e.Name}).getCurrentEvaluationValueAndStopEvaluating(t.DisplayCondition)},e.prototype.compareTasks=function(e,t){return e.Index<t.Index?-1:e.Index>t.Index?1:0},e.prototype.areAllTaskGoalsCompleted=function(e,t){for(var n=0;n<e.Goals.length;n++){var r=e.Goals[n];if(r.Id&&-1===this.arrayUtils.inArray(r.Id,t.CompletedGoals))return 0}return 1},e.prototype.deactivateIfAllTasksCompleted=function(e,t){this.areAllTasksCompleted(e,t)&&this.deactivate()},e.prototype.areAllTasksCompleted=function(e,t){for(var n in e){var r=e[n];if(this.validateTask(r)){var i=t[r.Id];if(!i)return!1;if(!i.IsCompleted)return!1}}return!0},e.prototype.validateTask=function(e){return!!e.Id&&(e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Tutorial&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Content&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.BusinessSolution?(this.customerLog("Task (id: "+e.Id+") is of unknown type: "+e.RelatedDeployableType),!1):e.RelatedDeployableId?!!this.deployablesManagerFactory.get(e.RelatedDeployableType).getById(e.RelatedDeployableId)||(this.customerLog("Task (id: "+e.Id+") related deployable ("+e.RelatedDeployableType+") (id: "+e.RelatedDeployableId+") does not exist"),!1):(this.customerLog("Task (id: "+e.Id+") does not have any related Walk-Thru id"),!1))},e.prototype.syncTaskCompletionWithLocalData=function(e){for(var t in this.customerLog("syncing local tasks completion data",3),this.customerLog(e,5),e)if(e.hasOwnProperty(t)){var n=e[t];if(n.IsCompleted)continue;var r=n.CompletedGoals,i=this.getById(t);if(i&&i.Goals){var o=i.Goals;if(o&&r&&0<r.length&&0<o.length)this.areAllTaskGoalsCompleted(i,n)&&(n.IsCompleted=1,this.completeTask(i,e))}}},e.prototype.getGoalFromTask=function(e,t){for(var n=0;n<e.Goals.length;n++)if(e.Goals[n].Id==t)return e.Goals[n]},e.prototype.hasTaskGoalCompletionCondition=function(){return this._hasTaskGoalCompletionConditionCache===undefined&&(this._hasTaskGoalCompletionConditionCache=this.hasTaskGoalCompletionConditionInner()),this._hasTaskGoalCompletionConditionCache},e.prototype.hasTaskGoalCompletionConditionInner=function(){return this.checkForDeployablesAutostartConditions()||this.checkForWidgetConditions()||this.checkForAbExpermintesGoalsConditions()},e.prototype.checkForDeployablesAutostartConditions=function(){var e,t,n,r,i;for(var o in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(o)&&(i=this.consts.DEPLOYABLE_TYPE[o],t=(n=this.deployablesManagerFactory.get(i))&&n.getAll()))for(var a=0;a<t.length;a++)if(e=t[a],this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCTEnabled",0)&&(r=this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCT",""),this.isTaskGoalFunctions(r)))return!0;return!1},e.prototype.checkForWidgetConditions=function(){var e=this.settingsValuesRetriever.getSettingsValue(this._siteConfig.Settings,this.consts.DISPLAY_WIDGET_CONDITION,"");return this.isTaskGoalFunctions(e)},e.prototype.checkForAbExpermintesGoalsConditions=function(){var e,t,n,r=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.AbExperiment);if(!r)return!1;for(var i=r.getAll(),o=0;o<i.length;o++){t=i[o].Goals;for(var a=0;a<t.length;a++)if(e=t[a],n=this.settingsValuesRetriever.getSettingsValue(e.Settings,"Conditions",""),this.isTaskGoalFunctions(n))return!0}},e.prototype.isTaskGoalFunctions=function(t){return null!=t&&function e(t){return"Func"==t.nodeType?"TaskGoalReached"==t.funcName||"TaskGoalNotReached"==t.funcName:("And"==t.nodeType||"Or"==t.nodeType)&&(e(t.leftSon)||e(t.rightSon))}(t)},e.prototype.completeGoal=function(e,t,n){var r=t[e];r.CompletedGoals.push(n);var i=this.deployablesDict[e];r.IsCompleted=this.areAllTaskGoalsCompleted(i,r);var o=this.getGoalFromTask(i,n);r.IsCompleted?this.completeTask(i,t,o):(t[r.TaskId]=r,this.customerLog("Server update completed GOAL (taskId: "+e+", goalId: "+n+")",3),this._todoListDataSynchronizer.updateTaskCompleted(this._endUserId,null,o,t,this.deployablesDict))},e.prototype.completeTask=function(e,t,n){try{var r=n?n.Id:-1;t[e.Id]={TaskId:e.Id,IsCompleted:1,CompletedGoals:[]},this.commonEvents.raiseEvent(this.consts.EVENTS.TaskCompleted,{TaskId:e.Id}),this._todoListDataSynchronizer.updateTaskCompleted(this._endUserId,e,n,t,this.deployablesDict),this.deactivateIfAllTasksCompleted(this.deployablesDict,t),this.customerLog("Server update completed TASK (taskId: "+e.Id+", goalId: "+r+")",3)}catch(i){this.deactivate(),this._logError(i,"An error occurred while trying to complete a Task")}},e.prototype.didTasksFinishLoading=function(){return this._tasksFinishedLoading},e.prototype.setTasksFinishedLoadingCallback=function(e){this._tasksFinishedLoadingCallback=e},e.prototype.raiseTasksFinishedCallback=function(e){this._tasksFinishedLoading=!0,this._tasksFinishedLoadingCallback&&this._tasksFinishedLoadingCallback(e),this._tasksFinishedLoadingCallback=null},e.prototype.loadTasks=function(t,n){var r=this;if(this.customerLog("loadTasks - start loading completion data",3),this._isPlayMode)return this.customerLog("loadTasks - Play mode - returning empty tasks completion data",3),this.deactivateIfAllTasksCompleted(this.deployablesDict,{}),void t({});if(!this._endUserId)return this.customerLog("loadTasks - No end user - Deactivating",3),void this.deactivate();try{var e=function(e){r.syncTaskCompletionWithLocalData(e),r.customerLog("Tasks completion data loaded successfully",3),r.commonEvents.raiseEvent(r.consts.EVENTS.TasksLoaded,{completedTasks:e}),r.deactivateIfAllTasksCompleted(r.deployablesDict,e),t&&t(e),r.raiseTasksFinishedCallback()};this.shouldRetrieveCompletedTasks()?this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),e,function(e){r.customerLog("Tasks completion data failed loading",3),r.deactivate(),n&&n(e)}):e({})}catch(i){this.deactivate(),this._logError(i,"An error occurred while trying to load completed tasks to the local storage")}},e.prototype.getTaskGoalsIds=function(e){var n={};return mtjQuery.each(e,function(e,t){n[e]=t.Goals?mtjQuery.map(t.Goals,function(e){return e.Id}):[]}),n},e.prototype.getTaskIdByGoalId=function(e){for(var t=this.dictionaryUtils.getDictionaryKeys(this.deployablesDict),n=t.length-1;0<=n;n--){var r=this.deployablesDict[t[n]];if(this.hasWantedGoal(r,e))return r.Id}},e.prototype.hasWantedGoal=function(e,t){for(var n=e.Goals.length-1;0<=n;n--)if(e.Goals[n].Id==t)return t},e.prototype.getCompletedTasks=function(){if(this.customerLog("Getting completed tasks",3),this._isPlayMode)return this.customerLog("Play mode - returning empty array of completed tasks",3),[];if(!this._endUserId)return this.deactivate(),null;if(!this.shouldRetrieveCompletedTasks())return null;try{var e=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!e)return null;var n=[];return mtjQuery.each(e,function(e,t){t.TaskId&&t.IsCompleted&&n.push(t.TaskId)}),this.customerLog("Returning completed tasks ("+n+")",3),n}catch(t){this.deactivate(),this._logError(t,"An error occurred while trying to retrieve completed tasks")}return null},e.prototype.updateGoalCompleted=function(e){var n=this,r=e.RelatedObjectId,i=e.Id,t=e.Name;if(this.customerLog("Updating completed goal (taskId: "+r+", goalId: "+i+", goalName: "+t+")",3),this.commonEvents.sendAutomationEvent(this.consts.EVENTS.Goals.GoalReached,{GoalId:i,GoalName:t}),this._isPlayMode)this.customerLog("Play mode - exiting without updating",3);else if(this._endUserId)try{this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(e){var t=e[r];t||(t={TaskId:r,IsCompleted:0,CompletedGoals:[]},e[r]=t),t.IsCompleted||-1<n.arrayUtils.inArray(i,t.CompletedGoals)||n.completeGoal(t.TaskId,e,i)})}catch(o){this.deactivate(),this._logError(o,"An error occurred while trying to update task completed")}else this.deactivate()},e.prototype.updateDeployableCompleted=function(n,r){var i=this;this.customerLog("Updating completed deployable ("+r+") deployableId: "+n+")",3),this._isPlayMode?this.customerLog("Play mode - exiting without updating",3):this._endUserId?mtjQuery.each(this.deployablesDict,function(e,t){if(t.Id&&t.RelatedDeployableType===r&&parseInt(t.RelatedDeployableId)===n&&!(t.Goals&&0<t.Goals.length))i._todoListDataSynchronizer.asyncRetrieveCompletedTasks(i._endUserId,i.getTaskGoalsIds(i.deployablesDict),function(e){e[t.Id]&&e[t.Id].IsCompleted||i.completeTask(t,e)})}):this.deactivate()},e.prototype.getTasksGoalsNotCompleted=function(){var a=this;if(this._isPlayMode)return this.customerLog("Play mode - not getting tasks not completed goals",3),[];this.customerLog("Getting tasks uncompleted goals",3);var n=this.shouldRetrieveCompletedTasks()?this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict)):[];n||(n=[]);var r=[];return mtjQuery.each(this.deployablesDict,function(e,t){if(t.Id){var i=n[t.Id];if(!i||!i.IsCompleted){var o={TaskId:t.Id,Name:t.Name,GoalsNotCompleted:[]};mtjQuery.each(t.Goals,function(e,t){if(t.Id){var n=i&&i.CompletedGoals?i.CompletedGoals:[];if(-1===a.arrayUtils.inArray(t.Id,n)){var r=mtjQuery.extend(!0,{},t);o.GoalsNotCompleted.push(r)}}}),r.push(o)}}}),r},e.prototype.getApiTasks=function(i){var o=this;this.customerLog("Getting tasks fot the API",3);var a=this.getCompletedTasks();a||(a=[]);var s=[];return mtjQuery.each(this.deployablesDict,function(e,t){if(o.validateTask(t)){var n=a&&-1<o.arrayUtils.inArray(t.Id,a)?1:0,r={Index:t.OrderIndex,Name:t.Name,Id:t.Id,IsCompleted:n,Settings:o.jsonUtils.clone(t.Settings),Description:t.Description,RelatedDeployableType:t.RelatedDeployableType,RelatedDeployableId:t.RelatedDeployableId};i&&(r.ConditionsPassed=o.isTaskConditionsPassed(t),r.IsActive=o.isTaskActive(t),r.IsDisplayed=o.isTaskDisplayed(t)),delete r.Settings.ActivateConditionEnabled,delete r.Settings.ActivateCondition,s.push(r)}}),s.sort(this.compareTasks),s},e.prototype.isTaskGoalReached=function(e,t){var n=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!n)return!1;var r=n[e];return!!r&&(!!r.IsCompleted||-1!==this.arrayUtils.inArray(t,r.CompletedGoals))},e.prototype.isActive=function(){return this._isActive},e.prototype.setActiveState=function(e){this.customerLog("Setting todo list active state to: "+e,3),this._isActive=e},e.prototype.activate=function(){var t=this;this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(e){t.areAllTasksCompleted(t.deployablesDict,e)||t.setActiveState(!0)})},e.prototype.deactivate=function(){this.raiseTasksFinishedCallback(!1),this.setActiveState(!1)},e.prototype.toggleActiveState=function(){this.setActiveState(!this.isActive())},e.prototype.removeInvalidTasks=function(){for(var e=this.getAll(),t=0;t<e.length;t++)this.validateTask(e[t])||delete this.deployablesDict[e[t].Id]},e.prototype.shouldRetrieveCompletedTasks=function(){return!Et.isEmptyObject(this.deployablesDict)||this.featuresManager.isFeatureEnabled("forceRetrieveCompletedTasks")},e}(Ge);Tt.register("TodoListManager").asCtor(Ut).dependencies("Lib, Consts, SiteConfigManager, RecorderServerManager, ClientStorageManager, Logger, WalkMeInfo, ContentsManager, CommonEvents, AuditTasksManager, DeployablesManagerFactory, DictionaryUtils,ConditionCheckerFactory, SettingsValuesRetriever, ArrayUtils, ConditionTreeEvaluator, TodoListDataSynchronizer, FeaturesManager, JsonUtils");var Vt=function(d){function i(e,t,n,r,i,o,a,s,l,u,c){d.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Content}),this.consts=t,this.logger=l,this.commonEvents=u,this.stringUtils=c,this._cdnServer=null,this._currentContentActivator=null,this._activateCallbacks=[],this._name="Content",this._cdnServer=n.get(),this._clickAuditManager=i,this._walkMeGoalsManager=r,this._featuresManager=o,this._playGuidGenerator=a,this._walkmeVisibleReporter=s}return Ie(i,d),i.prototype.onActivated=function(e){this._activateCallbacks.push(e)},i.prototype.activateById=function(e,t){try{t=t||{};var n=this.deployablesDict[e];if(!n)return void this.logger.customerLog(this.stringUtils.formatString("Content with id {0} doesn't exist",e),3);var r={lib:this.lib,cdnServer:this._cdnServer,clickAuditManager:this._clickAuditManager,content:n};this.removeContent(),this.commonEvents.raiseEvent(this.consts.EVENTS.Contents.ActivatingContent,{content:n}),this._currentContentActivator=this.getContentActivator(n.Type,r),this._currentContentActivator.activateContent(n,t.type,t.objectId),this._walkmeVisibleReporter.report(),this._walkMeGoalsManager.startWatchingDeployable(n,this._playGuidGenerator.generateNewPlayGuid(n.Id));for(var i=0;i<this._activateCallbacks.length;i++)this._activateCallbacks[i](n.Id,this.consts.DEPLOYABLE_TYPE.Content)}catch(o){this.logger.customerLog(this.stringUtils.formatString("Failed playing content with id {0}. Exception is {1}",e,o),3)}},i.prototype.getContentActivator=function(e,t){var n=null;switch(e){case i.CONTENT_TYPES.Video:var r=this.getVideoIdAndVendor(t.content.Url);r?(t.videoId=r.videoId,t.vendorName=r.vendorName,n=new pt(t)):n=new gt(t);break;case i.CONTENT_TYPES.Article:n=new gt(t);break;default:throw this.stringUtils.formatString("Invalid content type : {0}",e)}return n},i.prototype.getVideoIdAndVendor=function(r){var i,e=[{regex:/^(?:http|https):\/\/.*youtube\..*v=([\w-]+)/i,vendorName:"youtube"},{regex:/^(?:http|https):\/\/.*youtu.be\/([\w-]+)/i,vendorName:"youtube"},{regex:/^(?:http|https):\/\/.*youtube.*\/embed\/([\w-]+)/i,vendorName:"youtube"},{regex:/^(?:http:\/\/|https:\/\/).*vimeo.*\/([\w-]+)/i,vendorName:"vimeo"}];return Et.each(e,function(e,t){var n=r.match(t.regex);if(n&&1<n.length)return!(i={videoId:n[1],vendorName:t.vendorName})}),!i&&this._featuresManager.isFeatureEnabled("html5video")&&(i={vendorName:"html5video"}),i},i.prototype.removeContent=function(){this._currentContentActivator&&this._currentContentActivator.removeContent()},i.prototype.types=function(){return i.CONTENT_TYPES},i.CONTENT_TYPES={Article:0,Video:1},i}(Ge);Tt.register("ContentsManager").asCtor(Vt).dependencies("Lib, Consts, CdnServer, WalkMeGoalsManager, ClickAuditManager, FeaturesManager, PlayGuidGenerator,WalkmeVisibleReporter, Logger, CommonEvents, StringUtils");var Wt=function(r){function e(e,t){var n={deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Collection};r.call(this,n),this._name="Tab"}return Ie(e,r),e}(Ge);Tt.register("CollectionsManager").asCtor(Wt).dependencies("Lib, Consts");var jt=function(i){function e(e,t,n,r){i.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Course}),this.consts=t,this.quizPlayer=n,this.initiatorManager=r,this._name="Course"}return Ie(e,i),e.prototype.activateQuizByCourseId=function(e){var t=this.deployablesDict[e],n=t&&t.Quiz;if(n){var r=this.quizPlayer;this.initiatorManager.setForScope({type:this.consts.STEP_PLAY_INITIATOR_ENUM.COURSE,objectId:e,appType:this.consts.EVENT_SENDER_EVENT_APPS.Course},function(){r.playQuiz(n)})}},e.prototype.getCourseByQuizId=function(e){for(var t in this.deployablesDict)if(this.deployablesDict.hasOwnProperty(t)){var n=this.deployablesDict[t];if(n.Quiz&&n.Quiz.Id==e)return n}},e.prototype.getQuizByCourseId=function(e){var t=this.deployablesDict[e];return t&&t.Quiz},e.prototype.releaseAll=function(e){this.quizPlayer.releaseAll(e)},e}(Ge);Tt.register("CoursesManager").asCtor(jt).dependencies("Lib, Consts, QuizPlayer, InitiatorManager");var Gt=function(n){function e(e,t){n.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Lesson}),this._name="Lesson"}return Ie(e,n),e}(Ge);Tt.register("LessonsManager").asCtor(Gt).dependencies("Lib, Consts");var Ht=function(n){function e(e,t){n.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.AbExperiment}),this._name="Experiments"}return Ie(e,n),e}(Ge);Tt.register("ExperimentsManager").asCtor(Ht).dependencies("Lib, Consts");var Yt=function(g){function i(e,t,n,r,i,o,a,s,l,u,c,d,f,p){g.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.ShoutOut}),this.Consts=t,this.UIComponentsFactory=n,this.WalkMeGoalsManager=r,this.ClickAuditManager=i,this.actionDataProvider=o,this.commonEvents=a,this.playGuidGenerator=s,this.walkmeVisibleReporter=l,this.logger=u,this.stringUtils=c,this.featuresManager=d,this.autostartStopConditionChecker=f,this.autoStartStoragePersister=p,this._insertionChain=[],this._activeComponents=[],this._announcementBarCategory=0,this._name="ShoutOut",this._type=t.DEPLOYABLE_TYPE.ShoutOut,this._positions=Tt.get("Positions")}return Ie(i,g),i.prototype.activateById=function(e,t,n){var r=this;try{if(this.handleActiveComponent(e,t))return;var i=this.deployablesDict[e];if(!i)return void this.logger.customerLog(this.stringUtils.formatString("ShoutOut with id {0} doesn't exist",e),3);var o=this.UIComponentsFactory.get(i.UiComponentId,[i]);this.pushActiveComponent(o);var a=this.auditActivation(i,t);o.once("show-end",function(){r.WalkMeGoalsManager.startWatchingDeployable(i,r.playGuidGenerator.generateNewPlayGuid(i.Id)),o.once("action-start",function(e,t){var n;t==r.Consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater?n=r.Consts.SHOUTOUT_CLICK_TYPE.RemindMeLater:t==r.Consts.DEPLOYABLE_ACTION_TYPES.Action?(r.autoStartStoragePersister.setStopCondition(i,r._type,r.Consts.AUTOSTART.STOP_CONDITIONS.Action),n=r.Consts.SHOUTOUT_CLICK_TYPE.Action):t==r.Consts.DEPLOYABLE_ACTION_TYPES.Close&&(r.autoStartStoragePersister.setStopCondition(i,r._type,r.Consts.AUTOSTART.STOP_CONDITIONS.Cancel),n=r.Consts.SHOUTOUT_CLICK_TYPE.Close),r.auditClick(i,r._type,n,a),r.commonEvents.raiseEvent(r.Consts.EVENTS.ShoutOutClosed,{shoutOut:i,clickType:n})}),o.once("x-clicked",function(){r.autoStartStoragePersister.setStopCondition(i,r._type,r.Consts.AUTOSTART.STOP_CONDITIONS.XButton),r.auditClick(i,r._type,r.Consts.SHOUTOUT_CLICK_TYPE.XButton,a),r.commonEvents.raiseEvent(r.Consts.EVENTS.ShoutOutClosed,{shoutOut:i,clickType:r.Consts.SHOUTOUT_CLICK_TYPE.XButton})}),o.once("destroy-end",function(){r.commonEvents.raiseEvent(r.Consts.EVENTS.UIComponentDestroyed),r.commonEvents.raiseEvent(r.Consts.EVENTS.DeployableDestroyed)})}),this.insertComponent(o),this.walkmeVisibleReporter.report();var s={deployable:i,uiComponent:o,deployableType:this._type};return this.commonEvents.raiseEvent(this.Consts.EVENTS.DeployableCreated,s),o}catch(l){this.logger.customerLog(this.stringUtils.formatString("Failed playing shoutOut with id {0}. Exception is {1}",e,l),3)}},i.prototype.getActionData=function(e){var t=g.prototype.getActionData.call(this,e);return this.actionDataProvider.fillActionData(e,t)},i.prototype.isWithAction=function(e){return this.actionDataProvider.isWithAction(e)},i.prototype.handleActiveComponent=function(e,t){var n=this.getActiveComponent(e);return n&&this.isLauncherInitiation(t)&&this.flickerActiveComponent(n),!!n},i.prototype.isLauncherInitiation=function(e){return e&&e.type==this.Consts.STEP_PLAY_INITIATOR_ENUM.LAUNCHER},i.prototype.flickerActiveComponent=function(e){e.unbind("hide-end."+i.ACTIVE_COMPONENT_SUFFIX),e.once("hide-end."+i.ACTIVE_COMPONENT_SUFFIX,function(){e.show()}),e.hide()},i.prototype.getActiveComponent=function(e){for(var t=this._activeComponents.length-1;0<=t;t--)if(this._activeComponents[t].getComponent().Id==e)return this._activeComponents[t]},i.prototype.insertComponent=function(e){var t=this;e.once("append-end prepend-end",function(){e.show(),t.handleNextShoutOut()}),this._isInserting?this._insertionChain.push(e):(this._isInserting=!0,this.shouldPrepend(e)?e.prepend():e.append())},i.prototype.handleNextShoutOut=function(){var e=this._insertionChain.shift();e?this.shouldPrepend(e)?e.prepend():e.append():this._isInserting=!1},i.prototype.shouldPrepend=function(e){if(!this.featuresManager.isFeatureEnabled("designTemplatesCategories"))return!1;var t=Tt.get("DesignTemplates").getDesignTemplateById(e._uiComponent.DesignTemplateId);if(!t||!t.categories||-1===Et.inArray(this._announcementBarCategory,t.categories))return!1;var n=e._uiComponent.Settings.position;return n==this._positions.Top||n==this._positions.TopLeft||n==this._positions.TopRight},i.prototype.auditActivation=function(e,t){return t=t||{},this.ClickAuditManager.SendClickAudit(this._type,e.Id,{type:t.type,id:t.objectId})},i.prototype.auditClick=function(e,t,n,r){this.ClickAuditManager.SendShoutOutAudit(e.Id,t,n,r)},i.prototype.pushActiveComponent=function(e){var t=this,n=this._activeComponents.length;this._activeComponents.push(e),e.bind(i.EVENT_DESTROY_BEGIN,function(){e.unbind(i.EVENT_DESTROY_BEGIN),t._activeComponents.splice(n,1)})},i.prototype.releaseAll=function(e){try{for(var t=0;t<this._activeComponents.length;t++){var n=this._activeComponents[t];n.unbind(i.EVENT_DESTROY_BEGIN),n.destroy()}this._activeComponents.length=0}catch(r){}e&&e()},i.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e];return this.autostartStopConditionChecker.check(t,this._type)},i.EVENT_DESTROY_BEGIN="destroy-begin.manager",i.ACTIVE_COMPONENT_SUFFIX="acs",i}(Ge);Tt.register("ShoutOutsManager").asCtor(Yt).dependencies("Lib, Consts, UIComponentsFactory, WalkMeGoalsManager, ClickAuditManager,ShoutOutActionDataProvider, CommonEvents, PlayGuidGenerator, WalkmeVisibleReporter, Logger, StringUtils, FeaturesManager,AutostartStopConditionChecker, AutoStartStoragePersister");var zt=function(r){function e(e,t,n){r.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.SearchProviderUrl}),this._consts=t,this._conditionCheckerFactory=n,this._name="SearchProviderUrl",this.segmentedProvidersUrls=[]}return Ie(e,r),e.prototype.getAllSegmented=function(){return this.segmentedProvidersUrls},e.prototype.setSegmentedProviders=function(){this.segmentedProvidersUrls=[];var e=this.getAll();if(0<e.length){var n=this._conditionCheckerFactory.createConditionChecker(e[0].Settings.DisplayCondition);this.segmentedProvidersUrls=Et(e).filter(function(e,t){return n.getCurrentEvaluationValueAndStopEvaluating(t.Settings.DisplayCondition)}).map(function(e,t){return t.Id}).toArray()}},e.STOP_CONDITIONS={Interacted:"interacted"},e}(Ge);Tt.register("SearchProviderUrlsManager").asCtor(zt).dependencies("Lib, Consts, ConditionCheckerFactory");var Qt=function(I){function i(e,t,n,r,i,o,a,s,l,u,c,d,f,p,g,h,m,v,y,S,E,T,w,C,b){I.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Survey}),this.consts=t,this.recorderServerManager=r,this.permalinkManager=i,this.guidGenerator=o,this.commonUtils=a,this.commonEvents=s,this.eventSender=u,this.logger=c,this.reportInitiatorMapper=d,this.endUsersManager=f,this.popupBalloonDisplayer=p,this.wmAjax=g,this.clientStorageManager=h,this.walkmeVisibleReporter=m,this.auditingEnabledIndicator=v,this.questionToEventMapper=y,this.safeFullUrlProvider=S,this.featuresManager=E,this.jsonUtils=T,this.stringUtils=w,this.autostartStopConditionChecker=C,this.autoStartStoragePersister=b,this._surveyStartedInCurrentPage=!1,this._surveyIsShown=!1,this._name="Survey",this._type=t.DEPLOYABLE_TYPE.Survey,this._auditSource=l.get(),this._getPermutationId=n.getCurrentPermutation()}return Ie(i,I),i.prototype.submitResults=function(e){return this._surveyIsShown=!1,0<e.answers.length?(this.sendResultsArrayToServer("SurveyCompleted",e),this.addSubmitCookie(e.surveyGuid),this.sendSurveyCompletedEvent(e,"CompletedWithAnswers"),!0):(this.sendSurveyCompletedEvent(e,"CompletedWithNoAnswers"),!1)},i.prototype.submitExit=function(e){this._surveyIsShown=!1,this.sendResultsArrayToServer("SurveyExited",e),this.sendSurveyCompletedEvent(e,"ExitButtonClicked")},i.prototype.sendSurveyCompletedEvent=function(e,t){var n={surveyGuid:e.surveyGuid,status:t};e.answers&&0<e.answers.length&&(n.answers=e.answers),this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyCompleted,n)},i.prototype.sendResultsArrayToServer=function(e,t){if(this.auditingEnabledIndicator.isEnabled()){t.permutationId=this._getPermutationId,t.endUserGuid=this.endUsersManager.getEndUserGuid();var n=this.jsonUtils.toJSON(t),r=this.wmAjax.execute({type:this.featuresManager.isFeatureEnabled("surveyAnswerExtendedLimit")&&this.featuresManager.isFeatureEnabled("blockJsonp")?"POST":"GET",url:this.recorderServerManager.get()+"/Survey/"+e,data:{surveyDataSerialized:n},timeout:i.SEND_TO_SERVER_TIMEOUT});r.success(function(e){}),r.error(function(e,t,n){})}},i.prototype.addSubmitCookie=function(e){var t="wm-SrvSmt-"+e;this.clientStorageManager.saveData(t,1,this.consts.ONE_DAY_SECONDS)},i.prototype.startSurvey=function(t,e){var n=this,r=!0;this._surveyIsShown=!0;var i=window.walkmeExternalSurvey;(this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.StartSurvey,t),i&&(t.surveyJson.Settings.isExternal||t.isSurveyExternal))?(this.logger.customerLog("Starting external survey"),t.playGuid=t.surveyPlayGUID,t.source=this._auditSource,!1===i(t,t.callback)?(r=!1,this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyFailedShowing)):this.sendSurveyPlayedEvent(t.surveyJson)):this.startInternalSurvey(t,function(e){e.show().then(function(){return n.commonEvents.raiseEvent("SurveyOnScreen")}),n.sendSurveyPlayedEvent(t.surveyJson)});return this.reportSurveyStarted(t,e,t.surveyJson.Questions),r},i.prototype.startInternalSurvey=function(t,n){1==t.surveyJson.Settings.shouldShowOneByOne?(this.logger.customerLog(this.stringUtils.formatString("Starting one by one survey with id {0} and name {1}",t.surveyJson.Id,t.surveyJson.Name)),at.all([__webpack_require__.e(3),__webpack_require__.e(2)]).then(function(){var e=[__webpack_require__(295)];(function(){n(Tt.create("OneByOneSurvey",t))}).apply(null,e)})["catch"](__webpack_require__.oe)):(this.logger.customerLog(this.stringUtils.formatString("Starting regular survey with id {0} and name {1}",t.surveyJson.Id,t.surveyJson.Name)),at.all([__webpack_require__.e(3),__webpack_require__.e(4)]).then(function(){var e=[__webpack_require__(312)];(function(){n(Tt.create("AllQuestionsSurvey",t))}).apply(null,e)})["catch"](__webpack_require__.oe))},i.prototype.sendSurveyPlayedEvent=function(e){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyPlayed,{surveyId:e.Id})},i.prototype.surveyIsShown=function(){return this._surveyIsShown},i.prototype.submitSurvey=function(t,n,r,e){var i=this.buildAnswersObjectForServer(t,r);t.submitResults(i),this.logger.customerLog(this.stringUtils.formatString("Submitting answers for survey with id {0} and name {1}",t.surveyJson.Id,t.surveyJson.Name)),this.autoStartStoragePersister.setStopCondition(t.surveyJson,this._type,this.consts.AUTOSTART.STOP_CONDITIONS.Action);var o=this;__webpack_require__.e(5).then(function(){var e=[__webpack_require__(313)];(function(){o._surveyQuestionAndAnswerText=Tt.get("SurveyQuestionAndAnswerText"),o.reportSurveySubmitted(t,n,r)}).apply(null,e)})["catch"](__webpack_require__.oe),e&&e()},i.prototype.surveyExited=function(e,t,n,r){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyExited,{surveyParams:e,questions:t,answers:r,callback:n}),this.logger.customerLog(this.stringUtils.formatString("Survey with id {0} and name {1} exited",e.surveyJson.Id,e.surveyJson.Name));var i=this.buildAnswersObjectForServer(e,[]);e.submitExit(i),this.reportSurveyExited(e,t),this.autoStartStoragePersister.setStopCondition(e.surveyJson,this._type,this.consts.AUTOSTART.STOP_CONDITIONS.XButton),n&&n()},i.prototype.buildAnswersObjectForServer=function(e,t){var n={};return n.playGuid=e.surveyPlayGUID,n.surveyGuid=e.surveyJson.Guid,n.tutorialId=e.tutorialId,n.source=this._auditSource,n.customVarsData=this.commonUtils.getWindowData(this.consts.WINDOW_CUSTOM_DATA_TYPE.Var,e.surveyJson.Settings.customVar),n.customCookiesData=this.commonUtils.getWindowData(this.consts.WINDOW_CUSTOM_DATA_TYPE.Cookie,e.surveyJson.Settings.customCookie),n.answers=[].concat.apply([],t),n.fullUrl=this.safeFullUrlProvider.get(),n},i.prototype.activateById=function(e,t,n){var r=this;n=n||{};var i=this.deployablesDict[e];if(!i)return this.logger.customerLog(this.stringUtils.formatString("Survey with id {0} doesn't exist",e),3),!1;if(0<Et(".walkme-survey-id-"+e).length)return this.logger.customerLog(this.stringUtils.formatString("Survey with id {0} is already on screen",e),3),!1;n.surveyJson=i,n.submitResults=function(e){r.submitResults(e)},n.submitExit=function(e){r.submitExit(e)},n.drawBalloonFunc=this.popupBalloonDisplayer.showSpecialPopupBalloon,n.surveyPlayGUID=n.surveyPlayGUID||this.guidGenerator.generateGuid();var o=this.startSurvey(n,t);return this._surveyStartedInCurrentPage=o||this._surveyStartedInCurrentPage,o},i.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e];return!this._surveyStartedInCurrentPage&&!this.permalinkManager.isTrainingInStartingMode()&&this.autostartStopConditionChecker.check(t,this._type)},i.prototype.reportSurveyExited=function(e,t){try{var n=this.mapSurveyParamsToEvent(e,t);n.reason=this.eventSender.CANCEL_REASONS.Xclick,this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Close,n)}catch(r){this.logger.error(r,"reportSurveyExited")}},i.prototype.reportSurveyStarted=function(e,t,n){try{this.walkmeVisibleReporter.report();var r=mtjQuery.extend(this.mapSurveyParamsToEvent(e,n),this.mapEventSource(e),this.reportInitiatorMapper.mapForExtend(t));this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Play,r)}catch(i){this.logger.error(i,"reportSurveyStarted")}},i.prototype.reportSurveySubmitted=function(e,t,n){try{var r=this.mapSurveyParamsToEvent(e,t);this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,r);for(var i=0;i<t.length;i++)for(var o=t[i],a=this.questionToEventMapper.map(o,e),s=n[i],l=0;l<s.length;l++){var u=mtjQuery.extend({},r,a,this.mapAnswerToProps(s[l],e.surveyJson),{indx:i+1});this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,u)}}catch(c){this.logger.error(c,"reportSurveySubmitted")}},i.prototype.mapEventSource=function(e){return e.eventSource?{reason:e.eventSource}:{}},i.prototype.mapSurveyParamsToEvent=function(e,t){var n={type:this.eventSender.EVENT_APPS.Survey,oId:e.surveyJson.Id,oName:e.surveyJson.Name,pId:e.surveyPlayGUID,total:0};return t&&t.length&&(n.total=t.length),n},i.prototype.mapAnswerToProps=function(e,t){var n={};n.oId=e.questionId;var r=this._surveyQuestionAndAnswerText.getQuestionAndAnswerTextFromSurvey(t,e.questionId,e.answerId);return n.oName=r.questionText,e.answerId&&(n.aoId=e.answerId,n.value=r.answerText),e.answerText&&(n.value=e.answerText),n.aType=this.consts.EVENT_SENDER_ACTIONS.SurveyQuestionAnswered,n.aAppType=this.consts.EVENT_SENDER_EVENT_APPS.SurveyQuestionAnswer,n},i.SEND_TO_SERVER_TIMEOUT=1e4,i}(Ge);exports.SurveysManager=Qt,Tt.register("SurveysManager").asCtor(Qt).dependencies("Lib, Consts, AbCurrentPermutationProvider, RecorderServerManager, PermalinkManager, GuidGenerator, CommonUtils, CommonEvents, AuditSourceManager, EventSender, Logger, ReportInitiatorMapper, EndUsersManager, PopupBalloonDisplayer, WmAjax, ClientStorageManager, WalkmeVisibleReporter, AuditingEnabledIndicator, QuestionToEventMapper, SafeFullUrlProvider, FeaturesManager,JsonUtils,StringUtils, AutostartStopConditionChecker, AutoStartStoragePersister");var qt=function(r){function a(e,t,n){r.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.ConditionBlock}),this.timerManager=n,this._resultsCache={}}return Ie(a,r),a.prototype.activateById=function(e,t){var n=this;if(this._resultsCache[e]!=undefined)return this._resultsCache[e];var r={elementName:"conditionBlock"+e},i=Tt.get("ConditionCheckerFactory").createOld(r);i.onValueChanged(function(e){t&&t(e)});var o=this.getById(e);return i.evaluateAsync(o.ConditionsTree),this._resultsCache[e]=i.getCachedValue(),i.cleanResources(),this.timerManager.libSetTimeout(function(){n._resultsCache[e]=undefined},a.RESULT_CACHE_TIME),this._resultsCache[e]},a.RESULT_CACHE_TIME=500,a}(Ge);Tt.register("ConditionBlocksManager").asCtor(qt).dependencies("Lib,Consts,TimerManager");var Kt=function(l){function e(e,t,n,r,i,o,a,s){l.call(this,{deployables:[],lib:e}),this.oldConditionsCombiner=t,this.tagsInjector=n,this.tagsSegmentationProperties=r,this.deployablesManagerFactory=i,this.consts=o,this.newConditionsCombiner=a,this.featuresManager=s,this._name="Tag"}return Ie(e,l),e.prototype.injectTagsToDeployables=function(){var e=this.getAll();this.injectConditionsToDeployable(e)},e.prototype.injectConditionsToDeployable=function(e){var t=this.getCombinedDeployableTagsConditions(e,"Or");for(var n in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(n)){var r=this.consts.DEPLOYABLE_TYPE[n],i=this.deployablesManagerFactory.get(r);if(i)for(var o=i.getAll(),a=0;a<o.length;a++){var s=o[a],l=t[r]&&t[r][s.Id],u=this.tagsSegmentationProperties.properties[r];s.Settings||(s.Settings={});var c=l;u&&(c=this.tagsInjector.inject(s,l,u)),s.Settings.ASEnabled&&this.injectConditionTreeToDeployableAutostart(s,c,u,"And")}}},e.prototype.injectConditionTreeToDeployableAutostart=function(e,t,n,r){this.shouldInjectTagsIntoAutoStart(n)&&(n&&n.isNewConditions?e.ConditionTrees.ASCT=this.newConditionsCombiner.combine(r,t,e.ConditionTrees.ASCT):e.Settings.ASCT=this.oldConditionsCombiner.combine(r,t,e.Settings.ASCT)),e.Settings.ASCT&&(e.Settings.ASCTEnabled=1)},e.prototype.shouldInjectTagsIntoAutoStart=function(e){return!e||!e.dontInjectTagsIntoAutoStartFeature||!this.featuresManager.isFeatureEnabled(e.dontInjectTagsIntoAutoStartFeature)},e.prototype.getCombinedDeployableTagsConditions=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];if(i.Settings&&i.Settings.Condition)for(var o=i.LinkedDeployables.length-1;0<=o;o--){var a=i.LinkedDeployables[o],s=this.deployablesManagerFactory.get(a.DeployableType).getById(a.DeployableID);s&&this.updateTagsConditionDictionary(n,i,s,a.DeployableType,t)}}return n},e.prototype.updateTagsConditionDictionary=function(e,t,n,r,i){e[r]||(e[r]={});var o=e[r][n.Id];e[r][n.Id]=this.oldConditionsCombiner.combine(i,t.Settings.Condition,o)},e}(Ge);function Jt(n){var r;this.concat=function(e){if(n&&n.adapt(e),r)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);else r=e},this.get=function(e){for(var t=r,n=0;n<arguments.length;n++)t=t[arguments[n]];return t}}function Xt(e,t,n){if(!e)return n;n=n||{};var r=e.attributes;if(r)for(var i in r)if(r.hasOwnProperty(i)&&"string"==typeof r[i]&&(r[i]=r[i].replace("###ResourcesDir###",t),"font-family"==i)){n.fonts=n.fonts||[];var o=r[i].split(",");n.fonts.push(mtjQuery.trim(o[0]))}var a=e.children;if(a)for(var s in a)a.hasOwnProperty(s)&&Xt(a[s],t,n);return n}Tt.register("TagsManager").asCtor(Kt).dependencies("Lib, OldConditionsCombiner, TagsInjector, TagsSegmentationProperties, DeployablesManagerFactory, Consts, NewConditionsCombiner, FeaturesManager"),Tt.register("Positions").asInstance({Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}),Tt.register("FontsData").asFunction(function(){var e=new Jt;return e.concat({"walkme-opensans":{id:"opensans",name:"opensans",url:"/player/resources/fonts/opensans"}}),e.concat({"lib-font":{id:"libFont",name:"lib-font",url:"/player/resources/fonts/lib-font_v1",dummeyText:"&#xed50;"}}),e}),Tt.register("ShoutOutActionPlaceholderClassesAdder").asCtor(function(o,a){this.addClasses=function(e,t){var n=o.getMainElementsWithPlaceholders(e),r=a.getActiveMainElementPlaceholderConfigs(t,n);r[l]&&c(r,n,0,l);if(r[u]){var i=1==r.length?0:1;c(r,n,i,u)}};var s="walkme-action-",l="action",u="close";function c(e,t,n,r){var i,o,a=(i=n,o=e[r].Config.Type,s+o+"-"+i);t[r].element.addClass(a)}}).dependencies("MainShoutOutActionElementsGetter, ActiveMainShoutOutActionPlaceholderConfigsGetter"),Tt.register("MainShoutOutActionElementsGetter").asCtor(function(){this.getMainElementsWithPlaceholders=function(e){var t={};return s(e,t,n,i),s(e,t,r,o),t};var n=".wm-template-main-bg",r=".wm-close-link",a="wm-action-placeholder",i="action",o="close";function s(e,t,n,r){var i=e.find(n),o=i.attr(a);o&&(t[r]={placeholderName:o,element:i})}}),Tt.register("ActiveMainShoutOutActionPlaceholderConfigsGetter").asCtor(function(){this.getActiveMainElementPlaceholderConfigs=function(e,t){for(var n={length:0},r=0;r<e.length&&n.length<2;r++){var i=e[r];i.Config.IsActive&&(t[o]&&i.Name==t[o].placeholderName?(n[o]=i,n.length++):t[a]&&i.Name==t[a].placeholderName&&(n[a]=i,n.length++))}return n};var o="action",a="close"}),Tt.register("ShoutOutPlaceholderActionWrapper").asCtor(function(e){this.getType=function(){return e.ENTITY_TYPE.shoutout},this.wrap=function(e,t,n){return function(){e(),n.Type!=r&&t.uiComponent.destroy()}};var r="destroy"}).dependencies("SharedConsts"),Tt.register("ShoutOutPlaceholdersReplacer").asCtor(function(o,a){this.replace=function(e,t,n){var r={html:t,type:a.ENTITY_TYPE.shoutout},i={};n&&(r.actionArgs={uiComponent:n},i.initiator=n._uiComponent,i.type=n.getInitiatorType(),i.bbCodeParserVersion=n._settings.v);o.replace(r,e||[],{},i)}}).dependencies("PlaceholdersReplacer, SharedConsts"),Tt.register("PluginConfigs").asCtor(function(){var t=this;function e(){n([])}function n(e){t.value=e}t.reset=e,t.set=n,e()}),Tt.register("PluginConfigsGetter").asCtor(function(r){this.get=function(e){if(!(e&&r&&r.value&&r.value.length))return;for(var t=0;t<r.value.length;t++){var n=r.value[t];if(n.PluginName===e)return JSON.parse(n.Config)}}}).dependencies("PluginConfigs"),Tt.register("BBCodeDeployables").asCtor(function(e,t,n){var r;this.add=function(e){r.push(e)},this.get=function(){return r},r=[{linkSelector:".walkme-action-start-resource",idDataKey:"data-resource-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Resource,activator:t.resourceActivator},{linkSelector:".walkme-action-start-bf",idDataKey:"data-bizflow-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Bizflow,activator:t.bizflowActivator},{linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Survey,activator:n.surveyActivator}]}).dependencies("Consts, BBCodeDeployableActivators, BBCodeSurveyActivator"),Tt.register("BBCodeEventsBinder").asCtor(function(u,e,n){this.bind=function(t,s,l){Et(e.get()).each(function(e,a){Et(a.linkSelector,t).each(function(){Et(this).click(function(){var e,t,n,r,i,o=parseInt(Et(this).attr(a.idDataKey));e=a.clickEvent,t=a.activator,n=o,r=l,i=s,u.raiseEvent(e,{id:n,asyncCallback:function(){t(n,r),i&&i()}})}),u.raiseEvent(n.EVENTS.RegisterBBCodeDeployableClick,{element:Et(this)})})})}}).dependencies("CommonEvents, BBCodeDeployables, Consts"),Tt.register("BBCodeSurveyActivator").asCtor(function(i,o){var a;this.surveyActivator=function(e,t){o.stop();for(var n=i.mapBbcodeInitiator(t),r=0;r<a.length;r++)if(a[r].canActivate(e)){a[r].activate(n,e);break}},this.addActivator=function(e){a.push(e)},a=[{canActivate:function(e){return 0<=e},activate:function(e,t){Tt.get("SurveysManager").activateById(t,e)}}]}).dependencies("InitiatorTypeToAppTypeMapper, RunningDeployablesStopper"),Tt.register("BBCodeDeployableActivators").asCtor(function(r,i,o,a){this.bizflowActivator=function(e,t){var n=r.mapBbcodeInitiator(t);i.activateById(e,n)},this.resourceActivator=function(e,t){var n=r.mapBbcodeInitiator(t);a.stop(),o.activateById(e,n)}}).dependencies("InitiatorTypeToAppTypeMapper, BusinessSolutionsManager, ContentsManager, RunningDeployablesStopper"),Tt.register("BBCodeAttributeState").asCtor(function(r,i,o){this.go=function(e){var t=a[e.openTag];for(e.currentIndex=e.currentIndex+1;e.currentIndex<e.exp.length;e.currentIndex++){var n=e.exp.charAt(e.currentIndex);if(n!=r.OPEN_TAG||t){if(n==r.CLOSE_TAG&&!s(t,e))return i.go(e);e[r.ATTRIBUTE_STATE]+=n}else o.parse(e,r.ATTRIBUTE_STATE)}};var a={regex:!0};function s(e,t){if(e)return!n(t,'"')&&!n(t,"&quot;")}function n(e,t){return e.exp.substring(e.currentIndex-t.length,e.currentIndex)==t}}).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeNestedTagParser"),Tt.register("BBCodeCloseTagState").asCtor(function(n,r){this.go=function(e){for(e.currentIndex=e.currentIndex+1;e.currentIndex<e.exp.length;e.currentIndex++){var t=e.exp.charAt(e.currentIndex);switch(t){case n.CLOSE_TAG:return r.translateTag(e);default:e[n.CLOSE_TAG_STATE]+=t}}}}).dependencies("BBCodeParserConsts, BBCodeTagTranslator"),Tt.register("BBCodeDataState").asCtor(function(n,r,i){this.go=function(e){for(e.currentIndex=e.currentIndex+1;e.currentIndex<e.exp.length;e.currentIndex++){var t=e.exp.charAt(e.currentIndex);switch(t){case n.OPEN_TAG:if("/"==e.exp.charAt(e.currentIndex+1))return r.go(e);i.parse(e,n.DATA_STATE);break;default:e[n.DATA_STATE]+=t}}}}).dependencies("BBCodeParserConsts, BBCodeCloseTagState, BBCodeNestedTagParser"),Tt.register("BBCodeOpenTagState").asCtor(function(n,r,i){this.go=function(e){for(e.currentIndex=e.startIndex+1;e.currentIndex<e.exp.length;e.currentIndex++){var t=e.exp.charAt(e.currentIndex);switch(t){case n.OPEN_TAG:e.startIndex=e.currentIndex;break;case n.CLOSE_TAG:return r.go(e);case"=":case" ":return i.go(e);default:e[n.OPEN_TAG_STATE]+=t}}}}).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeAttributeState"),Tt.register("BBCodeNestedTagParser").asCtor(function(){this.parse=function(e,t){var n=Tt.get("BBCodeSingleTagParser").parseSingleTag(e.exp,e.currentIndex);e[t]+=n.parsedExpPart||"",e.exp!=n.exp?(e.currentIndex=n.startIndex,e.exp=n.exp):e[t]+=e.exp.charAt(e.currentIndex)}}),Tt.register("BBCodeParser").asCtor(function(e,i,o){var t={font:"font-family:$1",size:"font-size:$1px",color:"color:$1"},r=["onblur","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","onerror","onfocus","onfocusin","onfocusout","onhashchange","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onreset","onresize","onscroll","onselect","onsubmit","ontextinput","onunload","onwheel"],a={};function s(e){var t;if((e=function(e){if(!e.indexOf)return e;if(e.indexOf("on")<0)return e;for(var t=0;t<r.length;t++)e=e.replace(new RegExp(r[t]+"\\s*=","gi"),"^");return e}(e=(t=e).replace?t.replace(/javascript:/gi,""):t)).replace)for(var n in a)e=e.replace(new RegExp(n,"g"),a[n]);return e}this.parse=function(e,t){if(!e)return"";for(var n=0,r={exp:s(e),length:e.length};n<r.exp.length-1;)r=i.parseSingleTag(r.exp,n),n=r.startIndex;return o.getHtmlWithOverrideStyles(r.exp,t)},function(){for(var e in t)a["\\["+e+"=([^\\]]+)]"]='<span style="'+t[e]+'">',a["\\[/"+e+"]"]="</span>"}.apply(null,arguments)}).dependencies("CommonUtils, BBCodeSingleTagParser, BBCodeOverrideStyle"),Tt.register("BBCodeOverrideStyle").dependencies("ArrayUtils, wmjQuery").asCtor(function(h,o){this.getHtmlWithOverrideStyles=function(t,n){if(!n)return t;var r=mtjQuery("<div></div>").html(t);return function e(t,n){var r,i,o,a,s,l=n.split(";");a=l,i=(r=t).prop("tagName").toLowerCase(),o=m[i],(s="function"==typeof o?o(r):"string"==typeof o?o:void 0)&&a.push.apply(a,s.split(";"));var u,c,d=S(l);u=l,c=y(t).split(";"),u.push.apply(u,c),v(t,S(l));var f,p,g=(f=t,p=d,h.filter(y(f).split(";"),function(e){return/!\s*important/.test(e)}).join(";")+";"+p);t.children().each(function(){e(mtjQuery(this),g)})}(r,""),r.html()};var m={b:"font-weight: bold !important",u:"text-decoration: underline !important",i:"font-style: inline !important",span:function(e){if(e.is("[data-span]"))return;var t=(n=e[0],r=n.style,r.length!==undefined?function(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()});t+=i(e[n],e[r])}return t}(r):function(e){var t="";for(var n in e){var r=e[n];"cssText"!==n&&r&&"string"==typeof r&&(t+=i(n,r))}return t}(r));var n,r;return v(e,t),t}};function i(e,t){return e+": "+t+" !important;"}function v(e,t){t?e.attr("style",t):e.removeAttr("style")}function y(e){return e.attr("style")||""}function S(e){return mtjQuery.trim(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r){var i=o.inArray(r,e);n===i&&t.push(mtjQuery.trim(r))}}return t}(e).join(";"))}}),Tt.register("BBCodeSingleTagParser").asCtor(function(s,l){this.parseSingleTag=function(e,t){var n=e.indexOf(s.OPEN_TAG,t);if(-1<n){var r=((a={startIndex:o=n,currentIndex:o,exp:e})[s.OPEN_TAG_STATE]="",a[s.ATTRIBUTE_STATE]="",a[s.DATA_STATE]="",a[s.CLOSE_TAG_STATE]="",a),i=l.go(r);if(i)return i}var o,a;return{exp:e,startIndex:e.length}}}).dependencies("BBCodeParserConsts, BBCodeOpenTagState"),Tt.register("BBCodeTagTranslator").asCtor(function(i){this.translateTag=function(e){var t=e.exp.substring(e.startIndex,e.currentIndex+1),n=function(e,t){if("/"+e.openTag!=e.closeTag)return t;-1<e.attr.indexOf("javascript:")&&(e.attr="");return i.get(e.openTag).getHTML(t,e.openTag,e.attr,e.data)}(e,t),r=n!=undefined?n:t;r!=t&&(e.exp=e.exp.replace(t,r));return{startIndex:e.currentIndex+(r.length-t.length),exp:e.exp,parsedExpPart:r}}}).dependencies("BBTagHandlerProvider"),Tt.register("BBCodeParserConsts").asCtor(function(){this.ATTRIBUTE_STATE="attr",this.DATA_STATE="data",this.OPEN_TAG_STATE="openTag",this.CLOSE_TAG_STATE="closeTag",this.OPEN_TAG="[",this.CLOSE_TAG="]"}),Tt.register("BBCodeUtils").asCtor(function(t){var a=this;function i(e){return e&&(t.isNumber(e)||e.match(/^\d+$/))?e+"px":e}this.generateCustomTagAttributes=function(e){var n="";return mtjQuery.each(e,function(e,t){n+=e+'="'+t+'" '}),(n=n.replace(/\s+$/,""))?" "+n:n},this.getStrictProperties=function(e,t,n){var r,i,o=a.getProperties(e,t,n);return r=o,i=e,Et.each(r,function(e,t){var n=-1==Et.inArray(e,i);n&&delete r[e]}),o},this.getProperties=function(e,t,n){t!=undefined&&(t=t.replace(/&quot;/gi,'"'));var r=function(e){var t,n={},r=new RegExp('([^\\s]+)="([^\\"]*)"',"g");for(;t=r.exec(e);){var i=t[1],o=t[2];n[i]=o}return n}(t);return function(e,t,n){if(e==undefined)return;for(var r=0;r<t.length;r++){var i=t[r],o=n[i],a=o==undefined,s=e[i]!=undefined,l=a&&s;l&&(n[i]=e[i])}}(n,e,r),function(e){for(var t=["width","height"],n=0;n<t.length;n++){var r=t[n];e[r]&&(e[r]=i(e[r]))}}(r),r}}).dependencies("CommonUtils"),Tt.register("BBCodePropertiesConfig").asFunction(function(){var e=["title"],t=["alt"].concat(e),n=["style","class","id","tabindex","aria-label","aria-live","role"].concat(e),r=["width","height"].concat(n),i=["channelmode","directories","fullscreen","left","top","target","location","menubar","resizable","scrollbars","status","titlebar","toolbar"].concat(r),o=["border","cellspacing","cellpadding"].concat(n),a=["autoplay"].concat(r),s=["href"].concat(n);return{table:o,tr:n,th:n,td:n,tbody:n,p:n,div:r,span:r,iframe:r,youtube:a,vimeo:a,wistia:a,ustream:a,vidyard:a,brightcove:a,html5video:a,wt:s,bf:s,flow:s,swt:s,url:i,flash:r,img:t,b:e,u:e,i:e,ul:e,li:e,survey:s,trg:n,resource:s}}),Tt.register("BBCodeVideoVendorsConfig").asCtor(function(n,r,i){var o,a="allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen";function s(e){return function(){var e=n.get();if(t=e,/^https?:\/\//i.test(t))return e&&-1!=e.indexOf("https:");var t;return"https:"===i.location.protocol}()?e.replace("http:","https:"):e}this.get=function(e){var t,n=(t=e,(o=o||{youtube:{url:s("http://www.youtube.com/embed/"),name:"youtube",allowFullScreen:"allowfullscreen"},vimeo:{url:s("http://player.vimeo.com/video/"),name:"vimeo",allowFullScreen:"webkitAllowFullScreen mozallowfullscreen allowFullScreen"},wistia:{url:s("http://fast.wistia.net/embed/iframe/"),name:"wistia",allowFullScreen:a,additionalParams:' allowtransparency="true" scrolling="no" class="wistia_embed" name="wistia_embed"'},ustream:{url:s("http://www.ustream.tv/embed/recorded/"),name:"ustream",allowFullScreen:a},vidyard:{url:s("http://play.vidyard.com/"),name:"vidyard",allowFullScreen:a}})[t]);if(n)return n;r.error(new Error("Unsupported video vendor "+e))}}).dependencies("RecorderServerManager, Logger, win"),Tt.register("BBCodeUrlTagHandler").asCtor(function(s,l,o,t,u,a,i){var c=0,d={url:{attribute:"href"},anchor:{attribute:"name"},email:{attribute:"href",prefix:"mailto: "}};function f(e,t,n,r){var i=e||t;return{classes:r["class"],target:r.target,src:function(e){var t=h();if(t==undefined)return e;for(var n=0;n<t.length;n++)if(o.isLike(e,t[n]))return e;return""}(i),label:t,style:r.style,title:r.title,data:a.startsWith(n,i)?n.replace(i,""):n}}function p(e,t){t.srcForOpen="'"+t.src.replace(/\'/g,"")+"'",t.specs=function(e){for(var t=[],n=["toolbar","titlebar","status","scrollbars","resizable","menubar","location","top","left","fullscreen","directories","channelmode","height","width"],r=0;r<n.length;r++){var i=n[r];e[i]&&t.push(a.formatString("{0}={1}",i,e[i].replace(/\'/g,"").replace(/px$/,"")))}return t.join(",")}(e);var n=Et("<span></span>");n.attr("id","walkme-new-window-link-"+c++),t.title&&g(n,"title",t.title);var r=Et("<a></a>");return g(r,"class","walkme-custom-bbcode-link "+t.classes),g(r,"style","color: inherit; text-decoration:underline; "+t.style),g(r,"href","#"),g(r,"onclick",u.to_html("event.preventDefault ? event.preventDefault() : event.returnValue = false;_walkmeInternals.ctx.get('CommonEvents').raiseEvent('BBCodeLinkClicked', {Src : '{{{src}}}' });window.open({{{srcForOpen}}},'{{{target}}}','{{{specs}}}');",t)),g(r,"data-url",t.data),g(r,"data-href",t.src),r.html(t.label),n.append(r),n.prop("outerHTML")}function g(e,t,n){var r=i.decodeHtml(n,["&",'"',"'",">","<"]);e.attr(t,r)}this.getHTML=function(e,t,n,r){var i=function(e,t){if(t){var n=t.split(" "),r=n.shift();if(!function(e,t){for(var n=0;n<t.length;n++){var r=e.indexOf("=");if(-1<r&&(e=e.substring(0,r)),t[n]==e)return!0}return!1}(r,s[e]))return{tagValue:r,tagProperties:n.join(" ")}}return{tagValue:undefined,tagProperties:t}}(t,n),o=l.getStrictProperties(s[t],i.tagProperties,{"class":"",style:"",target:"_blank"}),a=f(i.tagValue,r,i.tagProperties,o);return o.height&&o.width?p(o,a):function(e,t,n){var r=Et("<a></a>");t.title&&g(r,"title",t.title);return r.attr("target",t.target),g(r,"class","walkme-custom-bbcode-link "+t.classes),g(r,"onclick",u.to_html("_walkmeInternals.ctx.get('CommonEvents').raiseEvent('BBCodeLinkClicked', {Src : '{{{src}}} '});",t)),g(r,"style","color: inherit; text-decoration:underline; "+t.style),g(r,n.attribute,(n.prefix||"")+t.src),g(r,"data-url",t.data),r.html(t.label),r.prop("outerHTML")}(0,a,d[t])};var h=function(){var e=t.get().Settings;return e&&e.UrlWl}}).dependencies("BBCodePropertiesConfig,BBCodeUtils, CommonUtils, SiteConfigManager, Mustache, StringUtils, HtmlDecoder"),Tt.register("BBCodeWTTagHandler").asCtor(function(c,d,f){this.getHTML=function(e,t,n,r){var i=-1,o=n;if(o){var a=o.split(" ");i=a[0],i=f.isNumber(i)?i:-1,o=a.splice(1,a.length-1).join(" ")}var s=d.getStrictProperties(c[t],o,{"class":"",style:""}),l=s["class"],u=s.style;return delete s["class"],delete s.style,'<a style="cursor: pointer; '+u+'" class="walkme-custom-bbcode-wt-link walkme-action-start-wt '+l+'" data-walkthru-id="'+i+'"'+d.generateCustomTagAttributes(s)+" data-"+t+"='"+o+"'>"+r+"</a>"}}).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils"),Tt.register("BBCodeBFTagHandler").asCtor(function(c,d,f){this.getHTML=function(e,t,n,r){var i=-1,o=n;if(o){var a=o.split(" ");i=a[0],i=f.isNumber(i)?i:-1,o=a.splice(1,a.length-1).join(" ")}var s=d.getStrictProperties(c[t],o,{"class":"",style:""}),l=s["class"],u=s.style;return delete s["class"],delete s.style,'<a style="cursor: pointer; '+u+'" class="walkme-custom-bbcode-bf-link walkme-action-start-bf '+l+'" data-bizflow-id="'+i+'"'+d.generateCustomTagAttributes(s)+" data-"+t+"='"+o+"'>"+r+"</a>"}}).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils"),Tt.register("BBCodeImgTagHandler").asCtor(function(s,l){function u(e){var t,n,r,i=(t=e,n=new RegExp("^(\\d+)x(\\d+)[^\\]]*"),{height:(r=function(e,t){var n=t.exec(e);null!=n&&2<n.length?n.splice(0,1):n=[undefined,undefined];return n}(t,n))[0],width:r[1],toTagAttributes:o});return i.toTagAttributes()}function o(){return this.height&&this.width?' width="'+this.height+'px" height="'+this.width+'px" style="width:'+this.height+"px; height:"+this.width+'px"':""}this.getHTML=function(e,t,n,r){var i=s.getStrictProperties(l[t],n),o=n;if(o){var a=o.split(" ");o=a.splice(1,a.length-1).join(" ")}return'<img src="'+r+'"'+u(n)+s.generateCustomTagAttributes(i)+" data-"+t+"='"+o+"'/>"}}).dependencies("BBCodeUtils, BBCodePropertiesConfig"),Tt.register("BBCodeVideoTagHandler").asCtor(function(u,c,d,f,e,p){this.getHTML=function(e,t,n,r){var i=c.getProperties(u[t],n,{width:420,height:315}),o=p.toQueryString(t,i),a=d.get(t),s=a.url+r+"?"+o,l=f.to_html('<iframe data-{{{vendorName}}}-id="{{{videoId}}}" src="{{{src}}}" frameborder="0" allow="autoplay;"{{#title}} title="{{{title}}}"{{/title}} {{{allowFullScreen}}} style="position:relative; width: {{{width}}}; height: {{{height}}};"{{{additionalParams}}} data-{{tagName}}="{{bbCodeParams}}"></iframe>',{vendorName:a.name,videoId:r,width:i.width,height:i.height,title:""!==i.title?i.title:undefined,src:s,allowFullScreen:a.allowFullScreen,additionalParams:a.additionalParams,tagName:t,bbCodeParams:n});return l}}).dependencies("BBCodePropertiesConfig, BBCodeUtils, BBCodeVideoVendorsConfig, Mustache, JsonUtils, BBCodeVideoQueryStringParamsHandler"),Tt.register("BBCodeIframeTagHandler").asCtor(function(l,u,c){this.getHTML=function(e,t,n,r){var i,o,a=l.getProperties(u[t],n,{width:420,height:315});o="width: "+(i=a).width+"; height: "+i.height+";",i.style=o+(i.style||""),delete i.width,delete i.height;var s='<iframe src="{{{src}}}" frameborder="0"'+l.generateCustomTagAttributes(a)+" data-"+t+"='"+n+"'></iframe>";return c.to_html(s,{src:r})}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache"),Tt.register("BBCodeHTMLTagHandler").asCtor(function(i,o){this.getHTML=function(e,t,n,r){return"p"==t&&(n=" "+n),"<"+t+i.generateCustomTagAttributes(i.getStrictProperties(o[t],n))+" data-"+t+"='"+n+"'>"+r+"</"+t+">"}}).dependencies("BBCodeUtils, BBCodePropertiesConfig"),Tt.register("BBCodeSurveyTagHandler").asCtor(function(l,u,c){this.getHTML=function(e,t,n,r){var i=-1,o=n;if(o){var a=o.split(" ");i=c.isNumber(a[0])?a[0]:-1}var s=l.getStrictProperties(u[t],o);return delete s["class"],delete s.style,'<a data-survey-id="'+i+'" class="walkme-custom-bbcode-survey walkme-action-start-survey" style="cursor: pointer;"'+l.generateCustomTagAttributes(s)+">"+r+"</a>"}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils"),Tt.register("BBCodeResourceTagHandler").asCtor(function(l,u,c){this.getHTML=function(e,t,n,r){var i="",o=n;if(o){var a=o.split(" ");i=c.isNumber(a[0])?a[0]:""}var s=l.getStrictProperties(u[t],o);return delete s["class"],delete s.style,'<a data-resource-id="'+i+'" class="walkme-action-start-resource" style="cursor: pointer;"'+l.generateCustomTagAttributes(s)+">"+r+"</a>"}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils"),Tt.register("BBCodeFlashTagHandler").asCtor(function(a,s,l){this.getHTML=function(e,t,n,r){var i=a.getStrictProperties(s[t],n,{width:420,height:315}),o=l.to_html('<div class="walkme-custom-flash-wrapper" style="width: {{{width}}}; height: {{{height}}};"><object type="application/x-shockwave-flash"{{#title}} title="{{{title}}}"{{/title}} data="{{{swf}}}" allowNetworking="none" allowFullScreen="false" width="{{{width}}}" height="{{{height}}}" data-{{tagName}}=\'{{bbCodeParams}}\'><param name="SRC" value="{{{swf}}}"/><param name="allowNetworking" value="none"/><param name="allowFullScreen" value="false"/></object></div>',{swf:r,width:i.width,height:i.height,title:""!==i.title?i.title:undefined,tagName:t,bbCodeParams:n});return o}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache"),Tt.register("BBCodeJQueryTagHandler").asCtor(function(l,u,c){this.getHTML=function(e,t,n,r){if(c.get())return"<jquery>"+(i=r.replace(/\n/g,""),o=decodeURIComponent(i),(a=/(.*?)\[\/jquery]/.exec(o))?a[1]:i)+"</jquery>";var i,o,a,s=l.encodeText(u.getjQueryElementText(r));return Tt.get("BBCodeParser").parse(s)}}).dependencies("CommonUtils, JQueryElementFinder, IsInWYSIWYG"),Tt.register("BBCodeCookieTagHandler").asCtor(function(o,a){this.getHTML=function(e,t,n,r){if(a.get())return"<cookie>"+r+"</cookie>";var i=o.getWindowCookie(r);return null!=i&&!1!==i||(i=""),Tt.get("BBCodeParser").parse(o.encodeText(i))}}).dependencies("CommonUtils, IsInWYSIWYG"),Tt.register("BBCodeVarTagHandler").asCtor(function(o,a){this.getHTML=function(e,t,n,r){if(a.get())return"<var>"+r+"</var>";var i=o.getWindowVar(r);return null!=i&&!1!==i&&"function"!=typeof i||(i=""),Tt.get("BBCodeParser").parse(o.encodeText(i))}}).dependencies("CommonUtils, IsInWYSIWYG"),Tt.register("BBCodeWmDataTagHandler").asCtor(function(o,a,s){this.getHTML=function(e,t,n,r){if(a.get())return"<wm-data>"+r+"</wm-data>";var i=s.getData(r);return null!==i&&!1!==i||(i=""),Tt.get("BBCodeParser").parse(o.encodeText(i))}}).dependencies("CommonUtils, IsInWYSIWYG, ClientStorageManager"),Tt.register("BBCodeHTML5VideoTagHandler").asCtor(function(c,d,f,p,g,h){this.getHTML=function(e,t,n,r){var i,o,a,s,l=c.getProperties(d[t],n,{width:420,height:315}),u=f.to_html('<video controls height="{{height}}" width="{{width}}"{{#title}} title="{{{title}}}"{{/title}} {{autoplay}} src="{{{src}}}"{{#additionalAttributes}} {{attributeName}}="{{attributeValue}}"{{/additionalAttributes}} data-{{tagName}}=\'{{bbCodeParams}}\'></video>',{src:r,width:l.width,height:l.height,autoplay:function(e){var t="";!e.autoplay||g.get()||h.get()||(t="autoplay");return t}(l),title:""!==l.title?l.title:undefined,tagName:t,bbCodeParams:n,additionalAttributes:(i=l,o=["width","height","title","autoplay"],a=[],s=p.getDictionaryKeys(i),Et.each(s,function(e,t){-1===Et.inArray(t,o)&&a.push({attributeName:t,attributeValue:i[t]})}),a)});return u}}).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache, DictionaryUtils, IsInWYSIWYG, IsInScreenshot"),Tt.register("BBCodeRegexTagHandler").asCtor(function(c,d,f){this.getHTML=function(e,t,n,r){if(d.get())return"<regex exp="+n+">"+r+"</regex>";if(!n)return r;var i=(o=n,a=f.decodeHtml(o,p),a.substring(0,a.length-1).substring(1));var o,a;try{var s=f.decodeHtml(i,p),l=f.decodeHtml(r,p).match(s);return l?l[l.length-1]:""}catch(u){return c.error("failed parsing regex: "+i),r}};var p=['"',">","<","&","'"]}).dependencies("Logger, IsInWYSIWYG, HtmlDecoder"),Tt.register("BBCodeCustomTagHandler").asCtor(function(){this.getHTML=function(e,t,n,r){var i=window.walkme_custom_bbcode_parser;if("function"==typeof i)return i(e,t,n,r)}}),Tt.register("BBCodeTriggerTagHandler").asCtor(function(s){this.getHTML=function(e,t,n,r){var i=-1,o=n;if(o){var a=o.split(" ");i=a[0],i=s.isNumber(i)?i:-1,o=a.splice(1,a.length-1).join(" ")}return'<a style="cursor: pointer;" class="trg-'+i+'" data-'+t+"='"+o+"'>"+r+"</a>"}}).dependencies("CommonUtils"),Tt.register("BBTagHandlerProvider").asCtor(function(t,n,r,i,o,a,s,l,u,c,d,f,p,g,h,m,v,y){this.get=function(e){switch(e){case"url":return t;case"wt":return n;case"bf":case"flow":case"swt":return r;case"img":return i;case"youtube":case"vimeo":case"wistia":case"ustream":case"vidyard":return o;case"html5video":return v;case"iframe":return a;case"b":case"u":case"i":case"table":case"tr":case"th":case"td":case"tbody":case"div":case"span":case"ul":case"li":case"p":return s;case"survey":return l;case"resource":return m;case"flash":return u;case"jquery":return c;case"cookie":return d;case"var":return f;case"wm-data":return p;case"trg":return h;case"regex":return y;default:return g}}}).dependencies("BBCodeUrlTagHandler, BBCodeWTTagHandler, BBCodeBFTagHandler, BBCodeImgTagHandler, BBCodeVideoTagHandler,BBCodeIframeTagHandler, BBCodeHTMLTagHandler, BBCodeSurveyTagHandler, BBCodeFlashTagHandler,BBCodeJQueryTagHandler, BBCodeCookieTagHandler, BBCodeVarTagHandler, BBCodeWmDataTagHandler,BBCodeCustomTagHandler, BBCodeTriggerTagHandler, BBCodeResourceTagHandler, BBCodeHTML5VideoTagHandler, BBCodeRegexTagHandler"),Tt.register("BBCodeVideoQueryStringParamsHandler").asCtor(function(s,l,u,c){this.toQueryString=function(e,t){var n=["height","width","title"],r=t;(l.get()||u.get())&&(r=c.get(n,e,t));return i=r,o=n,a="",Et.each(i,function(e,t){-1===Et.inArray(e,o)&&(a+=s.formatString("{0}={1}&",e,t))}),a;var i,o,a}}).dependencies("StringUtils, IsInWYSIWYG, IsInScreenshot, BBCodeWysiwygVideoParamsObjectHandler"),Tt.register("BBCodeWysiwygVideoParamsObjectHandler").asCtor(function(){this.get=function(e,t,n){var r={};e.push("autoplay"),i[t]&&Et.extend(r,i[t]);return Et.extend(r,n),r};var i={ustream:{html5ui:1}}}),Tt.register("UIVariationsAdapter").asCtor(function(i){this.adapt=function(e){if(e)for(var t in e){var n=i.getResourcePath("/player/resources/templates/"+t),r=Xt(e[t],n);e[t].metaData=r}}}).dependencies("ResourceManager"),Tt.register("UITemplatesAdapter").asCtor(function(a){this.adapt=function(e){if(e)for(var t in e)if(e[t])for(var n in e[t]){var r=e[t][n];if(r&&r.Css){var i=a.getResourcePath("/player/resources/templates/"+t+"/"+n),o=Xt(r.Css,i);r.Css.metaData=o}}}}).dependencies("ResourceManager"),Tt.register("UITemplates").asCtor(Jt).dependencies("UITemplatesAdapter"),Tt.register("UIVariations").asCtor(Jt).dependencies("UIVariationsAdapter"),Tt.register("UIDisplayers").asFunction(function(){var e=new Jt;return e.concat({1:"PopupDisplayer"}),e}).asSingleton(),Tt.register("UIComponents").asFunction(function(){var e=new Jt;return e.concat({1:"ShoutOut",2:"ShoutOut",3:"Quiz",4:"QuizAnnouncement"}),e}).asSingleton();var $t=function(d){function e(e,t,n,r,i,o,a,s,l,u){var c=d.call(this,e,t,r,o,l,u)||this;return c._bbCodeEventsBinder=i,c._consts=o,c._commonEvents=n,c._specificEntityDesignTemplateCssClassGetter=a,c._sharedConsts=s,c.createUi(),c}return Ie(e,d),e.prototype.registerEvents=function(){d.prototype.registerEvents.call(this),this.registerBBCodeEvents()},e.prototype.registerBBCodeEvents=function(){var e=this.getBBcodeEventCallback(),t={objectId:this._uiComponent.Id,type:te.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT};this._bbCodeEventsBinder.bind(this._uiCreator.ui,e,t)},e.prototype.getBBcodeEventCallback=function(){var e=Et.proxy(function(){this.destroy()},this),t={uiCreator:this._uiCreator,defaultt:e,defaultValue:e,returnValue:null};return this._commonEvents.raiseEvent("shoutoutBBCodeClickCallback",t),t.returnValue},e.prototype.createConfig=function(){var e=d.prototype.createConfig.call(this),t=this._specificEntityDesignTemplateCssClassGetter.get(this._uiComponent,this._sharedConsts.templateEntityType.popup);return t&&(e.designTemplateCssClass=t),e},e.prototype.getInitiatorType=function(){return te.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT},e}(s);Tt.register("ShoutOut").asCtor($t).asProto().dependencies("ActionsFactory, CommonUtils, CommonEvents, BBCodeParser, BBCodeEventsBinder, Consts, SpecificEntityDesignTemplateCssClassGetter, SharedConsts, DesignTemplateHtmlGetter");var Zt=function(e){function t(){e.apply(this,arguments)}return Ie(t,e),t.prototype.bindEvents=function(){var n=this;Et.safeEach(this.events,function(e,t){n.ui.find(e).on(t.name,t.body)})},t}(function(){function e(){this.events={}}return e.prototype.setUI=function(e,t,n,r,i){var o=e.Actions?Et(e.Actions).filter(function(e,t){return t.IsActive}).length:0,a="wm-one-button";2==o?a="wm-two-buttons":0==o&&(a="wm-no-buttons"),n.ButtonsClass=a,this.ui=Tt.get("TemplatesFactory").get(e.UITemplateId,e.UITemplateVersion,t,n,r,e.DesignTemplateId,e.DesignTemplatePlaceholderConfigs,i)},e.prototype.registerEvents=function(e,t,n,r,i){this.events[e]={name:t,actionId:n,body:r.libAction}},e.prototype.getUI=function(){return this.bindEvents(),this.ui},e.prototype.bindEvents=function(){},e}());e.register(te.PLATFORM.Web,function(){Tt.register("UICreator").asCtor(Zt).asProto()}),e.register(te.PLATFORM.MobileWeb,function(){Tt.register("UICreator").asCtor(Zt).asProto()}),e.register(te.PLATFORM.Desktop,function(){Tt.register("UICreator").asCtor(Zt).asProto()});var en=function(i){function o(e,t,n){var r=i.call(this,t)||this;return r.domSessionManager=e,r.uiComponent=n,r.DEFAULT_Z_INDEX=2147483631,r._positions=Tt.get("Positions"),r._announcementBarCategory=0,r._popupUtil=Tt.get("PopupUIUtil"),r._popupUtil.setSettings(t),r._designTemplates=Tt.get("DesignTemplates"),r}return Ie(o,i),o.prototype.setUiObject=function(e){i.prototype.setUiObject.call(this,e),this._popupUtil.setUiObject(this._uiObject)},o.prototype.show=function(e){if(this._isVisible)e&&e();else{var t;this.unbindEvents(),t=this._settings["z-index"]?this._settings["z-index"]:this.DEFAULT_Z_INDEX,this._uiObject.css("z-index",t);var n=Et.proxy(function(){this._isVisible=!0,e&&e()},this);this.pop(n),this.setUiObjectPosition()}},o.prototype.setUiObjectPosition=function(){if(this._settings.isStickyCss)this._uiObject.css("position","sticky");else if(this.uiComponent){var e=this._designTemplates.getDesignTemplateById(this.uiComponent.DesignTemplateId);e&&e.categories&&-1!==Et.inArray(this._announcementBarCategory,e.categories)&&this._uiObject.css("position","relative")}},o.prototype.pop=function(e){var t=parseInt(this._settings.position,10);t==this._positions.Center?this.popCenter(e):this.popCorner(t,e)},o.prototype.handleOverlay=function(){var e=Number(this._uiObject[0].style.zIndex),t=this._popupUtil.getOverlay();t&&(e==this.DEFAULT_Z_INDEX&&this._uiObject.css("z-index",e+1),t.show())},o.prototype.popCorner=function(e,t){this._uiObject.css({position:"fixed"}),this.handleOverlay();var n=(this._settings.marginV||0)+"px",r=(this._settings.marginH||0)+"px";switch(e){case this._positions.Top:this._uiObject.addClass(o.POSITION_PREFIX+"top"),this._uiObject.css({top:0,left:"50%",marginLeft:-this._uiObject.outerWidth()/2,marginTop:n});break;case this._positions.Right:this._uiObject.addClass(o.POSITION_PREFIX+"right"),this._uiObject.css({right:0,top:"50%",marginTop:-this._uiObject.outerHeight()/2,marginRight:r});break;case this._positions.Bottom:this._uiObject.addClass(o.POSITION_PREFIX+"bottom"),this._uiObject.css({bottom:0,left:"50%",marginLeft:-this._uiObject.outerWidth()/2,marginBottom:n});break;case this._positions.Left:this._uiObject.addClass(o.POSITION_PREFIX+"left"),this._uiObject.css({left:0,top:"50%",marginTop:-this._uiObject.outerHeight()/2,marginLeft:r});break;case this._positions.TopLeft:this._uiObject.addClass(o.POSITION_PREFIX+"top-left"),this._uiObject.css({left:0,top:0,marginTop:n,marginLeft:r});break;case this._positions.TopRight:this._uiObject.addClass(o.POSITION_PREFIX+"top-right"),this._uiObject.css({right:0,top:0,marginTop:n,marginRight:r});break;case this._positions.BottomRight:this._uiObject.addClass(o.POSITION_PREFIX+"bottom-right"),this._uiObject.css({right:0,bottom:0,marginBottom:n,marginRight:r});break;case this._positions.BottomLeft:this._uiObject.addClass(o.POSITION_PREFIX+"bottom-left"),this._uiObject.css({left:0,bottom:0,marginBottom:n,marginLeft:r})}this.fadeIn(t)},o.prototype.popCenter=function(e){this._uiObject.addClass("wm-position-center"),this._lib.centerElementInPage(this._uiObject,!1),this.handleOverlay(),this.fadeIn(e),this._resizeHandler=Et.proxy(function(){this._uiObject.stop(!1,!0),this._lib.centerElementInPage(this._uiObject,!0)},this),this._topWindow.bind(o.MOVEMENT_EVENTS,this._resizeHandler)},o.prototype.fadeIn=function(e){var t=this;this.domSessionManager.mutate(function(){t._uiObject.stop(!0,!1).css("opacity",1).hide().fadeIn(400,e)})},o.prototype.hide=function(e){this._popupUtil.removeOverlay(),this._isVisible?(this.unbindEvents(),this._uiObject.stop(!0,!1).css("opacity",1).show().fadeOut(200,Et.proxy(function(){this._isVisible=!1,e&&e()},this))):e&&e()},o.prototype.remove=function(e){this.hide(Et.proxy(function(){this._uiObject.remove(),e&&e()},this))},o.prototype.unbindEvents=function(){this._resizeHandler&&this._topWindow.unbind(o.MOVEMENT_EVENTS,this._resizeHandler),this._resizeHandler=null},o.MOVEMENT_EVENTS="scroll."+(o.EVENT_SUFFIX="walkmeDisplayer")+", resize."+o.EVENT_SUFFIX,o.POSITION_PREFIX="wm-position-",o}(function(i){function e(e){var t=i.call(this)||this;t._isVisible=!1;var n=Tt.get("Lib"),r=Tt.get("FramesetsUtils").shouldHandlePageAsFramesets()?Tt.get("BiggestFrameProvider").getBiggestFrame().contentWindow:window;return t._lib=n,t._topWindow=Et(r),t._settings=e,t.setTopContainer(e),t}return Ie(e,i),e.prototype.setTopContainer=function(e){var t=Tt.get("CommonUtils").isValueTrue(e.isJquerySelector)?e.jquerySelector:undefined;this._topContainer=Tt.get("TopContainerProvider").getTopContainer(null,!1,t)},e.prototype.setUiObject=function(e){this._uiObject=e},e.prototype.getContainer=function(){return this._topWindow},e.prototype.append=function(e){this._topContainer.append(this._uiObject),e&&e()},e.prototype.prepend=function(e){this._topContainer.prepend(this._uiObject),e&&e()},e.prototype.remove=function(e){this._uiObject.remove(),this._isVisible=!1,e&&e()},e.prototype.show=function(e){this._uiObject.show(),this._isVisible=!0,e&&e()},e.prototype.hide=function(e){this._uiObject.hide(),this._isVisible=!1,e&&e()},e.prototype.isVisible=function(){return this._isVisible},e}(a));e.register([te.PLATFORM.Web,te.PLATFORM.Desktop],function(){Tt.register("PopupDisplayer").asCtor(en).asProto().dependencies("DOMSessionManager")});var tn=function(n){function e(){n.apply(this,arguments),this._css="/* Template 4.3 Only Fallbacks */ /* All */ @media only screen and (max-width: 640px) {   .wm-template-light,   .wm-template-standout-title,   .wm-template-standout-actions {    min-width: 85% !important;   }    } /* Light */ @media only screen and (max-height: 400px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 400px; \t} }  /* Standout Title */ @media only screen and (max-height: 400px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 75px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }  /* Standout Action */ @media only screen and (max-height: 400px) { \t.wm-template-standout-actions .wm-template-text{ \t\tmax-height: 75px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-button { \t\tpadding-top: 8px; \t\tpadding-bottom: 8px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }",this._resourceManager=Tt.get("ResourceManager")}return Ie(e,n),e.prototype.append=function(e){this._uiObject.css("position","fixed"),0==Et("#walkme-mobile-css-old-version").length&&this._resourceManager.injectCss(this._css,"walkme-mobile-css-old-version"),n.prototype.append.call(this,e)},e.prototype.pop=function(e){this.handleOverlay(),this.fadeIn(e)},e.prototype.handleOverlay=function(){n.prototype.handleOverlay.call(this);var e=this._popupUtil.getOverlay(),t=e&&e.getOverlayElement();t&&t.on("click.walkme touchend.walkme",Et.proxy(function(){this.remove()},this))},e}(en);e.register(te.PLATFORM.MobileWeb,function(){Tt.register("PopupDisplayer").asCtor(tn).asProto().dependencies("DOMSessionManager")});var nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ie(t,e),t.prototype.addResetCss=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.find("span,button,input,label,a,b,br,img,i,u").cssReset("display","inline"),e.find("li").cssReset("display","list-item"),e.find("ul").cssReset("padding-left","40px"),this.setTableElementsDefaultCss(e),e.find("*").addBack().cssReset(te.CSS_RESET).cssReset("direction",t),e.find("video").css("width","").css("height","")},t.prototype.setTableElementsDefaultCss=function(e){e.find("table").cssReset({display:"table","border-collapse":"separate","border-spacing":"2px"}),e.find("thead").cssReset({display:"table-header-group","vertical-align":"middle"}),e.find("tbody").cssReset({display:"table-row-group","vertical-align":"middle"}),e.find("tfoot").cssReset({display:"table-footer-group","vertical-align":"middle"}),e.find("td,th").cssReset({display:"table-cell","vertical-align":"inherit",padding:"1px"}),e.find("tr").cssReset({display:"table-row","vertical-align":"inherit"})},t}(function(){function e(e,t,n,r,i,o,a,s,l,u,c,d,f,p){this.CLASSES_PREFIX="wm-",this.STATES_DATA_KEY="templatesFactoryStates",this.HANDLE_SHOUTOUT_CSS_EVENT="handleShoutOutCss",this._logger=e,this._mustache=t,this._uiTemplates=n,this._resourceManager=r,this._fontsData=i,this._siteConfigManager=o,this._hostData=a,this._commonUtils=s,this._designTemplateHtmlGetter=l,this._additionalTemplatesHandlers=u,this._shoutOutPlaceholdersReplacer=c,this._shoutOutActionPlaceholderClassesAdder=d,this._arrayUtils=f,this._dynamicFontSizeService=p}return e.prototype.addResources=function(e,t,n,r,i){var o=this._uiTemplates.get(e,t).Css;this.loadVariationsFonts([o].concat(n),r,i)},e.prototype.get=function(e,t,n,r,i,o,a,s){var l=this._commonUtils.clone(this._uiTemplates.get(e,t)),u=r||{},c=this._designTemplateHtmlGetter.get(o);c&&(l.Html=l.Html.replace(/{{{templateHtml}}}/g,c),u.templateHtml=c);var d=this._commonUtils.createElementInDocument(this._mustache.to_html(l.Html,u),i||window.document);this._shoutOutPlaceholdersReplacer.replace(a,d,s),c&&a&&this._shoutOutActionPlaceholderClassesAdder.addClasses(d,a),this.addDefaultClasses(d),this.inheritProperties(d);var f=d.wrap("<div />").parent(),p=this,g=n&&this._arrayUtils.map(n,function(e,t){return p.runCssHandlerWithParams(i,f,e,0==t)});l.Css=this.handleDynamicFontSize(s,l.Css);var h=this.runCssHandlerWithParams(i,f,l.Css,!(n&&n.length)),m=this._arrayUtils.any(g,function(e){return!!e});if(m)for(var v=g.length-1;0<=v;v--){var y=g[v];y&&this.recursiveApplyStyle(f,y)}return h&&this.recursiveApplyStyle(f,h),(m||h)&&this.addResetCss(d),this.addStateHandler(d),d.unwrap(),d.addClass(r.designTemplateCssClass),d.hide()},e.prototype.handleDynamicFontSize=function(e,t){return e&&e._settings&&this._dynamicFontSizeService.shouldResetLineHeight(e._settings)?this._dynamicFontSizeService.resetLineHeight(t):t},e.prototype.runCssHandlerWithParams=function(e,t,n,r){return void 0===r&&(r=!1),this._additionalTemplatesHandlers.run(this.HANDLE_SHOUTOUT_CSS_EVENT,arguments,n)},e.prototype.loadVariationsFonts=function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i].metaData&&e[i].metaData.fonts;if(o)for(var a=0;a<o.length;a++){var s=this._fontsData.get(o[a]);s&&r.push(s)}}this._resourceManager.fonts(r,n||null,t,t)},e.prototype.addDefaultClasses=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.addClass(this.CLASSES_PREFIX+t),e.addClass(this.CLASSES_PREFIX+this._hostData.browser.name.toLowerCase()),"IE"==this._hostData.browser.name&&e.addClass(this.CLASSES_PREFIX+"ie-"+this._hostData.browser.version)},e.prototype.inheritProperties=function(e){var r=this,i=e.allCss();e.children().each(function(e,t){var n=Et(t);n.cssReset(i),r.inheritProperties(n)})},e.prototype.addResetCss=function(e){},e.prototype.addStateHandler=function(e){var o=this;e.find("*").addBack().each(function(e,t){var n=(t=Et(t)).data(o.STATES_DATA_KEY);if(n){var r=n.hover;o.addHoverState(t,r);var i=n.click;o.addClickState(t,i),t.removeData(o.STATES_DATA_KEY)}})},e.prototype.addHoverState=function(e,t){if(t){var n=e.attr("style");e.hover(function(){e.css(t)},function(){e.attr("style",n)})}},e.prototype.addClickState=function(t,n){if(n){var e=t.attr("style");t.mousedown(function(e){t.css(n)}),t.bind("mouseup blur",function(){t.attr("style",e)})}},e.prototype.recursiveApplyStyle=function(e,t){if(t&&t.children)for(var n in this.changePropertyOrder(t,"*"),t.children)if(t.children.hasOwnProperty(n)){var r=n.split(":"),i=e.find(r[0]),o=t.children[n].attributes;for(var a in o)!o.hasOwnProperty(a)||this._commonUtils.isIe7or8()&&"-ms-filter"==a||this.handleCSS(i,a,o[a],r[1]);this.recursiveApplyStyle(i,t.children[n].children)}},e.prototype.changePropertyOrder=function(e,t){if(e.children[t]){var n=e.children[t];delete e.children[t],e.children[t]=n}},e.prototype.handleCSS=function(e,t,n,r){if(n instanceof Array)for(var i in n)this.appendCSS(e,t,n[i],r);else this.appendCSS(e,t,n,r)},e.prototype.appendCSS=function(e,t,n,r){r?(r=r.toLowerCase(),this.stateCss(r,e,t,n)):e.cssReset(t,n)},e.prototype.stateCss=function(e,t,n,r){var i=t.data(this.STATES_DATA_KEY)||{};i[e]||(i[e]={}),i[e][n]||(i[e][n]=r),t.data(this.STATES_DATA_KEY,i)},e}());function rn(o,a,s){this.get=function(e,t){try{var n=a.get(e),r=Tt.create(n,t);return r.once("show-end",function(){s.deprecatedRaiseEvent("show-end",r)}),r}catch(i){o.error(i,"error generating class")}}}function on(t){function r(e){t.send("feperf",e)}this.measure=function(e,t){var n=Tt.create("PerformanceStopwatch",[e,t]);return n.start().then(r),n}}function an(){this.measure=function(){return{stop:function(){}}}}e.register(te.PLATFORM.MobileWeb,function(){Tt.register("TemplatesFactory").asCtor(nn).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, AdditionalTemplatesHandlers, ShoutOutPlaceholdersReplacer, ShoutOutActionPlaceholderClassesAdder, ArrayUtils, DynamicFontSizeService")}),e.register([te.PLATFORM.Web,te.PLATFORM.Desktop],function(){Tt.register("TemplatesFactory").asCtor(nn).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, AdditionalTemplatesHandlers, ShoutOutPlaceholdersReplacer, ShoutOutActionPlaceholderClassesAdder, ArrayUtils, DynamicFontSizeService")}),Tt.register("UIComponentsFactory").asCtor(rn).asSingleton().dependencies("Logger, UIComponents, CommonEvents"),Tt.register("DisplayersFactory").asCtor(rn).asSingleton().dependencies("Logger, UIDisplayers, CommonEvents"),Tt.register("DataFixer").asCtor(function(r){var i=this;i.fixSteps=function(e,t){for(var n=e.Steps,r=0;r<n.length;r++)i.fixStep(n[r],r,t)},i.fixStep=function(e,t,n){e.fixed||(e.StepIndex=t,e.Configuration&&-1!=e.Configuration?(e.End=e.Configuration.End,e.Duration=e.Configuration.Duration,e.Delay=e.Configuration.Delay,e.Position=e.Configuration.Position):e.Configuration=n.BalloonSettings,e.IgnorePosition=e.IgnorePosition!=undefined?e.IgnorePosition:parseInt(r.getSettingsValue(e.Settings,"ignorePosition",0)),e.fixed=!0)}}).dependencies("SettingsValuesRetriever"),Tt.register("PerformanceBILogger").asFunction(function(e,t,n){return n.isFeatureEnabled("enablePerfLogs")&&t.isEnabled()&&e.isEnabled()?new on(e):new an}).dependencies("ThrottledBILogger, PerformanceDataIntegrityKeeper, FeaturesManager"),Tt.register("PerformanceTimestampAdder").asCtor(function(n){this.addTimeStamp=function(e){try{G.addTimeStamp(e),n.deprecatedRaiseEvent("PerfTimestamp",e)}catch(t){}}}).dependencies("CommonEvents"),__webpack_require__(287),__webpack_require__(290),Tt.register("PerformanceMeasureAPI").asCtor(function(n){var r={};function i(e){delete r[e]}this.startMeasure=function(e,t){if(r[e]){if(!t)return;i(e)}r[e]=n.measure(e)},this.stopMeasure=function(e){if(!r[e])return;r[e].stop(),i(e)},this.clearMeasure=i}).dependencies("PerformanceAPI"),Tt.register("UIEventRaiser").asCtor(function(r){this.trigger=function(e,t){var n;r.wrapSession(function(){n=i.triggerHandler(e)}),t&&at.all(n||[]).then(t)},this.bind=function(e,t){i.on(e,t)},this.unbind=function(e,t){i.off(e,t)};var i=Et(this)}).dependencies("ElementFinder");var sn,ln=((sn=function(t,e,n,r,i,o,a,s,l){var u=this;this.watchForVisibility=function(){h=!1,t.customerLog(s.formatString("UIVisibilityManager watchForVisibility for {0} with stickyType {1}, with condition {2}, isRemoveByCondition {3}",l.logContext,l.stickyType,!!c,l.isRemoveByCondition),v,y),i.bindCheckByState(w),i.bindCheckIfShouldHideOrReposition(D),x()&&i.bindCheckIfShouldShow(C);c&&(c.evaluateAsyncAndDontEvaluateImmediately(l.conditionTree),c.onSonar(C));return C()},this.getVisibilityState=E,this.shouldShow=I,this.cleanResources=T;var c,d,f,p,g,h,m,v=3,y=r.FEATURES_LOGS.Flows;function S(){return d&&d.getElement()}function E(){return f}function T(){O(),i.unbindCheckByState(w),i.unbindCheckIfShouldHideOrReposition(D),i.unbindCheckIfShouldShow(C),o.remove(I),m=null,c&&c.cleanResources(),sn.unregisterInstance(u),h=!0}function w(){E()==r.VISIBILITY_STATE.HIDDEN?b():P()&&A()||N()}function C(e){var t=at.resolve();if(E()==r.VISIBILITY_STATE.HIDDEN&&(t=b()),e){var n=e.result||[];return n.push(t),n}return t}function b(){return m?m.then(C):m=o.measure(I).then(_)}function I(){var e=p?[P,A]:[A,P],n=!0;return Et.each(e,function(e,t){n=n&&t()}),n}function _(e){m=null,h||(e?function(){if(h)return;f=r.VISIBILITY_STATE.VISIBLE,d&&(g=i.bindCheckRemoveForElement(S(),k));l.onShow&&(t.customerLog(s.formatString("UIVisibilityManager elementIsShown for {0}",l.logContext),v,y),l.onShow(S())),l.stickyType!=r.STICKY_TYPE.STRONG&&i.unbindCheckIfShouldShow(C)}():x()||l.trackUIChanges?O():T())}function P(){return!d||d.evaluateElementVisibility()==r.VISIBILITY_STATE.VISIBLE}function A(){return!c||c.getValue()}function k(){P()||N()}function D(){E()==r.VISIBILITY_STATE.VISIBLE&&l.isRemoveByCondition&&!A()&&N()}function N(){O(),l.onRemove&&(t.customerLog(s.formatString("UIVisibilityManager elementWasRemoved for {0}",l.logContext),v,y),l.onRemove()),l.stickyType==r.STICKY_TYPE.STRONG||l.trackUIChanges?a.isFeatureEnabled(r.FEATURES.CleanElementMemory)&&d&&d.cleanElement():T()}function O(){f=r.VISIBILITY_STATE.HIDDEN,d&&d.cleanResources(),g&&(g.unbind(),g=null)}function x(){return l.stickyType==r.STICKY_TYPE.SOFT||l.stickyType==r.STICKY_TYPE.STRONG}(function(){l.elementVisibilityParams&&(l.elementVisibilityParams.logContext=l.logContext,d=Tt.create("ElementVisibilityEvaluator",l.elementVisibilityParams)),l.conditionCheckerParams&&(l.conditionCheckerParams.evaluationPollingIntervalMs=2e3,l.conditionCheckerParams.onlyPollConditionFunctions=!0,l.conditionCheckerParams.evaluateSonar=!1,l.conditionCheckerParams.stopPollingAfterEvaluateTrue=!1,l.conditionCheckerParams.getSelectedElement=S,l.elementVisibilityParams&&(l.conditionCheckerParams.ownerChain=l.elementVisibilityParams.findElementParams.ownerChain),c=e.createConditionChecker(l.conditionTree,l.conditionCheckerParams)),f=r.VISIBILITY_STATE.HIDDEN,p=n.checkIfTreeContainsSelectedElement(l.conditionTree),sn.registerInstance(u)}).apply(null,arguments)}).instances={},sn.sequence=0,sn.registerInstance=function(e){e._id=sn.sequence,++sn.sequence,sn.instances[e._id]=e},sn.unregisterInstance=function(e){delete sn.instances[e._id]},sn.cleanResources=function(){for(var e in sn.instances)sn.instances.hasOwnProperty(e)&&sn.instances[e].cleanResources();sn.instances={}},sn);Tt.register("UIVisibilityManagerType").asInstance(ln),Tt.register("UIVisibilityManager").asCtor(ln).asProto().dependencies("Logger, ConditionCheckerFactory, ConditionTreeUtils, Consts, UIChecksTriggerer, DOMSessionManager, FeaturesManager, StringUtils"),Tt.register("UIChecksTriggerer").asCtor(function(e,n,r,i,o,a){this.bindCheckByState=function(e){o.bind(t,e)},this.bindCheckIfShouldShow=function(e){o.bind(s,e)},this.bindCheckIfShouldHideOrReposition=h,this.unbindCheckByState=function(e){o.unbind(t,e)},this.unbindCheckIfShouldShow=function(e){o.unbind(s,e)},this.unbindCheckIfShouldHideOrReposition=m,this.bindCheckRemoveForElement=function(e,t){if(r.isEnabled())return r.watchElement(e,t);return h(t),{unbind:function(){m(t)}}};var t="CheckByState",s="CheckIfShouldShow",l="CheckIfShouldHideOrReposition",u=2e3,c=800;function d(){o.trigger(t)}function f(){var t=a.measure("pollForShow");o.trigger(s,function(){var e;t.stop(),e=i.sync("pollForShowLoop"),n.setWalkmeTimeout(f,e||u)})}function p(){o.trigger(l,g)}function g(){var e=i.sync("pollForRemoveLoopStart");n.setWalkmeTimeout(p,e||c)}function h(e){o.bind(l,e)}function m(e){o.unbind(l,e)}e.bind(d),f(),p()}).dependencies("UIChangeTracker, TimerManager, MutationObserverWrapper, EventsTriggerSyncer, UIEventRaiser, PerformanceAPI"),Tt.register("UIPopupOverlayManager").asCtor(function(a,s,l,t,u){function c(e){return e&&e.Type==l.FLOW_STEP_TYPE.UI&&e.UIElements[0]}function d(e){return e.Type==l.FLOW_UIELEMENT_TYPE.Popup}function f(e){return t.isSpotlight(e.Settings)}this.shouldKeepOverlay=function(e){if(!u.isFeatureEnabled(l.FEATURES.SWTConsecutivePopups))return!1;var t=s.peek(),n=c(a.getNodeById(t.flowId,t.stageId));if(n&&d(n)&&f(n))return r=t.flowId,i=e,(o=c(a.getNodeById(r,i)))&&d(o)&&f(o);var r,i,o;return!1}}).dependencies("FlowsContainer, FlowStack, Consts, SpotlightChecker, FeaturesManager"),Tt.register("ElementInteractionEvents").asFunction(function(e,t){var n=[e.EVENT_SENDER_EVENT_TYPES.Click,e.EVENT_SENDER_EVENT_TYPES.Blur];t.isFeatureEnabled("extendedEvents")&&(n.push(e.EVENT_SENDER_EVENT_TYPES.MouseEnter),n.push(e.EVENT_SENDER_EVENT_TYPES.Focus));return n}).dependencies("Consts, FeaturesManager"),Tt.register("ElementInteractionEventsBinder").asCtor(function(t,o){this.bind=function(e,n,t){var r=Et(e);function i(e){t(e.data.eventName)}Et(o).each(function(e,t){r.off(t+n),r.on(t+n,{eventName:t},i)})},this.unbind=function(e,n){var r=t(e);Et(o).each(function(e,t){r.off(t+n)})}}).asProto().dependencies("wmjQuerySafe, ElementInteractionEvents");var un=function(){function c(e,t,n,r,i,o,a,s,l,u){this.logger=e,this.consts=t,this.elementFinder=n,this.positionHelper=r,this.timerManager=i,this.uiChangeTracker=o,this.elementIframesAttachedIndicator=a,this.elementChangeChecker=s,this.stringUtils=l,this._log=e.wrapCustomerLog(c.LOG_FEATURE),this._logContext=u.logContext,this._findElementParams=u.findElementParams,this._watchElementTimeoutTime=u.elementEvaluationIntervalMs||c.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._trackUIChanges=u.trackUIChanges,u.element?(this._element=u.element,this._state=this.consts.VISIBILITY_STATE.VISIBLE):this._state=this.consts.VISIBILITY_STATE.HIDDEN}return c.prototype.evaluateElementVisibilityAsynch=function(e){this._log(this.stringUtils.formatString("ElementVisibilityEvaluator evaluateElementVisibility for {0}",this._logContext),c.DEFAULT_LOG_LEVEL),this._isStopEvaluate=!1,this.handleUIChangeTracking(),this._watchElementTimeoutTime<0?e||this.evaluateElementVisibility():this.evaluateElementVisibilityAsynchLoop()},c.prototype.handleUIChangeTracking=function(){var e=this;this._trackUIChanges&&(this._onUIChange=function(){e._isStopEvaluate||e.evaluateElementVisibility()},this.uiChangeTracker.bind(this._onUIChange))},c.prototype.evaluateElementVisibility=function(){var e=this.findByState();return this._log(this.stringUtils.formatString("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} new state is {1}",this._logContext,e),c.DEFAULT_LOG_LEVEL),e!=this._state&&(this._log(this.stringUtils.formatString("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} state changed from {1} to {2}",this._logContext,this._state,e),c.DEFAULT_LOG_LEVEL),this.callOnValueChangeIfExist(e)),this._state=e,this.getElementVisibility()},c.prototype.getElementVisibility=function(){return this._state},c.prototype.calculateElementVisibility=function(){return this.findIfVisible()},c.prototype.getElement=function(){return this._element},c.prototype.setOnVisibilityChanged=function(e){this._onVisibilityChanged=e},c.prototype.cleanResources=function(){this._log(this.stringUtils.formatString("ElementVisibilityEvaluator cleanResources for {0}",this._logContext),c.DEFAULT_LOG_LEVEL),this._elementTimeoutObject&&(this._elementTimeoutObject.clear(),this._elementTimeoutObject=undefined),this._state=this.consts.VISIBILITY_STATE.HIDDEN,this._isStopEvaluate=!0,this._watchElementTimeoutTime=c.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._element=undefined,this._onVisibilityChanged=undefined,this.uiChangeTracker.unbind(this._onUIChange)},c.prototype.cleanElement=function(){this._log(this.stringUtils.formatString("ElementVisibilityEvaluator cleanElement for {0}",this._logContext),c.DEFAULT_LOG_LEVEL),this._element=undefined},c.prototype.findByState=function(){var e;switch(this._state){case this.consts.VISIBILITY_STATE.VISIBLE:e=this.findIfHidden();break;case this.consts.VISIBILITY_STATE.HIDDEN:e=this.findIfVisible();break;default:this._log(this.stringUtils.formatString("ElementVisibilityEvaluator findByState unknown state {0} for {1}",this._state,this._logContext),1)}return e},c.prototype.evaluateElementVisibilityAsynchLoop=function(){this.evaluateElementVisibility(),this.scheduleEvaluateElementVisibilityAsynchLoop()},c.prototype.scheduleEvaluateElementVisibilityAsynchLoop=function(){var e=this;this._isStopEvaluate||(this._elementTimeoutObject=this.timerManager.setWalkmeTimeout(function(){e.evaluateElementVisibilityAsynchLoop()},this._watchElementTimeoutTime))},c.prototype.findIfVisible=function(){var e=this,t=this.consts.VISIBILITY_STATE.HIDDEN;return this.elementFinder.wrapSession(function(){e._element=e.findElementByParams()}),this._element&&(t=this.consts.VISIBILITY_STATE.VISIBLE),t},c.prototype.findIfHidden=function(){var e=this,t=this.consts.VISIBILITY_STATE.HIDDEN,n=this.positionHelper.getVisibleFilterKey(this._findElementParams.IdentifySettings),r=this.positionHelper.isElementVisible(this._element,n);return r&&this.elementIframesAttachedIndicator.areIframesAttached(this._element)&&(t=this.consts.VISIBILITY_STATE.VISIBLE),r&&this._findElementParams.IdentifySettings.IsJquerySelector&&(t=this.elementChangeChecker.elementChanged(this._element,function(){return e.findElementByParams()})?this.consts.VISIBILITY_STATE.HIDDEN:t),t},c.prototype.callOnValueChangeIfExist=function(e){this._onVisibilityChanged&&(this._log(this.stringUtils.formatString("ElementVisibilityEvaluator callOnValueChangeIfExist calling onValueChange for {0}",this._logContext),5),this._onVisibilityChanged(e))},c.prototype.findElementByParams=function(){return this.elementFinder.findElement(this._findElementParams.IdentifySettings,this._findElementParams.isVisible,this._findElementParams.score,this._findElementParams.mode,undefined,this._findElementParams.ownerChain)},c.WATCH_ELEMENT_DEFAULT_TIMEOUT=-1,c.DEFAULT_LOG_LEVEL=3,c.LOG_FEATURE="elementVisibility",c}();Tt.register("ElementVisibilityEvaluator").asCtor(un).asProto().dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator, ElementChangeChecker, StringUtils");var cn=function(){function r(e,t,n){this.logger=e,this.elementFinder=t,this.featuresManager=n,this._log=e.wrapCustomerLog(r.LOG_FEATURE)}return r.prototype.diffElementFound=function(e,t){var n=t();return!n||0<n.length&&e&&!n.is(e)},r.prototype.elementChanged=function(e,t){var n=this;if(!this.featuresManager.isFeatureEnabled("refindElement"))return!1;var r=!1;return this.elementFinder.wrapSession(function(){n.diffElementFound(e,t)&&(n._log("elementChangeChecker - Current element found is not same as the previous element",3),r=!0)}),r},r.LOG_FEATURE="elementChangeChecker",r}();Tt.register("ElementChangeChecker").asCtor(cn).asProto().dependencies("Logger, ElementFinder, FeaturesManager"),Tt.register("ElementIframesAttachedIndicator").asCtor(function(){this.areIframesAttached=function(e){try{for(var t=!0,n=e.data("iframe");n&&t;)t=t&&n&&0<n.parents("html").length,n=n.data("iframe");return t}catch(r){return!1}}}),Tt.register("UIElementVisibilityAttributes").asCtor(function(i,o){this.getStickyType=function(e){var t=o.getSettingsValue(e,i.IS_STICKY_SETTING_KEY,!1),n=i.STICKY_TYPE.ONCE;if(t){var r=parseInt(o.getSettingsValue(e,i.STICKINESS_TYPE_SETTING_KEY,null));n=r==i.OLD_STICKIES.STICKINESS_TYPES.soft?i.STICKY_TYPE.SOFT:i.STICKY_TYPE.STRONG}return n},this.getIsRemoveByCondition=function(e){return e.condHide==undefined?!!e.isEvaluationFrequency:!!e.condHide}}).dependencies("Consts, CommonUtils"),Tt.register("UiElementPositionTracker").asCtor(function(n,e,t){var r,i,o,a;function s(){var e,t=n.getElementPosition(o,r);e=t,(a.top!=e.top||a.left!=e.left||a.height!=e.height||a.width!=e.width)&&(a=t,i&&i())}this.track=function(){a=n.getElementPosition(o,r),e.bindCheckIfShouldHideOrReposition(s)},this.destroy=function(){e.unbindCheckIfShouldHideOrReposition(s)},r=t.element,i=t.positionChangedCallback,o=t.embedmentType}).asProto().dependencies("ElementPositionCalculator, UIChecksTriggerer"),Tt.register("UiElementPositionTrackerCreator").asCtor(function(i){this.create=function(e,t){var n=i.get(!1,e),r={element:e,positionChangedCallback:t,embedmentType:n};return Tt.create("UiElementPositionTracker",r)}}).dependencies("EmbedmentTypeProvider"),Tt.register("UiWindowSizeTracker").asCtor(function(o,e,t,a,n){var s,l,u,r;function i(e){var t,n,r,i;(t=a(o),n=t.width(),r=t.height(),i=l!=n||u!=r,l=n,u=r,i)&&s.apply(undefined,arguments)}this.track=function(){r=t.registerEventHandler(e.WINDOW_EVENTS.Resize,i,!1,o)},this.destroy=function(){r&&r()},s=n.callback}).asProto().dependencies("win, Consts, CommonUtils, wmjQuery"),Tt.register("UIElementFactory").asCtor(function(e){this.createUIElement=function(e){return t[e.Type](e)};var t={};function n(e){return Tt.create("UIPopUpBalloon",e)}function r(e){return Tt.create("UIElementBalloon",e)}(function(){t[e.FLOW_UIELEMENT_TYPE.Popup]=n,t[e.FLOW_UIELEMENT_TYPE.Element]=r}).apply(null,arguments)}).dependencies("Consts"),Tt.register("FlowBalloonDisplayer").asCtor(function(a,s,l,u,c,d,f,p,g,e,i,h,m,n,v,t){var y,S,E,T,w,C,b,I,_,P,A,k;this.showAndWaitForTrigger=function(e){return y=Et.Deferred(),a.customerLog(n.formatString("FlowBalloonDisplayer showUIElement showing balloon {0}",S),r,o),P=e,function(){var e=s.get(),t=e.BalloonSettings,n=d.getBalloonDrawer(t,E),r=c.peek().flowId;E.Settings.customButtons=Et.map(C,function(e){return e.template});var i,o=g.getComplexHtmlElements({Settings:E.Settings},P);o&&(i=o.parentElement,P=o.elements),E.DesignTemplateId||E.DesignTemplatePlaceholderConfigs&&0!=E.DesignTemplatePlaceholderConfigs.length||(E.DesignTemplatePlaceholderConfigs=h.createPlaceHolderConfigs(m.templateEntityType.balloon,E.Title,E.Text)),D=!1,(I=Tt.create("Balloon",{element:P,parentElement:i,position:E.Settings.Position,stepSettings:E.Settings,visibilityFilter:E.IdentifySettings&&u.getVisibleFilterKey(E.IdentifySettings),logger:a,isFirstStep:p.getIsFirstVisualStep(),text:T,configuration:t,siteConfig:e,data:{balloonEntityId:E.Id,containerEntityId:r,type:b,containerEntityType:"flow",balloonEntityType:"flow-balloon"},positionHelper:u,drawer:n,placeholderConfigurations:E.DesignTemplatePlaceholderConfigs,placeholderVariableValues:M(),initiatorData:{initiator:E,type:l.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},bindButtonsFunc:function(e,t){!function(e,t){var n;F(),O(n=e).on("click"+l.FLOW_TRIGGER_WORKSPACE,function(){L(!0)}),n.bind("click mousedown mouseup",function(e){v.wrapWithEvent(e)});for(var r=[],i=0;i<w.length;i++)r.push({element:P,balloonDiv:e,logContext:S,balloonButtons:t,trigger:w[i],uiElementId:E.Id});var o={uiElementType:E.Type,triggers:r,ownerChain:k,uiElement:E};(_=Tt.create("UITriggersManager",o)).listen().then(x,L)}(e,C),f.bind(e,undefined,t)}})).Show(!0,function(e,t){A=!0,D?N():(I.SetTimeoutOn(),y.notify("stageShown",{uiElementId:E.Id,siteElement:P}))})}(),y.promise()},this.destroy=function(){var e=Et.Deferred();return N(function(){e.reject({wasElementShown:A})}),e.promise()};var D,r=3,o=l.FEATURES_LOGS.Flows;function N(e){var t;D=!0,function(){if(!I)return;var e=I.getBalloonDiv();if(!e)return a.customerLog(n.formatString("FlowBalloonDisplayer unbindButtons was called but balloon div wasn't created yet {0}",S),1,o);O(e).off("click"+l.FLOW_TRIGGER_WORKSPACE),e.unbind("click mousedown mouseup")}(),t=e,F(),I?I.destroy(!1,t):t&&t()}function O(e){return Et(".walkme-action-close, .walkme-action-cancel",e)}function x(e){y.resolve(e)}function L(e){y.reject({wasElementShown:A,wasClosedByUser:e})}function F(){_&&(_.destroy(),_=undefined)}function M(){return{totalVisibleSteps:e.getTotalVisualSteps(),passedVisibleSteps:e.getNextVisualStepIndex(E.Id)}}(function(){E=t.uiElement,w=E.Triggers,T={title:E.Title,content:E.Text,subText:function(){var e=M(),t=e.totalVisibleSteps,n=e.passedVisibleSteps,r=s.get().StepsInfoText;r=i.isFeatureEnabled("floatingsubtext")?(r=r.replace("{0}",l.SUBTEXT_CURRENT_START+n+l.SUBTEXT_CURRENT_END)).replace("{1}",l.SUBTEXT_TOTAL_START+t+l.SUBTEXT_TOTAL_END):(r=r.replace("{0}",n)).replace("{1}",t);return r}()},S=E.Id,C=t.balloonButtons,b=t.stepType,A=!1,k={type:l.ELEMENT_OWNER_TYPE_NAMES.STEP,id:E.Id,stickyType:E.IsSticky,owner:E._ownerChain}}).apply(null,arguments)}).asProto().dependencies("Logger, SiteConfigManager, Consts, PositionHelper, FlowStack, BalloonDrawerProvider, BBCodeEventsBinder,FlowDataPersister, ComplexHtmlElementsProvider, FlowVisualStepsIndicator, FeaturesManager, DefaultPlaceHolderConfigsCreator, SharedConsts, StringUtils, StopPropagationWrapper"),Tt.register("UIPopUpBalloon").asCtor(function(t,e,n,r,i,o){var a;this.show=function(){return a.customerLog("{0}: Show Popup Balloon with id {1} step index {2}",c,s,o.PointIndex),l.showAndWaitForTrigger(u).done(f).fail(p)},this.destroy=function(){return a.customerLog("{0}: Destroy Popup Balloon with id {1} step index {2}",c,s,o.PointIndex),l.destroy().fail(p)};var s,l,u,c="UIPopUpBalloon",d=!0;function f(e){e.nextStageId&&i.shouldKeepOverlay(e.nextStageId)?d=!1:p()}function p(){d&&(e.removeOverlay(),d=!1)}(function(){s=o.Id,u=t.get();var e={uiElement:o,balloonButtons:r.getButtons(o),stepType:n.STEP_TYPE.Popup};l=Tt.create("FlowBalloonDisplayer",e),a=Tt.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("PopupStepElementProvider, UiUtils, Consts, FlowPopupBalloonButtonsProvider, UIPopupOverlayManager"),Tt.register("UIElementBalloon").asCtor(function(t,n,r){var i,o,a,s;this.show=function(){return s.customerLog("{0}: Show Balloon - Calling visibility manager for ui element with id {1} step index {2}",f,l,u),e=Et.Deferred(),i=e.resolve,o=e.reject,a=e.notify,d.evaluateAsync(),e.promise().always(g)},this.destroy=p;var l,u,c,e,d,f="UIElementBalloon";function p(t){return g(),v().always(function(e){e.skipped=t,e.uiElementId=l,o&&o(e)})}function g(){d.cleanResources()}function h(e){s.customerLog("{0}: showUIElement showing balloon with id {1} step index {2}",f,l,u),c.showAndWaitForTrigger(e).then(i).progress(a).fail(m)}function m(e){e.wasClosedByUser&&o(e)}function v(){return s.customerLog("{0}: removeUIElement removing balloon with id {1} step index {2}",f,l,u),c.destroy()}(function(){l=r.Id,u=r.PointIndex,r.score={};var e={uiElement:r,balloonButtons:n.getButtons(r),stepType:t.STEP_TYPE.Normal};c=Tt.create("FlowBalloonDisplayer",e),d=Tt.create("UiElementVisibilityManager",{uiElement:r,isSticky:r.IsSticky===undefined||r.IsSticky,isSkippable:r.Settings.isSkippable,onShow:h,onRemove:v,onError:p}),s=Tt.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, FlowElementBalloonButtonsProvider"),Tt.register("UiElementVisibilityManager").asCtor(function(n,r,i){var o,t,a,s,l;this.evaluateAsync=function(){i.isSkippable?(e=o.calculateElementVisibility(),t=o.getElement(),e==n.VISIBILITY_STATE.VISIBLE?a(t):l(!0)):r.getIsFirstVisualStep()?o.calculateElementVisibility()==n.VISIBILITY_STATE.VISIBLE?c():l():c();var e,t},this.cleanResources=function(){o&&(o.cleanResources(),o=undefined)};var u=500;function c(){o.setOnVisibilityChanged(e),o.evaluateElementVisibilityAsynch()}function e(e){switch(e){case n.VISIBILITY_STATE.VISIBLE:a(o.getElement());break;case n.VISIBILITY_STATE.HIDDEN:s()}}!function(){t=i.uiElement,a=i.onShow,s=i.onRemove,l=i.onError;var e={logContext:t.Id,findElementParams:{IdentifySettings:t.IdentifySettings,score:t.score,ownerChain:{type:n.ELEMENT_OWNER_TYPE_NAMES.STEP,id:t.Id,stickyType:i.isSticky,owner:t._ownerChain}},trackUIChanges:!0,elementEvaluationIntervalMs:i.isSticky?u:undefined};o=Tt.create("ElementVisibilityEvaluator",e)}()}).asProto().dependencies("Consts, FlowDataPersister"),Tt.register("FlowElementBalloonButtonsProvider").asCtor(function(r,i,o){this.getButtons=function(e){var t=[],n=o.getContinueButton(e);n&&(t.push(n),r.isEmpty()||t.unshift(i.get()));return t}}).dependencies("UiFlowNodesExecutionStack, FlowBackBalloonButtonProvider, FlowContinueBalloonButtonProvider"),Tt.register("FlowPopupBalloonButtonsConfigProvider").asCtor(function(e,t,n,r,i,o){this.get=function(){return a};var a={Cancel:{getButton:o.get,order:1},Back:{getButton:n.get,canAdd:function(){return!t.isEmpty()},order:2},"Next/Done":{getButton:function(e){return r.getContinueButton(e)},order:3},Start:{getButton:i.get,order:4}}}).dependencies("Consts, UiFlowNodesExecutionStack, FlowBackBalloonButtonProvider, FlowContinueBalloonButtonProvider, FlowStartBalloonButtonProvider, FlowCancelBalloonButtonProvider"),Tt.register("FlowPopupBalloonButtonsProvider").asCtor(function(e){var o;this.getButtons=function(e){for(var t=[],n=function(e){for(var t=[],n=e.Settings.popupStepButtons,r=0;r<n.length;r++){var i=o[n[r].name];t.push(i)}return t.sort(function(e,t){return e.order-t.order})}(e),r=0;r<n.length;r++){var i=n[r];i.canAdd&&!i.canAdd()||t.push(i.getButton(e))}return t},o=e.get()}).dependencies("FlowPopupBalloonButtonsConfigProvider"),Tt.register("FlowBackBalloonButtonProvider").asCtor(function(e,n,t){function r(e,t){t.resolve({nextStageId:n.pop(),isFlowGoingBack:!0})}this.get=function(){return{selector:".walkme-action-back",template:t.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Back),action:r}}}).dependencies("Consts, UiFlowNodesExecutionStack, BalloonButtonDataGenerator"),Tt.register("FlowCancelBalloonButtonProvider").asCtor(function(e,t){function n(e,t){t.reject({wasElementShown:!0,wasClosedByUser:!0})}this.get=function(){return{selector:".walkme-action-cancel",template:t.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Cancel),action:n}}}).dependencies("Consts, WelcomeBalloonButtonDataGenerator"),Tt.register("ButtonTriggersProvider").asCtor(function(n){this.get=function(e){return Et(e.Triggers).filter(function(e,t){return t.Type==n.FLOW_TRIGGER_TYPE.Button})}}).dependencies("Consts"),Tt.register("FlowContinueBalloonButtonProvider").asCtor(function(o,n,a,s,r,l,u){function c(t,e){return r.doesAnyMeetCondition(e,function(e){return function(e,t){if(!t.TargetFlowNodeId)return!1;return n.isPlayable(e,t.TargetFlowNodeId)}(t,e)})}this.getContinueButton=function(e){var t=u.peek().flowId,n=o.get(e);if(0==n.length)return undefined;var r=l.isPreviousGroupHasNextStage(),i=c(t,n);return r||i?a.get():s.get()}}).dependencies("ButtonTriggersProvider, FlowNodePlayIndicator, FlowNextBalloonButtonProvider, FlowDoneBalloonButtonProvider, CommonUtils, FlowGroupLastStageIndicator, FlowStack"),Tt.register("FlowContinueBalloonButton").asFunction(function(e){return{selector:e.selector,template:e.template,action:function(e,t){t.resolve({nextStageId:e.TargetFlowNodeId})}}}).asProto().dependencies(""),Tt.register("FlowDoneBalloonButtonProvider").asCtor(function(t,n){this.get=function(){var e={selector:".walkme-action-done",template:n.generate(t.BALLOON_BUTTON_TYPE.Done)};return Tt.create("FlowContinueBalloonButton",e)}}).dependencies("Consts, BalloonButtonDataGenerator"),Tt.register("FlowNextBalloonButtonProvider").asCtor(function(t,n){this.get=function(){var e={selector:".walkme-action-next, .walkme-action-start",template:n.generate(t.BALLOON_BUTTON_TYPE.Next)};return Tt.create("FlowContinueBalloonButton",e)}}).dependencies("Consts, BalloonButtonDataGenerator"),Tt.register("FlowStartBalloonButtonProvider").asCtor(function(t,n){this.get=function(){var e={selector:".walkme-action-start",template:n.generate(t.BALLOON_BUTTON_TYPE.Start)};return Tt.create("FlowContinueBalloonButton",e)}}).dependencies("Consts, WelcomeBalloonButtonDataGenerator"),Tt.register("ClickTriggersListCreator").asCtor(function(t,n){this.get=function(){var e=["click","mousedown","mouseup"];t.isFeatureEnabled(n.FEATURES.ClickTriggerWithKeyboard)&&e.push("keydown");t.isFeatureEnabled("ipad_touch_as_click")&&e.push("touchstart");t.isFeatureEnabled("noFocusTrigger")||t.isFeatureEnabled("wmAccessibility")||e.push("focus");return e}}).dependencies("FeaturesManager, Consts"),Tt.register("UITriggersManager").asCtor(function(n,i,r,o,a){var s=[];this.listen=function(){for(var e=Et.Deferred(),t=0;t<s.length;t++){var n=s[t].trigger,r=s[t].data;f(n,r,e)}return e.promise()},this.destroy=function(){for(var e=0;e<s.length;e++)s[e].trigger.destroy()};var l,t={},u=[r.FLOW_TRIGGER_TYPE.Button];function c(e){var t,n=[];return d(n,e),t=e.trigger,-1<Et.inArray(t.Type,u)&&a.uiElementType==r.FLOW_UIELEMENT_TYPE.Popup&&t.Settings&&0<=t.Settings.Duration&&d(n,o.createMockDelayTriggerParams(e)),n}function d(e,t){t.ownerChain=l,e.push({trigger:n.createUITrigger(t),data:t.trigger})}function f(e,t,n){var r;e.listen().then((r=t,function(e){return i.lastTriggerFired=r,e})).then(function(e){e=Et.extend({firedTrigger:t,uiElementId:a.uiElement.Id},e),n.resolve(e)})}(function(){t[r.FLOW_TRIGGER_TYPE.PeerStep]=!0,l=a.ownerChain;for(var e=0;e<a.triggers.length;e++)t[a.triggers[e].trigger.Type]||(s=s.concat(c(a.triggers[e])))}).apply(null,arguments)}).asProto().dependencies("UITriggersFactory, FlowPlayerMetadata, Consts, MockDelayTriggerProvider"),Tt.register("UITriggersFactory").asCtor(function(e,r){this.createUITrigger=function(e){return i[e.trigger.Type](e)};var i={},t=[{triggerName:e.FLOW_TRIGGER_TYPE.Click,className:"ClickUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Hover,className:"HoverUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Text,className:"TextUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Delay,className:"DelayUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.PageChanged,className:"PageChangedUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Button,className:"ButtonUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.SelectAny,className:"SelectAnyUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.SelectValue,className:"SelectValueUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.BbCode,className:"BBCodeUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Custom,className:"CustomUITrigger"},{triggerName:e.FLOW_TRIGGER_TYPE.Swipe,className:"SwipeUITrigger"}];function n(){Et.each(t,function(e,t){var n;i[t.triggerName]=(n=t,function(e){var t=Tt.create(n.className,e);return r.addDelay(t,n.triggerName),t})})}(function(){n()}).apply(null,arguments)}).dependencies("Consts, UITriggerTransitionDelayer"),Tt.register("UITriggerTransitionDelayer").asCtor(function(o){this.addDelay=function(e,t){e.listen=(n=e.listen,r=e,i=t,function(){return n().then(function(e){return o.setDelayByTrigger(r,i),e})});var n,r,i}}).dependencies("FlowTransitionDelayer"),Tt.register("UITriggerEventBindingService").asCtor(function(r,i){this.getFullEventNames=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]+r.FLOW_TRIGGER_WORKSPACE);return t},this.bindEventsToElement=function(e,t,r,i){for(var n=0;n<t.length;n++){function o(n){return function(e){var t=i&&i[n];if(t&&!t(e))return;r(e)}}e.on(t[n],o(t[n]))}},this.unbindEventsFromElement=function(e,t){for(var n=i(e),r=0;r<t.length;r++)n.off(t[r])}}).dependencies("Consts, wmjQuerySafe"),Tt.register("TriggerTimeoutService").asCtor(function(o){this.createTimeout=function(e,t,n,r){var i=o.setWalkmeTimeout(function(){n.customerLog("{0}: Executing {1} trigger with id {2} for {3} seconds to target node id {4}",r,t.Name,t.Id,t.Settings.Duration,t.TargetFlowNodeId),e.resolve({nextStageId:t.TargetFlowNodeId})},1e3*t.Settings.Duration);a[t.Id]=i},this.cleanTimeout=function(e){var t=a[e.Id];t&&(t.clear(),t=null,delete a[e.Id])};var a={}}).dependencies("TimerManager"),Tt.register("MockDelayTriggerProvider").asCtor(function(r){this.createMockDelayTriggerParams=function(e){var t=Et.extend(!0,{},e),n=e.trigger;return t.trigger={Type:r.FLOW_TRIGGER_TYPE.Delay,Id:"mock_delay_"+n.Id,Name:n.Name,TargetFlowNodeId:n.TargetFlowNodeId,Settings:{Duration:n.Settings.Duration}},t}}).dependencies("Consts"),Tt.register("ClickUITrigger").asCtor(function(r,t,i,o,n){var a,s,l,u=[],c="ClickUITrigger",d=32,f=13;this.listen=function(){var e=Et.Deferred();return l.customerLog("{0}: Listening to Click trigger with id {1}",c,s.Id),r.bindEventsToElement(a,u,function(){l.customerLog("{0}: Executing Click trigger with id {1} to target node id {2}",c,s.Id,s.TargetFlowNodeId),e.resolve({nextStageId:s.TargetFlowNodeId})},(t={},n=r.getFullEventNames(["keydown"]),t[n]=function(e){return o.isFeatureEnabled(i.FEATURES.ClickTriggerWithKeyboard)&&(e.which==f||e.which==d||e.keyCode==f||e.keyCode==d)},t)),e.promise();var t,n},this.destroy=function(){l.customerLog("{0}: Destroying Click trigger with id {1}",c,s.Id),r.unbindEventsFromElement(a,u)},function(){a=n.element,s=n.trigger;var e=t.get();u=r.getFullEventNames(e),l=Tt.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, ClickTriggersListCreator, Consts, FeaturesManager"),Tt.register("HoverUITrigger").asCtor(function(t,e,n){var r,i,o,a=[],s="HoverUITrigger",l=["mouseenter"];this.listen=function(){var e=Et.Deferred();o.customerLog("{0}: Listening to Hover trigger with id {1}",s,i.Id);return t.bindEventsToElement(r,a,function(){o.customerLog("{0}: Executing Hover trigger with id {1} to target node id {2}",s,i.Id,i.TargetFlowNodeId),e.resolve({nextStageId:i.TargetFlowNodeId})}),e.promise()},this.destroy=function(){o.customerLog("{0}: Destroying Hover trigger with id {1}",s,i.Id),t.unbindEventsFromElement(r,a)},function(){r=n.element,i=n.trigger,a=t.getFullEventNames(l),o=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, Consts"),Tt.register("TextUITrigger").asCtor(function(n,r,e,i,t){var o,a,s,l,u=[],c=[],d="TextUITrigger",f=["keydown","change"],p=["paste"],g=800,h=9,m=16;function v(e){l.customerLog("{0}: Executing Text trigger with id {1} to target node id {2}",d,a.Id,a.TargetFlowNodeId),e.resolve({nextStageId:a.TargetFlowNodeId})}function y(){s&&s.clear()}this.listen=function(){var t=Et.Deferred();l.customerLog("{0}: Listening to Text trigger with id {1}",d,a.Id);var e=function(){var e={};if(i.isFeatureEnabled("wmAccessibility")){var t=n.getFullEventNames(["keydown"]);e[t]=function(e){return e.which!=h&&e.which!=m}}return e}();return n.bindEventsToElement(o,u,function(){var e;e=t,y(),s=r.libSetTimeout(function(){v(e)},g)},e),n.bindEventsToElement(o,c,function(){v(t)}),t.promise()},this.destroy=function(){l.customerLog("{0}: Destroying Text trigger with id {1}",d,a.Id),y(),n.unbindEventsFromElement(o,u),n.unbindEventsFromElement(o,c)},function(){o=t.element,a=t.trigger,u=n.getFullEventNames(f),c=n.getFullEventNames(p),l=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, TimerManager, Consts, FeaturesManager"),Tt.register("DelayUITrigger").asCtor(function(t,e,n){var r,i,o="DelayUITrigger";this.listen=function(){var e=Et.Deferred();return i.customerLog("{0}: Listening to Delay trigger with id {1}",o,r.Id),t.createTimeout(e,r,i,o),e.promise()},this.destroy=function(){i.customerLog("{0}: Destroying bbCode trigger with id {1}",o,r.Id),t.cleanTimeout(r)},function(){n.element,r=n.trigger,i=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("TriggerTimeoutService, Consts"),Tt.register("PageChangedUITrigger").asCtor(function(e,t,n){var r;this.listen=function(){var e=Et.Deferred();return t.saveWaitingForRefreshTrigger({refreshTrigger:r.TargetFlowNodeId,firedTrigger:r,uiElementId:n.uiElementId}),e.promise()},this.destroy=function(){t.clearWaitingForRefreshTrigger()},function(){n.element,r=n.trigger,Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).dependencies("Consts, FlowDataPersister").asProto(),Tt.register("ButtonUITrigger").asCtor(function(r,i){var o,a,s;this.listen=function(){return s.customerLog("{0}: Listening to Next trigger with id {1}",n,a.Id),function(){for(var e=Et.Deferred(),t=0;t<o.length;t++){var n=o[t];l(n,e)}return e.promise()}()},this.destroy=function(){s.customerLog("{0}: Destroying Next trigger with id {1}",n,a.Id),function(){for(var e=0;e<o.length;e++)o[e].buttonElement&&(o[e].buttonElement.off("click"+r.FLOW_TRIGGER_WORKSPACE),o[e].buttonElement=undefined)}()};var n="ButtonUITrigger";function l(e,t){e.buttonElement.on("click"+r.FLOW_TRIGGER_WORKSPACE,function(){s.customerLog("{0}: Executing Next trigger with id {1} to target node id {2}",n,a.Id,a.TargetFlowNodeId),e.action(a,t)})}(function(){o=i.balloonButtons,a=i.trigger;for(var e=0;e<o.length;e++)o[e].buttonElement=(t=o[e].selector,n=i.balloonDiv,void 0,Et(t,n));var t,n;s=Tt.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts"),Tt.register("SelectAnyUITrigger").asCtor(function(t,e,n){var r,i,o,a=[],s="SelectAnyUITrigger",l=["change"];this.listen=function(){var e=Et.Deferred();o.customerLog("{0}: Listening to Select Any trigger with id {1}",s,i.Id);return t.bindEventsToElement(r,a,function(){o.customerLog("{0}: Executing Select Any trigger with id {1} to target node id {2}",s,i.Id,i.TargetFlowNodeId),e.resolve({nextStageId:i.TargetFlowNodeId})}),e.promise()},this.destroy=function(){o.customerLog("{0}: Destroying Select Any trigger with id {1}",s,i.Id),t.unbindEventsFromElement(r,a)},function(){r=n.element,i=n.trigger,a=t.getFullEventNames(l),o=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, Consts"),Tt.register("SelectValueUITrigger").asCtor(function(e,t,n){var r,i,o,a,s=[],l="SelectValueUITrigger",u=["change"];this.listen=function(){var n=Et.Deferred();a.customerLog("{0}: Listening to Select Value trigger with id {1}",l,i.Id);return e.bindEventsToElement(r,s,function(e){var t;(t="option"==e.target.tagName.toLowerCase()?e.target:e.target.options[e.target.selectedIndex]).value!=o.val&&t.text!=o.txt||(a.customerLog("{0}: Executing Select Value trigger with id {1} to target node id {2}",l,i.Id,i.TargetFlowNodeId),n.resolve({nextStageId:i.TargetFlowNodeId}))}),n.promise()},this.destroy=function(){a.customerLog("{0}: Destroying Select Value trigger with id {1}",l,i.Id),e.unbindEventsFromElement(r,s)},function(){r=n.element,i=n.trigger,o=i.Settings.complexHtml,s=e.getFullEventNames(u),a=Tt.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, Consts"),Tt.register("BBCodeUITrigger").asCtor(function(r,i,e){var o,a,s,l,u="BBCodeUITrigger";this.listen=function(){var e=Et.Deferred();return l.customerLog("{0}: Listening to BBCode trigger with id {1}",u,o.Id),t=e,n=o.Settings.bbCodeId,(s=Et(".trg-"+n,a)).on("click"+r.FLOW_TRIGGER_WORKSPACE,function(){l.customerLog("{0}: Executing BBCode trigger with id {1} and bbCode id {2} to target node id {3}",u,o.Id,o.Settings.bbCodeId,o.TargetFlowNodeId),t.resolve({nextStageId:o.TargetFlowNodeId})}),i.raiseEvent(r.EVENTS.RegisterBBCodeDeployableClick,{element:s}),e.promise();var t,n},this.destroy=function(){l.customerLog("{0}: Destroying BBCode trigger with id {1}",u,o.Id),s.off("click"+r.FLOW_TRIGGER_WORKSPACE)},function(){e.element,o=e.trigger,a=e.balloonDiv,l=Tt.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("Consts, CommonEvents"),Tt.register("CustomUITrigger").asCtor(function(r,i,e,t,n){var o,a,s,l,u="CustomUITrigger";this.listen=function(){var t=Et.Deferred();s.customerLog("{0}: Listening to Custom trigger with id {1}",u,o.Id);var e=o.ConditionTrees.CustomTrigger,n={evaluationPollingIntervalMs:500,featureName:"Custom Trigger",elementName:"Custom Trigger: "+o.Name,ownerChain:{id:o.Id,type:r.ELEMENT_OWNER_TYPE_NAMES.TRIGGER,owner:l,stickyType:!0}};return(a=i.createNew(n)).onValueChanged(function(e){if(e)return s.customerLog("{0}: Executing Custom trigger with id {1} to target node id {2}",u,o.Id,o.TargetFlowNodeId),t.resolve({nextStageId:o.TargetFlowNodeId})}),a.evaluateAsync(e),t.promise()},this.destroy=function(){s.customerLog("{0}: Destroying Custom trigger with id {1}",u,o.Id),a&&(a.cleanResources(),a=undefined)},this.getDelay=function(){if(e.containsFuncName(o.ConditionTrees.CustomTrigger,["jQueryClickedSticky","ElementClickedSticky"]))return t[r.FLOW_TRIGGER_TYPE.Click]},function(){o=n.trigger,l=n.ownerChain,s=Tt.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("Consts,ConditionCheckerFactory, ConditionTreeTraverser, FlowTransitionDelayerDefaultMap"),Tt.register("SwipeUITrigger").asCtor(function(t,e,n){var r,i,o,a=[],s="SwipeUITrigger";this.listen=function(){var e=Et.Deferred();o.customerLog("{0}: Listening to Swipe trigger with id {1}",s,i.Id);return t.bindEventsToElement(r,a,function(){o.customerLog("{0}: Executing Swipe trigger with id {1} to target node id {2}",s,i.Id,i.TargetFlowNodeId),e.resolve({nextStageId:i.TargetFlowNodeId})}),e.promise()},this.destroy=function(){o.customerLog("{0}: Destroying Swipe trigger with id {1}",s,i.Id),t.unbindEventsFromElement(r,a)},function(){r=n.element,i=n.trigger,a=t.getFullEventNames(["swipe"]),o=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}.apply(null,arguments)}).asProto().dependencies("UITriggerEventBindingService, Consts"),Tt.register("StatesMachine").asCtor(function(o,l,e){var u,a,s,t,c,d,r,f,p;function n(){u=t,d={}}function g(e,t){for(var n=0;n<e.length;n++){var r=e[n];t(r)}}function h(e,t){f&&f.clear(),m(e,t);var n,r,i=function(e){for(var t=0;t<s.length;t++){var n=s[t];if(n.fromState==e.toState)return n}return null}(e);i&&(n=function(){m(i,t)},r=i.timeout,f=o.libSetTimeout(n,r))}function m(e,t){u=e.toState;var n=function(e){if(e.valueToReturn)return e.valueToReturn;if(p)for(var t=0;t<p.length;t++){var n=p[t],r=!n.fromState||n.fromState==e.fromState,i=!n.toState||n.toState==e.toState;if(r&&i)return n.valueToReturn}return null}(e);r(e.toState,n,t)}function v(e,t){var n=("*"==e.fromState||e.fromState==u)&&e.onAction==t;if(!n)return!1;var r,i,o=!e.ifFlagged||(r=e.ifFlagged,l.doesAnyMeetCondition(r,function(e){return d[e]!=undefined})),a=!e.ifNotFlagged||(i=e.ifNotFlagged,l.doAllMeetCondition(i,function(e){return d[e]==undefined})),s=o&&a;return s}this.evaluate=function(e,t){r=e,c[r]&&c[r].addFlag&&g(c[r].addFlag,function(e){d[e]=!0}),n=e,c[n]&&c[n].removeFlag&&g(c[n].removeFlag,function(e){delete d[e]});var n;var r;var i=function(e){for(var t=0;t<a.length;t++){var n=a[t],r=v(n,e);if(r)return n}return null}(e);i&&h(i,t)},this.reset=n,t=e.initState,a=e.transitions||[],s=e.timedOutTransitions||[],p=e.defaultTransitionValuesToReturn||[],c=e.globalActionFlags||{},r=e.onStateChangedCallback||function(){},n()}).asProto().dependencies("TimerManager, CommonUtils"),Tt.register("StatesMachineCreator").asCtor(function(){this.create=function(e){return Tt.create("StatesMachine",e)},function(){}.apply(null,arguments)}),Tt.register("StagesFactory").asCtor(function(t,n,r,i){this.createStage=function(e){switch(e.Type){case r.FLOW_STEP_TYPE.UI:return Tt.create("UIFlowStage",e);case r.FLOW_STEP_TYPE.Action:return n.createActionStage(e);default:t.customerLog(i.formatString("StagesFactory getStage - Unknown flow node type: {0}",e.FlowNodeType),1,o)}};var o=r.FEATURES_LOGS.Flows}).dependencies("Logger, ActionStagesFactory, Consts, StringUtils"),Tt.register("StageCreator").asCtor(function(r,i){this.createStage=function(e,t){var n=e.Nodes[t];n.Settings&&(n.Settings.ownerChain={type:i.ELEMENT_OWNER_TYPE_NAMES.SWT,id:e.Id});return n?r.createStage(n):undefined}}).dependencies("StagesFactory, Consts"),Tt.register("UIFlowStage").asCtor(function(t,n,e,r,o,a,s){var l=this;l.execute=function(){u.customerLog("{0}: Executing UI step with id {1}",p,l.Id);var e=Et.Deferred();a.raiseEventOnCurrentFlow(o.EVENTS.Flows.LookingForElement,{step:s});for(var t=0;t<f.length;t++)i(e,f[t].show);return e.promise()},l.destroy=function(){u.customerLog("{0}: Destroying UI step with id {1}",p,l.Id);var t=Et.Deferred();return e.executeParallel({objectsArray:f,functionsToExecute:[function(e,t){e.destroy().then(function(){},t)}],successCallback:function(e){t.resolve(e)}}),f.length=0,t.promise()},l.Id=s.Id;var u,c,d=0,f=[],p="UIFlowStage";function i(i,e){e().progress(function(e,t){var n=function(e){for(var t=0;t<s.UIElements.length;t++)if(s.UIElements[t].Id==e)return s.UIElements[t]}(t.uiElementId);a.raiseEventOnCurrentFlow(o.EVENTS.Flows.UiElementFound,{step:s,score:n.score});var r={id:l.Id,uiElementId:t.uiElementId,triggers:n.Triggers,siteElement:t.siteElement};i.notify(e,r)}).then(function(e){var t,n;t=i,n=e,u.customerLog("{0}: UI step - Moving to next step. From step id {1} to step id {2}",p,l.Id,n.nextStageId),r.saveIsFirstVisualStep(!1),t.resolve(n)},function(e){!function(e,t){if(u.customerLog("{0}: Balloon was closed for UI step with id {1}, params {2}",p,l.Id,n.toJSON(t)),d++,t.wasClosedByUser)return e.reject(t);if(t.skipped&&(c[t.uiElementId]=!0,!function(){for(var e=0;e<s.UIElements.length;e++){var t=s.UIElements[e];if(!c[t.Id])return Et(t.Triggers).map(function(e,t){return t.Type}).is(function(e,t){return t!=o.FLOW_TRIGGER_TYPE.PeerStep})}}()))return t.nextStageId=s.UIElements[0].Triggers[0].TargetFlowNodeId,e.resolve(t);d==f.length&&e.reject(t)}(i,e)})}(function(){u=Tt.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows}),c={},function(){for(var e=0;e<s.UIElements.length;e++)s.UIElements[e]._ownerChain=s.Settings?s.Settings.ownerChain:undefined,f.push(t.createUIElement(s.UIElements[e]))}()}).apply(null,arguments)}).asProto().dependencies("UIElementFactory, JsonUtils, CommonUtils, FlowDataPersister, Consts, FlowEventRaiser"),Tt.register("ActionStagesFactory").asCtor(function(e){this.createActionStage=function(e){return t[e.ActionType](e)};var t={};function n(e){return Tt.create("BranchActionStage",e)}function r(e){return Tt.create("DelayActionStage",e)}function i(e){return Tt.create("OpenMenuActionStage",e)}function o(e){return Tt.create("PassOwnershipActionStage",e)}function a(e){return Tt.create("RedirectActionStage",e)}function s(e){return Tt.create("RefreshActionStage",e)}function l(e){return Tt.create("StyleActionStage",e)}function u(e){return Tt.create("SetDataActionStage",e)}function c(e){return Tt.create("SplitActionStage",{node:e})}function d(e){return Tt.create("StopActionStage",e)}function f(e){return Tt.create("WaitForConditionActionStage",e)}function p(e){return Tt.create("OnPageActionStage",e)}function g(e){return Tt.create("ErrorHandlingActionStage",e)}function h(e){return Tt.create("RestartSwtActionStage",e)}(function(){t[e.FLOW_ACTION_TYPE.ConnectToBizflow]=n,t[e.FLOW_ACTION_TYPE.Delay]=r,t[e.FLOW_ACTION_TYPE.OpenMenu]=i,t[e.FLOW_ACTION_TYPE.PassOwnership]=o,t[e.FLOW_ACTION_TYPE.Redirect]=a,t[e.FLOW_ACTION_TYPE.Refresh]=s,t[e.FLOW_ACTION_TYPE.Style]=l,t[e.FLOW_ACTION_TYPE.SetData]=u,t[e.FLOW_ACTION_TYPE.Split]=c,t[e.FLOW_ACTION_TYPE.Stop]=d,t[e.FLOW_ACTION_TYPE.WaitForCondition]=f,t[e.FLOW_ACTION_TYPE.OnPageAction]=p,t[e.FLOW_ACTION_TYPE.ErrorHandling]=g,t[e.FLOW_ACTION_TYPE.RestartSwt]=h}).apply(null,arguments)}).dependencies("Consts"),Tt.register("BranchActionStage").asCtor(function(e,i,r,o,a,s,l,u){var c,d=this;d.execute=function(){var t=Et.Deferred(),n=u.Settings.actionArgs;if(c.customerLog("{0}: Executing Connect To Bizflow with step id {1} step index {2}. Branching to flow: {3}, starting from {4}",f,d.Id,u.PointIndex,n.flowId,n.playFromBeginning?"the beginning of the flow":"stage"+n.startingNodeId),!i.getFlowById(n.flowId))return p(t);var r={currentNode:u,nextFlowId:n.flowId,nextStageId:n.playFromBeginning?undefined:n.startingNodeId,shouldCreateFlowGroup:!0,shouldReturnFromFlowGroup:!!u.Links[0].TargetFlowNodeId,flowGroupInitiator:{type:s.lastTriggerFired&&s.lastTriggerFired.Type==e.FLOW_TRIGGER_TYPE.BbCode?e.STEP_PLAY_INITIATOR_ENUM.BBCODE:e.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:u.Id}};return l.loadByBizFlowId(u.Settings.actionArgs.businessSolutionId,function(e){if(!e)return p(t);a.playSetTimeout(function(){g(t,r,n.flowId)},100)},t.reject),t},d.destroy=function(){return c.customerLog("{0}: Destroying Connect To Bizflow with step id {1} step index {2}",f,d.Id,u.PointIndex),Et.Deferred().resolve()},d.backFromFlowGroup=function(){c.customerLog("{0}: Connect To Bizflow - Back from branch - Step id {1} step index {2}",f,d.Id,u.PointIndex);var e=Et.Deferred(),t={currentNode:u,nextFlowId:undefined,nextStageId:u.Links[0].TargetFlowNodeId,shouldCreateFlowGroup:undefined};return g(e,t,r.peek().flowId)},d.Id=u.Id;var f="BranchActionStage";function p(e){var t={nextStageId:u.Links[0].TargetFlowNodeId,nextFlowId:r.peek().flowId};return g(e,t)}function g(e,t,n){return c.customerLog("{0}: Connect To BizFlow - Moving to next stage. From step id {1} step index {2} to step id {3}, from flow id {4} to flow id {5}. (create flow group: {6})",f,d.Id,u.PointIndex,t.nextStageId,t.nextFlowId,r.peek().flowId,t.shouldCreateFlowGroup?t.shouldCreateFlowGroup:"false"),n&&o.init(n),e.resolve(t)}(function(){c=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, FlowsContainer, FlowStack, FlowVisualStepsIndicator, TimerManager, FlowPlayerMetadata, FlowNodesLoader"),Tt.register("DelayActionStage").asCtor(function(r,e,i,o){var a,s=this;s.execute=function(){var e=Et.Deferred(),t=o.Settings.actionArgs.Duration;a.customerLog("{0}: Executing Delay with step id {1} step index {2}. Waiting {3} seconds.",l,s.Id,o.PointIndex,t||"0");var n=o.Links[0].TargetFlowNodeId;return i.saveWaitingForRefreshTrigger({refreshTrigger:n}),r.playSetTimeout(function(){return function(e,t){a.customerLog("{0}: Delay - Moving to next step. From step id {0} to step id {1}",l,s.Id,t),i.clearWaitingForRefreshTrigger();var n={nextStageId:t};return e.resolve(n)}(e,n)},1e3*t),e.promise()},s.destroy=function(){return a.customerLog("{0}: Destroying Delay with step id {1}",l,s.Id),i.clearWaitingForRefreshTrigger(),Et.Deferred().resolve()},s.Id=o.Id;var l="DelayActionStage";(function(){a=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("TimerManager, Consts, FlowDataPersister"),Tt.register("OpenMenuActionStage").asCtor(function(n,r,i){var o,a=this;a.execute=function(){o.customerLog("{0}: Executing Open Menu with step id {1}",s,a.Id);var e=Et.Deferred(),t={appType:n.EVENT_SENDER_EVENT_APPS.BizFlowStep,objectId:i.Id,type:n.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP};r.WalkMePlayerAPI!=undefined&&r.WalkMePlayerAPI.toggleMenu(t);return function(e,t){o.customerLog("{0}: Open Menu - Moving to next step. From step id {0} to step id {1}",s,a.Id,t);var n={nextStageId:t};return e.resolve(n)}(e,i.Links[0].TargetFlowNodeId)},a.destroy=function(){return o.customerLog("{0}: Destroying Open Menu with step id {1}",s,a.Id),Et.Deferred().resolve()},a.Id=i.Id;var s="OpenMenuActionStage";(function(){o=Tt.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, win"),Tt.register("StyleActionStage").asCtor(function(n,r,i,o){var a,s=this;s.execute=function(){a.customerLog("{0}: Executing Style with step id {1}",l,s.Id);var e=Et.Deferred();if(!i.get().Settings||!i.get().Settings.StyleActionStage)return a.customerLog("{0}: Style step not supported, skipping to next step",l),u(e,o.Links[0].TargetFlowNodeId);var t=Tt.create("DynamicCss",{css:o.Settings.actionArgs.css,Id:s.Id});return t.add(),r.one([n.EVENTS.Flows.FlowStopped,n.EVENTS.Flows.FlowCompleted,n.EVENTS.Flows.FlowAborted].join(" "),function(){a.customerLog("{0}: Removing Style with step id {1}",l,s.Id),t.remove()}),u(e,o.Links[0].TargetFlowNodeId)},s.destroy=function(){return a.customerLog("{0}: Destroying Apply Css with step id {1}",l,s.Id),Et.Deferred().resolve()},s.Id=o.Id;var l="StyleActionStage";function u(e,t){a.customerLog("{0}: Apply Css - Moving to next step. From step id {0} to step id {1}",l,s.Id,t);var n={nextStageId:t};return e.resolve(n)}(function(){a=Tt.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, WmInternals, SiteConfigManager"),Tt.register("PassOwnershipActionStage").asCtor(function(n,r,i,e,o,a,s){var l,u=this;u.execute=function(){var e=Et.Deferred(),t=o.keysConfig.passOwnership.newWindowTime;if(o.saveData(t.key,(new Date).getTime(),t.expiry),l.customerLog("{0}: checking ownership for stage with step id {1}",c,u.Id),!r.get().determineOwnership(i.peek()))return a.raiseEventOnCurrentFlow(n.EVENTS.Flows.AfterCompletingFlowStage,{step:s}),i.updateTopStageId(s.Links[0].TargetFlowNodeId),e.reject({lostOwnership:!0});return function(e,t){l.customerLog("{0}: Moving to next step. From step id {1} to step id {2}",c,u.Id,t);var n={nextStageId:t};return e.resolve(n)}(e,s.Links[0].TargetFlowNodeId)},u.destroy=function(){return l.customerLog("{0}: Destroying PassOwnership stage with step id {1}",c,u.Id),Et.Deferred().resolve()},u.Id=s.Id;var c="PassOwnershipActionStage";(function(){l=Tt.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, CrossDomainManager, FlowStack, FlowsContainer, ClientStorageManager, FlowEventRaiser"),Tt.register("RedirectActionStage").asCtor(function(a,s,e,t,l,u,c){var d,f=this;f.execute=function(){var t=Et.Deferred(),e=c.Settings.actionArgs,n=u.parse(e.url),r=e.dontRedirectIfIdentical,i=s.canRedirect(n,!r);d.customerLog("{0}: Executing Redirect with step id {1} to url {2}. dontRedirectIfIdentical: {3}, canRedirect: {4}",p,n,f.Id,r,i);var o=c.Links[0].TargetFlowNodeId;{if(!i)return g(t,o);l.saveWaitingForRefreshTrigger({refreshTrigger:o}),a.libSetTimeout(function(){var e=s.redirect(n);e&&g(t,o)},200)}return t.promise()},f.destroy=function(){return d.customerLog("{0}: Destroying Redirect with step id {1}",p,f.Id),Et.Deferred().resolve()},f.Id=c.Id;var p="RedirectActionStage";function g(e,t){d.customerLog("{0}: Redirect - Moving to next step. From step id {1} to step id {2}",p,f.Id,t);var n={nextStageId:t};return e.resolve(n)}(function(){d=Tt.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("TimerManager, RedirectService, win, Consts, FlowDataPersister, BBCodeParser"),Tt.register("RefreshActionStage").asCtor(function(t,n,e,r,i){var o,a,s=this;s.execute=function(){o.customerLog("{0}: Executing Refresh with step id {1}",l,s.Id);var e=Et.Deferred();return r.saveWaitingForRefreshTrigger({refreshTrigger:i.Links[0].TargetFlowNodeId}),a=t.libSetTimeout(function(){n.location.reload(!0)},200),e.promise()},s.destroy=function(){o.customerLog("{0}: Destroying Refresh with step id {1}",l,s.Id),a&&a.clear();return Et.Deferred().resolve()},s.Id=i.Id;var l="RefreshActionStage";(function(){o=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("TimerManager, win, Consts, FlowDataPersister"),Tt.register("SetDataActionStage").asCtor(function(c,d,f,p,g,h,m){var v,y=this;y.execute=function(){var e=Et.Deferred();return function(e){var t,n,r,i=e.dataType,o=e.key,a=e.value,s=e.IdentifySettings,l=Math.min(e.duration,g.COOKIE_LIFE_2_YEARS);switch(i){case E.Value:t=a;break;case E.Variable:t=p.getWindowData(g.WINDOW_CUSTOM_DATA_TYPE.Var,a);break;case E.jQuery:var u=f.findElementsByjQueryComplexSelector(a);t=p.checkElementText(Et(u));break;case E.Cookie:t=d.getCookie(a);break;case E.OnScreenElement:t=s?(n=s,(r=h.findElement(n))?p.checkElementText(Et(r)):""):""}v.customerLog("{0}: Executing Set WalkMe Data with step id {1} step index {2}. Type {3}, Value {4}, Duration {5}",S,y.Id,m.PointIndex,i,t,l),c.saveData(o,t,l)}(m.Settings.actionArgs),function(e,t){v.customerLog("{0}: Set WalkMe Data - Moving to next step. From step id {0} to step id {1} step index {2}",S,y.Id,t,m.PointIndex);var n={nextStageId:t};return e.resolve(n)}(e,m.Links[0].TargetFlowNodeId)},y.destroy=function(){return v.customerLog("{0}: Destroying Set WalkMe Data with step id {1} step index {2}",S,y.Id,m.PointIndex),Et.Deferred().resolve()},y.Id=m.Id;var S="SetDataActionStage",E={Value:"Value",Variable:"Variable",jQuery:"jQuery",Cookie:"Cookie",OnScreenElement:"OnScreenElement"};(function(){v=Tt.create("FeaturedLogger",{feature:g.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("ClientOrServerStorageManager, CookiesManager, JQueryElementFinder, CommonUtils, Consts, Lib"),Tt.register("SplitActionStage").asCtor(function(r,e,t){var i,o,a=this;a.execute=function(){var e=Et.Deferred();o.customerLog("{0}: Executing Split with step id {1}",s,a.Id);var t=r.getPlayableLink(i);if(t)return o.customerLog("{0}: Split with step id {1} - Found link with id {2}",s,a.Id,t.Id),function(e,t){o.customerLog("{0}: Split - Moving to next step. From step id {0} to step id {1}",s,a.Id,t.TargetFlowNodeId);var n={nextStageId:t.TargetFlowNodeId,value:t.Name};return e.resolve(n)}(e,t);return o.customerLog("{0}: Split with step id {1} - No link was found"),n=e,n.reject();var n},a.destroy=function(){return o.customerLog("{0}: Destroying Split with step id {1}",s,a.Id),Et.when()};var s="SplitActionStage";i=t.node,a.Id=i.Id,o=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}).asProto().dependencies("SplitFlowNodePlayableLinkProvider, Consts"),Tt.register("StopActionStage").asCtor(function(e){this.execute=function(){},this.destroy=function(){return Et.Deferred().resolve()},this.Id=e.Id,function(){}.apply(null,arguments)}).asProto(),Tt.register("WaitForConditionActionStage").asCtor(function(r,i,o,a,s){var l,u,c=this;c.execute=function(){var t=Et.Deferred(),e=s.ConditionTrees.WaitFor;u.customerLog("{0}: Executing Wait For Condition with step id {1}. Evaluating condition with id {2}",d,c.Id,e.Id);var n={evaluationPollingIntervalMs:500,featureName:"Wait For Condition",elementName:"Wait for condition node: "+s.Name};return(l=o.createNew(n)).onValueChanged(function(e){if(u.customerLog("{0}: Condition value changed for Wait For Condition step with id {1}. Result {2}",d,c.Id,e),r.isDebuggerOnWindow()&&a.raiseEventOnCurrentFlow(i.EVENTS.Flows.WaitForConditionEvaluated,{step:s}),e)return function(e,t){u.customerLog("{0}: Wait For Condition - Moving to next step. From step id {0} to step id {1}",d,c.Id,t);var n={nextStageId:t};return e.resolve(n)}(t,s.Links[0].TargetFlowNodeId)}),l.evaluateAsync(e),t.promise()},c.destroy=function(){u.customerLog("{0}: Destroying Wait For Condition with step id {1}",d,c.Id),l&&(l.cleanResources(),l=undefined);return Et.Deferred().resolve()},c.Id=s.Id;var d="WaitForConditionActionStage";(function(){u=Tt.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("DebuggerManager, Consts, ConditionCheckerFactory, FlowEventRaiser"),Tt.register("ErrorHandlingActionStage").asCtor(function(n,e,r,i,o){var a,s=this;s.execute=t,s.destroy=function(){return a.customerLog("{0}: Destroying Error Handling with step id {1} step index {2}",l,s.Id,o.PointIndex),Et.Deferred().resolve()},s.backFromFlowGroup=function(){return a.customerLog("{0}: Back from Error Handling group - Step id {1} step index {2}",l,s.Id,o.PointIndex),t()},s.Id=o.Id;var l="ErrorHandlingActionStage";function t(){var e=Et.Deferred();if(a.customerLog("{0}: Executing Error Handling with step id {1} step index {2}",l,s.Id,o.PointIndex),n.isSegmented(o)){a.customerLog("{0}: Error Handling condition applies. Step id {1} step index {2}",l,s.Id,o.PointIndex);var t=o.Links[i.getErrorHandlingConnectorIndex(o)].TargetFlowNodeId||o.Id;return r.playSetTimeout(function(){u(e,t,!0)},500),e.promise()}return a.customerLog("{0}: Error Handling condition does not apply. Step id {1} step index {2}",l,s.Id,o.PointIndex),u(e,o.Links[0].TargetFlowNodeId)}function u(e,t,n){a.customerLog("{0}: Error Handling - Moving to next step. From step id {1} step index {2} to step id {3}. (create flow group {4})",l,s.Id,o.PointIndex,t,n||"false");var r={currentNode:o,nextStageId:t,shouldCreateFlowGroup:n,shouldReturnFromFlowGroup:!0};return e.resolve(r)}(function(){a=Tt.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("ErrorHandlingSegmentationChecker, Consts, TimerManager, FlowNodeExtensions"),Tt.register("RestartSwtActionStage").asCtor(function(t,n,r){var i;this.execute=function(){var e=Et.Deferred();return i.customerLog("{0}: Executing Restart SWT with step id {1} step index {2}",o,r.Id,r.PointIndex),n.playSetTimeout(function(){e.resolve({shouldCreateFlowGroup:!0,shouldReturnFromFlowGroup:!1,flowGroupInitiator:{type:t.STEP_PLAY_INITIATOR_ENUM.RESTART_SWT,objectId:r.Id}})},500),e.promise()},this.destroy=function(){return i.customerLog("{0}: Destroying Restart SWT with step id {1} step index {2}",o,r.Id,r.PointIndex),Et.Deferred().resolve()};var o="RestartSwtActionStage";(function(){i=Tt.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("Consts, TimerManager"),Tt.register("ErrorHandlingSegmentationChecker").asCtor(function(o,a){this.isSegmented=function(e){var t=o.getValue(e,"ConditionTrees.ErrorHandle");if(!t||!t.Root)return!1;return n=e,r=t,i={featureName:"evaluate error handling segmentation",elementName:n.Name},a.createNew(i).getCurrentEvaluationValueAndStopEvaluating(r);var n,r,i}}).dependencies("ObjectJpath, ConditionCheckerFactory"),Tt.register("OnPageActionStage").asCtor(function(o,a,s,l,u,c){var d,f=this;f.execute=function(){var n=Et.Deferred(),r=c.Settings.actionArgs;d.customerLog("{0}: Evaluating visibility for On Page Action with id {1} step index {2}. On element action {3}",p,f.Id,c.PointIndex,r.onElementAction),u.raiseEventOnCurrentFlow(s.EVENTS.Flows.LookingForElement,{step:c});var i=(e=c,!e.Settings.isSkippable);var e;return o.evaluate(c.Id,r.IdentifySettings,i,r.ownerChain).then(function(e){var t=o.getElement();d.customerLog("{0}: Element found. Executing On Page Action with step id {1} step index {2}",p,f.Id,c.PointIndex),e==s.VISIBILITY_STATE.VISIBLE?(u.raiseEventOnCurrentFlow(s.EVENTS.Flows.UiElementFound,{step:c,score:t.score}),a.execute(t,r,function(){g||h(n,c)})):i||h(n,c,!0)}),n.promise()},f.destroy=function(){return g=!0,d.customerLog("{0}: Destroying On Page Action with step id {1} step index {2}",p,f.Id,c.PointIndex),o.cleanResources(),Et.Deferred().resolve()},f.Id=c.Id;var p="OnPageActionStage",g=!1;function h(e,t,n){var r=t.Links[0].TargetFlowNodeId,i=t.Settings.actionArgs;d.customerLog("{0}: On Page Action - Moving to next step. From step id {1} step index {2} to step id {3}",p,f.Id,t.PointIndex,r);var o={nextStageId:r,value:l.getValue(i),skipped:n};return e.resolve(o)}(function(){d=Tt.create("FeaturedLogger",{feature:s.FEATURES_LOGS.Flows})}).apply(null,arguments)}).asProto().dependencies("OnElementActionVisibilityEvaluator, OnElementActionExecutor, Consts,OnPageActionStageValueProvider, FlowEventRaiser"),Tt.register("OnPageActionStageValueProvider").asCtor(function(e){var r;this.getValue=function(e){var t=e.onElementAction;if(t in r){var n=r[t];return e[n]}},(r={})[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.FillText]="fillText",r[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.SelectListValue]="dropdownSelectedValue"}).asProto().dependencies("Consts"),Tt.register("StartPointSegmentationChecker").asCtor(function(r,o){this.isSegmented=function(e,t){var n=r.getValue(e,"ConditionTrees.StartPoint");if(!n||!n.Root)return!1;return function(e){var t=Tt.create("UIVisibilityManager",e);t.watchForVisibility();var n=t.shouldShow();return t.cleanResources(),n}(function(e,t,n){var r=o.STICKY_TYPE.ONCE,i={logContext:e.Id,isRemoveByCondition:!1,stickyType:r,conditionCheckerParams:{featureName:"evaluate start point segmentation",elementName:e.Title},conditionTree:t};e.IdentifySettings&&(i.elementVisibilityParams={findElementParams:{IdentifySettings:e.IdentifySettings,ownerChain:{id:e.Id,type:o.ELEMENT_OWNER_TYPE_NAMES.START_POINT,sticky:r,owner:{id:n,type:o.ELEMENT_OWNER_TYPE_NAMES.SWT}}}},i.trackUIChanges=!0);return i}(e,n,t))}}).dependencies("ObjectJpath, Consts"),Tt.register("FlowStartingStageProvider").asCtor(function(e,a){this.getStageData=function(i){var o={};return e.runDfs(i,{afterPointDescendantsVisited:function(e){var t,n,r;t=e,n=o,r=i.Id,n.nodeId||a.isSegmented(t.point,r)&&(n.nodeId=t.node.Id,n.uiElementId=t.uiElement?t.uiElement.Id:undefined)}}),{startingNodeId:o.nodeId||i.RootFlowNodeId,startingUiElementId:o.uiElementId,startedFromStartPoint:!!o.nodeId}}}).dependencies("BaseGraphDfsService, StartPointSegmentationChecker"),Tt.register("FlowStartPointOrderCreator").asCtor(function(n){var i,o;function a(e){switch(e.Type){case n.FLOW_STEP_TYPE.UI:!function(e){for(var t=e.UIElements,n=t.length-1;0<=n;n--){var r=t[n];l(r,e.Id),s(r)}}(e);break;case n.FLOW_STEP_TYPE.Action:l(t=e,t.Id),function(e){for(var t=e.Links,n=t.length-1;0<=n;n--)r(t[n])}(t)}var t}function s(e){for(var t=e.Triggers,n=t.length-1;0<=n;n--)r(t[n])}function r(e){var t=e.TargetFlowNodeId;t&&o.push(t)}function l(e,t){var n=e.ConditionTrees&&e.ConditionTrees.StartPoint;n&&!Et.isEmptyObject(n)&&i.push({point:e,nodeId:t})}this.createNodesStack=function(e){i=[],o=[];var t=e.RootFlowNodeId;o.push(t);for(;0<o.length;){var n=o.shift(),r=e.Nodes[n];a(r)}return i}}).dependencies("Consts"),Tt.register("OnElementActionVisibilityEvaluator").asCtor(function(a){var s;this.evaluate=function(e,t,n,r){var i=Et.Deferred(),o={logContext:e,findElementParams:{IdentifySettings:t,ownerChain:{type:a.ELEMENT_OWNER_TYPE_NAMES.ACTION,id:e,stickyType:n,owner:r}},elementEvaluationIntervalMs:n?500:undefined};s=Tt.create("ElementVisibilityEvaluator",o),n?(s.setOnVisibilityChanged(i.resolve),s.evaluateElementVisibilityAsynch()):i.resolve(s.calculateElementVisibility());return i.promise()},this.cleanResources=function(){s&&s.cleanResources()},this.getElement=function(){if(s)return s.getElement()}}).dependencies("Consts"),Tt.register("OnElementActionExecutor").asCtor(function(l,t,n,u){this.execute=function(e,t,n){switch(t.onElementAction){case c.Click:case c.Tap:l.click(e,n);break;case c.Hover:l.hover(e,n);break;case c.Focus:l.focus(e,n);break;case c.FillText:var r=d(t.fillText),i=d(t.preText),o=d(t.postText),a=t.keepFocus;u.execute(e,r,i,o,a,n);break;case c.SelectListValue:var s=d(t.dropdownSelectedValue);l.selectByText(e,s,n);break;case c.Swipe:l.swipe(e,n)}};var c={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue",Tap:"Tap",Swipe:"Swipe"};function r(e){return t.decodeHtml(e,["&",">","<"])}function d(e){return e&&r(n.parse(r(e)))}(function(){}).apply(null,arguments)}).dependencies("InputGenerator, HtmlDecoder, BBCodeParser, OnElementFillTextAction"),Tt.register("OnElementFillTextAction").asCtor(function(a,l,u){function c(e,t){return t?l.adaptText(e,t):""}this.execute=function(e,t,n,r,i,o){a.text(e,function(e,t,n,r){if(t)return c(e,t);var i=(s=l.retrieve(e),s||""),o=c(e,n),a=c(e,r);var s;return u.formatString("{0}{1}{2}",o,i,a)}(e,t,n,r),100,o,undefined,i)}}).dependencies("InputGenerator, TextInjector, CommonUtils"),Tt.register("FlowManager").asCtor(function(t,r,i,n,o,e){var a;function s(){i(a.Flow).on(t.FLOW_INNER_EVENTS.EventPropogationPrefix,function(e,t){var n={businessSolutionId:a.Id,businessSolutionName:a.Name};n=i.extend(n,t),r.raiseEvent(t.eventType,n),l(t.eventType)})}function l(e){e==t.FLOW_INNER_EVENTS.FlowIsPlaying&&n.startWatchingDeployable(a,o.getPlayGuid())}this.unbindEventPropagation=function(){i(a.Flow).off(t.FLOW_INNER_EVENTS.EventPropogationPrefix)},a=e.businessSolutionModel,s()}).asProto().dependencies("Consts, CommonEvents, wmjQuery, WalkMeGoalsManager, FlowDataPersister"),Tt.register("FlowManagerCreator").asCtor(function(){this.create=function(e){return Tt.create("FlowManager",{businessSolutionModel:e})}}),Tt.register("FlowsManager").asCtor(function(r,e,n){var i,o;function t(e){return e.unbindEventPropagation()}this.init=function(e){i=e;var t=function(){var e=[];o=[];for(var t=0;t<=i.length-1;t++){var n=i[t];o.push(r.create(n)),e.push(n.Flow)}return e}();n.init(t)},this.stopAllFlowEventsPropagation=function(){if(!o)return Et.when();return e.executeParallelyOnArray(o,t)}}).dependencies("FlowManagerCreator, PromiseUtils, FlowsContainer");var dn=function(u){function e(e,t,n,r,i,o,a,s,l){u.call(this,{lib:e,type:t.DEPLOYABLE_TYPE.BusinessSolution}),this.consts=t,this.promiseUtils=n,this.smartTipSetsManager=r,this.flowsManager=i,this.permalinkManager=o,this.initiatorManager=a,this.logger=s,this.stringUtils=l,this._name="Flow",this._bizFlowApi=undefined,this.setDeployables([])}return Ie(e,u),e.prototype.setDeployables=function(e){if(e){var t=Et.grep(e,function(e){return e.SmartTips&&0<e.SmartTips.length});this.smartTipSetsManager.init(t);var n=Et.grep(e,function(e){return!!e.Flow});this.flowsManager.init(n),u.prototype.setDeployables.call(this,e)}},e.prototype.activateById=function(e,t,n){try{var r=u.prototype.getById.call(this,e);if(!r)return this.logger.customerLog(this.stringUtils.formatString("Failed playing bizflow with id {0} - The Id {0} does not exist.",e),3),!1;if(n!=undefined&&!r.Flow.Nodes[n])return this.logger.customerLog(this.stringUtils.formatString("Failed playing bizflow with id {0} - The NodeId {1} does not exist.",e,n),3),!1;var i=this.getBizFlowApi();return this.initiatorManager.setForScope(t,function(){i.start(r,n,t)}),!0}catch(o){return this.logger.customerLog(this.stringUtils.formatString("Failed playing bizflow with id {0}. Exception is {1}",e,o),3),!1}},e.prototype.releaseAll=function(){return this.promiseUtils.executeParallely([this.destroySmartTipSetManagers(),this.destroyFlowPlayer(),this.destroyFlowManagers()])},e.prototype.restore=function(){return this.permalinkManager.isTrainingInStartingMode()?Et.when():this.getBizFlowApi().restore()},e.prototype.autoStartEnabled=function(e){return!this.permalinkManager.isTrainingInStartingMode()},e.prototype.destroyFlowPlayer=function(){return this.getBizFlowApi().pause()},e.prototype.destroySmartTipSetManagers=function(){return this.smartTipSetsManager.turnOffAllSets()},e.prototype.getBizFlowApi=function(){return this._bizFlowApi||(this._bizFlowApi=Tt.get("BizflowApi")),this._bizFlowApi},e.prototype.destroyFlowManagers=function(){return this.flowsManager.stopAllFlowEventsPropagation()},e}(Ge);Tt.register("BusinessSolutionsManager").asCtor(dn).dependencies("Lib, Consts, PromiseUtils, SmartTipSetsManager, FlowsManager, PermalinkManager, InitiatorManager, Logger, StringUtils"),Tt.register("FlowsPlayer").asCtor(function(a,s,l,u,i,n,e,c,o,d,f,r,p,g,h,m){var v,y,S;function E(e){y.customerLog("FlowPlayer onStageSuccess - next stage id: {0}{1}",e.nextStageId,e.nextFlowId?", next flow id: "+e.nextFlowId:""),T();var t,n=i.peek(),r=(e=Et.extend({step:c.getNodeById(n.flowId,n.stageId)},e)).skipped?u.EVENTS.Flows.FlowStageSkipped:u.EVENTS.Flows.AfterCompletingFlowStage;d.raiseEventOnCurrentFlow(r,e),e.currentNode&&f.setPreviousGroupHasNextStage(e.shouldCreateFlowGroup,e.currentNode),e.shouldCreateFlowGroup?function(e){var t=m.getNextFlowData(e);e.shouldReturnFromFlowGroup||i.pop();i.push(t.flowId,t.stageId),y.customerLog("FlowPlayer new flow group - flow {0} with node {1}",t.flowId,t.stageId),o.raiseFlowGroupEvent(e.step.ActionType,e.flowGroupInitiator,t.flowId,t.stageId),d.raiseEventOnCurrentFlow(u.FLOW_INNER_EVENTS.FlowIsPlaying,{}),I(t.flowId,t.stageId)}(e):e.nextStageId?(t=e.nextStageId,y.customerLog("FlowPlayer transition - Transitioning to node {0}",t),i.updateTopStageId(t),w().then(C)):A()}function T(){if(!v)return Et.when();var e=v.destroy();return v=null,e}function w(){return e.canContinue()}function C(){var e=i.peek();I(e.flowId,e.stageId)}function b(e,t,n){s.clearIsGroupBack(),_(e,t,u.FLOW_STAGE_ACTIONS.BACK_FROM_FLOW_GROUP,n)}function I(e,t,n){_(e,t,u.FLOW_STAGE_ACTIONS.EXECUTE,n)}function _(t,e,n,r){y.customerLog("FlowPlayer run - Running flow id: {0}, node id: {1} with action: {2}",t,e,n),r&&(S=r);var i=c.getFlowById(t);if(v=a.createStage(i,e)){d.raiseEventOnCurrentFlow(u.EVENTS.Flows.BeforeExecutingFlowStage,{step:c.getNodeById(t,e)});var o=s.getSafeStartFlowId();v[n]().progress(P).then(E,function(e){!function(e,t){if(y.customerLog("FlowPlayer onStageError - params: {0}",l.toJSON(e)),e&&e.nextStageId)E(e);else if(!e||!e.lostOwnership){var n;if(e&&!e.wasElementShown&&s.getIsFirstVisualStep()){if(S==u.FLOW_PLAY_MODES.PLAY){if(!s.getSafeStartFlowId()){var r=c.getFlowById(t);e.isSafeStartHandling=p.handleSafeStart(g,r,{flowId:t,eventParams:e})}n=u.EVENTS.Flows.FailedToStart}}else f.removePreviousGroupHasNextStage(),n=u.EVENTS.Flows.FlowStopped;k(n,e)}}(e,t)}).always(function(){o&&s.saveSafeStartFlowId(undefined)})}else A()}function P(e,t){"stageShown"==e&&d.raiseEventOnCurrentFlow(u.EVENTS.Flows.UIFlowStageShown,t)}function A(){var e,t,n=i.pop();if(y.customerLog("FlowPlayer flowGroupCompleted - With previous group settings flowId: {0}, stageId: {1}",n.flowId,n.stageId),!i.isEmpty()){var r=i.peek().flowId;return e=i.peek(),s.saveIsGroupBack(!0),w().then(function(){b(e.flowId,e.stageId)}),void(n.flowId!=r&&d.raiseEventOnCurrentFlow(u.EVENTS.Flows.FlowBranchReturned,{flowId:n.flowId}))}t=n.flowId,k(u.EVENTS.Flows.FlowCompleted,{flowId:t})}function k(e,t){return e&&d.raiseEventOnCurrentFlow(e,t),i.clear(),T()}this.execute=I,this.backFromFlowGroup=b,this.stop=function(){return y.customerLog("FlowPlayer stop - Stopping current flow"),k(u.EVENTS.Flows.FlowStopped)},this.abort=function(){if(i.isEmpty()&&!v)return Et.when();return y.customerLog("FlowPlayer abort - Aborting current flow"),k(u.EVENTS.Flows.FlowAborted)},this.pause=function(){return y.customerLog("FlowPlayer pause - Pausing current flow"),T()},this.play=function(e,t){y.customerLog("FlowPlayer play from flow with id {0} stage id {1}",e,t),h.releaseBalloons(),n.pushInnerGroupIfExists(e,t),i.push(e,t),s.saveIsFirstVisualStep(!0),r.init(e),o.raiseFlowStartedEvent(e,t),d.raiseEventOnCurrentFlow(u.FLOW_INNER_EVENTS.FlowIsPlaying,{}),I(e,t,u.FLOW_PLAY_MODES.PLAY)},v=undefined,y=Tt.create("FeaturedLogger",{feature:u.FEATURES_LOGS.Flows})}).dependencies("StageCreator, FlowDataPersister, JsonUtils, Consts, FlowStack, FlowInnerGroupService, FlowTransitionChecker, FlowsContainer, FlowGroupEventRaiser, FlowEventRaiser, FlowGroupLastStageIndicator,FlowVisualStepsIndicator, DeployableSafeStartExecuter, FlowSafeStartHandler, LibDestroyer, FlowGroupPlayDataProvider"),Tt.register("FlowsRestorer").asCtor(function(o,a,s,t,l,u,r,c,n){var d;function i(e){var t=f(e),n=l.getIsGroupBack()?o.FLOW_STAGE_ACTIONS.BACK_FROM_FLOW_GROUP:o.FLOW_STAGE_ACTIONS.EXECUTE;r[n](e.flowId,t,o.FLOW_PLAY_MODES.RESTORE)}function f(e){var t,n,r=l.getWaitingForRefreshTrigger(),i=e.stageId;return r?(d.customerLog("FlowsRestorer restore - refresh happened, skipping stage id {0} and moving to {1}",i,r.refreshTrigger),s.raiseEventOnCurrentFlow(o.EVENTS.Flows.AfterCompletingFlowStage,{step:u.getCurrentNode(),firedTrigger:r.firedTrigger,uiElementId:r.uiElementId}),l.clearWaitingForRefreshTrigger(),i=r.refreshTrigger,a.updateTopStageId(i)):i||(t=e.flowId,n=u.getFlowById(t),i=c.getStageData(n).startingNodeId,a.updateTopStageId(i)),i}this.restore=function(){if(d.customerLog("FlowsRestorer restore - restoring current flow"),a.isEmpty())d.customerLog("FlowsRestorer restore - nothing to restore");else{s.raiseEventOnCurrentFlow(o.EVENTS.Flows.RestoringFlow,{});var e=a.peek();n.loadByFlowId(e.flowId,function(){t.init(e.flowId),i(e)})}},d=Tt.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows})}).dependencies("Consts, FlowStack, FlowEventRaiser, FlowVisualStepsIndicator, FlowDataPersister, FlowsContainer,FlowsPlayer, FlowStartingStageProvider, FlowNodesLoader"),Tt.register("FlowPlayerMetadata").asInstance({lastTriggerFired:undefined}),Tt.register("FlowDataValidator").asCtor(function(){this.isFlowsArrayValid=function(e,t){return Et.isArray(e)&&(n=e,r=t,Et(n).filter(function(e,t){return r!=undefined&&t.flowId==r||t.flowId!=undefined&&t.stageId!=undefined}).length==n.length);var n,r}}),Tt.register("FlowDataPersister").asCtor(function(t,n,r){var i,e=this;function o(e){i.isWaitingForRefresh=e,s()}function a(e){i.isGroupBack=e,s()}function s(){t.saveData(t.keysConfig.flow.stack.key,i,t.keysConfig.flow.stack.expiry)}e.getPlayGuid=function(){return i.playGuid},e.getFlows=function(){return i.flows},e.getIsFirstVisualStep=function(){return i.isFirstVisualStep},e.getWaitingForRefreshTrigger=function(){return i.isWaitingForRefresh},e.getSafeStartFlowId=function(){return i.safeStartFlowId},e.getPlayInitiator=function(){return i.playInitiator},e.getIsGroupBack=function(){return i.isGroupBack},e.load=function(){i=function(){var e=t.getData(t.keysConfig.flow.stack.key);e&&!n.isFlowsArrayValid(e.flows,e.safeStartFlowId)?r.isFeatureEnabled("resetOnlyFlowOnValidate")?e.flows=[]:e={flows:[]}:e||(e={flows:[]});return e}()},e.saveFlows=function(e){i.flows=e,s()},e.savePlayGuid=function(e){i.playGuid=e,s()},e.saveIsFirstVisualStep=function(e){i.isFirstVisualStep=e,s()},e.saveWaitingForRefreshTrigger=o,e.saveSafeStartFlowId=function(e){i.safeStartFlowId=e,s()},e.savePlayInitiator=function(e){i.playInitiator=e,s()},e.saveIsGroupBack=a,e.clearWaitingForRefreshTrigger=function(){o(undefined)},e.clearIsGroupBack=function(){a(undefined)},function(){i={}}.apply(null,arguments)}).dependencies("ClientStorageManager, FlowDataValidator, FeaturesManager"),Tt.register("FlowStack").asFunction(function(r){var i=Tt.create("Stack"),n=i.push;return i.push=function(e,t){n({flowId:e,stageId:t})},i.updateTopStageId=function(e){i.peek().stageId=e},i.load=function(){r.load(),i.init(r.getFlows())},Et(["push","pop","updateTopStageId","clear"]).each(function(e,t){var n;i[t]=(n=i[t],function(){var e=n.apply(i,arguments);return r.saveFlows(i.getAll()),e})}),i}).dependencies("FlowDataPersister"),Tt.register("BizflowApi").asCtor(function(i,e,o,t,n,a,s,l,u){var c;this.start=function(e,t,n){var r=e.Flow.Id;c.customerLog("BizflowApi start - Starting flow {0} id {1}{2}",e.Name,r,t?" from node "+t:""),u.loadByFlowId(r,function(){i.abort().then(function(){a.savePlayInitiator(n);var e=l.get(r,t);s.raiseBeforeFlowStartedEvent(r,e),o.determineOwner(r,e.startingNodeId)})})},this.restore=function(){n.load(),e.restore()},this.stop=i.stop,this.pause=i.pause,c=Tt.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}).dependencies("FlowsPlayer, FlowsRestorer, BizflowOwnershipManager, Consts, FlowStack, FlowDataPersister, FlowGroupEventRaiser, FlowStartPointDataProvider, FlowNodesLoader"),Tt.register("FlowNodesLoader").asCtor(function(i,o,r,e){var a,s;function l(t,n,e){return s?t?(r=t,i.isEmptyObject(r.Nodes)?void a.load(t.Id).then(function(e){t.Nodes=e,n&&n(!0)},e):n&&n(!0)):n&&n(!1):n&&n(!0);var r}this.loadByBizFlowId=function(e,t,n){var r=o.getById(e);l(r&&r.Flow,t,n)},this.loadByFlowId=function(e,t,n){l(r.getFlowById(e),t,n)},s=e.isFeatureEnabled("publishNoNodesSwt"),a=Tt.create("NoPublishStepsLoader",{jsonpCallbackPrefix:"flow_nodes",fileNamePrefix:"swt"})}).dependencies("wmjQuery, BusinessSolutionsManager, FlowsContainer, FeaturesManager"),Tt.register("NoPublishStepsLoader").asCtor(function(u,c,d,f,p){this.load=function(l){e[l]||(e[l]=new at(function(e,t){return n=l,r=e,i=t,o=c.getPublishDirectory(),a=c.getPublishVersion(),s=o+function(e,t){var n="data_"+e+"_"+p.fileNamePrefix+"_"+t,r=f.getCurrentLanguage();r&&(n+="_"+r);return n+".js"}(a,n),d.customerLog("Retrieving steps for : "+n,3),void u.execute({url:s,dataType:"jsonp",cache:!0,jsonpCallback:"walkme_"+p.jsonpCallbackPrefix+"_"+n,success:r,error:function(e){d.error(e,"Error: unable to receive data for: "+n,3),i(e)}});var n,r,i,o,a,s}));return e[l]};var e={}}).asProto().dependencies("WmAjax, SettingsFile, Logger, LanguageManager"),Tt.register("FlowEventRaiser").asCtor(function(r,n,i,o){function a(e,t){var n=i.getFlowById(t.flowId);t.eventType=e,o(n).trigger(r.FLOW_INNER_EVENTS.EventPropogationPrefix,t)}this.raiseEventOnCurrentFlow=function(e,t){t=o.extend(function(){var e=n.peek();if(!e)return{};return{flowId:e.flowId,stageId:e.stageId}}(),t),a(e,t)},this.raiseEvent=a}).dependencies("Consts, FlowStack, FlowsContainer, wmjQuery"),Tt.register("FlowGroupEventRaiser").asCtor(function(a,s){function l(e,t,n){return{flowId:e,requestedStageId:t,startingStageId:t,initiator:n}}this.raiseFlowStartedEvent=function(e,t){var n=l(e,t);s.raiseEvent(a.EVENTS.Flows.FlowStarted,n)},this.raiseFlowGroupEvent=function(e,t,n,r){if(i=e,i!=a.FLOW_ACTION_TYPE.RestartSwt&&i!=a.FLOW_ACTION_TYPE.ConnectToBizflow)return;var i;var o=l(n,r,t);s.raiseEvent(a.EVENTS.Flows.FlowBranched,o)},this.raiseBeforeFlowStartedEvent=function(e,t){s.raiseEvent(a.EVENTS.Flows.BeforeFlowStarted,{flowId:e,startPointUIElementId:t.startingUiElementId,startedFromStartPoint:t.startedFromStartPoint,startingStageId:t.startingNodeId})}}).dependencies("Consts, FlowEventRaiser"),Tt.register("FlowLinkedTaskCompletionHandler").asCtor(function(t,n,e){function r(e){n.updateDeployableCompleted(e,t.DEPLOYABLE_TYPE.BusinessSolution)}this.init=function(){e.on(t.EVENTS.Flows.FlowCompleted,function(e,t){r(t.businessSolutionId)}),e.on(t.EVENTS.Flows.FlowBranchReturned,function(e,t){r(t.businessSolutionId)})}}).dependencies("Consts, TodoListManager, WmInternals"),Tt.register("BizFlowOnBeforeUnloadChecker").asCtor(function(e,t,n,r,i,o,a,s){var l,u,c;this.init=function(){f(),t.register(p),i.register(e.FLOW_TRANSITION_HANDLER_IDS.ON_BEFORE_UNLOAD,h)},this.destroy=function(){c&&c.clear();f()};var d=3e3;function f(){l=!1,c=u=null}function p(){if(!s.isEmpty()&&(l=!0,r.pauseAllTimeouts(),!o.get().enabled())){u=Et.Deferred(),c&&c.clear();var e=n.get().Settings.BeforeUnloadTimeout||d;c=r.setWalkmeTimeout(g,e)}}function g(){a.isFeatureEnabled("noUnload")&&r.resumeAllTimeouts(),u.resolve(),f()}function h(){return l?o.get().enabled()?(f(),o.get().loseOwnership(!1,!0),Et.Deferred().reject()):u.promise():Et.Deferred().resolve()}}).dependencies("Consts, WindowBeforeUnloadHandler, SiteConfigManager, TimerManager, FlowTransitionChecker, CrossDomainManager, FeaturesManager, FlowStack"),Tt.register("SplitFlowNodePlayableLinkProvider").asCtor(function(i,n){function o(e){var t=n.getValue(e,"ConditionTrees.Branch.Root");return!!t}this.getPlayableLink=function(e){for(var t=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];o(i)?t.push(i):n.push(i)}return t=t.concat(n)}(e.Links),n=0;n<t.length;n++){var r=t[n];if(!o(r)||i.isSegmented(r))return r}return null}}).dependencies("FlowLinkSegmentationChecker, ObjectJpath"),Tt.register("FlowLinkSegmentationChecker").asCtor(function(n){this.isSegmented=function(e){var t={featureName:"evaluate split node link segmentation",elementName:e.Name};return n.createNew(t).getCurrentEvaluationValueAndStopEvaluating(e.ConditionTrees.Branch)}}).dependencies("ConditionCheckerFactory"),Tt.register("FlowsContainer").asCtor(function(t){var n;function r(e,t){return n[e].Nodes[t]}this.init=function(e){n={};for(var t=0;t<e.length;t++)n[e[t].Id]=e[t]},this.getNodeById=r,this.getFlowById=function(e){return n[e]},this.getCurrentNode=function(){var e=t.peek();return e&&r(e.flowId,e.stageId)},this.getCurrentFlowId=function(){var e=t.peek();return e&&e.flowId}}).dependencies("FlowStack"),Tt.register("FlowSurveyActivator").asCtor(function(e,f,p,g,h,m){function t(e,t){r(t.businessSolutionId,f.SURVEY_START_EVENTS.WalkThruCompleted)}function n(e,t){r(t.businessSolutionId,f.SURVEY_START_EVENTS.WalkThruExited)}function r(e,t){var n=p.getById(e);if(n.Surveys&&0!=n.Surveys.length){var r,i,o,a,s=(r=n.Surveys,i=t,o=f.SURVEY_START_EVENTS.Both,a=undefined,Et.each(r,function(e,t){t.TriggerType!=i&&t.TriggerType!=o||(a=t)}),a);if(s){var l=m.flowSurveyActivator.surveyRepeat.key+f.DEPLOYABLE_TYPE.BusinessSolution+"-"+n.Id,u=f.SURVEY_FREQUENCY[s.Frequency],c={objectId:n.Id,type:f.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},d={businessSolutionId:n.Id,eventSource:t,surveyPlayGUID:h.getPlayGuid()};g.activateSurvey(s.SurveyId,l,u,c,d)}}}e.on(f.EVENTS.Flows.FlowCompleted,t),e.on(f.EVENTS.Flows.FlowStopped,n)}).dependencies("WmInternals, Consts, BusinessSolutionsManager, DeployableSurveyActivator, FlowDataPersister, StorageKeysConfigurations"),Tt.register("FlowTransitionChecker").asCtor(function(e){var n,r,i;function t(e){var t=Et.map(e,o);return Et.when.apply(Et,t)}function o(e){return e()}this.register=function(e,t){n[e]?r.push(t):i.push(t)},this.canContinue=function(){var e=Et.Deferred();return t(r).then(function(){t(i).then(e.resolve,e.reject)},e.reject),e.promise()},r=[],i=[],(n={})[e.FLOW_TRANSITION_HANDLER_IDS.DELAYER]=!0}).dependencies("Consts"),Tt.register("FlowTransitionDelayer").asCtor(function(e,t,r,i){var o,a,n;function s(){return o.promise()}this.setDelayByTrigger=function(e,t){var n=i.getDelay(e,t);n&&(o=mtjQuery.Deferred());a=r.setWalkmeTimeout(o.resolve,n)},this.destroy=function(){a&&(a.clear(),a=null,o.reject(),o=mtjQuery.Deferred().resolve())},n=mtjQuery.Deferred().resolve(),o=n,t.register(e.FLOW_TRANSITION_HANDLER_IDS.DELAYER,s)}).dependencies("Consts, FlowTransitionChecker, TimerManager, FlowTransitionDelayProvider"),Tt.register("FlowTransitionDelayProvider").asCtor(function(n,r){this.getDelay=function(e,t){return e.getDelay&&e.getDelay()||(n.get().Settings.TriggersDelays||{})[t]||r[t]||0}}).dependencies("SiteConfigManager, FlowTransitionDelayerDefaultMap"),Tt.register("FlowTransitionDelayerDefaultMap").asCtor(function(e){var t={};return t[e.FLOW_TRIGGER_TYPE.Click]=1e3,t}).dependencies("Consts"),Tt.register("NextExecutionFlowNodeProvider").asCtor(function(r,i,o,a){this.getNextNodeToExecute=function(e){return n=e,r.isActionNodeOfType(n,a.FLOW_ACTION_TYPE.Split)&&i.getNextNodeId(n)||(t=e,r.isActionNodeOfType(t,a.FLOW_ACTION_TYPE.ErrorHandling)&&o.getNextNodeId(t))||r.getNodeConnectors(e)[0].TargetFlowNodeId;var t;var n}}).dependencies("FlowNodeExtensions, SplitFlowNodeDecisionProvider, ErrorHandlingFlowNodeDecisionProvider, Consts"),Tt.register("SplitFlowNodeDecisionProvider").asCtor(function(n){this.getNextNodeId=function(e){var t=n.getPlayableLink(e);if(!t)return null;return t.TargetFlowNodeId}}).asProto().dependencies("SplitFlowNodePlayableLinkProvider"),Tt.register("ErrorHandlingFlowNodeDecisionProvider").asCtor(function(n,r){this.getNextNodeId=function(e){var t=0;n.isSegmented(e)&&(t=r.getErrorHandlingConnectorIndex(e));return e.Links[t].TargetFlowNodeId}}).asProto().dependencies("ErrorHandlingSegmentationChecker, FlowNodeExtensions"),Tt.register("FlowExecutionTraverser").asCtor(function(l,u){this.executionTraverse=function(o,t,a){var s={};!function e(t){if(s[t])return;var n=l.getNodeById(o,t);var r=a(n);if(!r)return;s[t]=1;var i=u.getNextNodeToExecute(n);i&&e(i)}(t)}}).dependencies("FlowsContainer, NextExecutionFlowNodeProvider"),Tt.register("FlowGroupLastStageIndicator").asCtor(function(i){this.setPreviousGroupHasNextStage=function(e,t){var n=s();e&&!n&&(r=t,r.Links[0].TargetFlowNodeId)?i.saveData(o,t.Id,i.keysConfig.flow.lastStage.expiry):e||n!=t.Id||a();var r},this.removePreviousGroupHasNextStage=a,this.isPreviousGroupHasNextStage=s;var o=i.keysConfig.flow.lastStage.key;function a(){i.removeData(o)}function s(){return i.getData(o,!1)}}).dependencies("ClientStorageManager"),Tt.register("FlowGroupPlayDataProvider").asCtor(function(i,o){this.getNextFlowData=function(e){var t=i.peek(),n=e.nextFlowId||t.flowId,r=o.get(n,e.nextStageId).startingNodeId;return{flowId:n,stageId:r}}}).dependencies("FlowStack, FlowStartPointDataProvider"),Tt.register("UiFlowNodesExecutionStack").asCtor(function(e,r,i,o,t,a){var s=Tt.create("Stack");function n(e,t){var n;l(t)&&(!l(n=t)||c(n))||s.clear()}function l(e){var t=r.getNodeById(e.flowId,e.stageId),n=t&&i.isUiNode(t);return n}function u(e,t){var n;!t.isFlowGoingBack&&(l(n=t)&&c(n))&&s.push(o.peek().stageId)}function c(e){var t=e.step,n=t.UIElements[0],r=a.get(n);return 0<r.length}this.clear=s.clear,this.push=s.push,this.pop=s.pop,this.isEmpty=s.isEmpty,t.bind(e.EVENTS.Flows.FlowStarted,s.clear),t.bind(e.EVENTS.Flows.BeforeExecutingFlowStage,n),t.bind(e.EVENTS.Flows.AfterCompletingFlowStage,u)}).dependencies("Consts, FlowsContainer, FlowNodeExtensions, FlowStack, WmInternals, ButtonTriggersProvider"),Tt.register("FlowInnerGroupService").asCtor(function(o,a,s){this.pushInnerGroupIfExists=function(e,t){if(!t)return;var n,r=o.getFlowById(e),i=r.Nodes[t];n=i.ErrorHandlingParentId?i.ErrorHandlingParentId:i.Settings&&i.Settings.ErrorHandlingParentId;n&&(a.push(e,n),s.setPreviousGroupHasNextStage(!0,r.Nodes[n]))}}).dependencies("FlowsContainer, FlowStack, FlowGroupLastStageIndicator"),Tt.register("FlowVisualStepsIndicator").asCtor(function(s,l){var u;function t(e){var t,n,r=[],i=l.getFlowById(e),o=i.Nodes;for(var a in o)(t=o[a]).Type==s.FLOW_STEP_TYPE.UI&&(r=r.concat(t.UIElements));r.sort(c),n=r,u=Et.map(n,function(e){return e.Id})}function c(e,t){var n=e.PointIndex,r=t.PointIndex;return n<r?-1:1}this.init=function(e){t(e)},this.getTotalVisualSteps=function(){return u.length},this.getNextVisualStepIndex=function(e){return Et.inArray(e,u)+1}}).dependencies("Consts, FlowsContainer"),Tt.register("FlowSafeStartHandler").asCtor(function(n,r,i,o,a){function t(e,t){t.eventParams.status=e,t.eventParams.flowId=t.flowId,a.raiseEventOnCurrentFlow(r.EVENTS.Flows.SafeStartStatusChanged,t.eventParams)}this.auditSafeStartStatus=t,this.redirect=function(e,t){i.push(t.flowId),o.saveSafeStartFlowId(t.flowId),n.redirect(e)},this.auditStayButtonClicked=function(e){t(r.SAFESTART_ACTION.StayClicked,e)},this.auditSafeStartDisabled=function(e){t(r.SAFESTART_ACTION.ErrorShown,e)},this.auditSafeStartFirstStatus=t}).dependencies("RedirectService, Consts, FlowStack, FlowDataPersister, FlowEventRaiser");var fn=function(){function e(e,t,n,r,i,o){var a=this,s=o.css,l=o.Id;this.resourceManager=e,this.uiChangeTracker=t,this.timerManager=n,this.cssUtils=r,this._logger=i,this.uiChangeListener=function(){a.jSelectorsOff(),a.jSelectorsOn()},this.Id=l,this.DYNAMIC_CSS_CLASS="wm-dynamic-css-"+l+"-",this.parseCss(s)}return e.prototype.parseCss=function(e){var t=this.cssUtils.clearComments(e),n=this.secureScreen(t),r=this.replaceJQuerySelectors(n),i=r.pureCss,o=r.jSelectors;this._jSelectors=o,this._css=i},e.prototype.secureScreen=function(e){return this.cssUtils.isSecure(e)?e:(this._logger.customerLog("[Dynamic Css] - Forbidden tokens detected - css reset to empty",3),"")},e.prototype.add=function(){try{0==this.getStyleSheet().length&&this.resourceManager.injectCss(this._css,this.getStyleSheetId()),this.jSelectorsOn(),this.uiChangeTracker.bind(this.uiChangeListener),this.listenToMutations()}catch(e){this._logger.customerLog("[Dynamic Css] - Faied to add css",3)}},e.prototype.remove=function(){this.getStyleSheet().remove(),this.jSelectorsOff(),this.uiChangeTracker.unbind(this.uiChangeListener),this.observer&&this.observer.disconnect()},e.prototype.replaceJQuerySelectors=function(e){var n=this,t=this.cssUtils.getSelectors(e),r=Et.grep(t,function(e){return e&&!n.isCss(e)}).map(function(e,t){return{selector:e,"class":""+n.DYNAMIC_CSS_CLASS+t}});return{pureCss:Et(r).reduce(function(e,t){return e.replace(t.selector,"."+t["class"])},e),jSelectors:r}},e.prototype.isCss=function(e){try{return document.querySelector(e),!0}catch(t){return!1}},e.prototype.listenToMutations=function(){var e=this;window.MutationObserver&&(this.observer=new MutationObserver(function(){return e.timerManager.libSetTimeout(e.uiChangeListener,0)}),this.observer.observe(document,{childList:!0,subtree:!0}))},e.prototype.jSelectorsOn=function(){Et(this._jSelectors).safeEach(function(e,t){Et(t.selector).addClass(t["class"])})},e.prototype.jSelectorsOff=function(){Et(this._jSelectors).safeEach(function(e,t){Et("."+t["class"]).removeClass(t["class"])})},e.prototype.getStyleSheet=function(){return Et("#"+this.getStyleSheetId())},e.prototype.getStyleSheetId=function(){return"wm-dymanic-css-"+this.Id},e}();Tt.register("DynamicCss").asCtor(fn).asProto().dependencies("ResourceManager, UIChangeTracker, TimerManager, CssUtils, Logger"),Tt.register("FlowStartPointDataProvider").asCtor(function(r,i){this.get=function(e,t){if(t)return{startingNodeId:t};var n=r.getFlowById(e);return i.getStageData(n)}}).dependencies("FlowsContainer, FlowStartingStageProvider"),Tt.register("FlowNodePlayIndicator").asCtor(function(i,n,o){this.isPlayable=function(e,t){var r=!1;return n.executionTraverse(e,t,function(e){var t,n=!0;return t=e,(i.isActionNodeOfType(t,o.FLOW_ACTION_TYPE.ConnectToBizflow)||i.isActionNodeOfType(t,o.FLOW_ACTION_TYPE.RestartSwt)||!i.isActionNode(t))&&(n=!(r=!0)),n}),r}}).dependencies("FlowNodeExtensions, FlowExecutionTraverser, Consts"),Tt.register("FlowStartFailureListener").asCtor(function(e,t,i,o,a){this.listen=function(){t.bind(e.EVENTS.Flows.FailedToStart,function(e,t){if(!t.isSafeStartHandling&&!o.getSafeStartFlowId()){var n=a.get(),r=n.TutorialCantPlayText;i.showFailedToStartPopup(n,r,null,t.businessSolutionId)}})}}).dependencies("Consts, WmInternals, PopupNotificationsService, FlowDataPersister, SiteConfigManager"),Tt.register("WalkMePlayerLazyAPI").asCtor(function(e,t,n,r,i){var o,a=this;function s(e,t){for(var n in t.WalkMePlayerAPI)t.WalkMePlayerAPI.hasOwnProperty(n)&&(a[n]=t.WalkMePlayerAPI[n]);o=!0}function l(){Tt.get("WidgetLoader").loadWidget()}function u(n){return function(){var t=arguments;Et(e).one("PlayerInitComplete",function(){i.setWalkmeTimeout(function(){var e=o?a:window.WalkMePlayerAPI;e[n].apply(null,t)},0)}),l()}}function c(){return!1}a.hidePlayer=u("hidePlayer"),a.showPlayer=u("showPlayer"),a.removePlayer=u("removePlayer"),a.hideMenu=u("hideMenu"),a.showMenu=u("showMenu"),a.removeMenu=u("removeMenu"),a.toggleMenu=u("toggleMenu"),a.removeAttenGrab=u("removeAttenGrab"),a.showWalkthruPlayer=u("showWalkthruPlayer"),a.hideWalkthruPlayer=u("hideWalkthruPlayer"),a.removeWalkthruPlayer=u("removeWalkthruPlayer"),a.showWalkthruMenu=u("showWalkthruMenu"),a.hideWalkthruMenu=u("hideWalkthruMenu"),a.removeWalkthruMenu=u("removeWalkthruMenu"),a.redrawPlayer=l,a.isMenuOpen=c,a.isWalkthruMenuOpen=c,Et(e).on(t.EVENTS.Widget.WidgetAPICreated,s)}).dependencies("WmInternals, Consts, UIChangeTracker, WidgetVisibilityEvaluator, TimerManager"),Tt.register("LegacyWidgetApiModule").asCtor(function(e,r,t,n,i,o,a,l,u,c,d,f,s,p,g,h,m,v,y,S,E,T,w){var C=this;C.searchTermChangedOnWidget=function(e){},C.widgetLoaded=function(e){v.measure("widgetEndLoad"),e&&e.bind("on-activate",i.fixFlash)},C.sendWidgetOpenLogToServer=function(){if(!E.isEnabled())return!0;a.SendWidgetOpen({})},C.sendSearchResultClickedToServer=function(e,t,n,r,i,o){if(!E.isEnabled())return;var a=u.get(),s=l.execute({url:a+"/Search/SearchResultClicked",dataType:"jsonp",data:{userGuid:e,searchGuid:t,resultSearchProvider:n,selectedItem:r,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()}});s.success(i),s.error(o)},C.getSearchResultsFromServer=function(e,t,n,r,i){var o=u.get(),a=l.execute({url:o+"/Search/Search",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get(),saveSearch:!i},timeout:b});return a.success(n),a.error(r),a},C.saveSearchToServer=function(e,t,n,r){if(!E.isEnabled())return;var i=u.get(),o=l.execute({url:i+"/Search/SaveSearch",dataType:"jsonp",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()},timeout:b});o.success(n),o.error(r)},C.sendResultClickedBeforeSearchToServer=function(e,t,n,r,i){var o=u.get(),a=l.execute({url:o+"/Search/ResultClickedBeforeSearch",dataType:"jsonp",data:{userGuid:t,searchQuery:e,selectedItem:n,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()}});a.success(r),a.error(i)},C.shouldShowWidgetAccordingToAbTesting=p.isWalkMeVisible,C.widgetApi=g,C.UiProperties=function(){return s.UI_PROPERTIES},C.getAttentionGrabberManager=function(){return h},C.getMustache=function(){return m},C.getConsts=function(){return s},C.getEventsTrigger=function(){return Tt.get("EventsTrigger")},C.auditClick=a.SendClickAudit,C.getClickAuditManager=function(){return a},C.userSawWalkMe=y.report,C.checkRepeatCookie=S.checkRepeatCookie,C.isAuditDisabled=function(){return!E.isEnabled()},C.getBiggestFrame=T.getBiggestFrame,C.checkShowOnlyInUrl=w.checkShowOnlyInUrl,C.playerCreationComplete=function(e){if(e)return;var t=r("#mt-menu-closed, #walkme-menu-closed"),n={config:o.get(),player:t};Tt.get("CommonUtils").attentionGrabberClass(n).setupAttenGrab()},C.triangleLoaded=function(e){Tt.get("PostDataFileLoadedHandler").dataFinishedLoading(e)},C.mt_log=function(e){Tt.get("Logger").customerLog(e,5)};var b=6e3;r.extend(e,C)}).dependencies("Lib, wmjQuery, DebuggerManager, LoggerManager, UiUtils, SiteConfigManager, ClickAuditManager, WmAjax, RecorderServerManager, AbPermutationManager, EndUsersManager, AuditSourceManager, Consts, WalkMeVisibilityChecker, WidgetApi, AttentionGrabberManagerAPI, Mustache, PerformanceAPI, WalkmeVisibleReporter, AutoStartManager, AuditingEnabledIndicator, BiggestFrameProvider, WidgetVisibilityEvaluator"),Tt.register("WidgetVisibilityEvaluator").asCtor(function(r,i,o,a,s,l,e,t,n){var u;this.init=function(){e.bindPreListener(g),(o.get().Settings[d]||t.isFeatureEnabled(d))&&(c=!1),p()},this.checkShowOnlyInUrl=function(){u!==undefined&&c||g();return u};var c=!0,d="monitorWidget",f=5e3;function p(e){g(),c||u||n.libSetTimeout(p,f)}function g(){var e=!!function(){var e=!0,t=o.get(),n=i.getSettingsValue(t.Settings,a.DISPLAY_WIDGET_CONDITION,null);n?(e=s.evaluateConditionTree(n),l.deprecatedRaiseEvent(a.EVENTS.Widget.WidgetConditionEvaluated,t)):null!=t.ShowInUrl&&0!=t.ShowInUrl.length&&(e=r.isLocationMatchString(t.ShowInUrl));return e}(),t=u===undefined?e:e!==u;t&&(u=e,l.raiseEvent("WidgetVisibilityChanged",{isVisible:e}))}}).dependencies("LocationMatcher, SettingsValuesRetriever, SiteConfigManager, Consts, Lib, CommonEvents, UIChangeTracker, FeaturesManager, TimerManager"),Tt.register("WidgetApi").asCtor(function(){this.getEventSender=function(){return Tt.get("EventSender")},this.getCtx=function(){return Tt}}).dependencies(),Tt.register("WidgetLoader").asCtor(function(t,n,r,i,o,a,s,l){var u,c;function d(){if(!c){c=!0,Et(a).off("WidgetVisibilityChanged",d),r.measure("widgetStartLoad");var e=[u];e.asyncCallback=function(){t.addScript(u)},n.raiseEvent(i.EVENTS.WidgetLoad,e)}}this.init=function(e){if(!e)return;u=e,window.WalkMePlayerAPI=s,l.customerLog("Waiting for widget visibility evaluator"),Et(a).one("WidgetVisibilityChanged",d),o.init(),o.checkShowOnlyInUrl()},this.loadWidget=d}).dependencies("CommonUtils, CommonEvents, PerformanceAPI, Consts, WidgetVisibilityEvaluator, WmInternals, WalkMePlayerLazyAPI, Logger"),Tt.register("ElementFinderExtensionsProvider").asCtor(function(){this.register=function(e){n.push(e)},this.getElementFinderExtension=function(e){for(var t=0;t<n.length;++t)if(n[t].isEnabled(e))return n[t]};var n=[]}).dependencies(""),Tt.register("UiObjectsTreeConverter").asCtor(function(n,a){function i(e,t){var n,r,i,o=(n=e,r=function(){return i||(i=n.properties().getAll()),i},{isProperty:function(e){return-1<r().indexOf(e)},getContentType:function(){return-1<r().indexOf(a.UI_PROPERTIES.Video)?a.UI_PROPERTIES.Video:-1<r().indexOf(a.UI_PROPERTIES.Article)&&a.UI_PROPERTIES.Article}});return{getTitle:function(){return e._name},getDescription:function(){return e._description},getKeywords:function(){return e._keywords},getType:function(){return e._type},getChildren:function(){return t},getContentType:function(){return o.getContentType()},isVisible:function(){return o.isProperty(a.UI_PROPERTIES.Visible)},isCompleted:function(){return o.isProperty(a.UI_PROPERTIES.Completed)},isActive:function(){return o.isProperty(a.UI_PROPERTIES.Active)},isAccessible:function(){return o.isProperty(a.UI_PROPERTIES.Accessible)},isSearchSupported:function(){return o.isProperty(a.UI_PROPERTIES.Search)},activate:e.activate}}this.convert=function r(e){if(!e||0==e.length)return;n.customerLog("converting objects tree started for root "+e[0]._name,4);var t=Et.map(e,function(e){var t=r(e._children,e),n=i(e,t);return n});n.customerLog("converting objects tree ended for root "+e[0]._name,4);return t}}).dependencies("Logger, Consts"),Tt.register("WidgetUiApi").asCtor(function(t,n,r){this.getObjectsTree=function(){r.customerLog("getting objects tree",4);var e=t.uiObjectsTree();return n.convert(e)}}).dependencies("UiDataProvider, UiObjectsTreeConverter, Logger"),Tt.register("LegacyExternalApiModule").asCtor(function(r,e,t,n,i,o,a,s,l,u,c,d,f,p,g,h,m,v,y,S,E){var T=this;function w(){return Tt.get("HostData")}function C(){return Tt.get("ClientStorageManager")}function b(){return Tt.get("CommonUtils")}function I(){return Tt.get("PositionHelper")}function _(){return s.getFindElementPluginManager()}function P(){}T.getTimerManager=function(){return Tt.get("TimerManager")},T.getHostData=w,T.getClientStorageManager=C,T.getStorageManagerInstance=function(e){if(e)return Tt.get("StorageManagerFactory").byType(e);return C()},T.getServerStorageManager=function(){return Tt.get("ClientOrServerStorageManager")},T.getABPermutationId=Tt.get("AbPermutationManager").getPermutation,T.getEndUserGuid=t.getEndUserGuid,T.getUiTracker=function(){return Tt.get("UIChangeTracker")},T.getSalesForceManager=function(){return Tt.get("SalesForceManager")},T.getUiUtils=function(){return Tt.get("UiUtils")},T.getDataFileExtraData=function(){return Tt.get("DataFileExtraData").data},T.getFramesetsUtils=function(){return n},T.getPlayerServer=i.get,T.getCurrentLanguage=o.getCurrentLanguage,T.addTimeStamp=function(e){a.measure(e)},T.getUiDataProvider=function(){return Tt.get("UiDataProvider")},T.generateNewGuid=Tt.get("GuidGenerator").generateGuid,T.getBrowser=function(){return w().browser.string},T.isQuirksMode=w().isQuirksMode,T.getBiggestFrame=Tt.get("BiggestFrameProvider").getBiggestFrame,T.injectCustomCSS=u.setCustomCssIfNeeded,T.shouldHandlePageAsFramesets=n.shouldHandlePageAsFramesets,T.getServerDataSenderManager=function(){return Tt.get("ServerDataSenderManager")},T.getCommonUtils=b,T.getPositionHelper=I,T.getCommonEvents=function(){return Tt.get("CommonEvents")},T.getSiteConfig=c.get,T.setSiteConfig=c.set,T.centerElementInPage=d.centerElementInPage,T.getDeployablesManager=f.get,T.isFeatureActive=p.isFeatureEnabled,T.isWalkMeVisible=g.isWalkMeVisible,T.getWmAjax=function(){return Tt.get("WmAjax")},T.getEnvId=h.get,T.getPlayInitiatorEnum=function(){return Tt.get("Consts").STEP_PLAY_INITIATOR_ENUM},T.elkState=function(e){b().elementLastKeeper.setState(e)},T.getIsInEditor=function(){return Tt.get("IsInEditor").get()},T.getCenteredElement=function(e){return Tt.get("CenteredElementProvider").get(e)},T.startNewInteraction=function(){Tt.get("InteractionManager").beginNewInteraction()},T.registerFindElementPlugin=function(e){_().registerPlugin(e)},T.getFindElementPluginManager=_,T.getTodoListManager=function(){return Tt.get("TodoListManager")},T.getBalloonDrawer=function(e){return Tt.get("BalloonDrawerProvider").getBalloonDrawer(e)},T.getExecuteParallel=function(){return b().executeParallel},T.getSurveys=function(){return Tt.get("SurveysManager").getAll()},T.bindBBCodeEvents=m.bind,T.getBodyInheritedMargin=function(){return I().getBodyInheritedMargin()},T.setIsInEditor=function(e){Tt.get("IsInEditor").set(e)},T.setRecorderServer=function(e){var t=Tt.get("RecorderServerManager");t.set(e);var n=Tt.get("LibInitializer").getPlayerServer();null!==n&&n!==undefined&&t.set(n)},T.getElementStrength=function(e){var t={score:-1},n=Tt.get("JsonUtils").secureEvalJSON(e);if(Tt.get("DataFixer").fixStep(n,0,{BalloonSettings:{}}),r.findElement(n,null,t))return t.score;return null},T.getUserGuid=v.getUserGuid,T.setUserGuid=v.setUserGuid,T.ConditionFunctionsObj=Tt.get("ConditionFunctions"),T.ResourceManager=Tt.get("ResourceManager"),T.Logger=l,T.lib_error=function(e,t){l.error(e,t)},T.releaseAllElements=y.releaseAllElements,T.releaseBalloons=y.releaseBalloons,T.releaseShoutOuts=y.releaseShoutOuts,T.releaseFlow=y.releaseFlow,T.removeWalkMe=y.removeWalkMe,T.destroyAll=y.destroyAll,T.appendDataPackage=S.appendDataPackage,T.appendWalkMeConfigData=S.appendWalkMeConfigData,T.dataFileLoaded=S.dataFileLoaded,T.dataFinishedLoading=E.dataFinishedLoading,T.setSurveysForRecorder=P,T.parseBBCode=Tt.get("BBCodeParser").parse,T.completeGoalById=Tt.get("GoalsManager").completeGoalById,T.getElementTextArray=Tt.get("ElementTextExtractor").getElementTextArray,T.wrapFESession=s.wrapSession,T.findElement=(A=s.findElement,function(){try{return A.apply(null,arguments)}catch(e){l.error(e)}}),T.getFEVersionName=function(){return s.initFE(),s.getFindElementCore().VersionName},T.setAuditSource=h.set,T.evaluateConditionTree=Tt.get("ConditionTreeEvaluator").evaluate,T.getWalkmeOOP=function(){return gn},T.getEndUserId=function(){var e=!Tt.get("AbTestingManager").isAbTestingEnabled();return t.getEndUserGuid(e)},T.getStorageType=function(){var e=Tt.get("ClientOrServerStorageManager").getStorageType();return e.mode+" - "+e.type},T.launchLogger=function(){var e=Tt.get("LoggerManager");e.isLoggerActivated()||e.launchLogger()},T.getAbtestingGoalsManager=function(){return Tt.get("AbTestingGoalsManagerInstance").value},T.getTutorials=function(){return[]},T.getCurrentTutorial=P,T.getState=P,e.extend(r,T);var A}).dependencies("Lib, wmjQuery, EndUsersManager, FramesetsUtils, RecorderServerManager, LanguageManager, PerformanceAPI, ElementFinder, Logger, CustomCssSetter, SiteConfigManager, ElementCenterer, DeployablesManagerFactory, FeaturesManager, WalkMeVisibilityChecker, AuditSourceManager, BBCodeEventsBinder, UserGuidContainer,LibDestroyer, DataFileDataLoader, PostDataFileLoadedHandler"),Tt.register("CenteredElementProvider").asCtor(function(d,a,n){this.get=function(e){for(var t=mtjQuery(e).parents(),n=null,r=t.length-1;0<=r;r--)try{var i=f(t[r]);if(i){var o=mtjQuery(t[r]),a=mtjQuery(window).width(),s=o.width(),l=o.offset().left,u=a-s;if(0<u&&u/2==l){n=o;break}if(u<0&&u==l){n=o;break}if(p(o)){n=mtjQuery(o);break}}}catch(c){d.customerLog("error-----------------------------------",5),d.error(c)}return n};var s=undefined,l=undefined;var r=function e(t){try{for(var n=t.cssRules||t.rules,r=0;r<n.length;r++){var i=n[r];i.type&&i.type==window.CSSRule.IMPORT_RULE?e(i.styleSheet):u(i.style)&&l.push(i.selectorText)}}catch(o){}},f=function(e){var t=mtjQuery(e),n=t.data("mt_isElementFixedWidth");if(1==n)return!0;if(0==n)return!1;var r=i(e);return t.data("mt_isElementFixedWidth",r),r},i=function(e){if(c(e.style))return!0;var t=g(e,h());return t},p=function(e){var t=mtjQuery(e),n=t.data("mt_isElementMarginAuto");if(1==n)return!0;if(0==n)return!1;var r=o(e);return t.data("mt_isElementMarginAuto",r),r},o=function(e){if(u(e.style))return!0;var t=g(e,function(){l==undefined&&(l=[],n.foreach(document.styleSheets,r));return l}());return t},u=function(e){if(e){var t=mtjQuery.trim(e.margin),n=mtjQuery.trim(e.marginLeft),r=mtjQuery.trim(e.marginRight),i=a.startsWith(t,"0")&&a.endsWith(t,"auto"),o="auto"==n&&"auto"==r;if(i||o)return!0}return!1},c=function(e){var t=e.width;if(t){for(var n="",r=0;r<t.length;r++)isNaN(t[r])||(n+=t[r]);if(n&&700<parseInt(n)&&(-1!=t.indexOf("p")||-1!=t.indexOf("e")||-1!=t.indexOf("m")||-1!=t.indexOf("i")))return!0}return!1},g=function(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(n=mtjQuery(e).is(mtjQuery(i)))return n}return n},h=function(){return s==undefined&&(s=[],n.foreach(document.styleSheets,t)),s},t=function e(t){try{for(var n=t.cssRules||t.rules,r=0;r<n.length;r++){var i=n[r];i.type&&i.type==window.CSSRule.IMPORT_RULE?e(i.styleSheet):c(i.style)&&s.push(i.selectorText)}}catch(o){}}}).dependencies("Logger, StringUtils, ArrayUtils"),Tt.register("CustomVariableAuditor").asCtor(function(r,o,a,s){var i=[];function l(e,t){var n,r,i=((r={}).name=n=t,r.value=o.getWindowVar(n),r.defaultValue=r.value,a.raiseEvent(s.EVENTS.CustomAuditVar,r),r.returnValue);"string"==typeof i?WalkMeAPI.setAnalyticsCustomField(e,i):"boolean"==typeof i||"number"==typeof i&&!isNaN(i)?WalkMeAPI.setAnalyticsCustomField(e,i.toString()):i==undefined&&WalkMeAPI.setAnalyticsCustomField(e,"")}this.handleSfVars=function(){for(var e=0;e<i.length;e++){var t=i[e];l(t.index,t.value)}},function(){var e=r.get().Settings.customAuditVars;if(e)for(var t=0;t<e.length;t++){var n=e[t];n.value&&""!=n.value&&(-1<n.value.indexOf("walkme_sf_vars")?i.push({index:t+1,value:n.value}):l(t+1,n.value))}}()}).dependencies("SiteConfigManager,CommonUtils,CommonEvents,Consts"),Tt.register("ElementInIframeIndicator").asCtor(function(t,n){this.isInIframe=function(e){if(t.isFeatureEnabled(n.FEATURES.OldIsInIframeIndication))return!!e.data("iframe");return e[0].ownerDocument!=window.document}}).dependencies("FeaturesManager, Consts"),Tt.register("AuditSourceProvider").asCtor(function(e,t){this.isInPreviewMode=function(){return e.get()===t.SOURCES.preview},this.isInPlayMode=function(){return e.get()===t.SOURCES.play},this.isProductionEnv=function(){return e.get()===t.SOURCES.production}}).dependencies("AuditSourceManager, Consts"),Tt.register("CorsSupportIndicator").asCtor(function(){this.hasCorsSupport=function(){return"withCredentials"in new XMLHttpRequest}}),Tt.register("BiggestFrameProvider").asCtor(function(r,e,i){this.getBiggestFrame=function(){var e=!1;try{e=!o||!r.isFrameActive(o)||0<mtjQuery("frameset",o.contentWindow.document).length}catch(n){e=!0}var t=o;e&&(t=r.findBiggestFrame(),i.isFeatureEnabled("noBiggestFrameCache")||(o=t));return t};var o=null}).dependencies("FramesetsUtils, Logger, FeaturesManager"),Tt.register("DirectHeadProvider").asCtor(function(n,r,i,o,a){this.getDirectHead=function(e){{var t;if(!e)return n.shouldHandlePageAsFramesets()&&(t=r.getFrameContents(Et(a.getBiggestFrame()))),Et("head",t);if(i.get()||o.isInIframe(e))return e.parents("html").children("head")}}}).dependencies("FramesetsUtils, FrameContentsProvider, IsInEditor, ElementInIframeIndicator, BiggestFrameProvider"),Tt.register("FrameContentsProvider").asCtor(function(i){this.getFrameContents=function(e){var t,n=e[0];if(n==undefined)return[];try{t=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:[],t=mtjQuery(t)}catch(r){i.handleCrossDomainError(r),t=[]}return t}}).dependencies("CommonUtils"),Tt.register("WhiteListChecker").asCtor(function(s,l,u,c){this.isUserInWhiteList=function(e,t){var n=Et.Deferred();if(u.isFeatureEnabled("whitelist")){var r=l.getData(f);1===r?n.resolve():0===r?n.reject():(i=e,o=t,a=n,c.execute({dataType:"jsonp",url:s.get()+"/EndUser/IsEndUserInWhiteList",data:{endUserGuid:o,walkmeUserGuid:i},timeout:d,success:function(e){"true"==e.result?(p(e,1),a.resolve()):("false"==e.result&&p(e,0),a.reject())},error:function(){a.reject()}}))}else n.resolve();var i,o,a;return n.promise()};var d=1e4,f=l.keysConfig.whitelist.general.key;function p(e,t){l.saveData(f,t,e.cacheTimeInSeconds)}}).dependencies("RecorderServerManager, ClientStorageManager, FeaturesManager, WmAjax"),Tt.register("AbTestingManager").asCtor(function(u,e,t,n,i,o,r,a,s,l,c){var d,f,p,g,h=this;function m(e){try{if(s.isFeatureEnabled("noAnalyticsAudit")&&(g||!a.isEnabled()))return!0;var t=d.Settings.abTesting.testNumber,n=window.wm_customData!=undefined?wm_customData.abTestingData:null;o.execute({url:i.get()+"/Statistics/AddAbTestingWidgetVisible",data:{userGuid:l.getUserGuid(),endUserId:p(),testNumber:t,isVisible:e,customDataSerialized:c.toJSON(n)}})}catch(r){f(r,"Could not report ab testing result to server")}}function v(e,t,n,r){var i=e+"-"+d.Settings.abTesting.testNumber,o=u.getData(i);if(!0===o||!1===o)return o;var a,s,l=(a=1,s=100,Math.floor(Math.random()*(s-a+1)+a));return o=l<=n,u.saveData(i,o,t),r&&r(o),o}h.shouldLoadWalkme=function(){try{if(!h.isAbTestingEnabled())return!0;var e=u.keysConfig.abTesting.shouldLoadWalkme;return v(e.key,e.expiry,d.Settings.abTesting.loadPercentage)}catch(t){return f(t,"Could not check if Walkme should be loaded according to AB Testing"),!0}},h.shouldShowWidget=function(){try{if(!h.isAbTestingEnabled())return!0;var e=u.keysConfig.abTesting.shouldShowWidget,t=e.key;return window.walkme_ab_imp_cookie&&(t+="-"+p()),v(t,e.expiry,d.Settings.abTesting.showPercentage,m)}catch(n){return f(n,"Could not check if widget should be shown according to AB Testing"),!0}},h.isAbTestingEnabled=function(){var e=d.Settings&&d.Settings.abTesting&&parseInt(d.Settings.abTesting.enabled),t=s.isFeatureEnabled("abtesting")&&e&&!r.isInPreviewMode()&&!r.isInPlayMode();return t},h.disableReport=function(){g=!0},function(){d=e.get(),p=t.getEndUserId,f=n.error}.apply(null,arguments)}).dependencies("ClientStorageManager, SiteConfigManager, Lib, Logger, RecorderServerManager, WmAjax, AuditSourceProvider, AuditingEnabledIndicator, FeaturesManager, UserGuidContainer, JsonUtils"),Tt.register("AbTestingGoalsManagerInstance").asInstance({value:undefined}),Tt.register("DataFileKeyToDeployableType").asCtor(function(e){var t=this;t.Tutorials=e.Tutorial,t.Tasks=e.Task,t.Launchers=e.Launcher,t.Labels=e.LabelGroup,t.Surveys=e.Survey,t.Categories=e.Category,t.Contents=e.Content,t.Collections=e.Collection,t.Shuttles=e.Shuttle,t.Tags=e.Tag,t.ShoutOuts=e.ShoutOut,t.ConditionBlocks=e.ConditionBlock,t.BusinessSolutions=e.BusinessSolution,t.Lessons=e.Lesson,t.Courses=e.Course,t.TrackedPages=e.TrackedPage,t.TrackedElements=e.TrackedElement,t.SearchProviderUrls=e.SearchProviderUrl}).dependencies("DeployableTypes"),Tt.register("DeployablesContainersFacade").asCtor(function(e,r){function t(n){Et.each(e,function(e,t){t!=r.Tutorial&&t!=r.Launcher&&n(e,t)})}function o(e,t){var n=e+"Container",r=Tt.get(n);t(r)}this.emptyAllDeployablesContainers=function(){t(function(e){var t;t=[],o(e,function(e){e.set(t)})})},this.addRangeToAllDeployablesContainers=function(i){t(function(e,t){var n,r;n=e,r=i[t],o(n,function(e){e.addRange(r)})})}}).dependencies("DataFileKeyToDeployableType, DeployableTypes"),Tt.register("SupportToolkitInitializer").asCtor(function(t,n,r){this.init=function(e){__webpack_require__(291).init(t,n,r,Tt,e)}}).dependencies("LocalStorageService, JsonUtils, WmInternals"),Tt.register("LibInitializer").asCtor(function(a,s,n,l,e,r,i,o,t,u,c,d,f,p,g,h,m,v,y,S,E,T,w){var C,b,I,_,P="wm-customWidgetUrl",A=null,k=[],D=[],N=null,O=!1,x=!1,L=!1,F=!1,M=!1,R=!1;function B(e){var t=r.getSettingsFile();t&&(Tt.get("PetaServerNameManager").set(t.PetaServer),t.IsInEditor&&h.set(!0),y.setUserGuid(t.UserGuids&&t.UserGuids[0]),I=t.PlayerServer,n.init(),R?t.data&&(t.data.tutorials?Tt.get("DynamicComponentsLoader").loadOneByType(g.Walkthru,{Tutorials:t.data.tutorials}).then(function(){S.set(t.data.siteConfig),a.setTutorialsForEditor(t.data.tutorials,t.UserGuids[0]),f.setWalkmeTimeout(function(){Tt.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1)}):t.data.flows&&(S.set(t.data.siteConfig),Tt.get("BusinessSolutionsContainer").set(t.data.flows),f.setWalkmeTimeout(function(){Tt.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1))):function(e,n){var r=u.Data;if(null==r||r.Permutations==undefined)n();else{var t=r.DefaultPermutation,i=r.Permutations;s.setPermutations(i,t);var o=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=l.evaluate(n.Settings.conditionTree);if(!0===r){var i=n.PermutationIds[0];return i}}return null}(r.ActivationRules);s.initGetPermutation(o,function(e){var t=s.getPermutationById(e);if(0===t.LoadWalkMe)return v.customerLog("WalkMe ABTesting - WalkMe Loading canceled. Stopping execution"),void p.removeWalkMe("AbTesting - LoadWalkMe is false");a.appendWalkMeConfigData(r),n(e)})}}(0,function(e){!function(e,t){for(var n=e.DataFiles,r=0;r<n.length;r++)if(n[r].metaData)return U(e,n[r]);V(e.DataFiles,e.WidgetFile,t)}(t,e)}))}function U(o,e){t.loadTextFile(e.url,"fixedCallback",function(e,t,n){var r=[];e=_.fixAutoDetectPaths(e);for(var i=0;i<o.DataFiles.length;i++)1==o.DataFiles[i].metaData?r=r.concat(e.DataFiles):r.push(o.DataFiles[i]);V(r,o.WidgetFile)},undefined,!1)}function V(e,t,n){k=w.secureEvalJSON(w.toJSON(e)),function(e){if(i&&i.localWidgetUrl)return b=i.localWidgetUrl;if(T){var t=T.getItem(P);if(t)return b=t}b=e}(t),W(e,n)}function W(e,t){o.setLanguages(e),D=o.fixLanguageUrlInDataFiles(w.secureEvalJSON(w.toJSON(e)),x),t!==undefined&&-1<t&&(D=function(e,t){for(var n=0;n<e.length;n++)e[n].url=(r=e[n],i=t,o=void 0,o=r.url,".js",o.substring(0,o.length-".js".length)+"_"+i+".js");var r,i,o;return e}(D,t)),j()}function j(){try{var e=D[A].url;O=D[A].isHidden!=undefined&&D[A].isHidden,t=e,m.measure("dataFileStartLoad"),E.send(d.EVENTS.BeforeDataFileLoaded,{dataFileUrl:t})||C(t)}catch(n){v.error(n,"faild to load data file")}var t}this.releaseResources=p.releaseAllElements,this.isNextDataPackageIsHidden=function(){return O},this.getPlayerServer=function(){return I},this.changeLanguage=function(t,n){var e=function(e){e&&c.raiseEvent(d.EVENTS.LanguageChanged,{language:t}),n&&n(e)},r=o.changeLanguage(t,k);return r?p.releaseAllElements({isDuringLanguageChange:!0}).then(this.reloadDataFileAfterRelease(e)):e(r),r},this.reloadDataFileAfterRelease=function(e,t){t&&(k=t),x=L=!0,N=e,A=0;var n=s.getPermutation();W(k,n)},this.isNewLanguage=function(){return L},this.startInitializer=function(e){var t,n;t=function(){!function(e){var t=v.timer("init data files and widget");A=0;var n=!(M||R);if(c.raiseEvent(d.EVENTS.WalkmeLoaded),window[d.EVENTS.WalkmeLoaded]!=undefined)_walkMe=_makeTutorial=a,window._walkmeInternals.continueLoad=function(){B(e)},window[d.EVENTS.WalkmeLoaded](a);else{if(!F)return;window.document.dontLoadTriangle&&n?(window._walkmeInternals.blocked=!0,window._walkmeInternals.continueLoad=function(){B(e)}):B(e)}t.stop()}(e)},(n=r.getSettingsFile()).PostLibJsFile&&""!=n.PostLibJsFile?(window.walkme_post_lib_loaded=function(){t()},m.measure("postLibStartLoad"),C(n.PostLibJsFile)):t()},this.dataFileLoadedWrapper=function(){if(m.measure("dataFileEndLoad"),L=O=!1,++A==D.length){var e=Tt.get("CustomVariableAuditor");G.bind("SfVarsExposed",e.handleSfVars),t={newLanguageFlag:x,asyncCallback:function(){Tt.get("PostDataFileLoadedHandler").dataFinishedLoading()&&(x?(x=!1,N&&N(!0)):Tt.get("WidgetLoader").init(b))}},c.raiseEvent("DataLoadedEvent",t)}else j();var t},function(){C=e.addScript,window.wmPlaySnippet?(_=window.wmPlaySnippet,F=R=!0):window.wmPreviewSnippet?(_=window.wmPreviewSnippet,F=M=!0):window.wmSnippet&&(_=window.wmSnippet,F=!0),(!i||i.isSelfHosted)&&!1}.apply(null,arguments)}).dependencies("Lib, AbPermutationManager, WalkMeInfo, ConditionTreeEvaluator, CommonUtils, SettingsFile, WmInternals,LanguageManager, WmAjax, WalkmeConfigManager, CommonEvents, Consts, TimerManager, LibDestroyer, DynamicComponentTypes,IsInEditor, PerformanceAPI, Logger, UserGuidContainer, SiteConfigManager, MessageSender, LocalStorageService, JsonUtils"),Tt.register("DataFileExtraData").asInstance({data:{}}),Tt.register("DataFileDataLoader").asCtor(function(c,d,f,p,g,r){this.appendDataPackage=function(e,t){var n=e;e.Tutorials===undefined&&(n={Tutorials:e,SiteConfig:t});return m(n.SiteConfig,!0),r.load(n).then(function(){!function(n){var r={},e=c.defaultValue(n.LauncherCustomImages,[]),t=c.defaultValue(n.LauncherHtmlImages,[]),i=c.defaultValue(n.DesignTemplates,[]),o=c.defaultValue(n.PluginConfigs,[]),a=n.TeachMeConfig;Et.each(f,function(e,t){r[t]=c.defaultValue(n[e],[])});var s=Tt.get("PlatformsService");r[p.ShoutOut]=s.filterByCurrentPlatform(r[p.ShoutOut]);var l=c.defaultValue(n.ExtraData,{isOldDataFile:!0});Tt.get("DataFileExtraData").data=l,Tt.get("PublishDataManager").init(l),d.setUserGuid(n.UserGuid),Tt.get("LibInitializer").isNewLanguage()&&(Tt.get("SiteConfigManager").set([]),Tt.get("IconTemplates").customImages=[],Tt.get("IconTemplates").htmlImages=[],Tt.get("DesignTemplates").reset(),Tt.get("PluginConfigs").reset(),Tt.get("TeachMeConfigManager").set([]),g.emptyAllDeployablesContainers()),Tt.get("IconTemplates").customImages=Tt.get("IconTemplates").customImages.concat(e),Tt.get("IconTemplates").htmlImages=Tt.get("IconTemplates").htmlImages.concat(t),Tt.get("DesignTemplates").set(i),Tt.get("PluginConfigs").set(o),Tt.get("PageIdentifiersAPI").setPageIdentifiers(n.PageIdentifiers),Tt.get("CustomCssSetter").setUiTemplates(n.UITemplates),m(n.SiteConfig);var u=Tt.get("TeachMeConfigManager");a&&0==u.get().length&&u.set(a),Et.each(f,function(e,t){!function(e,t){for(var n=0;n<e.length;n++)e[n].userGuid=t}(r[t],d.getUserGuid())}),g.addRangeToAllDeployablesContainers(r),Tt.get("UITemplates").concat(n.UITemplates),Tt.get("UIVariations").concat(n.UIVariations),Tt.get("DisabledSmartTipsRemover").remove(Tt.get("BusinessSolutionsContainer").get()),Tt.get("DisabledCourseQuizzesRemover").remove(Tt.get("CoursesContainer").get()),Et.each(h,function(e,t){t.append(n,r)}),Tt.get("LibInitializer").dataFileLoadedWrapper()}(n)})},this.appendWalkMeConfigData=function(e){Tt.get("AbExperimentsContainer").addRange(e.Experiments)},this.dataFileLoaded=function(){},this.registerDataAppender=function(e){h.push(e)};var h=[];function m(e,t){var n=Tt.get("SiteConfigManager");!e||0!=n.get().length&&n.wasCustomCssSet()||n.set(e,t)}}).dependencies("CommonUtils, UserGuidContainer, DataFileKeyToDeployableType, DeployableTypes, DeployablesContainersFacade, ComponentsLoader"),Tt.register("PostDataFileLoadedHandler").asCtor(function(u,c,d,f,p,g,h,m,i,o,v,t,a,y,S,E,T,s,l,n){this.dataFinishedLoading=function(e,t){var n=h.timer("lib init");if(Tt.get("SessionPersister").startPersisting(),Tt.get("SettingsCacheBusterActivator").activeIfPublishedRecently(Tt.get("SettingsFile").getPublishDate()),Tt.register("sfVarsRemovedFromLib").asInstance(function(){}),f.raiseEvent(d.EVENTS.DATA_FILES_LOADED),r=S.get(),r.Settings&&r.Settings.rmWMCond&&Tt.get("ConditionTreeEvaluator").evaluate(r.Settings.rmWMCond)&&!window.editorAPI&&(h.customerLog("Remove walkme condition is true. Removing WalkMe.",3),g.removeWalkMe("Removed by condition"),1))return;var r;p.isFeatureEnabled("tagBody")&&c.setBodyUtils(Tt.get("TagBodyUtils"));try{window.walkme_data_finished_loading_callback&&walkme_data_finished_loading_callback()}catch(l){}var i=Tt.get("WalkmeClassesInitializer").initWalkMeClasses();if(!i.Succeeded)return g.removeWalkMe(i.ErrorMessage||"initWalkMeClassesFailed",{sendLog:!0,errorCode:i.ErrorCode}),!(u.initFailed=!0);Tt.get("EndUserDataConverter").convertData();var o=function(e,t){h.customerLog("after loading storage",4),f.raiseEvent(d.EVENTS.StorageLoaded);var n=e?C:b;!t&&e||(function(){if(p.isFeatureEnabled("noDebugger"))return!1;var e=v.getData(d.DEBUGGER.STATE_NAME,d.DEBUGGER.STATE.Deactive,T.getUserGuid());return e==d.DEBUGGER.STATE.Active||e==d.DEBUGGER.STATE.ActiveAndReset}()&&!m.isDebuggerOnWindow()&&(E.dbgr={debuggerWasLoaded:n},n=m.loadDebuggerFromStorage),v.getData(w,!1,T.getUserGuid())&&u.launchLogger());var r=Tt.get("TodoListManager");if(r.hasTaskGoalCompletionCondition()){var i=n;n=function(){y.isInPlayMode()||r.didTasksFinishLoading()?i():r.setTasksFinishedLoadingCallback(i)}}return n}(e,t);n.stop();var a=(s=o,function(){var e={asyncCallback:s};f.raiseEvent(d.EVENTS.BeforeStorageLoadedCallback,e)});var s;if(!1===Tt.get("ClientOrServerStorageManager").init(a))return g.removeWalkMe("storageManagerInitFailed",{sendLog:!0}),!1;return!0};var w="wm-lg-act";function C(){h.customerLog("after loading storage for play",4),i.init(),r(e),o.get().enabled()&&(p.isFeatureEnabled("stopCrossDomainAfterLoadForPlay")&&o.get().stop(),o.get().start(e))}function e(){h.customerLog("sending editor event: StorageManagerInitialized",4),f.raiseEvent("StorageManagerInitialized")}function b(){Tt.get("FlowStartFailureListener").listen(),r(),Tt.get("WhiteListChecker").isUserInWhiteList(T.getUserGuid(),u.getEndUserGuid()).then(I,P)}function r(e){Tt.get("ClickAuditManager").init(),Tt.get("ServerDataSenderManager").start(),n.restore(e)}function I(){var t=h.timer("after loading storage"),e=[];if(o.get().enabled()&&e.push(o.get().start),y.isProductionEnv()){var n=u.getEndUserGuid(),r=G.walkme_userGuid_to_replace||T.getUserGuid();Tt.get("AnalyticsManager").auditUniqueEndUser(r,Tt.get("AbPermutationManager").getPermutation(),n)}e.push(s.value?s.value.startWatching:_),e.push(l.isReady),c.executeParallel({functionsToExecute:e,successCallback:function(){var e;i.init(o.get().enabled()),a.measure("walkmeReady"),e={asyncCallback:A},f.raiseEvent(d.EVENTS.BeforeWalkmeReady,e),y.isInPreviewMode()||y.isInPlayMode()||Tt.get("EndUserLoggerManager").reportEndUser(function(){g.removeWalkMe("reportEndUserFailed")}),E.isSelfHosted?h.customerLog("Self Hosted - no need to check settings file",3):Tt.get("TimerManager").setWalkmeTimeout(function(){Tt.get("SettingsCacheManager").start()},5e3),t.stop()}})}function _(e){e()}function P(){g.removeWalkMe("user is not in the white list"),u.initFailed=!0}function A(){try{walkme_ready()}catch(e){}try{mt_ready()}catch(e){}try{G.walkme_ready()}catch(e){}f.raiseEvent(d.EVENTS.WalkmeReady),t.isWalkMeVisible()&&(Tt.get("PlatformInitializer").run(),Tt.get("PermalinkManager").run(),Tt.get("AutoStartManager").run(),Tt.get("StartupDeployablesRunner").showStartUpDeployables()),f.raiseEvent(d.EVENTS.ElementsTrackingReady),a.measure("walkmeReadyEnd"),Tt.get("LoadingTimeInformer").run()}}).dependencies("Lib, CommonUtils, Consts, CommonEvents, FeaturesManager, LibDestroyer, Logger, DebuggerManager, WalkMeGoalsManager, CrossDomainManager, ClientStorageManager, WalkMeVisibilityChecker, PerformanceAPI, AuditSourceProvider, SiteConfigManager, WmInternals, UserGuidContainer, AbTestingGoalsManagerInstance, EngagementRulesRepository, DeployablesRestorer"),Tt.register("StartupDeployablesRunner").asCtor(function(){this.showStartUpDeployables=function(){Tt.get("FramesetsUtils").waitForFramesToLoad().then(function(){Tt.get("ElementFinder").wrapSession(function(){!function(){Tt.get("WalkMeVisibilityChecker").isWalkMeVisible()&&Tt.get("SmartTipSetActivationInitiator").start();Tt.get("TrackedPagesManager").start(),Tt.get("TrackedElementsManager").start(),Et.each(t,function(e,t){t.start()})}()})})},this.registerDeployablesRunner=function(e){t.push(e)};var t=[]}),Tt.register("WalkmeClassesInitializer").asCtor(function(u,c,d,f,p,g,h,m,v,y,S,E,T,w){this.initWalkMeClasses=function(){var e={Succeeded:!0};if(T.init(),Tt.get("JawsAccessibilityUtil").init(),S.isIEBrowser(8,"lt")&&!window.postMessage)return e.Succeeded=!1,e.ErrorMessage="WalkMe is not supported on that browser",c.customerLog(e.ErrorMessage),e;Tt.get("InteractionInitiationEventListener").init(),Tt.get("AnalyticsPropertiesManager").init(),Tt.get("BalloonDrawerProvider").getBalloonDrawer(d.get().BalloonSettings).loadResources(E.getTopContainer().siblings("head")),y.setDefault(d.get(),"TodoListSettings",{}),Tt.get("WmAjax").setFeatures(f.isFeatureEnabled("blockJsonp"),f.isFeatureEnabled("corsJsonpFallback"));var t=Tt.get("AbTestingManager");if(!t.shouldLoadWalkme())return e.Succeeded=!1,e;p.overrideTimeouts();var n=d.get();if(n.EndUserSettings){var r=Tt.get("EndUsersManager");r.setEndUserSettings(n.EndUserSettings),r.createEndUserGuid()}w.init();var i=Tt.get("endUserGuidValidator").validate();if(i)return{Succeeded:!1,ErrorMessage:i.message,ErrorCode:i.code};var o=Tt.get("AbExperimentsContainer").get();if(0<o.length){g.enableMultiUserStorage();var a=Tt.get("ExperimentsManager");a.setDeployables(o),Tt.get("AbTestingGoalsManagerInstance").value=new ht({deployablesGoalManager:g,experiments:a.getAll(),lib:u,getEndUserGuid:u.getEndUserGuid,getPermutationId:Tt.get("AbPermutationManager").getPermutation,getAuditSource:Tt.get("AuditSourceManager").get,serverAddress:Tt.get("RecorderServerManager").get(),storageManager:Tt.get("ClientStorageManager"),commonEvents:Tt.get("CommonEvents"),userGuidContainer:Tt.get("UserGuidContainer")})}Tt.get("ContentsManager").setDeployables(Tt.get("ContentsContainer").get()),Tt.get("CategoriesManager").setDeployables(Tt.get("CategoriesContainer").get()),Tt.get("CollectionsManager").setDeployables(Tt.get("CollectionsContainer").get()),Tt.get("ConditionBlocksManager").setDeployables(Tt.get("ConditionBlocksContainer").get()),Tt.get("SurveysManager").setDeployables(Tt.get("SurveysContainer").get()),Tt.get("ShoutOutsManager").setDeployables(Tt.get("ShoutOutsContainer").get()),Tt.get("BusinessSolutionsManager").setDeployables(Tt.get("BusinessSolutionsContainer").get()),Tt.get("TrackedPagesManager").setDeployables(Tt.get("TrackedPagesContainer").get()),Tt.get("CoursesManager").setDeployables(Tt.get("CoursesContainer").get()),Tt.get("LessonsManager").setDeployables(Tt.get("LessonsContainer").get()),h.setDeployables(Tt.get("TagsContainer").get()),Tt.get("TrackedElementsManager").setDeployables(Tt.get("TrackedElementsContainer").get()),Tt.get("SearchProviderUrlsManager").setDeployables(Tt.get("SearchProviderUrlsContainer").get());var s=Tt.get("TodoListManager");if(s.setDeployables(Tt.get("TasksContainer").get()),h.injectTagsToDeployables(),Tt.get("AbTasksValidator").shouldTrackAbTasks()){var l=new ct({todoListManager:s,goalsManager:Tt.get("GoalsManager"),consts:v});s.init(),s.loadTasks(l.startWatchingTasks)}else G.abTasksBlocked=!0,m.raiseEvent(v.EVENTS.AbTasksBlocked),c.customerLog("Not tracking ab testing and tasks - blocked in this browser."),t.disableReport();t.isAbTestingEnabled()&&T.setAnalyticsCustomFields(0,u.getEndUserId());return Tt.get("BizFlowOnBeforeUnloadChecker").init(),Tt.get("UIChangeTracker").init(),Tt.get("PageChangeTracker").init(),Tt.get("jQueryCacheCleaner").init(),Tt.get("FlowLinkedTaskCompletionHandler").init(),Tt.get("BalloonLogEventHandler").init(),e}}).dependencies("Lib, Logger, SiteConfigManager, FeaturesManager, TimerManager, WalkMeGoalsManager, TagsManager, CommonEvents, Consts, CommonUtils, HostData, TopContainerProvider, WalkMeInfo, EngagementRulesRepository"),Tt.register("ComponentsLoader").asCtor(function(t,n,r){var i;this.load=function(e){if(i)return o.promise();return n.init(),t.load(e).then(function(){i=!0,o.resolve()})["catch"](function(e){r.error(e)}),o.promise()};var o=Et.Deferred()}).dependencies("DynamicComponentsLoader, StaticComponentsLoader, Logger"),Tt.register("DynamicComponentsLoader").asCtor(function(n,t){function r(t,n){try{!t.wasLoaded&&t.shouldLoad(n)&&(t.promise=new at(function(e){t.wasLoaded=!0,function(n,r,i){try{n.load(function(e){try{n.promise=undefined,function(e,t,n){if(e){var r=e.init(n);r?r.then(t):t()}else t()}(e,r,i)}catch(t){o(t),r()}})}catch(e){o(e),r()}}(t,e,n)}))}catch(e){o(e)}return t.promise||at.resolve()}function o(e){t.error(e,"error loading component")}this.load=function(t){var e=n.get();return at.all(Et.map(e,function(e){return r(e,t)}))},this.loadOneByType=function(t,e){return r(Et.grep(n.get(),function(e){return e.type==t})[0],e)}}).dependencies("DynamicComponentsProvider, Logger");var pn=function(t){function e(e){t.call(this,e)}return Ie(e,t),e.prototype.filterByCurrentPlatform=function(e){for(var t=[],n=0;n<e.length;n++)e[n].Settings&&e[n].Settings.platform||t.push(e[n]);return t},e}(function(){function e(e){this._externalWalkMeConfig=e}return e.prototype.getCurrentPlatform=function(){return this._externalWalkMeConfig.get("platform")},e}());function gn(){var i,s=this,l=null,o=null,a={},u={},c={},r={},n={},e={};function d(e,t,n){if(!n)return t;return r[e]=t,function(){return r[e](arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19])}}s.Extends=function(e,t,n,r,i,o,a){l=new e(t,n,r,i,o,a),s.ExtendsInstance(l)},s.ExtendsInstance=function(e){o=e.__wmoop__,function(){var e=o.GetPublics();for(var t in e){var n=e[t];s.Public(t,n)}}(),function(){for(var e in n){if(!o.IsVirtual(e))throw"Cannot override non-virtual method ["+e+"]. of class : "+o;o.DoOverride(e,n[e])}}();var t=function(){var e={},t={},t=o.GetOriginalFunctions();for(var n in t){var r=t[n];e[n]=r}return e}();s._base=t},s.Override=function(e,t){return n[e]=t},s.DoOverride=function(e,t){r[e]=t},s.IsVirtual=function(e){return r[e]!==undefined},s.GetOriginalFunctions=function(){return c},s.Public=function(e,t,n){var r=d(e,t,n);return c[e]=t,i[e]=r,a[e]=r},s.Protected=function(e,t,n){var r=d(e,t,n);return c[e]=t,u[e]=r},s.GetProperties=function(){return e},s.GetPublics=function(){return a},s.GetProtecteds=function(){return u},function(e){((i=e).__wmoop__=s).Virtual=new mn(s),s.Prop=new hn(s)}.apply(null,arguments)}function hn(){var r;function i(t,e){return r.GetProperties()[t]=e,function(e){if(e===undefined)return r.GetProperties()[t];r.GetProperties()[t]=e}}this.Public=function(e,t){var n=i(e,t);return r.Public(e,n),n},this.Protected=function(e,t){var n=i(e,t);return r.Protected(e,n),n},this.Private=function(e,t){return i(e,t)},function(e){r=e}.apply(null,arguments)}function mn(){var n;function r(e){return function(){throw"["+e+"] is pure virtual and must be overriden"}}this.Public=function(e,t){return t=t||r(e),n.Public(e,t,!0)},this.Protected=function(e,t){return t=t||r(e),n.Protected(e,t,!0)},function(e){n=e}.apply(null,arguments)}e.register([te.PLATFORM.Web,te.PLATFORM.MobileWeb,te.PLATFORM.Desktop],function(){Tt.register("PlatformsService").asCtor(pn).dependencies("ExternalWalkMeConfig")}),Tt.register("WalkmeOOP").asCtor(gn).asProto(),Tt.register("inArrayFunc").dependencies("ArrayUtils").asFunction(function(e){return e.inArray}),Tt.register("ArrayUtils").asCtor(function(){var r=this;function i(e,t,n){return n=n||{},e=e||0,function(){return t.apply(n,[].slice.call(arguments,0,e))}}r.concatWithoutDuplicates=function(e,t){for(var n=e.length-1;0<=n;n--){for(var r=!1,i=t.length-1;0<=i&&!r;i--)t[i]==e[n]&&(r=!0);r||t.push(e[n])}return t},r.max=function(e,t){var n=null;if(0<e.length){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);r<o&&(r=o,n=e[i])}}return n},r.min=function(e,t){var n=null;if(0<e.length){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}}return n},r.foreach=function(e,t){r.forEachSpec(e,i(1,t))},r.forEach=r.foreach,r.forEachSpec=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)},r.reduce=function(e,t,n){return r.reduceSpec(e,i(2,n),t)},r.reduceSpec=function(e,t,n){for(var r=n,i=0;i<e.length;i++)r=t(r,e[i],i,e);return r},r.filter=function(e,t){return r.filterSpec(e,i(1,t))},r.filterSpec=function(e,t){for(var n=new Array,r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n},r.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},r.indexOf=r.inArray,r.map=function(e,t){return r.mapSpec(e,i(1,t))},r.mapSpec=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e));return n},r.shuffle=function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n);var r=e[--n];e[n]=e[t],e[t]=r}return e},r.any=function(e,t){return e&&e.length&&r.filter(e,t).length},r.reduceArray=function(e,t,n){var r,i,o,a,s,l=e,u=l.length,c=u>>>0;if("function"!=typeof t)throw new TypeError;if(0===c&&n===undefined)throw new TypeError;if(r=0,n!==undefined)i=n;else{for(o=!1;!o&&r<c;)a=r.toString(),(o=l.hasOwnProperty(a))&&(i=l[a]),r+=1;if(!o)throw new TypeError}for(;r<c;)a=r.toString(),(o=l.hasOwnProperty(a))&&(s=l[a],i=t.call(undefined,i,s,r,l)),r+=1;return i}}),Tt.register("AccessibilityUtils").asCtor(function(r,i){this.getFocusablesInsideElement=function(e,n,r){var t=Et(e),i=[];t.first().focusable(0,n,r)&&i.push(t[0]);0!=t.children().length&&i.push.apply(i,e.find("*").filter(function(e,t){return Et(t).focusable(0,n,r)}).toArray());return Et(i)},this.announce=function(e){var t=r.getTopContainer(),n=Et("#wm-announcement",t);n.length||((n=Et(t[0].ownerDocument.createElement("div"))).attr({id:"wm-announcement","aria-live":"polite"}),n.css("opacity","0"),n.css("height","0px"),Et(t.append(n)));n.text(" "),i.libSetTimeout(function(){n.text(e)},100)},this.moveElementToEnd=function(e,t){var n=Et(t,e);0!=n.length&&Et(e).append(n)},this.orderElementsByTabIndex=function(e){for(var t=0,n=[],r={},i=0;i<e.length;i++){var o=e[i].tabIndex||0;t=Math.max(t,o),r[o]||(r[o]=[]),r[o].push(e[i])}if(0==t)return e;for(var a=1;a<=t;a++)r[a]&&n.push.apply(n,r[a]);return n.push.apply(n,r[0]),Et(n)}}).dependencies("TopContainerProvider, TimerManager"),Tt.register("SpotlightChecker").asCtor(function(t){this.isSpotlight=function(e){return 1==t.getSettingsValue(e,"fadeBackground",1)||1==t.getSettingsValue(e,"fadeBackground",!0)||"True"==t.getSettingsValue(e,"fadeBackground","True")}}).dependencies("CommonUtils");var vn=function(){function o(e,t){this.parent=e,this.key=t,this.children=[],this.templateIndex=null,this.links=[]}function s(e){return"undefined"!=typeof Array&&Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}return o.prototype.follow=function(e){return e in this.children||(this.children[e]=new o(this,e)),this.children[e]},{stringify:function(t){var n,r,i;return i=function e(t,n){var r,i,o,a;if(null!==n&&"object"==typeof n)if(s(n))for(r=[],i=0;i<n.length;i++)r.push(e(t,n[i]));else{for(o in a=t,r={"":[]},n)Object.hasOwnProperty.call(n,o)&&(a=a.follow(o),r[""].push(e(t,n[o])));a.links.push(r)}else r=n;return r}(n=new o(null,""),t),0<(r=function(e){var t,n,r,i,o,a,s=[],l=[];for(o in e.templateIndex=0,e.children)Object.hasOwnProperty.call(e.children,o)&&l.push(e.children[o]);for(;0<l.length;){for(o in a=0,(t=l.shift()).children)Object.hasOwnProperty.call(t.children,o)&&(l.push(t.children[o]),a+=1);if(1<a||0<t.links.length){for(n=[],r=t;null===r.templateIndex;)n.unshift(r.key),r=r.parent;for(n.unshift(r.templateIndex),s.push(n),t.templateIndex=s.length,i=0;i<t.links.length;i++)t.links[i][""].unshift(t.templateIndex)}}return s}(n)).length?Tt.get("JsonUtils").toJSON({f:"cjson",t:r,v:i},null,null):Tt.get("JsonUtils").toJSON(t)},parse:function(t){var n=Tt.get("JsonUtils").secureEvalJSON(t);return null!==n&&"object"==typeof n&&"f"in n&&"cjson"===n.f?function e(t,n){var r,i,o;if(null!==n&&"object"==typeof n)if(s(n))for(r=[],i=0;i<n.length;i++)r.push(e(t,n[i]));else for(r={},o=function(e,t){for(var n=[];0<t;)n=e[t-1].slice(1).concat(n),t=e[t-1][0];return n}(t,n[""][0]),i=0;i<o.length;i++){var a=e(t,n[""][i+1]);null!==a&&a!==undefined&&(r[o[i]]=a)}else r=n;return r}(n.t,n.v):n}}}();Tt.register("WalkmeLoadTimeManager").asCtor(function(e){var t;function n(){t=(new Date).getTime()}this.init=function(){n(),e.bind("NewWalkMeLoadTime",n)},this.getWalkmeLoadTime=function(){return t}}).dependencies("WmInternals"),Tt.register("WalkmeInternalsPersistWhitelist").asInstance(["removeWalkMeReason","dbgr"]),Tt.register("wmjQuery").asInstance(Et),Tt.get("SimpleNLP").setJQuery(Et),Tt.register("WmInternals").asInstance(G),Tt.register("CJson").asInstance(vn),Tt.register("Lib").asInstance(this),Tt.register("win").asInstance(window),Tt.register("requestAnimationFrame").asInstance(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||!1),Tt.register("cancelAnimationFrame").asInstance(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||!1),G.addTimeStamp&&G.addTimeStamp("libStartInit"),function(){Tt.get("StaticComponentsLoader").load(),Tt.get("LibCtorService").init()}.apply(null,arguments)}
/*!
 * WalkMe
 * http://www.walkme.com/
 *
 * Copyright 2012, WalkMe LTD
 */
window._walkmeInternals=window._walkmeInternals||{},_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeStart"),window.wmjQuery=mtjQuery,mtjQuery&&(mtjQuery.expr&&mtjQuery.expr.filters&&(mtjQuery.expr.filters.mt_hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!mtjQuery.support.reliableHiddenOffsets&&"none"===(e.style.display||mtjQuery.css(e,"display"))||"hidden"===mtjQuery.css(e,"visibility")},mtjQuery.expr.filters.mt_visible=function(e){return!mtjQuery.expr.filters.mt_hidden(e)},mtjQuery.expr.filters.wm_can_embed=function(e){var t=wmjQuery(e);return!t.hasClass("walkme-not-embed")&&"static"!=t.css("position")}),mtjQuery.trim=function(e){return null==e?"":e.toString().replace(/^\s+/,"").replace(/\s+$/,"")}),ma=wmjQuery,ma.extend({safeEach:function(n,r){return ma.each(n,function(e,t){n.hasOwnProperty(e)&&r(e,t)})}}),ma.fn.safeEach=function(e){return ma.safeEach(this,e)},ma.fn.important=function(r,i){var n=this;return"object"==typeof r?(ma.safeEach(r,function(e,t){n.important(e,t)}),n):n.safeEach(function(e,t){ma(t).css(r,"").attr("style",function(e,t){var n=new RegExp("(^|;)\\s*"+r+"\\s*:[^;]*(;|$)","gi");return(t||"").replace(n,"$1").replace(/;$/gi,"")+";"+(i!=undefined?r+": "+i+" !important;":"")})})},ma.fn.cssReset=function(r,i){if(r){var o,n=this;return"object"==typeof r?(ma.safeEach(r,function(e,t){n.cssReset(e,t)}),n):("string"==typeof i&&(o=-1<i.indexOf("!important"),i=ma.trim(i.replace("!important",""))),n.safeEach(function(e,t){var n;t.style[r]||t.style[(n=r,n.replace(/^-+$/g,"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}))]||(o?ma(t).important(r,i):ma(t).css(r,i))}))}},ma.fn.exist=function(){return!!this.length},ma.fn.or=function(e,t){return this.length?this:ma(e,t)},ma.fn.allCss=function(){if(1==this.length){var e={},t=this.attr("style");if(!t)return e;for(var n=t.split(";"),r=n.length-1;0<=r;r--){var i=n[r].split(":"),o=ma.trim(i[0]);o&&(e[o]=ma.trim(i[1]))}return e}},ma.extend(ma.expr[":"],{textEquals:function(e,t,n){return ma(e).text()==n[3]}}),ma.fn.reduce=function(n,r){return this.each(function(e,t){r=n.apply(t,[r,t])}),r},function(u){if(window._walkmeInternals.jQueryCompatability=window._walkmeInternals.jQueryCompatability||{},!u.support.cors&&u.ajaxTransport&&window.XDomainRequest){var t=/^(https?:)?\/\//i,i=/^get|post$/i,o=new RegExp("^(//|"+location.protocol+")","i");_walkmeInternals.jQueryCompatability.wmIECorsSupport=!0,u.ajaxTransport("* text html xml json",function(n,r,e){if(n.crossDomain&&n.async&&i.test(n.type)&&t.test(n.url)&&o.test(n.url)){var l=null;return{send:function(e,a){var t="",s=(r.dataType||"").toLowerCase();l=new XDomainRequest,/^\d+$/.test(r.timeout)&&(l.timeout=r.timeout),l.ontimeout=function(){a(500,"timeout")},l.onload=function(){var e="Content-Length: "+l.responseText.length+"\r\nContent-Type: "+l.contentType,t={code:200,message:"success"},n={text:l.responseText};try{if("html"===s||/text\/html/i.test(l.contentType))n.html=l.responseText;else if("json"===s||"text"!==s&&/\/json/i.test(l.contentType))try{n.json=u.parseJSON(l.responseText)}catch(i){t.code=500,t.message="parseerror"}else if("xml"===s||"text"!==s&&/\/xml/i.test(l.contentType)){var r=new ActiveXObject("Microsoft.XMLDOM");r.async=!1;try{r.loadXML(l.responseText)}catch(i){r=undefined}if(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+l.responseText;n.xml=r}}catch(o){throw o}finally{a(t.code,t.message,n,e)}},l.onprogress=function(){},l.onerror=function(){a(500,"error",{text:l.responseText})},r.data&&(t="string"===u.type(r.data)?r.data:u.param(r.data)),l.open(n.type,n.url),l.send(t)},abort:function(){l&&l.abort()}}}})}else _walkmeInternals.jQueryCompatability.wmIECorsSupport=!1}(ma),Ab={},Bb=0,Cb=(zb=ma).camelCase,zb.camelCase=function(e){return Ab[e]===undefined&&(Ab[e]=Cb(e),1e3<++Bb&&(Bb=0,Ab={})),Ab[e]},!(Eb=ma).fn.addBack&&Eb.fn.andSelf&&(Eb.fn.addBack=Eb.fn.andSelf),Fb=this,Gb=document,function(e,t,r,n){var i,o;(function(f,e,t,p){var l,n,i="virtualMouseBindings",u="virtualTouchID",r="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),g="clientX clientY pageX pageY screenX screenY".split(" "),o=f.event.mouseHooks?f.event.mouseHooks.props:[],h=f.event.props.concat(o),a={},s=0,c=0,d=0,m=!1,v=[],y=!1,S=!1,E="addEventListener"in t,T=f(t),w=1,C=0;function b(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function I(e){for(var t,n,r={};e;){for(n in t=f.data(e,i))t[n]&&(r[n]=r.hasVirtualBinding=!0);e=e.parentNode}return r}function _(){S=!0}function P(){S=!1}function A(){k(),s=setTimeout(function(){C=s=0,v.length=0,y=!1,_()},f.vmouse.resetTimerDuration)}function k(){s&&(clearTimeout(s),s=0)}function D(e,t,n){var r;return(n&&n[e]||!n&&function(e,t){for(var n;e;){if((n=f.data(e,i))&&(!t||n[t]))return e;e=e.parentNode}return null}(t.target,e))&&(r=function(e,t){var n,r,i,o,a,s,l,u,c,d=e.type;if((e=f.Event(e)).type=t,n=e.originalEvent,r=f.event.props,-1<d.search(/^(mouse|click)/)&&(r=h),n)for(l=r.length;l;)o=r[--l],e[o]=n[o];if(-1<d.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1),-1!==d.search(/^touch/)&&(i=b(n),d=i.touches,a=i.changedTouches,s=d&&d.length?d[0]:a&&a.length?a[0]:p))for(u=0,c=g.length;u<c;u++)o=g[u],e[o]=s[o];return e}(t,e),f(t.target).trigger(r)),r}function N(e){var t,n=f.data(e.target,u);y||C&&C===n||(t=D("v"+e.type,e))&&(t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()&&e.stopPropagation(),t.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}function O(e){var t,n,r,i=b(e).touches;i&&1===i.length&&(t=e.target,(n=I(t)).hasVirtualBinding&&(C=w++,f.data(t,u,C),k(),P(),m=!1,r=b(e).touches[0],c=r.pageX,d=r.pageY,D("vmouseover",e,n),D("vmousedown",e,n)))}function x(e){S||(m||D("vmousecancel",e,I(e.target)),m=!0,A())}function L(e){if(!S){var t=b(e).touches[0],n=m,r=f.vmouse.moveDistanceThreshold,i=I(e.target);(m=m||Math.abs(t.pageX-c)>r||Math.abs(t.pageY-d)>r)&&!n&&D("vmousecancel",e,i),D("vmousemove",e,i),A()}}function F(e){if(!S){_();var t,n,r=I(e.target);D("vmouseup",e,r),m||(t=D("vclick",e,r))&&t.isDefaultPrevented()&&(n=b(e).changedTouches[0],v.push({touchID:C,x:n.clientX,y:n.clientY}),y=!0),D("vmouseout",e,r),m=!1,A()}}function M(e){var t,n=f.data(e,i);if(n)for(t in n)if(n[t])return!0;return!1}function R(){}function B(n){var r=n.substr(1);return{setup:function(){M(this)||f.data(this,i,{});var e=f.data(this,i);e[n]=!0,a[n]=(a[n]||0)+1,1===a[n]&&T.bind(r,N),f(this).bind(r,R),E&&(a.touchstart=(a.touchstart||0)+1,1===a.touchstart&&T.bind("touchstart",O).bind("touchend",F).bind("touchmove",L).bind("scroll",x))},teardown:function(){--a[n],a[n]||T.unbind(r,N),E&&(--a.touchstart,a.touchstart||T.unbind("touchstart",O).unbind("touchmove",L).unbind("touchend",F).unbind("scroll",x));var e=f(this),t=f.data(this,i);t&&(t[n]=!1),e.unbind(r,R),M(this)||e.removeData(i)}}}for(f.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},n=0;n<r.length;n++)f.event.special[r[n]]=B(r[n]);if(E){var U=function(e){var t,n,r,i,o,a=v.length,s=e.target;if(a)for(t=e.clientX,n=e.clientY,l=f.vmouse.clickDistanceThreshold,r=s;r;){for(i=0;i<a;i++)if(o=v[i],r===s&&Math.abs(o.x-t)<l&&Math.abs(o.y-n)<l||f.data(r,u)===o.touchID)return e.preventDefault(),void e.stopPropagation();r=r.parentNode}};t.addEventListener("click",U,!0),wmjQuery(e._walkmeInternals).bind("removeWalkMe",function(){t.removeEventListener("click",U,!0)})}})(e,t,r),e.mobile={},o={touch:"ontouchend"in r},(i=e).mobile.support=i.mobile.support||{},i.extend(i.support,o),i.extend(i.mobile.support,o),function(u,o,a){var c=u(r),e=u.mobile.support.touch,s="touchmove scroll",n=e?"touchstart":"mousedown",l=e?"touchend":"mouseup",d=e?"touchmove":"mousemove";function f(e,t,n,r){var i=n.type;n.type=t,r?u.event.trigger(n,a,e):u.event.dispatch.call(e,n),n.type=i}u.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){u.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},u.attrFn&&(u.attrFn[t]=!0)}),u.event.special.scrollstart={enabled:!0,setup:function(){var n,t,r=this,e=u(r);function i(e,t){f(r,(n=t)?"scrollstart":"scrollstop",e)}e.bind(s,function(e){u.event.special.scrollstart.enabled&&(n||i(e,!0),clearTimeout(t),t=setTimeout(function(){i(e,!1)},50))})},teardown:function(){u(this).unbind(s)}},u.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var a=this,s=u(a),l=!1;s.bind("vmousedown",function(e){if(l=!1,e.which&&1!==e.which)return!1;var t,n=e.target;function r(){clearTimeout(t)}function i(){r(),s.unbind("vclick",o).unbind("vmouseup",r),c.unbind("vmousecancel",i)}function o(e){i(),l||n!==e.target?l&&e.preventDefault():f(a,"tap",e)}s.bind("vmouseup",r).bind("vclick",o),c.bind("vmousecancel",i),t=setTimeout(function(){u.event.special.tap.emitTapOnTaphold||(l=!0),f(a,"taphold",u.Event("taphold",{target:n}))},u.event.special.tap.tapholdThreshold)})},teardown:function(){u(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),c.unbind("vmousecancel")}},u.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var t=o.pageXOffset,n=o.pageYOffset,r=e.clientX,i=e.clientY;return 0===e.pageY&&Math.floor(i)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(r)>Math.floor(e.pageX)?(r-=t,i-=n):(i<e.pageY-n||r<e.pageX-t)&&(r=e.pageX-t,i=e.pageY-n),{x:r,y:i}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=u.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[n.x,n.y],origin:u(e.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=u.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[n.x,n.y]}},handleSwipe:function(e,t,n,r){if(t.time-e.time<u.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>u.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<u.event.special.swipe.verticalDistanceThreshold){var i=e.coords[0]>t.coords[0]?"swipeleft":"swiperight";return f(n,"swipe",u.Event("swipe",{target:r,swipestart:e,swipestop:t}),!0),f(n,i,u.Event(i,{target:r,swipestart:e,swipestop:t}),!0),!0}return!1},eventInProgress:!1,setup:function(){var e,o=this,t=u(o),a={};(e=u.data(this,"mobile-events"))||(e={length:0},u.data(this,"mobile-events",e)),e.length++,(e.swipe=a).start=function(e){if(!u.event.special.swipe.eventInProgress){u.event.special.swipe.eventInProgress=!0;var t,n=u.event.special.swipe.start(e),r=e.target,i=!1;a.move=function(e){n&&!e.isDefaultPrevented()&&(t=u.event.special.swipe.stop(e),i||(i=u.event.special.swipe.handleSwipe(n,t,o,r))&&(u.event.special.swipe.eventInProgress=!1),Math.abs(n.coords[0]-t.coords[0])>u.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())},a.stop=function(){i=!0,u.event.special.swipe.eventInProgress=!1,c.off(d,a.move),a.move=null},c.on(d,a.move).one(l,a.stop)}},t.on(n,a.start)},teardown:function(){var e,t;(e=u.data(this,"mobile-events"))&&(t=e.swipe,delete e.swipe,e.length--,0===e.length&&u.removeData(this,"mobile-events")),t&&(t.start&&u(this).off(n,t.start),t.move&&c.off(d,t.move),t.stop&&c.off(l,t.stop))}},u.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,t){u.event.special[e]={setup:function(){u(this).bind(t,u.noop)},teardown:function(){u(this).unbind(t)}}})}(e,this)}(window.wmjQuery,Fb,Gb),function(r){"use strict";function i(e,t){r.extend(this,t),this.$select=e,r.extend(this,this.markup(e)),this.bindEvents()}function e(n){return"string"!=typeof n&&(n=r.extend({},e.options,n)),this.filter("select").each(function(){var e=r(this),t=e.data(n.baseName);"string"==typeof n?t[n].apply(e,[].slice.call(arguments,1)):t||e.data(n.baseName,new i(e,n))}),this}i.prototype={getValue:function(e){return"function"==typeof this[e]?this[e]():this[e]},onFocusBlur:function(e){this.$el.toggleClass(this.generateClassName("focus",!0),e&&("focus"===e.type||"focusin"===e.type)||this.$select.is(":focus"))},updateTitle:function(){var e=this.$select.find(":selected"),t=this.formatter(e.text(),this.$select.val(),e,this.$select);this.allowHtmlInTitle?this.$title.html(t):this.$title.text(t)},bindEvents:function(){this.$el.on("focusin."+this.baseName+" focusout."+this.baseName,r.proxy(this.onFocusBlur,this)),this.onFocusBlur(),this.$select.on("change."+this.baseName,r.proxy(this.updateTitle,this)),this.$select.on("keyup."+this.baseName,r.proxy(this.updateTitle,this)),this.updateTitle()},destroy:function(){this.$el.off("."+this.baseName),this.$select.off("."+this.baseName),this.$select.removeClass(this.generateClassName("select")).insertBefore(this.$el),this.$el.remove()}},e.klass=i,e.formatter=function(e,t,n,r){return e},e.markup=function(e){var t=e.addClass(this.generateClassName("select")).wrap('<span class="'+this.generateClassName()+'"/>').parent();return r('<span class="'+this.generateClassName("arrow")+'"/>').prependTo(t),{$el:t,$title:r('<span class="'+this.generateClassName("title")+'"/>').prependTo(t)}},e.options={baseName:"brute-select",generateClassName:e.generateClassName=function(e,t){return this.getValue("baseName")+(e?"-"+e:"")},markup:e.markup,formatter:e.formatter,allowHtmlInTitle:!1},r.fn.bruteSelect=e}(mtjQuery),mtjQuery.fn.fixedPosition=function(e){},sf=mtjQuery,sf.extend({highlight:function(e,t,n,r){if(3===e.nodeType){var i=e.data.match(t);if(i){var o=document.createElement(n||"span");o.className=r||"walkme-highlight";var a=e.splitText(i.index);a.splitText(i[0].length);var s=a.cloneNode(!0);return o.appendChild(s),a.parentNode.replaceChild(o,a),1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&(e.tagName!==n.toUpperCase()||e.className!==r))for(var l=0;l<e.childNodes.length;l++)l+=sf.highlight(e.childNodes[l],t,n,r);return 0}}),sf.fn.unhighlight=function(e){var t={className:"walkme-highlight",element:"span"};return sf.extend(t,e),this.find(t.element+"."+t.className).each(function(){var e=this.parentNode;e&&(e.replaceChild(this.firstChild,this),sf(e).text(sf(e).text()))}).end()},sf.fn.highlight=function(e,t){var n={className:"walkme-highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(sf.extend(n,t),e.constructor===String&&(e=[e]),e=sf.grep(e,function(e,t){return""!=e}),0==(e=sf.map(e,function(e,t){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")})).length)return this;var r=n.caseSensitive?"":"i",i="("+e.join("|")+")";n.wordsOnly&&(i="\\b"+i+"\\b");var o=new RegExp(i,r);return this.each(function(){sf.highlight(this,o,n.element,n.className)})},Pf=wmjQuery,Qf=this,Pf.fn.jScrollPane=function(n){function r(v,e){var y,S,E,T,w,C,b,I,_,P,A,k,D,N,O,x,L,F,M,t,R,B,U,V,W,j,G,H,Y,z,Q,q,K,J,X=this,s=!0,l=!0,u=!1,c=!1,n=v.clone(!1,!1).empty(),$=$,Z=Pf.fn.mwheelIntent?"mwheelIntent.walkme-jsp":"mousewheel.walkme-jsp";function ee(e){var t,n,r,i,o,a,s,l,u,c,d,f,p,g,h=!1,m=!1;if(y=e,S===Rf)o=v.scrollTop(),a=v.scrollLeft(),v.important({overflow:"hidden",padding:0}),E=v.innerWidth()+K,T=v.innerHeight(),v.width(E),S=Pf('<div class="walkme-jspPane" />').css("padding",q).append(v.children()),w=Pf('<div class="walkme-jspContainer" />').css({width:E+"px",height:T+"px"}).append(S).appendTo(v),te(v);else{if(v.css("width",""),h=y.stickToBottom&&20<(l=b-T)&&l-me()<10,m=y.stickToRight&&20<(s=C-E)&&s-he()<10,(i=v.innerWidth()+K!=E||v.outerHeight()!=T)&&(E=v.innerWidth()+K,T=v.innerHeight(),w.css({width:E+"px",height:T+"px"})),!i&&J==C&&S.outerHeight()==b)return void v.width(E);J=C,S.css("width",""),v.width(E),w.find(">.walkme-jspVerticalBar,>.walkme-jspHorizontalBar").remove().end()}S.css("overflow","auto"),C=e.contentWidth?e.contentWidth:S[0].scrollWidth,b=S[0].scrollHeight,S.css("overflow",""),I=C<E?1:C/E,P=1<(_=b<T?1:b/T)||y.alwaysScrollVertical,(A=1<I||y.alwaysScrollHorizontal)||P?(v.addClass("walkme-jspScrollable"),(t=y.maintainPosition&&(N||L))&&(n=he(),r=me()),function(){if(P){F=Pf('<div class="walkme-jspVerticalBar" />'),M=Pf('<div class="walkme-jspTrack" />'),k=Pf('<div class="walkme-jspDrag" />');var e=Pf('<div class="walkme-jspCap walkme-jspCapTop" />'),t=Pf('<div class="walkme-jspCap walkme-jspCapBottom" />');w.append(F.append(e,M.append(k.append(Pf('<div class="walkme-jspDragTop" />'),Pf('<div class="walkme-jspDragBottom" />'))),t)),te(w),R=T,y.showArrows&&(U=Pf('<a class="walkme-jspArrow walkme-jspArrowUp" />').bind("mousedown.walkme-jsp",oe(0,-1)).bind("click.walkme-jsp",ve),V=Pf('<a class="walkme-jspArrow walkme-jspArrowDown" />').bind("mousedown.walkme-jsp",oe(0,1)).bind("click.walkme-jsp",ve),R-=U.outerHeight()+V.outerHeight(),y.arrowScrollOnHover&&(U.bind("mouseover.walkme-jsp",oe(0,-1,U)),V.bind("mouseover.walkme-jsp",oe(0,1,V))),ie(M,y.verticalArrowPositions,U,V)),e.add(t).each(function(){var e=Pf(this);"none"!=e.css("display")&&(R-=e.outerHeight())}),k.hover(function(){k.addClass("walkme-jspHover")},function(){k.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(e){var t=Pf(y.containerDoc).find("html");t.bind("dragstart.walkme-jsp selectstart.walkme-jsp",ve),k.addClass("walkme-jspActive");var n=e.pageY-k.position().top;return t.bind("mousemove.walkme-jsp",function(e){le(e.pageY-n,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",se),!1}),ne()}}(),A&&(w.append(Pf('<div class="walkme-jspHorizontalBar" />').append(Pf('<div class="walkme-jspCap walkme-jspCapLeft" />'),Pf('<div class="walkme-jspTrack" />').append(Pf('<div class="walkme-jspDrag" />').append(Pf('<div class="walkme-jspDragLeft" />'),Pf('<div class="walkme-jspDragRight" />'))),Pf('<div class="walkme-jspCap walkme-jspCapRight" />'))),te(w),W=w.find(">.walkme-jspHorizontalBar"),j=W.find(">.walkme-jspTrack"),O=j.find(">.walkme-jspDrag"),y.showArrows&&(Y=Pf('<a class="walkme-jspArrow walkme-jspArrowLeft" />').bind("mousedown.walkme-jsp",oe(-1,0)).bind("click.walkme-jsp",ve),z=Pf('<a class="walkme-jspArrow walkme-jspArrowRight" />').bind("mousedown.walkme-jsp",oe(1,0)).bind("click.walkme-jsp",ve),y.arrowScrollOnHover&&(Y.bind("mouseover.walkme-jsp",oe(-1,0,Y)),z.bind("mouseover.walkme-jsp",oe(1,0,z))),ie(j,y.horizontalArrowPositions,Y,z)),O.hover(function(){O.addClass("walkme-jspHover")},function(){O.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(e){Pf(y.containerDoc).find("html").bind("dragstart.walkme-jsp selectstart.walkme-jsp",ve),O.addClass("walkme-jspActive");var t=e.pageX-O.position().left;return Pf(y.containerDoc).find("html").bind("mousemove.walkme-jsp",function(e){ce(e.pageX-t,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",se),!1}),G=w.innerWidth(),re()),function(){if(A&&P){var e=j.outerHeight(),t=M.outerWidth();R-=e,Pf(W).find(">.walkme-jspCap:visible,>.walkme-jspArrow").each(function(){G+=Pf(this).outerWidth()}),G-=t,T-=t,E-=e,j.parent().append(Pf('<div class="walkme-jspCorner" />').css("width",e+"px")),te(j.parent()),ne(),re()}A&&S.width(w.outerWidth()-K+"px"),b=S.outerHeight(),_=b<T?1:b/T,A&&((H=Math.ceil(1/I*G))>y.horizontalDragMaxWidth?H=y.horizontalDragMaxWidth:H<y.horizontalDragMinWidth&&(H=y.horizontalDragMinWidth),O.width(H+"px"),x=G-H,de(L)),P&&((B=Math.ceil(1/_*R))>y.verticalDragMaxHeight?B=y.verticalDragMaxHeight:B<y.verticalDragMinHeight&&(B=y.verticalDragMinHeight),k.height(B+"px"),D=R-B+y.dragMaxYOffset,ue(N))}(),t&&(pe(m?C-E:n,!1),fe(h?b-T:r,!1)),S.find(":input,a").unbind("focus.walkme-jsp").bind("focus.walkme-jsp",function(e){ge(e.target,!1)}),w.unbind(Z).bind(Z,function(e,t,n,r){L||(L=0),N||(N=0);var i=L,o=N,a=e.deltaFactor||y.mouseWheelSpeed;return X.scrollBy(n*a,-r*a,!1),i==L&&o==N}),g=!1,w.unbind("touchstart.walkme-jsp touchmove.walkme-jsp touchend.walkme-jsp click.walkme-jsp-touchclick").bind("touchstart.walkme-jsp",function(e){var t=e.originalEvent.touches[0];u=he(),c=me(),d=t.pageX,f=t.pageY,g=!(p=!1)}).bind("touchmove.walkme-jsp",function(e){if(g){var t=e.originalEvent.touches[0],n=L,r=N;return X.scrollTo(u+d-t.pageX,c+f-t.pageY),p=p||5<Math.abs(d-t.pageX)||5<Math.abs(f-t.pageY),n==L&&r==N}}).bind("touchend.walkme-jsp",function(e){g=!1}).bind("click.walkme-jsp-touchclick",function(e){if(p)return p=!1}),y.enableKeyboardNavigation&&function(){var r,i,o=[];function a(){var e=L,t=N;switch(r){case 40:X.scrollByY(y.keyboardSpeed,!1);break;case 38:X.scrollByY(-y.keyboardSpeed,!1);break;case 34:case 32:X.scrollByY(T*y.scrollPagePercent,!1);break;case 33:X.scrollByY(-T*y.scrollPagePercent,!1);break;case 39:X.scrollByX(y.keyboardSpeed,!1);break;case 37:X.scrollByX(-y.keyboardSpeed,!1)}return i=e!=L||t!=N}A&&o.push(W[0]),P&&o.push(F[0]),S.bind("focus.jsp",function(){v.focus()}),y.setTabIndex&&v.attr("tabindex",0),v.unbind("keydown.walkme-jsp keypress.walkme-jsp").bind("keydown.walkme-jsp",function(e){if(e.target===this||o.length&&Pf(e.target).closest(o).length){var t=L,n=N;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:r=e.keyCode,a();break;case 35:fe(b-T),r=null;break;case 36:fe(0),r=null}return!(i=e.keyCode==r&&t!=L||n!=N)}}).bind("keypress.walkme-jsp",function(e){if(e.keyCode==r&&a(),e.target===this||o.length&&Pf(e.target).closest(o).length)return!i}),y.hideFocus?(v.css("outline","none"),"hideFocus"in w[0]&&v.attr("hideFocus",!0)):(v.css("outline",""),"hideFocus"in w[0]&&v.attr("hideFocus",!1))}(),y.clickOnTrack&&(ae(),P&&M.bind("mousedown.walkme-jsp",function(i){if(i.originalTarget===Rf||i.originalTarget==i.currentTarget){var o,a=Pf(this),e=a.offset(),s=i.pageY-e.top-N,l=!0,u=function(){var e=a.offset(),t=i.pageY-e.top-B/2,n=T*y.scrollPagePercent,r=D*n/(b-T);if(s<0)t<N-r?X.scrollByY(-n):le(t);else{if(!(0<s))return void c();N+r<t?X.scrollByY(n):le(t)}o=setTimeout(u,l?y.initialDelay:y.trackClickRepeatFreq),l=!1},c=function(){o&&clearTimeout(o),o=null,Pf(y.containerDoc).unbind("mouseup.walkme-jsp",c)};return u(),Pf(y.containerDoc).bind("mouseup.walkme-jsp",c),!1}}),A&&j.bind("mousedown.walkme-jsp",function(i){if(i.originalTarget===Rf||i.originalTarget==i.currentTarget){var o,a=Pf(this),e=a.offset(),s=i.pageX-e.left-L,l=!0,u=function(){var e=a.offset(),t=i.pageX-e.left-H/2,n=E*y.scrollPagePercent,r=x*n/(C-E);if(s<0)t<L-r?X.scrollByX(-n):ce(t);else{if(!(0<s))return void c();L+r<t?X.scrollByX(n):ce(t)}o=setTimeout(u,l?y.initialDelay:y.trackClickRepeatFreq),l=!1},c=function(){o&&clearTimeout(o),o=null,Pf(y.containerDoc).unbind("mouseup.walkme-jsp",c)};return u(),Pf(y.containerDoc).bind("mouseup.walkme-jsp",c),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,n=escape(location.hash.substr(1));try{e=Pf("#"+n+', a[name="'+n+'"]')}catch(r){return}e.length&&S.find(n)&&(0===w.scrollTop()?t=setInterval(function(){0<w.scrollTop()&&(ge(e,!0),Pf(y.containerDoc).scrollTop(w.position().top),clearInterval(t))},50):(ge(e,!0),Pf(y.containerDoc).scrollTop(w.position().top)))}}(),y.hijackInternalLinks&&(Pf($(y.containerDoc)).data("walkme-jspHijack")||(Pf($(y.containerDoc)).data("walkme-jspHijack",!0),Pf($(y.containerDoc)).delegate('a[href*="#"]',"click",function(e){var t,n,r,i,o,a=this.href.substr(0,this.href.indexOf("#")),s=location.href;if(-1!==location.href.indexOf("#")&&(s=location.href.substr(0,location.href.indexOf("#"))),a===s){t=escape(this.href.substr(this.href.indexOf("#")+1));try{n=Pf("#"+t+', a[name="'+t+'"]')}catch(l){return}n.length&&((r=n.closest(".walkme-jspScrollable")).data("walkme-jsp").scrollToElement(n,!0),r[0].scrollIntoView&&(i=Pf(Qf).scrollTop(),((o=n.offset().top)<i||o>i+Pf(Qf).height())&&r[0].scrollIntoView()),e.preventDefault())}})))):(v.removeClass("walkme-jspScrollable"),S.css({top:0,left:0,right:0,width:w.width()-K}),w.unbind(Z),S.find(":input,a").unbind("focus.walkme-jsp"),y.setTabIndex&&v.attr("tabindex","-1").removeAttr("tabindex"),v.unbind("keydown.walkme-jsp keypress.walkme-jsp"),S.unbind(".jsp"),ae()),y.autoReinitialise&&!Q?Q=setInterval(function(){ee(y)},y.autoReinitialiseDelay):!y.autoReinitialise&&Q&&clearInterval(Q),o&&v.scrollTop(0)&&fe(o,!1),a&&v.scrollLeft(0)&&pe(a,!1),v.trigger("walkme-jsp-initialised",[A||P])}function te(e){Pf(e).find('div[class*="walkme-jsp"]').add(e).each(function(e,t){var n="class",r=Pf(t),i=r.attr(n);r.attr(n,"").attr(n,i)})}function ne(){M.height(R+"px"),N=0,t=y.verticalGutter+M.outerWidth(),S.width(E-t-K);try{0===F.position().left&&S.css("margin-left",t+"px")}catch(e){}}function re(){w.find(">.walkme-jspHorizontalBar>.walkme-jspCap:visible,>.walkme-jspHorizontalBar>.walkme-jspArrow").each(function(){G-=Pf(this).outerWidth()}),j.width(G+"px"),L=0}function ie(e,t,n,r){var i,o="before",a="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==o?a=t:t==a&&(o=t,i=n,n=r,r=i),e[o](n)[a](r)}function oe(e,t,n){return function(){return function(e,t,n,r){n=Pf(n).addClass("walkme-jspActive");var i,o,a=!0,s=function(){0!==e&&X.scrollByX(e*y.arrowButtonSpeed),0!==t&&X.scrollByY(t*y.arrowButtonSpeed),o=setTimeout(s,a?y.initialDelay:y.arrowRepeatFreq),a=!1};s(),i=r?"mouseout.walkme-jsp":"mouseup.walkme-jsp",(r=r||Pf(y.containerDoc).find("html")).bind(i,function(){n.removeClass("walkme-jspActive"),o&&clearTimeout(o),o=null,r.unbind(i)})}(e,t,this,n),this.blur(),!1}}function ae(){j&&j.unbind("mousedown.walkme-jsp"),M&&M.unbind("mousedown.walkme-jsp")}function se(){Pf(y.containerDoc).find("html").unbind("dragstart.walkme-jsp selectstart.walkme-jsp mousemove.walkme-jsp mouseup.walkme-jsp mouseleave.walkme-jsp"),k&&k.removeClass("walkme-jspActive"),O&&O.removeClass("walkme-jspActive")}function le(e,t){P&&(e<0?e=0:D<e&&(e=D),t===Rf&&(t=y.animateScroll),t?X.animate(k,"top",e,ue):(k.css("top",e),ue(e)))}function ue(e){e===Rf&&(e=k.position().top),w.scrollTop(0);var t,n,r=0===(N=e||0),i=N==D,o=-e/D*(b-T);s==r&&u==i||(s=r,u=i,v.trigger("walkme-jsp-arrow-change",[s,u,l,c])),t=r,n=i,y.showArrows&&(U[t?"addClass":"removeClass"]("walkme-jspDisabled"),V[n?"addClass":"removeClass"]("walkme-jspDisabled")),S.css("top",o);try{v.trigger("walkme-jsp-scroll-y",[-o,r,i]).trigger("scroll")}catch(a){}}function ce(e,t){A&&(e<0?e=0:x<e&&(e=x),t===Rf&&(t=y.animateScroll),t?X.animate(O,"left",e,de):(O.css("left",e),de(e)))}function de(e){e===Rf&&(e=O.position().left),w.scrollTop(0);var t,n,r=0===(L=e||0),i=L==x,o=-e/x*(C-E);l==r&&c==i||(l=r,c=i,v.trigger("walkme-jsp-arrow-change",[s,u,l,c])),t=r,n=i,y.showArrows&&(Y[t?"addClass":"removeClass"]("walkme-jspDisabled"),z[n?"addClass":"removeClass"]("walkme-jspDisabled")),S.css("left",o);try{v.trigger("walkme-jsp-scroll-x",[-o,r,i]).trigger("scroll")}catch(a){}}function fe(e,t){le(e/(b-T)*D,t)}function pe(e,t){ce(e/(C-E)*x,t)}function ge(e,t,n){var r,i,o,a,s,l,u,c,d,f=0,p=0;try{r=Pf(e)}catch(g){return}for(i=r.outerHeight(),o=r.outerWidth(),w.scrollTop(0),w.scrollLeft(0);!r.is(".walkme-jspPane");)if(f+=r.position().top,p+=r.position().left,r=r.offsetParent(),/^body|html$/i.test(r[0].nodeName))return;l=(a=me())+T,f<a||t?c=f-y.horizontalGutter:l<f+i&&(c=f-T+i+y.horizontalGutter),isNaN(c)||fe(c,n),u=(s=he())+E,p<s||t?d=p-y.horizontalGutter:u<p+o&&(d=p-E+o+y.horizontalGutter),isNaN(d)||pe(d,n)}function he(){return-S.position().left}function me(){return-S.position().top}function ve(){return!1}"border-box"===v.css("box-sizing")?K=q=0:(q=v.css("paddingTop")+" "+v.css("paddingRight")+" "+v.css("paddingBottom")+" "+v.css("paddingLeft"),K=(parseInt(v.css("paddingLeft"),10)||0)+(parseInt(v.css("paddingRight"),10)||0)),Pf.extend(X,{reinitialise:function(e){ee(e=Pf.extend({},y,e))},scrollToElement:function(e,t,n){ge(e,t,n)},scrollTo:function(e,t,n){pe(e,n),fe(t,n)},scrollToX:function(e,t){pe(e,t)},scrollToY:function(e,t){fe(e,t)},scrollToPercentX:function(e,t){pe(e*(C-E),t)},scrollToPercentY:function(e,t){fe(e*(b-T),t)},scrollBy:function(e,t,n){X.scrollByX(e,n),X.scrollByY(t,n)},scrollByX:function(e,t){ce((he()+Math[e<0?"floor":"ceil"](e))/(C-E)*x,t)},scrollByY:function(e,t){le((me()+Math[e<0?"floor":"ceil"](e))/(b-T)*D,t)},positionDragX:function(e,t){ce(e,t)},positionDragY:function(e,t){le(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:y.animateDuration,easing:y.animateEase,queue:!1,step:r})},getContentPositionX:function(){return he()},getContentPositionY:function(){return me()},getContentWidth:function(){return C},getContentHeight:function(){return b},getPercentScrolledX:function(){return he()/(C-E)},getPercentScrolledY:function(){return me()/(b-T)},getIsScrollableH:function(){return A},getIsScrollableV:function(){return P},getContentPane:function(){return S},scrollToBottom:function(e){le(D,e)},hijackInternalLinks:Pf.noop,destroy:function(){var e,t;e=me(),t=he(),v.removeClass("walkme-jspScrollable").unbind(".walkme-jsp"),S.unbind(".jsp"),v.replaceWith(n.append(S.children())),n.scrollTop(e),n.scrollLeft(t),Q&&clearInterval(Q)}}),ee(e)}return n=Pf.extend({},Pf.fn.jScrollPane.defaults,n),Pf.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var e=Pf(this),t=e.data("walkme-jsp");t?t.reinitialise(n):(Pf("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new r(e,n),e.data("walkme-jsp",t))})},Pf.fn.jScrollPane.defaults={containerDoc:document,setTabIndex:!0,alwaysScrollVertical:!1,alwaysScrollHorizontal:!1,dragMaxYOffset:0,showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:Rf,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8},function(u){var c,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(u.event.fixHooks)for(var n=e.length;n;)u.event.fixHooks[e[--n]]=u.event.mouseHooks;function r(e){var t,n,r,i=e||window.event,o=[].slice.call(arguments,1),a=0,s=0,l=0;return(e=u.event.fix(i)).type="mousewheel",i.wheelDelta&&(a=i.wheelDelta),i.detail&&(a=-1*i.detail),i.deltaY&&(a=l=-1*i.deltaY),i.deltaX&&(a=-1*(s=i.deltaX)),i.wheelDeltaY!==undefined&&(l=i.wheelDeltaY),i.wheelDeltaX!==undefined&&(s=-1*i.wheelDeltaX),t=Math.abs(a),(!c||t<c)&&(c=t),n=Math.max(Math.abs(l),Math.abs(s)),(!d||n<d)&&(d=n),r=0<a?"floor":"ceil",a=Math[r](a/c),s=Math[r](s/d),l=Math[r](l/d),o.unshift(e,a,s,l),(u.event.dispatch||u.event.handle).apply(this,o)}u.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],r,!1);else this.onmousewheel=null}},u.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(wmjQuery),function(f){var p={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},g={duration:"fast",direction:"both"},h=/^(?:html)$/i,m=function(e){var t,n=f(window),r=h.test(e[0].nodeName);return{border:r?{top:0,left:0,bottom:0,right:0}:function(e,t){t=t||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var n=!(!document.defaultView||!document.defaultView.getComputedStyle),r={top:parseFloat(n?t.borderTopWidth:f.css(e,"borderTopWidth"))||0,left:parseFloat(n?t.borderLeftWidth:f.css(e,"borderLeftWidth"))||0,bottom:parseFloat(n?t.borderBottomWidth:f.css(e,"borderBottomWidth"))||0,right:parseFloat(n?t.borderRightWidth:f.css(e,"borderRightWidth"))||0};return{top:r.top,left:r.left,bottom:r.bottom,right:r.right,vertical:r.top+r.bottom,horizontal:r.left+r.right}}(e[0]),scroll:{top:(r?n:e).scrollTop(),left:(r?n:e).scrollLeft()},scrollbar:{right:r?0:e.innerWidth()-e[0].clientWidth,bottom:r?0:e.innerHeight()-e[0].clientHeight},rect:(t=e[0].getBoundingClientRect(),{top:r?0:t.top,left:r?0:t.left,bottom:r?e[0].clientHeight:t.bottom,right:r?e[0].clientWidth:t.right})}},v=function(e,t){f.isFunction(e)&&e.call(t)},y=function(e){return e.is("html,body,:wm_interact_all_points")};f.fn.extend({scrollintoview:function(i){(i=f.extend({},g,i)).direction=p["string"==typeof i.direction&&i.direction.toLowerCase()]||p.both;var e="";!0===i.direction.x&&(e="horizontal"),!0===i.direction.y&&(e=e?"both":"vertical"),h="html"==i.rootElement?/^(?:html)$/i:/^(?:body)$/i;var t="";i.customScrollElement&&(t=","+i.customScrollElement);var o=this.eq(0),a=i.elementToFindScrollableFor.parent().closest(":scrollable("+e+")"+t);if(!(0<a.length))return!1;"html"==i.rootElement&&a[0].tagName&&a[0].tagName.toUpperCase&&"BODY"==a[0].tagName.toUpperCase()&&(a=a.parent()),a=a.eq(0);var n=m(o),r=m(a);if(i.heightLimit&&a.height()<200)return!1;var s={top:n.rect.top-(r.rect.top+r.border.top),bottom:r.rect.bottom-r.border.bottom-r.scrollbar.bottom-n.rect.bottom,left:n.rect.left-(r.rect.left+r.border.left),right:r.rect.right-r.border.right-r.scrollbar.right-n.rect.right},l=0,u={top:s.top,bottom:s.bottom};if(i.endScroll){var c=i.endScroll.scrollOptions;l="px"==c.unit?c.distance:(r.rect.bottom-i.endScroll.balloonHeight)*parseFloat(c.distance)/100,0<s.top&&s.bottom<0&&(l+=i.endScroll.totalDrawnHeight-r.rect.bottom),c.force&&(u.top-=l)}else s.top-=50,s.bottom-=50;var d={};return!0===i.direction.y&&(u.top<0?d.scrollTop=r.scroll.top+s.top-l:0<u.top&&u.bottom<0&&(d.scrollTop=r.scroll.top+Math.min(s.top,-s.bottom)-l)),!0===i.direction.x&&(s.left<0?d.scrollLeft=r.scroll.left+s.left:0<s.left&&s.right<0&&(d.scrollLeft=r.scroll.left+Math.min(s.left,-s.right))),!(!d.scrollTop&&!d.scrollLeft)&&(h.test(a[0].nodeName)&&(a=f("html,body")),a.animate(d,i.duration).eq(0).queue(function(e){var t,n,r;i.forceFindScrollable&&!i.isElementInIFrame?(n=i,r=a,y(t=o)?v(n.complete,r[0]):(n.elementToFindScrollableFor=r,t.scrollintoview(n))):v(i.complete,a[0]),e()}),!0)}});var l={auto:!0,scroll:!0,visible:!1,hidden:!1};f.extend(f.expr[":"],{scrollable:function(e,t,n,r){var i=p["string"==typeof n[3]&&n[3].toLowerCase()]||p.both,o=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,a={x:l[o.overflowX.toLowerCase()]||!1,y:l[o.overflowY.toLowerCase()]||!1,isRoot:h.test(e.nodeName)};if(!a.x&&!a.y&&!a.isRoot||"hidden"==o.overflowY.toLowerCase())return!1;var s={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(a.x||a.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(a.y||a.isRoot)&&this.height.scroll>this.height.client}};return i.y&&s.scrollableY()||i.x&&s.scrollableX()}})}(mtjQuery),mtjQuery.fn.focusable=function(e,t,n){var r,i,o,a,s,l,u,c,d,f=this[0],p=wmjQuery.attr(f,"tabindex"),g=null!=p;return(!g||0<=p)&&(i=g,o=t,a=n,c=(r=f).nodeName.toLowerCase(),d=a||"none"!=wmjQuery.css(r,"display"),"area"===c?(s=r.parentNode,l=s.name,!(!r.href||!l||"map"!==s.nodeName.toLowerCase())&&!!(u=wmjQuery("img[usemap='#"+l+"']")[0])&&h(u)):(/input|select|textarea|button|object|iframe/.test(c)?!r.disabled:"a"===c&&r.href||i)&&d&&(o||h(r)));function h(e){return wmjQuery.expr.filters.visible(e)&&!wmjQuery(e).parents().addBack().filter(function(){return"hidden"===wmjQuery.css(this,"visibility")}).length}},window._makeTutorialEv={Ev:function(src){return eval(src)}},window._makeTutorial==undefined&&(window._walkMe=window._makeTutorial=new ClassMakeTutorial(window.wmjQuery,window._walkmeInternals),_makeTutorial.initFailed&&(window._walkMe=window._makeTutorial=undefined)),_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeEnd")}).call(window)},function(e,t,n){(function(){window._walkmeInternals.ctx||n(2)(window._walkmeInternals),e.exports=_walkmeInternals.ctx}).call(window)},function(i,e,t){!function(){function n(e,t){this._object=undefined,this._name=e,this._ctx=t,this.properties={strategy:o.defaults.strategy,factory:o.defaults.factory,injector:o.defaults.injector,load:o.defaults.load,wasReady:!1,initialize:!0}}n.prototype.name=function(){return this._name},n.prototype.asFactory=function(e,t){return t!=undefined&&this.type(t),this.factory(e),this},n.prototype.loadDependencies=function(e,t){return t!=undefined&&this.dependencies(t),this.load(e),this},n.prototype.asFunction=function(e){return this.asFactory(o.factory.func,e)},n.prototype.asInstance=function(e){return this.asFactory(o.factory.instance,e)},n.prototype.asCtor=function(e){return this.asFactory(o.factory.constructor,e)},n.prototype.asSingleton=function(){return this.strategy(o.strategy.singleton)},n.prototype.asProto=function(){return this.strategy(o.strategy.proto)},n.prototype.injectToCtor=function(){return this.injector(o.injector.ctor)},n.prototype.injectToReady=function(){return this.injector(o.injector.ready)},n.prototype.injectToProperty=function(){return this.injector(o.injector.property)},n.prototype.flatDependencies=function(e){return this.loadDependencies(o.load.flat,e)},n.prototype.recursiveDependencies=function(e){return this.loadDependencies(o.load.recursive,e)},n.prototype.useOnce=function(){var e=this.getObject;return this.getObject=function(){return this._ctx.map[this.name()]=null,e.apply(this,arguments)},this},n.prototype.depsDictionary=function(e){return arguments.length?(this.properties.depsDictionary=e,this):(this.properties.depsDictionary||this.depsDictionary(this._ctx.resolve(this)),this.properties.depsDictionary)},n.prototype.create=function(e,t,n){n=n||o.load.recursive;var r=this.properties.strategy.test(this._object,n);if(t)return r;r&&(e=this.properties.injector.create(e||this.properties.args,this,this._ctx,n));var i=this.properties.strategy.create(this._object,this.properties.factory,this.properties.type,e,this._ctx,this,n);return this._ctx.ready(i,this)},n.prototype.getObject=function(e){return this.create(undefined,undefined,e)},n.prototype.object=function(e){return arguments.length?(this._object=e,this):this.create()};for(var e=["load","wasReady","strategy","injector","type","dependencies","args","factory","initialize"],t=0;t<e.length;t++){r(e[t])}function r(t){n.prototype[t]=function(e){return arguments.length?(this.properties[t]=e,this):this.properties[t]}}var o=function(s){(s=s||{}).version="0.3.3";function l(e,t,n,r,i){var o=e(t,n,i),a=r.decorators[i.name()]!==undefined?r.decorators[i.name()]:r.fallbackCtx&&r.fallbackCtx.decorators[i.name()];if(a)for(var s=0;s<a.length;s++)o=a[s](o);return o}return s.logger=function(e,t){},s.log=function(e,t,n){t&&(e="[class="+t.name()+"] "+e),s.logger("DI - "+e,n||4)},s.error=function(e,t,n){s.log(e,t,n)},s.createContext=function(t){var n,a={map:{},decorators:{},fallbackCtx:t};return a.decorate=function(e,t){a.decorators[e]||(a.decorators[e]=[]),a.decorators[e].push(t)},a.entry=function(e){return a.map[e]!==undefined?a.map[e]:t&&t.entry(e)},a.register=function(e,t,n){var r=s.entry(e,a).type(t).args(n);return a.map[e]=r},a.has=function(e){return null!=a.entry(e)},a.remove=function(e){return!!a.has(e)&&!(a.map[e]=null)},a.isEntryRemoved=function(e){return null===a.entry(e)},a.get=function(e,t){return a.isEntryRemoved(e)&&s.error("Object["+e+"] was removed"),a.has(e)||s.error("Object["+e+"] is not registered"),a.entry(e).getObject(t)},a.create=function(e,t){if(a.entry(e).strategy()==s.strategy.singleton&&s.error("Attempt to create singleton object ["+e+"]"),a.has(e))return a.entry(e).create(t);s.error("Object["+e+"] is not registered")},a.initialize=function(){function t(e){var t=a.entry(e);t?t.initialize()&&t.strategy().initialize()&&a.get(e):s.error("Object["+e+"] is not registered")}return function(e){if(e)t(e);else for(var e in a.map)t(e)}}(),a.clear=function(){this.map={},this.decorators={},this.fallbackCtx=undefined},a.resolve=function(r){var i=r.load(),o={};return a.eachDependency(r.dependencies(),function(e,t){var n=a.get(e,i);a.ready(n,a.entry(e)),null==n&&s.error("Dependency ["+r.name()+"."+t+"]->["+e+"] can not be satisfied",r),o[t]=n}),o},a.eachDependency=function(e,t){if(e)for(var n=function(e){for(;0<=e.indexOf(" ");)e=e.replace(" ","");return e}(e).split(","),r=0;r<n.length;r++){var i=n[r];if(i){var o=s.dependencyExpression(i);try{t(o.name,o.property,r)}catch(a){s.error("An exception was thrown while the DI tried to resolve class '"+o.name+"'. Check the class name, or if it was registred correctly. \r\n inner exception: \r\n"+a.message)}}}},a.ready=function(e,t){if(null===t&&e)return e;var n=t.wasReady();if(t.wasReady(!0),!n){var r=a.createCallback();r&&r(t.name(),e),e&&"function"==typeof e.ready&&e!=window&&e!=window.document&&e!=window.document.body&&(t.wasReady(!0),e.ready.apply(e,t.injector().ready(e,t)||[]))}return e},a.createCallback=function(e){return 0==arguments.length?n:(n=e,a)},a},s.dependencyExpression=function(e){var t={},n=e,r=e;if(0<e.indexOf("=")){var i=e.split("=");n=i[0],r=i[1]}return t.name=r,t.property=n,t},s.entry=function(e,t){return new n(e,t)},s.strategy={proto:{test:function(e,t){return!t||t()},initialize:function(){return!1},create:function(e,t,n,r,i,o,a){return e=l(t,n,r,i,o),a()&&o.injector().ready(e,o),o.depsDictionary(undefined),o.wasReady(!1),e}},singleton:{test:function(e,t){return!e&&(!t||t())},initialize:function(){return!0},create:function(e,t,n,r,i,o,a){return e||(e=l(t,n,r,i,o),o.object(e),o.wasReady(!0),a()&&o.injector().ready(e,o),o.wasReady(!1)),e}}},s.factory={constructor:function(e,t,n){return t instanceof Array?t.length<=10?new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]):t.length<=30?new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28],t[29]):void s.error("trying to create a class with too many args!",n):new e(t)},func:function(e,t,n){return t instanceof Array?e.apply(e,t):e(t)},instance:function(e,t,n){return e}},s.injector={property:{create:function(e,t,n){return e},ready:function(e,t){var n=t.depsDictionary();for(var r in n)e[r]=n[r];var i=t.args();i==undefined||n.hasOwnProperty("args")||(e.args=i)}},ready:{create:function(e,t,n){return e},ready:function(e,t){var n=t.args(),r=[],i=t.depsDictionary();if(a.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),n){n=n instanceof Array?n:[n];for(var o=0;o<n.length;o++)r.push(n[o])}return r}},ctor:{create:function(e,t,n){var r=[],i=t.depsDictionary();if(n.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),e){e=e instanceof Array?e:[e];for(var o=0;o<e.length;o++)r.push(e[o])}return r},ready:function(e,t){}}},s.load={flat:function(e,t,n){return!1},recursive:function(e,t,n){return!0}},s.defaults={strategy:s.strategy.singleton,factory:s.factory.constructor,injector:s.injector.ctor,load:s.load.recursive},s}(),a=o.createContext();i.exports=function(e,t){e.di=o,e.ctx=t?o.createContext(t):a}}()},function(e,t){
/*! wm-simple-nlp - v1.0.8 - 2016-09-13
* Copyright (c) 2016 WalkMe; Licensed ISC */
var n;!function(e){var r,i,t;function o(e){return 0===e.search("[a-zA-Z]")?i.Alphabet:0===e.search("[0-9]")?i.Digit:i.Other}(t=i||(i={}))[t.Digit=0]="Digit",t[t.Alphabet=1]="Alphabet",t[t.Other=2]="Other",e.setJQuery=function(e){r=e},e.isPhraseHuman=function(e){var t=new l,n=new a(e);return t.isHuman(n)};var a=function(){function e(e){this.words=[],this.raw=e,this.buildWords()}return e.prototype.buildWords=function(){this.splitCategories()},e.prototype.addWord=function(e){var n=this;if(e=r.trim(e))if(o(e[0])!==i.Alphabet)this.words.push(e);else{var t=this.splitCamelCase(e);r.each(t,function(e,t){return n.words.push(t.toLowerCase())})}},e.prototype.splitCamelCase=function(e){return e.replace(/([a-z](?=[A-Z]))/g,"$1 ").split(" ")},e.prototype.splitCategories=function(){for(var e,t=o(this.raw[0]),n=0,r=0;r<this.raw.length;r++){var i=o(this.raw[r]);i!=t&&(e=this.raw.substring(r,n),this.addWord(e),n=r,t=i)}e=this.raw.substring(n,r+1),this.addWord(e)},e}();e.Sentence=a;var s=function(){function e(){var t=this;this.WHITE_LIST=["html","css","btn","js","http","a"],this.VOWELS="aeiou",this.pointers={},this.pointers[i.Alphabet]=function(e){return t.alphabetPred(e)},this.pointers[i.Digit]=function(e){return t.numberPred(e)},this.pointers[i.Other]=function(e){return t.otherPred(e)}}return e.prototype.numberPred=function(e){return!1},e.prototype.otherPred=function(e){return!0},e.prototype.alphabetPred=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(-1==this.VOWELS.indexOf(r)?t++:t=0,5<=t)return!1}return!0},e.prototype.isHuman=function(e){if(this.contains(this.WHITE_LIST,e))return!0;var t=o(e[0]);return(0,this.pointers[t])(e)},e.prototype.contains=function(e,t){return-1!==r.inArray(t,e)},e}();e.WordClassifier=s;var l=function(){function e(){}return e.prototype.isHuman=function(e){if(e.raw.length<=2)return!1;if(this.isUrl(e))return!1;var n=new s,t=r.map(e.words,function(e,t){return n.isHuman(e)});return this.all(t)},e.prototype.all=function(e){for(var t=e.length-1;0<=t;t--)if(!e[t])return!1;return!0},e.prototype.isUrl=function(e){return 0==e.raw.indexOf("/")||0==e.raw.indexOf("http")},e}();e.SentanceClassifier=l}(n||(n={})),e.exports=n},function(e,t,n){var r,i;r=this,i=function(){var e=new(n(5));return{objectJpath:e,objectMapper:new(n(6))(e)}},"object"==typeof e.exports?e.exports=i:r.mapper=i},function(e,t){e.exports=function(){var l="@dot@",u=new RegExp(l,"g");this.getValue=function(e,t){for(var n=(s=t,a=t=s.replace(/(["']|&quot;|&#39;).*?\1/g,function(e){return e.replace(/\./g,l)}),t=a.replace(/[\'\"\]]|&quot;|&#39;/g,"").replace(/\[/g,".")).split("."),r=e,i=0;i<n.length;i++){var o=n[i].replace(u,".");if(r==undefined)return undefined;r=r[o]}var a;var s;return r},this.setValue=function(e,t,n){for(var r=t.split("."),i=0;i<r.length-1;i++){var o=r[i];e[o]||(e[o]={}),e=e[r[i]]}var a=r.length-1,s=r[a];e[s]=n}}},function(e,t){e.exports=function(l){this.merge=function(t,e,n){for(var r in n){var i=n[r],o=s(r);if(i.transform&&(o=i.transform(o)),!i.where||i.where(o,s)){var a="string"==typeof i?i:i.destination;l.setValue(e,a,o)}}function s(e){return l.getValue(t,e)}}}},function(e,t,n){var r=new(n(8)),i=new(n(9))(r),o=new(n(10)),a=new(n(11))(i,o),s=new(n(12))(o,a),l=new(n(13)),u=new(n(14))(s,l);e.exports={bizFlowConsts:r,bizFlowExtensions:i,baseGraphDfsService:u,baseGraphDfsServiceWithRevisiting:s}},function(e,t){e.exports=function(){this.FLOW_NODE_TYPE={UI:"UI",Action:"Action"},this.FLOW_NODE_ACTION_TYPE={Split:"Split",Redirect:"Redirect",WaitForCondition:"WaitForCondition",Stop:"Stop",Refresh:"Refresh",SetData:"SetData",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",ConnectToBizflow:"ConnectToBizflow",Survey:"Survey",Popup:"Popup",ErrorHandling:"ErrorHandling",OnPageAction:"OnPageAction",RestartSwt:"RestartSwt"}}},function(e,t){e.exports=function(t){function n(e){return e.Type==t.FLOW_NODE_TYPE.UI}function r(e){return!n(e)}function i(e,t){return r(e)&&e.ActionType==t}this.isUiNode=n,this.getNodeConnectors=function(e){if(n(e))return function(e){for(var t=[],n=0;n<e.UIElements.length;n++){var r=e.UIElements[n];t.push.apply(t,r.Triggers)}return t}(e);return t=e,t.Links;var t},this.isActionNode=r,this.getErrorHandlingConnectorIndex=function(e){if(i(e,t.FLOW_NODE_ACTION_TYPE.ErrorHandling))return e.Links.length-1},this.isActionNodeOfType=i}},function(e,t){e.exports=function(){function i(e,t,n,r,i,o){return{node:e,point:t,connectors:n,parentConnector:r,parentConnectorIndex:i,parentPoint:o}}this.createNodeData=function(e,t,n,r){return i(e,e,e.Links,t,n,r)},this.createUiElementData=function(e,t){var n=i(t.node,e,e.Triggers,t.parentConnector,t.parentConnectorIndex,t.parentPoint);return n.uiElement=e,n}}},function(e,t){e.exports=function(a,s){this.traverse=function(e,t){var n=e.node;if(a.isActionNode(n))t(e);else for(var r=0;r<n.UIElements.length;r++){var i=n.UIElements[r],o=s.createUiElementData(i,e);t(o)}}}},function(e,t){e.exports=function(f,p){this.runDfs=function(a,n,e){for(var s=!0,l={},u={},t=0;t<o.length;t++)i(o[t]);function c(e,t,n,r){if(e&&s){var i=a.Nodes[e],o=f.createNodeData(i,t,n,r);u.visitNode(o),p.traverse(o,d),u.afterNodeDescendantsVisited(o)}}function d(e){u.visitPoint(e);var t,n=(t=e).uiElement?t.node.Id+"-"+t.uiElement.Id:t.node.Id;if(!l[n]){l[n]=!0;for(var r=e.connectors,i=0;i<r.length;i++){var o=r[i];c(o.TargetFlowNodeId,o,i,e)}}u.afterPointDescendantsVisited(e)}function r(){}function i(e){var t=n[e]||r;u[e]=function(){s&&t&&(s=!1!==t.apply(null,arguments))}}c(e=e||a.RootFlowNodeId)};var o=["visitNode","visitPoint","afterPointDescendantsVisited","afterNodeDescendantsVisited"]}},function(e,t){e.exports=function(){var s,l;this.wrapHandlers=function(e){l={};for(var t=function(){},r=e.visitNode||t,n=e.afterNodeDescendantsVisited||t,i=0;i<u.length;i++){var o=u[i];e[o]=a(e[o])}function a(e){if(e)return function(){if(!s)return e.apply(null,arguments)}}e.visitNode=function(e){if(!s){var t,n=(t=e).node&&t.node.Id;if(!l[n])return l[n]=!0,r(e);s=e}},e.afterNodeDescendantsVisited=function(e){if(!s)return n(e);e==s&&(s=undefined)}};var u=["visitPoint","afterPointDescendantsVisited"]}},function(e,t){e.exports=function(r,i){this.runDfs=function(e,t,n){return i.wrapHandlers(t),r.runDfs(e,t,n)}}},function(e,t,n){var r,i;r=this,i=function(){return{DEPLOYABLE_TYPE:{Walkthru:0,Task:1,Launcher:2,LabelGroup:3,Survey:4,AbExperiment:5,Category:6,Content:7,Collection:8,Shuttle:9,Tag:10,TestCase:11,PreTestSet:12,Template:13,ShoutOut:14,TestSuite:16,ConditionBlock:17,BusinessSolution:19,Lesson:20,Course:21,TrackedPage:22,Spotlight:23,Tooltip:24,TrackedElement:25,SearchProviderUrl:26}}},"object"==typeof e.exports?e.exports=i:r.deployableConsts=i},function(e,t,o){var n,r;n=this,r=function(e){var t=o(17)(),n=o(18),r=o(19)(e,t),i=o(21)(r);return{eventBasedObject:t,idisplayer:n,uiComponentBase:r,popupBase:i,shoutOutBase:o(22)(i)}},"object"==typeof e.exports?e.exports=r:n.uiComponents=r},function(e,t){e.exports=function(){return n};var n=function(){function e(){this.eventBase=wmjQuery({})}return e.prototype.once=function(e,t){this.eventBase.one(e,t)},e.prototype.bind=function(e,t){this.eventBase.bind(e,t)},e.prototype.unbind=function(e,t){this.eventBase.unbind(e,t)},e.prototype.trigger=function(e,t){this.eventBase.trigger(e,t)},e}()},function(e,t){},function(e,t,n){var i,r=n(20)();e.exports=function(e,t){return i=e,function(n){function e(e){var t=n.call(this)||this;return t.LocalSVNRevision="$Rev: 4206 $",t._uiComponent=e,t._settings=e.Settings||{},t._variations=t.createVariations(),t._uiCreator=i.get("UICreator"),t}return r(e,n),e.prototype.getComponent=function(){return this._uiComponent},e.prototype.getUI=function(){return this._uiCreator.getUI()},e.prototype.createUi=function(){this._displayer=i.get("DisplayersFactory").get(this._uiComponent.DisplayerId,[this._uiComponent.Settings,this._uiComponent]);var e=this._displayer.getContainer(),t=e?e[0].document:document;this._uiCreator.setUI(this._uiComponent,this._variations,this.createConfig(),t,this),this.registerEvents(),this._displayer.setUiObject(this._uiCreator.getUI())},e.prototype.registerEvents=function(){},e.prototype.createVariations=function(){for(var e=i.get("UIVariations"),t=[],n=this._uiComponent.UIVariationsIds||[],r=0;r<n.length;r++)t.push(e.get(n[r]));return this._settings.variation&&t.push(this._settings.variation),t},e.prototype.createConfig=function(){return{}},e.prototype.append=function(){this._insert("append")},e.prototype.prepend=function(){this._insert("prepend")},e.prototype._insert=function(e){var t=this;this.trigger(e+"-begin");var n=wmjQuery.proxy(function(){t._displayer[e](wmjQuery.proxy(function(){return t.trigger(e+"-end")},t))},this);i.get("TemplatesFactory").addResources(this._uiComponent.UITemplateId,this._uiComponent.UITemplateVersion,this._variations,n)},e.prototype.destroy=function(){var e=this;this._isDead||(this.trigger("destroy-begin"),this._displayer.remove(wmjQuery.proxy(function(){e._isDead=!0,e.trigger("destroy-end")},this)))},e.prototype.show=function(){this.trigger("show-begin"),this._displayer.show(wmjQuery.proxy(function(){this.trigger("show-end")},this))},e.prototype.hide=function(){this.trigger("hide-begin"),this._displayer.hide(wmjQuery.proxy(function(){this.trigger("hide-end")},this))},e.prototype.toggle=function(){this._displayer.isVisible()?this.hide():this.show()},e}(t)}},function(e,t,n){var r,i;r=this,i=function(){return function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}},"object"==typeof e.exports?e.exports=i:r.typescriptHelper=i},function(e,t,n){var r=n(20)();e.exports=function(e){return function(n){function e(e,t){n.call(this,e),this.LocalSVNRevision="$Rev: 4206 $",this.CLASS_X_BUTTON="walkme-x-button",this._consts=t}return r(e,n),e.prototype.registerEvents=function(){n.prototype.registerEvents.call(this),this.registerXButton()},e.prototype.registerXButton=function(){var e=wmjQuery.proxy(function(){this.trigger("x-clicked"),this.destroy()},this);this._uiCreator.registerEvents("."+this.CLASS_X_BUTTON,"click",this._consts.MOBILE_COMMANDS.ACTION.libAction,{libAction:e},"Close")},e.prototype.createConfig=function(){var e=n.prototype.createConfig.call(this);return e.Id=this._uiComponent.Id,e.Name=this._uiComponent.Name,e.XButtonClass=this.CLASS_X_BUTTON,e.Settings=this._uiComponent.Settings,e},e}(e)}},function(e,t,n){var r=n(20)();e.exports=function(e){return function(s){function e(e,t,n,r,i,o){var a=s.call(this,o,r)||this;return a.LocalSVNRevision="$Rev: 4206 $",a.CLOSE_ACTIONS_TYPE="destroy",a.CLASS_ACTION_PREFIX="walkme-action-",a._actionsFactory=e,a._bbCodeParser=n,a._commonUtils=t,a._designTemplateHtmlGetter=i,a._actions=a.getActions(o),a._position=0==o.Settings.position?"top":"bottom",a}return r(e,s),e.prototype.getActions=function(e){return this.hasHtmlTemplate(e)?this.getActionsFromPlaceholderConfigs(e):this.getActionsFromActionsProperty(e)},e.prototype.getActionsFromPlaceholderConfigs=function(e){var t=[];if(!e.DesignTemplatePlaceholderConfigs)return t;for(var n=0;n<e.DesignTemplatePlaceholderConfigs.length;n++){var r=e.DesignTemplatePlaceholderConfigs[n],i=r.Config,o='[wm-action-placeholder="'+r.Name+'"]',a=this.getHandledAction(i,t.length,o);a&&t.push(a)}return t},e.prototype.getActionsFromActionsProperty=function(e){var t=[];if(!e.Actions)return t;for(var n=0;n<e.Actions.length;n++){var r=e.Actions[n],i=this.getHandledAction(r,t.length);i&&t.push(i)}return t},e.prototype.getHandledAction=function(e,t,n){if(void 0===n&&(n=undefined),e.IsActive)return e[this.isCloseAction(e)?this.CLOSE_ACTIONS_TYPE:e.Type]=!0,e.CssClass=this.generateActionClass(t,e),e.elementSelector=n||"."+e.CssClass,e},e.prototype.registerEvents=function(){s.prototype.registerEvents.call(this),this.registerActions()},e.prototype.registerActions=function(){for(var e=0;e<this._actions.length;e++){var t=this._actions[e],n=t.CssClass.replace(/-/gi,"_");t.Args=t.Args||{};var r=(t.Args.uiComponent=this)._actionsFactory.get(t.Type,t.Args,this.getInitiatorType(),this._uiComponent),i=r.args||{};i.libAction=this.getActionCallback(r);var o=r.mobileAction||this._consts.MOBILE_COMMANDS.ACTION.libAction;this._uiCreator.registerEvents(t.elementSelector,"click",o,i,n||"")}},e.prototype.getActionCallback=function(e){return wmjQuery.proxy(e.mobileAction?function(e){this.trigger("action-start",e.Type),this.destroy()}:function(e){this.trigger("action-start",e.Type),e.doAction(),e.Type!=this._consts.DEPLOYABLE_ACTION_TYPES.Close&&this.destroy()},this,e)},e.prototype.getInitiatorType=function(){},e.prototype.isCloseAction=function(e){var t=this._actionsFactory.get(e.Type).Type;return t===this._consts.DEPLOYABLE_ACTION_TYPES.Close||t===this._consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater},e.prototype.generateActionClass=function(e,t){return this.CLASS_ACTION_PREFIX+t.Type+"-"+e},e.prototype.createConfig=function(){var e=s.prototype.createConfig.call(this);return e.Title=this.handleText(this._uiComponent.Title),e.Description=this.handleText(this._uiComponent.Description),e.Actions=this.handleActions(this._actions),e.Position=this._position,e},e.prototype.handleText=function(e){return this._bbCodeParser.parse(this._commonUtils.nl2br(e),this._settings.v)},e.prototype.handleActions=function(e){if(e)for(var t=0;t<e.length;t++)e[t].Text=this.handleText(e[t].Text);return e},e.prototype.hasHtmlTemplate=function(e){return!!this._designTemplateHtmlGetter.get(e.DesignTemplateId)},e}(e)}},function(e,t,n){var r=n(24),i=n(26);e.exports={oldToNewConditionConverter:r,newToOldConditionConverter:i}},function(e,t,n){var o=n(25);e.exports=new function(){function i(e){return e?"Func"==e.nodeType?(r=e,{Type:o.NEW_CONDITION_NODE_TYPE.Condition,Id:r.ConditionId,Settings:{funcName:r.funcName,funcArgs:r.funcArgs}}):e.rightSon?(t=e,(n={Type:o.NEW_CONDITION_NODE_TYPE[t.nodeType],Nodes:[]}).Nodes.push(i(t.leftSon)),n.Nodes.push(i(t.rightSon)),n):i(e.leftSon):undefined;var t,n,r}this.convert=function(e){return e?{Root:i(e)}:undefined}}},function(e,t){e.exports={NEW_CONDITION_NODE_TYPE:{Condition:0,And:1,Or:2,Group:3}}},function(e,t,n){var s=n(25);e.exports=new function(){function a(e,t){switch(e.Type){case s.NEW_CONDITION_NODE_TYPE.Condition:return{nodeType:"Func",nodeDepth:t,ConditionId:(o=e).Id,funcName:o.Settings.funcName,funcArgs:o.Settings.funcArgs};case s.NEW_CONDITION_NODE_TYPE.Group:return i=t,a(e.Nodes[0],i+1);default:return r=t,{nodeType:(n=e).Type==s.NEW_CONDITION_NODE_TYPE.And?"And":"Or",nodeDepth:r,ConditionId:n.Id,leftSon:a(n.Nodes[0],r),rightSon:a(n.Nodes[1],r)}}var n,r,i,o}this.convert=function(e){return e?a(e,0):undefined}}},function(e,t,n){!function(){var e=t,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function l(e){this.message=e}(l.prototype=new Error).name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var t,n,r=String(e),i=0,o=s,a="";r.charAt(0|i)||(o="=",i%1);a+=o.charAt(63&t>>8-i%1*8)){if(255<(n=r.charCodeAt(i+=.75)))throw new l("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return a}),e.atob||(e.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new l("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r=s.indexOf(r);return a})}()},function(e,t,W){e.exports=function(){"use strict";function u(e){return"function"==typeof e}undefined;var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,i=undefined,o=undefined,s=function(e,t){d[r]=e,d[r+1]=t,2===(r+=2)&&(o?o(f):v())},e="undefined"!=typeof window?window:undefined,t=e||{},a=t.MutationObserver||t.WebKitMutationObserver,l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var e=setTimeout;return function(){return e(f,1)}}var d=new Array(1e3);function f(){for(var e=0;e<r;e+=2){var t=d[e],n=d[e+1];t(n),d[e]=undefined,d[e+1]=undefined}r=0}var p,g,h,m,v=undefined;function y(e,t){var n=arguments,r=this,i=new this.constructor(T);i[E]===undefined&&B(i);var o,a=r._state;return a?(o=n[a-1],s(function(){return M(a,i,o,r._result)})):O(r,i,e,t),i}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return A(t,e),t}a?(g=0,h=new a(f),m=document.createTextNode(""),h.observe(m,{characterData:!0}),v=function(){m.data=g=++g%2}):l?((p=new MessageChannel).port1.onmessage=f,v=function(){return p.port2.postMessage(0)}):v=e===undefined?function(){try{var e=W(!function(){var e=new Error("Cannot find module 'vertx'");throw e.code="MODULE_NOT_FOUND",e}());return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(f)}:c()}catch(t){return c()}}():c();var E=Math.random().toString(36).substring(16);function T(){}var w=void 0,C=1,b=2,I=new L;function _(e){try{return e.then}catch(t){return I.error=t,I}}function P(e,t,n){var r,i,o,a;t.constructor===e.constructor&&n===y&&t.constructor.resolve===S?(o=e,(a=t)._state===C?D(o,a._result):a._state===b?N(o,a._result):O(a,undefined,function(e){return A(o,e)},function(e){return N(o,e)})):n===I?(N(e,I.error),I.error=null):n===undefined?D(e,t):u(n)?(r=t,i=n,s(function(t){var n=!1,e=function(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}(i,r,function(e){n||(n=!0,r!==e?A(t,e):D(t,e))},function(e){n||(n=!0,N(t,e))},t._label);!n&&e&&(n=!0,N(t,e))},e)):D(e,t)}function A(e,t){var n;e===t?N(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?P(e,t,_(t)):D(e,t)}function k(e){e._onerror&&e._onerror(e._result),x(e)}function D(e,t){e._state===w&&(e._result=t,e._state=C,0!==e._subscribers.length&&s(x,e))}function N(e,t){e._state===w&&(e._state=b,e._result=t,s(k,e))}function O(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+C]=n,i[o+b]=r,0===o&&e._state&&s(x,e)}function x(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=undefined,i=undefined,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?M(n,r,i,o):i(o);e._subscribers.length=0}}function L(){this.error=null}var F=new L;function M(e,t,n,r){var i=u(n),o=undefined,a=undefined,s=undefined,l=undefined;if(i){if((o=function(e,t){try{return e(t)}catch(n){return F.error=n,F}}(n,r))===F?(l=!0,a=o.error,o.error=null):s=!0,t===o)return void N(t,new TypeError("A promises callback cannot return that same promise."))}else o=r,s=!0;t._state!==w||(i&&s?A(t,o):l?N(t,a):e===C?D(t,o):e===b&&N(t,o))}var R=0;function B(e){e[E]=R++,e._state=undefined,e._result=undefined,e._subscribers=[]}function U(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[E]||B(this.promise),n(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&D(this.promise,this._result))):N(this.promise,new Error("Array Methods must be provided an Array"))}function V(e){this[E]=R++,this._result=this._state=undefined,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof V?function(t,e){try{e(function(e){A(t,e)},function(e){N(t,e)})}catch(n){N(t,n)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return U.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===w&&n<e;n++)this._eachEntry(t[n],n)},U.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===S){var i=_(t);if(i===y&&t._state!==w)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===V){var o=new n(T);P(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},U.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===w&&(this._remaining--,e===b?N(r,n):this._result[t]=n),0===this._remaining&&D(r,this._result)},U.prototype._willSettleAt=function(e,t){var n=this;O(e,undefined,function(e){return n._settledAt(C,t,e)},function(e){return n._settledAt(b,t,e)})},V.all=function(e){return new U(this,e).promise},V.race=function(i){var o=this;return n(i)?new o(function(e,t){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},V.resolve=S,V.reject=function(e){var t=new this(T);return N(t,e),t},V._setScheduler=function(e){o=e},V._setAsap=function(e){s=e},V._asap=s,V.prototype={constructor:V,then:y,"catch":function(e){return this.then(null,e)}},V.polyfill=function(){var e=undefined;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(r){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(r){}if("[object Promise]"===n&&!t.cast)return}e.Promise=V},V.Promise=V}()},function(e,t,n){var r=new(n(30)),i=new(n(31)),o=new(n(32)),a=new(n(33)),s=new(n(34)),l=new(n(35)),u=new(n(36)),c=new(n(37)),d=new(n(38)),f=new(n(39)),p=new(n(40)),g=new(n(41)),h=new(n(42)),m=new(n(43)),v=new(n(44)),y=new(n(45)),S=new(n(46)),E=new(n(47)),T=new(n(48)),w=new(n(49)),C=new(n(50)),b=new(n(51)),I=new(n(52)),_=new(n(53)),P=new(n(54)),A=new(n(55));e.exports={conditionBuilderPreview:r,drawablePosition:i,stepTrigger:o,stepType:a,ENTITY_TYPE:s,surveyQuestionType:l,contentType:u,POPUP_BUTTON_ACTIONS:{NextDone:0,Start:1,Back:2,Cancel:3},designTemplateType:c,designTemplateCssClassPrefix:"wm-design-template-",smarttipMode:d,stickinessType:f,flowNodeType:p,searchProvider:g,screenshotMode:h,scrollType:m,deployableGroupType:v,teachMeCompletionType:y,teachMeQuestionType:S,templateEntityType:E,designTemplateDefaultFieldText:T,defaultSelectors:w,editorCommunication:C,publishEnvironment:b,userType:I,onPageActionType:_,designTemplateCategory:P,deployableDefaultAttributes:A}},function(e,t){e.exports=function(){var e={TYPES:{BAD_INPUT:-2,NO_INPUT:-1,TRUE:0,FALSE:1,CANNOT_ASSERT:2,CONTEXT_ERROR:3,CANT_INTERACT:4,DIFFERENT_RESULTS:5},TOOLTIPS:{"true-indicator":"The statement is true for the current user and page settings","false-indicator":"The statement is not true for the current user and page settings","not-defined-indicator":"Waiting. Complete the condition to evaluate the status","cannot-assert-indicator":"The validity of this statement can only be assessed when played","cannot-assert-context-error-indicator":"The validity of this statement cannot be determined because the related Switch Step cannot be played in current page","cannot-interact-error-indicator":"The validity of this statement cannot be determined because we can't interact with this page","different-results-indicator":"Different results from iframes"},INDICATOR_CLASSES:{}},t=e.INDICATOR_CLASSES;return t[e.TYPES.NO_INPUT]="no-input",t[e.TYPES.BAD_INPUT]="bad-input",t[e.TYPES.TRUE]="true",t[e.TYPES.FALSE]="false",t[e.TYPES.CANNOT_ASSERT]="cannot-assert",t[e.TYPES.CONTEXT_ERROR]="cannot-assert-context-error",t[e.TYPES.CANT_INTERACT]="cannot-interact-error",t[e.TYPES.DIFFERENT_RESULTS]="different-results",e}},function(e,t){e.exports=function(){return{Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}}},function(e,t){e.exports=function(){return{Nothing:0,Button:1,Click:2,Hover:3,PageChanged:4,Text:5,Delay:6,SelectAny:7,SelectValue:8,Swipe:9,PeerStep:10,Custom:11,BbCode:12}}},function(e,t){e.exports=function(){return{Simple:0,Popup:1,Action:2}}},function(e,t){e.exports=function(){return{step:0,launcher:1,conditionBuilder:2,smartTip:3,balloon:4,balloonTrigger:5,flowNode:6,flowLink:7,smartTipUiComponent:8,conditionNode:9,trackedElementsSet:10,businessSolution:11,trackedElement:12,onScreenElement:13,shoutout:17,surveyMessage:18}}},function(e,t){e.exports=function(){return{FreeText:0,RadioButtons:1,CheckBoxes:2,PersonalDetails:3}}},function(e,t){e.exports=function(){return{Article:0,Video:1}}},function(e,t){e.exports=function(){return{Shared:0,Copied:1,Specific:2}}},function(e,t){e.exports=function(){return{Info:0,Validation:1,InfoAndValidation:2}}},function(e,t){e.exports=function(){return{soft:0,strong:1}}},function(e,t){e.exports=function(){return{UI:0,Action:1}}},function(e,t){e.exports=function(){return{NoAction:-1,WalkMe:0,Google:1,Bing:2,Desk:3,Zendesk:4,Custom:5,SalesForce:6,Parature:7}}},function(e,t){e.exports=function(){return{Regular:0,Blurred:1,None:2}}},function(e,t){e.exports=function(){return{Animated:0,Normal:1,None:2}}},function(e,t){e.exports=function(){return{Label:0,Category:1,Collection:2,Tag:3,Course:4,Lesson:5}}},function(e,t){e.exports=function(){return{byComplete:0,byGoal:1}}},function(e,t){e.exports=function(){return{SingleSelection:0,MultipleSelection:1}}},function(e,t){e.exports=function(){return{balloon:0,popup:17}}},function(e,t){e.exports=function(){return{TITLE:"Put your title here",CONTENT:"Put your text here",ACTION_BUTTON:"Action",CLOSE_BUTTON:"Close",ACTION_PLACEHOLDER:"Click Here",X_BUTTON:"x",NEXT_BUTTON:"Next",BACK_BUTTOM:"Back"}}},function(e,t){e.exports=function(){return{embedInContainerSelector:"dialog[open], .modal-dialog .modal-content"}}},function(e,t){e.exports=function(){return{communicators:{electronSocketIO:"electronSocketIO",electronMainToRenderer:"electronMainToRenderer",electronRendererToMain:"electronRendererToMain",electronRendererToEditor:"electronRendererToEditor",editorExtensionSocketIO:"editorExtensionSocketIO",editorExtensionBackgroundToContent:"editorExtensionBackgroundToContent",editorExtensionContentToBackground:"editorExtensionContentToBackground",editorExtensionContentToPageScript:"editorExtensionContentToPageScript",editorToElectron:"editorToElectron",pageScriptToContent:"pageScriptToContent"},destinations:{electronMain:"electronMain",electronRenderer:"electronRenderer",editorExtensionBackground:"editorExtensionBackground",editorExtensionContent:"editorExtensionContent",allEditorExtensionContents:"alleditorExtensionContents",pageScript:"pageScript",allPageScripts:"allPageScripts",editor:"editor"},actions:{editorAPI:"wm.editorAPI",takeScreenshot:"takeScreenshot",executeDynamicAction:"wm.executeDynamicAction",tabSelect:"wm.TabSelect",tabClose:"wm.TabClose",windowSelect:"wm.WindowSelect",keyUp:"wm.keyUp",topDomContentLoaded:"wm.topDomContentLoaded",contentApiInit:"contentScriptApi/init/all",contentApiDestroy:"contentScriptApi/destroy/all",setDataEntry:"dataService/setEntry/all",initFramescripts:"INIT_FRAMESCRIPT",frameScriptCreated:"wm.framescriptCreated",destroyFramescripts:"DESTROY_FRAMESCRIPT",socketConnect:"wm.socketConnect",socketDisconnect:"wm.socketDisconnect",socketsConnected:"wm.socketsConnected",socketsDisconnected:"wm.socketsDisconnected",socketStatus:"WM.socketStatus",getBrowserLeft:"getBrowserLeft",openUrl:"urlOpener",openUrlInNewTab:"wm.openUrlInNewTab",maximizeBrowser:"maximizeBrowser",minimizeBrowser:"minimizeBrowser",restoreBrowser:"restoreBrowser",focusBrowser:"focusBrowser",log:"log",appStart:"wm.appStart",extensionDownloader:"extensionDownloader",takeEditorScreenshot:"wm.takeEditorScreenshot",shutdownEditorWindow:"wm.shutdownEditorWindow",shutdownEditor:"wm.shutdownEditor",reloadEditorWindow:"wm.reloadEditorWindow",copyToClipboard:"copyUrlToClipboard",updateLayoutButton:"wm.updateLayoutButton",getEditorSize:"wm.getEditorSize",authorized:"WM.authorized",unauthorized:"WM.unauthorized",authorize:"WM.authorize",newConnection:"wm.newConnection",customProtocolCalled:"wm.customProtocolCalled",dockEditorWindow:"dockEditorWindow",minimizeEditorWindow:"minimizeEditorWindow",maximizeEditorWindow:"maximizeEditorWindow",rearrangeLayout:"rearrangeLayout",updateUserPreferences:"wm.updateUserPreferences",activeSocketsChanged:"wm.activeSocketsChanged",requestWorkMode:"requestWorkMode",requestState:"requestState",pageNotSynced:"wm.PageNotSynced",afterLibInjectionToTopDocument:"wm.afterLibInjectionToTopDocument",afterLibInjectedOnAnyDocument:"wm.afterLibInjectedOnAnyDocument",libModeExited:"wm.libModeExited",libRemoved:"wm.libRemoved",errorHappened:"wm.errorHappened",captureConfigChanged:"wm.captureConfigChanged",beforeExecutingFlowStage:"wm.libEvent.beforeExecutingFlowStage",afterExecutingFlowStage:"wm.libEvent.afterExecutingFlowStage",changeWindowSize:"wm.changeWindowSize",getVersions:"wm.getVersions"},channels:{wmEvent:"WMEvent",logs:"WMLogs",routes:"WMRoutes",actions:"WMActions"},extensionDownloader:{openUrl:"openUrl",copyToClipboard:"copyToClipboard"}}}},function(e,t){e.exports=function(){return{PRODUCTION:0,PREVIEW:1,TEST:3,SUCCESS:32}}},function(e,t){e.exports=function(){return{NO_MATCH:null,INTERNAL:0,PAYING:1,SE:2,USED_TO_BE_PAYING:3,USED_TO_BE_SE:4}}},function(e,t){e.exports=function(){return{Click:"Click",Tap:"Tap",Hover:"Hover",Swipe:"Swipe",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue"}}},function(e,t){e.exports=function(){return{AnnouncementBar:0}}},function(e,t){e.exports=function(){var e={simpleStep:2147483630,popupStep:2147483631,shoutOut:2147483632,icon:2147483627};return e.launcher=e.icon,e.smarttip=e.icon,{zIndex:e}}},function(e,t,n){var r=n(57),i=n(58),o=n(59),a=n(60);e.exports={TemplateWrap:r,TopArrow:i,CssResetRules:o,ShoutOutTemplateWrap:a}},function(e,t){e.exports="<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 {{designTemplateCssClass}}' style='{{{cssReset}}} width: auto; min-width: 190px; position: absolute; direction: {{direction.basic}};'><div class='walkme-custom-balloon-mid-div' style='{{{cssReset}}} direction: {{direction.basic}}; position: relative; {{#shadow}}-webkit-box-shadow: {{shadow}}; -moz-box-shadow: {{shadow}}; box-shadow: {{shadow}};{{/shadow}} font-family: {{{font}}}; border-radius:{{radiuses.balloon}}; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='{{{cssReset}}} direction: {{direction.basic}}; background-color:{{colors.mainBg}}; border:{{border.size}} solid {{colors.border}}; border-radius:{{radiuses.balloon}}; border-{{position.side}}: none; overflow: hidden;'><div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='{{{cssReset}}} font-size: 12px; color: {{colors.xBtn}}; position: absolute; {{direction.oppositeSide}}: 0px; top: 0px; padding-{{direction.oppositeSide}}: {{xBtn.marginHorizental}}; margin-top: {{xBtn.marginTop}}; cursor: pointer;font-weight:normal;' title='{{data.balloonCloseTooltip}}'>&#215;</div>{template}</div></div><div class='walkme-custom-side-border' style='{{{cssReset}}} background-color:{{colors.buttonBg}}; width: 4px; height: 100%;  top:0px; {{direction.side}}:0px; border:{{border.side.size}} solid {{colors.buttonBg}}; border-{{direction.oppositeSide}}: none; border-top: none; border-bottom: none;position: absolute;border-radius: 5px 0 0 5px;'></div></div>"},function(e,t){e.exports="<div class='walkme-custom-balloon-arrow walkme-custom-balloon-arrow-bottom walkme-custom-balloon-arrow-outer walkme-custom-balloon-arrow-outer-bottom {{designTemplateCssClass}} SkipThisFixedPosition' style='width: 0px; height: 0px; border-width: 0px 11px 11px; border-style: solid outset solid solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: rgb(198, 198, 198); border-left-color: transparent; border-image: initial; line-height: 0; position: absolute; top: 137px; left: 319px;'></div><div class='walkme-custom-balloon-arrow walkme-custom-balloon-arrow-bottom walkme-custom-balloon-arrow-inner walkme-custom-balloon-arrow-inner-bottom {{designTemplateCssClass}} SkipThisFixedPosition' style='width: 0px; height: 0px; border-width: 0px 10px 10px; border-style: solid outset solid solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: rgb(255, 255, 255); border-left-color: transparent; border-image: initial; line-height: 0; position: absolute; top: 138px; left: 320px;'></div>"},function(e,t){e.exports="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit; letter-spacing: normal; text-transform: none; outline: invert none medium; width: auto; box-shadow:none; text-shadow:none; border-top: none; border-right: none; border-bottom: none; border-left: none; position: static; top: auto; left: auto; transition: none;"},function(e,t){e.exports='<div class="wm-outer-div wm-shoutout wm-shoutout-{{Id}} wm-template-bg {{designTemplateCssClass}}" id="wm-shoutout-{{Id}}" style="z-index: 2147483630;">{template}</div>'},function(e,t,n){var r=n(62);e.exports={abPermutation:{currentPermutation:{key:"wm-ABPer",expiry:r.twoYears},forcedPermutation:{key:"wm-frcd",expiry:r.twoYears},permutationOverride:{key:"wm-force-permutation",expiry:r.twoYears}},abTesting:{shouldLoadWalkme:{key:"wm-absl",expiry:r.twoYears},shouldShowWidget:{key:"wm-abss",expiry:r.twoYears}},abTestingGoals:{endUserUniqueKey:{key:"wm_abg_"}},analytics:{lastAuditedUser:{key:"wm-ueuT",expiryFunc:r.todayFunc}},autoStart:{repeat:{key:"wm-ASRep"}},wmDebugger:{config:{key:"wm-ftr-cnf",expiry:r.oneYear},state:{key:"wm-ftr",expiry:r.oneYear}},endUserLogging:{auditFreq:{key:"wm-euaf",expiryFunc:r["60times"]}},endUser:{guid:{key:"wm-ueug",expiry:r.twoYears},forcedGenerate:{key:"wm-fgug",expiry:r.twoYears}},goals:{blocked:{key:"wm-gb",expiry:r.oneDay}},hiddenIframe:{popupHackTries:{key:"wm-popup",expiry:r.twoYears}},publishData:{lastDataVersion:{key:"wm-ldv",expiry:r.twoYears}},serverDataSender:{serverSick:{key:"wm-sk"},serverSickAttempts:{key:"wm-sat"},serverSickTimestamp:{key:"wm-sst"}},serverStorage:{invalidateIntervalKey:{key:"ss_ii"},currentEndUserGuid:{key:"wm-ceug",expiry:r.twoYears},currentEnvironment:{key:"wm-cenv",expiry:r.twoYears},lastGetDataTime:{key:"wm-lgt",expiry:r.oneYear}},versions:{appVersion:{key:"wm-av",expiry:r.oneYear},appWasUpdated:{key:"wm-awu",expiry:r.oneYear}},visits:{numberOfVisits:{key:"wm-nov",expiry:r.oneYear},lastVisit:{key:"wm-lv",expiry:r.oneYear}},passOwnership:{newWindowTime:{key:"wm-cond-win",expiry:r.oneHour},stopOwnership:{key:"wm-cdstop",expiry:2},play:{key:"wm-cdplay",expiry:r.oneHour}},tabbedOwnership:{priorityCheck:{key:"wm-po-pc",expiry:r.oneHour},lastPriority:{key:"wm-po-p",expiry:r.oneHour},currentOwner:{key:"wm-po-r",expiry:r.oneHour},prioritiesQueue:{key:"wm-po-q",expiry:r.oneHour},priority:{key:"priority"}},remindMeLater:{remindMeLater:{key:"wm-RML"}},attentionGrabber:{data:{key:"wm-ag-d",expiry:r.twoYears},sessionLength:{key:"wm-ag-sl"},repeat:{key:"wm-ag-rep"}},engagementRules:{uniqueData:{key:"wm-engagementRules",expiry:r.thirtyMinutes},fileExists:{key:"wm-engagementRulesFileExists",expiry:r.oneWeek}},flow:{stack:{key:"wm-flow-stack",expiry:r.tenMinutes},initiator:{key:"wm-flow-initiator",expiry:r.tenMinutes},lastStage:{key:"wm-nls",expiry:r.thirtyMinutes},beforePlay:{key:"wm-flw-preplay",expiry:r.oneMonth}},language:{current:{key:"wm-lang",expiry:r.oneYear}},session:{session:{key:"wm-ssn",expiry:r.thirtyMinutes},sessionCreationTime:{key:"wm-ssn-ct"}},heartbeat:{eventStorage:{key:"wm-hb"},backoffTimer:{key:"wm-hb-bt",expiry:r.thirtyMinutes}},teachMe:{quizResult:{key:"wm-lms-quiz-res",expiry:r.twoYears}},walkthru:{waitForOtherWindow:{key:"wm-wfow",expiry:r.tenMinutes},persistenceData:{key:"wm-prsst",expiry:r.tenMinutes}},survey:{repeat:{key:"wm-SrvRep",expiry:r.tenMinutes}},whitelist:{general:{key:"wm-wl"}},storage:{dataPrefix:{key:"wm-dt"},numberOfEntries:{key:"wm-ne"}},typedDataSender:{nextItemNumber:{key:"wm-nx"}},todoList:{endUserUniqueKey:{key:"wm_ct_"},progressPercentDataKey:{key:"wm_ct_pp",expiry:r.oneDay}},walkmeVisibleReporter:{walkmeVisibleReported:{key:"wm-wmv",expiry:r.oneDay}},flowSurveyActivator:{surveyRepeat:{key:"wm-SrvWtRep-"}},walkthruSurveyActivator:{surveyRepeat:{key:"wm-SrvWtRep-"}},smartTipSet:{initiator:{key:"wm-smtp-init",expiry:r.tenMinutes}},superScript:{loadSuperScript:{key:"wm-lss",expiry:r.oneDay}}}},function(e,t){e.exports={todayFunc:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0),n=Math.floor((t.getTime()-e.getTime())/1e3);0==n&&(n=1);return n},oneHour:3600,oneDay:86400,oneWeek:604800,oneMonth:2678400,oneYear:31536e3,tenMinutes:600,thirtyMinutes:1800,twoYears:63072e3,"60times":function(e){return 60*e}}},function(e,t){e.exports={decode:function(e){return e=(e=(e=(e=(e=(e=e.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&")).replace(/&gt;/gi,">")).replace(/&lt;/gi,"<")}}},function(e,t,n){function r(o){this.decodeJsonNodes=function(t,n){return function e(t,n){n=n||0;if(10<n)throw new Error("decodeHtml: json is too deep, defensively throwing: "+t);for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];"string"==typeof i&&(t[r]=o(i)),"object"==typeof i&&e(i,n+1)}}(t)}}e.exports=function(e){return e||(e=n(63).decode),new r(e)}},function(e,t,n){(function(){var s=n(66),l={init:function(){var e=s.get("ActionClickedEventBinder"),t=s.get("DefaultPlaceHolderConfigsCreator"),n=s.get("DesignTemplateHtmlGetter"),r=s.get("DesignTemplates"),i=s.get("PlaceholdersReplacer"),o=s.get("SpecificEntityDesignTemplateCssClassGetter"),a=s.get("XButtonRemover");l.addActionClickedEventBinder=e.add,l.createDefaultPlaceholderConfigs=t.createPlaceHolderConfigs,l.getDesignTemplateHtml=n.get,l.designTemplates=r.value,l.setDesignTemplates=r.set,l.resetDesignTemplates=r.reset,l.getDesignTemplateById=r.getDesignTemplateById,l.replacePlaceholders=i.replace,l.getSpecificEntityDesignTemplateCssClass=o.get,l.removeXButtonIfShould=a.removeIfShould},services:["ActionClickedEventBinder","DefaultPlaceHolderConfigsCreator","DesignTemplateHtmlGetter","DesignTemplates","PlaceholdersReplacer","SpecificEntityDesignTemplateCssClassGetter","XButtonRemover"],types:[]};n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(67).registerApi(l,s),e.exports=l}).call(window)},function(e,t,n){(function(){e.exports=n(67).create()}).call(window)},function(e,t,n){(function(r){(function(){e.exports={create:function(){var e={};return n(2)(e,r),e.ctx},registerApi:function(e,n){e.services&&wmjQuery.each(e.services,function(e,t){r.register(t).asFunction(function(){return n.get(t)})}),e.types&&wmjQuery.each(e.types,function(e,t){r.register(t).asProto().asFunction(function(e){return n.create(t,e)})})}}}).call(window)}).call(this,n(1))},function(e,t,n){(function(){n(66).register("ActionClickedActivatedObjectGetter").asCtor(function(r,i){this.get=function(e){var t={};if(!e.Args)return t;var n=r.ACTION_TO_DEPLOYABLE_DATA[e.Type];n&&(t.objectId=e.Args[n.deployableIdField],t.objectName=i.get(n.deployableType).getById(t.objectId).Name);return t}}).dependencies("Consts, DeployablesManagerFactory")}).call(window)},function(e,t,n){(function(){n(66).register("ActionClickedEventBinder").asCtor(function(s,l,e,u,c,t){var d;this.add=function(e,t,n){f[e]={appType:t,getPlayGuid:n}},this.bind=function(e,t){e.bind("click",(n=t,r=n.placeholderConfiguration,i=n.initiatorData,o=f[r.EntityType],a=o.getPlayGuid?o.getPlayGuid():p,function(){var e=c.get(r.Config);s.postEvent(l.EVENT_SENDER_EVENT_TYPES.ActionClicked,{type:l.EVENT_SENDER_EVENT_APPS.Action,oId:r.Id,oName:r.Name,owId:r.EntityId,owType:o.appType,owName:function(e,t){var n;switch(e){case d.shoutout:n=t.Name;break;case d.step:n=t.StepTitle||t.StepText;break;case d.balloon:n=t.Title||t.Text}return n}(r.EntityType,i),pId:a,aType:u.getDataActionType(r.Config.Type),aAppType:u.getDataActionAppType(r.Config.Type),aoId:e.objectId,aoName:e.objectName})}));var n,r,i,o,a};var f,p=-1;d=e.ENTITY_TYPE,(f={})[d.shoutout]={appType:l.EVENT_SENDER_EVENT_APPS.ShoutOut},f[d.balloon]={appType:l.EVENT_SENDER_EVENT_APPS.BizFlowStep,getPlayGuid:t.getPlayGuid}}).dependencies("EventSender, Consts, SharedConsts, EventDataTypesProvider, ActionClickedActivatedObjectGetter, FlowDataPersister")}).call(window)},function(e,t,n){(function(){n(66).register("DefaultPlaceHolderConfigsCreator").asCtor(function(e,s){this.createPlaceHolderConfigs=function(e,t,n){var r=s.get(undefined,e),i=r&&wmjQuery("<div></div>").html(r),o={Name:i?i.find(l).attr(c):"title",Config:{content:t}},a={Name:i?i.find(u).attr(c):"content",Config:{content:n}};return[o,a]};var l="[wm-title]",u="[wm-content]",c="wm-placeholder"}).dependencies("DesignTemplates, DesignTemplateHtmlGetter")}).call(window)},function(e,t,n){(function(){n(66).register("DesignTemplateHtmlGetter").asCtor(function(i){this.get=function(e,t){if(!(e=e||t!=undefined&&i.defaults[t]))return;for(var n=0;n<i.value.length;n++){var r=i.value[n];if(r.id==e)return r.html}}}).dependencies("DesignTemplates")}).call(window)},function(e,t,n){(function(){n(66).register("DesignTemplates").asCtor(function(t){var n,r=this;function i(){r.value=[],r.defaults={},n={}}function e(e){e&&(i(),t.foreach(e,function(e){e&&(r.value.push(e),(n[e.id]=e).isDefault&&(r.defaults[e.entityType]=e.id))}))}r.reset=function(){e([])},r.set=e,r.getDesignTemplateById=function(e){return n[e]},i()}).dependencies("ArrayUtils")}).call(window)},function(e,t,n){(function(){n(66).register("EventDataTypesProvider").asCtor(function(e){this.getDataActionType=function(e){return r[e]},this.getDataActionAppType=function(e){return i[e]};var t=e.EVENT_SENDER_ACTIONS,n=e.EVENT_SENDER_EVENT_APPS,r={none:t.None,playBf:t.PlayBizFlow,playWt:t.PlayWalkthru,openMenu:t.OpenMenu,playContent:t.PlayResource,playShuttle:t.PlayShuttle,destroy:t.Close,remindMeNextTime:t.Close,remindMeNextDay:t.Close},i={playContent:n.Content,playBf:n.BizFlow,playShuttle:n.Shuttle,playWt:n.Walkthru}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(66).register("NamedActionPlaceholderReplacer").asCtor(function(l,u,c,d,f,p){this.replace=function(e,t,n,r){var i=e.element,o=t.Config;o.IsActive?(a=e,s=o,a.entityType==u.ENTITY_TYPE.step&&"destroy"==s.Type?i.addClass("walkme-action-close"):(e.entityType!==u.ENTITY_TYPE.shoutout&&function(e,t,n,r){var i={};c.extend(i,t.Args,r);var o=l.get(t.Type,i,n.type,n.initiator).doAction,a=d.wrapByEntityType(e.entityType,o,i,t);e.element.bind("click",a)}(e,o,n,r),p.get()||f.bind(i,{placeholderConfiguration:t,initiatorData:n.initiator}))):i.remove();var a,s}}).dependencies("ActionsFactory, SharedConsts, wmjQuery, PlaceholderActionWrapper, ActionClickedEventBinder, IsInEditor")}).call(window)},function(e,t,n){(function(){n(66).register("NamedDataPlaceholderReplacer").asCtor(function(i,o){this.replace=function(e,t,n){(function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])})(e,t.attributes||{}),function(e,t,n){if(t!=undefined){var r=i.parse(o.nl2br(t),n.bbCodeParserVersion);e.html(r)}}(e,t.content,n),function(e,t){if(t!=undefined){var n=e.attr("style"),r="";n&&(r=n),e.attr("style",r+";"+t)}}(e,t.css)}}).dependencies("BBCodeParser, CommonUtils")}).call(window)},function(e,t,n){(function(){n(66).register("NamedPlaceholderReplacer").asCtor(function(l,u){this.replace=function(e,t,n){var r=(i=e.html,o=t.Name,a="["+c+"='"+o+"'],["+d+"='"+o+"']",i.find(a).addBack().filter(a));var i,o,a;if(l.replace(r,t.Config,n),r.attr(d)==t.Name){var s={element:r,entityType:e.type};u.replace(s,t,n,e.actionArgs)}};var c="wm-placeholder",d="wm-action-placeholder"}).dependencies("NamedDataPlaceholderReplacer, NamedActionPlaceholderReplacer")}).call(window)},function(e,t,n){(function(){n(66).register("PlaceholderActionWrapper").asCtor(function(e){this.wrapByEntityType=function(e,t,n,r){for(var i=0;i<o.length;i++)if(o[i].getType()==e)return o[i].wrap(t,n,r);return t};var o=[];o.push(e)}).dependencies("ShoutOutPlaceholderActionWrapper")}).call(window)},function(e,t,n){(function(){n(66).register("PlaceholdersReplacer").asCtor(function(a,i){var s=/^[A-Za-z][A-Za-z0-9\-_:\\.]*$/;this.replace=function(e,t,n,r){(function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];o=i.Name,s.test(o)&&a.replace(e,i,n)}var o})(e,t,r),i.replace(e.html,n)}}).dependencies("NamedPlaceholderReplacer, VariablePlaceholderReplacer")}).call(window)},function(e,t,n){(function(){n(66).register("SpecificEntityDesignTemplateCssClassGetter").asCtor(function(r,i){this.get=function(e,t){if(!e)return;var n=e.DesignTemplateId||i.defaults[t];return n?r.designTemplateCssClassPrefix+n:undefined}}).dependencies("SharedConsts, DesignTemplates")}).call(window)},function(e,t,n){(function(){n(66).register("VariablePlaceholderReplacer").asCtor(function(){this.replace=function(e,t){for(var n in o){var r="["+n+"]",i=e.find(r).addBack().filter(r);i.prepend(t[o[n]])}};var o={"wm-variable-current-step":"passedVisibleSteps","wm-variable-total-steps":"totalVisibleSteps"}})}).call(window)},function(e,t,n){(function(){n(66).register("XButtonRemover").asCtor(function(n){this.removeIfShould=function(e,t){if(n.shouldDisplayX(t))return;e.find(".walkme-custom-balloon-close-button").remove()}}).dependencies("XButtonDisplayChecker")}).call(window)},function(e,t,i){(function(){var n=i(83),r={init:function(){var e=n.get("CustomCssSetter"),t=n.get("DesignTemplatesCalculatedCssGetter");r.setCustomCssIfNeeded=e.setCustomCssIfNeeded,r.getAllCustomCssProp=e.getAllCustomCssProp,r.setUiTemplates=e.setUiTemplates,r.getDesignTemplatesCalculatedCss=t.get},services:["CustomCssSetter","DesignTemplatesCalculatedCssGetter"],types:[]};i(84),i(85),i(67).registerApi(r,n),e.exports=r}).call(window)},function(e,t,n){(function(){e.exports=n(67).create()}).call(window)},function(e,t,n){(function(){n(83).register("CustomCssSetter").asCtor(function(d,f,p,g,h,m,v,y,S,E){var T,w;function C(e){for(var t="",n=0;n<e.length;n++){var r=e[n];r.Css&&(t+=r.Css)}return t}this.setCustomCssIfNeeded=function(e,t){if(!d.isWalkMeVisible()&&!t)return;y.raiseEvent(S.EVENTS.BeforeSettingCustomCss,{element:e});var n=f.get().CustomCss||"",r=C(p.htmlImages)||"",i=C(p.customImages)||"",o=function(){if(!w)return;var r="";return wmjQuery.safeEach(w,function(e,t){for(var n in t)t[n].ExternalCss&&(r+=t[n].ExternalCss)}),r}()||"",a=E.get()||"",s=r+i+n+o+a;if(l=s,!(l!=undefined&&0<l.length))return;var l;var u=g.getDirectHead(e);if(!u)return;var c="wm_custom_css_set";h.get()&&u.data(c,!1);if(!u.data(c))return function(e,t,n){try{return e=m.decodeHtml(e,["&",'"',"'",">"]),v.injectCss(e,"walkme-custom-css",t,null,"walkme-player-css"),t.data(n,!0),!0}catch(r){return!1}}(T=s,u,c)},this.getAllCustomCssProp=function(){return T},this.setUiTemplates=function(e){w=e}}).dependencies("WalkMeVisibilityChecker, SiteConfigManager, IconTemplates, DirectHeadProvider, IsInEditor, HtmlDecoder, ResourceManager, CommonEvents, Consts, DesignTemplatesCalculatedCssGetter")}).call(window)},function(e,t,n){(function(){n(83).register("DesignTemplatesCalculatedCssGetter").asCtor(function(e,t){this.get=function(){return t.map(e.value,function(e){return e.css}).join(" ")}}).dependencies("DesignTemplates, ArrayUtils")}).call(window)},function(e,t,s){(function(){var a=_walkmeInternals.ctx;a.register("ShuttlesManager").asCtor(s(87).ShuttlesManager).dependencies("Lib, Consts, win, TimerManager, WalkMeGoalsManager, ClickAuditManager, CommonUtils, PlayGuidGenerator,WalkmeVisibleReporter, HtmlDecoder, Logger, CommonEvents"),e.exports={init:function(){var e=a.get("DeployablesManagerFactory"),t=a.get("Consts"),n=a.get("WmInternals"),r=a.get("ShuttlesManager"),i=a.get("ShuttlesContainer"),o=a.get("DataFileDataLoader");new(s(90))(e,t,n,r,i,o).init()}}}).call(window)},function(e,n,r){(function(t){(function(){var e=function(p){function s(e,t,n,r,i,o,a,s,l,u,c,d,f){p.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Shuttle}),this.Consts=t,this.win=n,this.TimerManager=r,this.WalkMeGoalsManager=i,this.ClickAuditManager=o,this.CommonUtils=a,this.playGuidGenerator=s,this.walkmeVisibleReporter=l,this.htmlDecoder=u,this.logger=c,this.commonEvents=d,this.stringUtils=f,this._name="Shuttle"}return t(s,p),s.prototype.activateById=function(e,t){var n=this;try{t=t||{};var r=this.deployablesDict[e];if(!r)return void this.logger.customerLog(this.stringUtils.formatString("Shuttle with id {0} doesn't exist",e),3);this.ClickAuditManager.SendClickAudit(this.Consts.DEPLOYABLE_TYPE.Shuttle,r.Id,{type:t.type,id:t.objectId});var i=parseInt(this.CommonUtils.getSettingsValue(r.Settings,s.PLAY_MODE_SETTING_KEY,this.Consts.PLAY_MODE.SameTab));this.commonEvents.raiseEvent(this.Consts.EVENTS.Shuttles.ActivatingShuttle,{shuttle:r});var o=this.getShuttleUrl(r.DestinationUrl);this.CommonUtils.isValidUrl(o)&&(this.WalkMeGoalsManager.startWatchingDeployable(r,this.playGuidGenerator.generateNewPlayGuid(r.Id)),this.walkmeVisibleReporter.report(),i==this.Consts.PLAY_MODE.NewTab&&this.win.open(o,"_blank"),i==this.Consts.PLAY_MODE.SameTab&&this.TimerManager.libSetTimeout(function(){n.win.location.href=o},s.TIME_BEFORE_REDIRECTING))}catch(a){this.logger.customerLog(this.stringUtils.formatString("Failed playing shuttle with id {0}. Exception is {1}",e,a),3)}},s.prototype.getShuttleUrl=function(e){return e=this.htmlDecoder.decodeHtml(e,["&"]),this.win._walkmeInternals.customShuttleUrl?this.win._walkmeInternals.customShuttleUrl(e):e},s.PLAY_MODE_SETTING_KEY="ShuttlePlayMode",s.TIME_BEFORE_REDIRECTING=100,s}(r(89).DeployablesManager);n.ShuttlesManager=e}).call(window)}).call(this,r(88))},function(e,t){(function(){e.exports=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}).call(window)},function(e,t){(function(){"use strict";t.__esModule=!0;var e=function(){function e(e){this.deployablesDict={},this.lib=e.lib,this.setDeployables(e.deployables)}return e.prototype.setDeployables=function(e){if(e)for(var t=0;t<e.length;t++)this.deployablesDict[e[t].Id]=e[t]},e.prototype.getActionData=function(e){return{Type:"",ItemId:"",Name:""}},e.prototype.isWithAction=function(e){return!1},e.prototype.activateById=function(e,t,n){},e.prototype.getById=function(e){return this.deployablesDict[e]},e.prototype.getAll=function(){var e=[],t=this.deployablesDict;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e.sort(function(e,t){return e.OrderIndex===undefined||t.OrderIndex===undefined?0:e.OrderIndex-t.OrderIndex})},e.prototype.getDeployablesDict=function(){return this.deployablesDict},e.prototype.releaseAll=function(e){},e.prototype.autoStartEnabled=function(e){return!1},e.prototype.name=function(){return this._name},e}();t.DeployablesManager=e}).call(window)},function(e,t){(function(){e.exports=function(e,t,n,r,i,o){var a=this;function s(){e.add(t.DEPLOYABLE_TYPE.Shuttle,r)}a.init=function(){o.registerDataAppender(a),n.one(t.EVENTS.DATA_FILES_LOADED,s)},a.append=function(){r.setDeployables(i.get())}}}).call(window)},function(e,t,n){(function(e){(function(){e.register("AuditSafeStartManager").asCtor(n(92)).dependencies("EventSender,ReportInitiatorMapper,Logger, Consts"),e.register("DeployableSafeStartExecuter").asCtor(n(93)).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, SafeStartRedirectService, SafeStartMessageDisplayer"),e.register("SafeStartMessageDisplayer").asCtor(n(94)).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, CommonUtils, HtmlDecoder, LibDestroyer, RedirectService, SafeStartRedirectService, UiUtils, StringUtils"),e.register("SafeStartRedirectService").asCtor(n(95)).dependencies("TimerManager, CommonEvents, Consts")}).call(window)}).call(this,n(1))},function(e,t){(function(){e.exports=function(i,o,a,s){this.send=function(e){if(null==(r=e)||null==r.tutorialId||null==r.playGuid||null==r.status)a.error(null,"params is not valid for send action in AuditSafeStartManager");else{var t={oId:(n=e).tutorialId,oName:n.tutorialName,pId:n.playGuid,pInit:o.map(n.playInitiator),status:n.status,type:s.EVENT_SENDER_ACTIONS.PlayWalkthru};i.postEvent(i.EVENT_TYPES.PlayFailed,t)}var n,r}}}).call(window)},function(e,t){(function(){e.exports=function(s,l,u,c,d){this.handleSafeStart=function(e,t,n){var r,i,o=(r=t,(i=s.getSettingsValue(r.Settings,"SafeStart",!1))&&"0"!=i.enabled||(i=s.getSettingsValue(l.get().Settings,"SafeStart",null)),i);if(null!=o&&1==o.enabled){var a=d.showAndGetStatus(o,n,e);return e.auditSafeStartFirstStatus(a,n),a==u.SAFESTART_ACTION.AutoRedirect&&c.redirect(o.url,u.SAFESTART_ACTION.AutoRedirect,n,e),!0}return e.auditSafeStartDisabled(n),!1}}}).call(window)},function(e,t,n){(function(w){(function(){e.exports=function(d,f,p,g,h,e,m,v,t,y){function S(){e.releaseBalloons(),t.removeOverlay()}function E(e,t){t.auditStayButtonClicked(e),S()}function T(e){var t=mtjQuery("<div></div>");return e=g.nl2br(e),t.append(e),t}this.showAndGetStatus=function(e,t,n){var r,o,a,s,i,l,u,c=e.url;return 1==e.autoRedirect?r=p.SAFESTART_ACTION.AutoRedirect:m.canRedirect(c)&&!m.isUrlDifferentFromCurrentOnlyInHash(c)?(r=p.SAFESTART_ACTION.PopupShown,o=c,a=t,s=n,i=f.get(),l=T(i.SafeStartPopupText),u={popupStepButtons:[{id:0,name:i.RedirectButtonText,action:5},{id:1,name:i.StayButtonText,action:6}]},w.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:l},400,u,function(e){var t,n,r,i;t=e,n=o,r=a,i=s,mtjQuery(".walkme-action-redirect",t).click(function(){v.redirect(n,p.SAFESTART_ACTION.RedirectClicked,r,i).then(S)}),mtjQuery(".walkme-action-stay",t).click(function(){E(r,i)}),mtjQuery(".walkme-action-close",t).attr("onclick","").unbind("click"),mtjQuery(".walkme-action-close",t).click(function(){E(r,i)})})):(r=p.SAFESTART_ACTION.FailOnUrl,function(e){var t,n,r=(t={},n=f.get(),t.enabled=g.isTrue(n.Settings,"openATicketEnabled",!1),t.url=d.getSettingsValue(n.Settings,"openATicketUrl",""),t.url&&g.isValidUrl(t.url)?(t.url=encodeURI(t.url),t.url=h.decodeHtml(t.url,["&"])):(t.enabled=!1,t.url=null),t);r.enabled&&(e+=y.formatString(" or contact <a href='{0}' target='_blank' style='text-decoration: underline; color: blue;'>support.</a>",r.url));var i=T(e);w.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:i},400,{popupStepButtons:[{id:0,name:"OK",action:7}]},function(e){mtjQuery(".walkme-action-ok",e).click(function(){S()})},!0)}("Sorry about that! The Walk-Thru cannot be played right now. Please try again later")),r},this.closePopup=S}}).call(window)}).call(this,n(1))},function(e,t){(function(){e.exports=function(o,a,s){this.redirect=function(e,t,n,r){a.raiseEvent(s.EVENTS.SafeStartRedirect,{url:e});var i=mtjQuery.Deferred();return r.auditSafeStartStatus(t,n),o.setWalkmeTimeout(function(){r.redirect(e,n),i.resolve()}),i.promise()}}}).call(window)},function(n,e,r){(function(t){(function(){t.register("PositionProvider").asCtor(r(97)),t.register("ElementEmbedder").asCtor(r(102)).asProto(),t.register("ElementEmbedderApi").asCtor(r(104).ElementEmbedderApi).asProto(),t.register("FallbackElementEmbedderVisibilityChecker").asCtor(r(106)),t.register("EmbedInElementParentContainerProvider").asCtor(r(107)),t.register("EmbedInElementParentPositionProvider").asCtor(r(108)),t.register("EmbedInElementElementEmbedderCreator").asCtor(r(111)),t.register("EmbedInElementElementParentEmbedderCreator").asCtor(r(113)),t.register("EmbedInElementElementEmbedder").asCtor(r(114)).asProto(),t.register("EmbedInClosestCanEmbedElementContainerProvider").asCtor(r(115)),t.register("EmbedInElementWrapperCreator").asCtor(r(118)),t.register("ElementAttacher").asCtor(r(119)),t.register("BalloonEmbedder").asCtor(r(120)).dependencies("getTopContainer, ElementUtils, FeaturesManager, Consts, wmjQuery, SiteConfigManager, SharedConsts"),t.register("ElementEmbedderFactory").asCtor(r(121)).dependencies("Consts"),t.register("EmbedmentTypeProvider").asCtor(r(138)),r(144).extend();var e={init:function(){e.detachByElement=t.get("ElementAttacher").detachByElement,e.getBalloonContainer=t.get("BalloonEmbedder").getContainer,e.handleBalloonEmbedding=t.get("BalloonEmbedder").handleEmbedding,e.fixBalloonPosition=t.get("BalloonEmbedder").fixPosition,e.isBalloonEmbeded=t.get("BalloonEmbedder").isEmbeded,e.getElementEmbedder=t.get("ElementEmbedderFactory").get,e.getEmbedmentType=t.get("EmbedmentTypeProvider").get}};n.exports=e}).call(window)}).call(this,r(1))},function(t,e,n){(function(){var e=n(98);t.exports=function(){var o,a;this.getPosition=function(e,t,n,r){var i=o.getCenterPositionByBounds(e);return a.get(n).calculate(r,e,i,t)},function(){o=e.get("PositionHelper"),a=n(99)}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(n){(function(){e.exports=new function(){var t={};return this.get=function(e){return t[e]||(t[e]=n.get(e))},this.reset=function(){t={}},this}}).call(window)}).call(this,n(1))},function(t,e,i){(function(){var e=i(98),n=i(100),r=i(101);t.exports=new function(){var t;this.get=function(e){switch(e){case t.POSITION_PERIMETER_TYPE.Outside:return r;case t.POSITION_PERIMETER_TYPE.Inside:return n}},function(){t=e.get("Consts")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var a;this.calculate=function(e,t,n,r){var i,o;switch(e){case a.POSITION_TYPE.Top:i=t.top,o=n.left-r.width/2;break;case a.POSITION_TYPE.Right:i=n.top-r.height/2,o=t.right-r.width;break;case a.POSITION_TYPE.Bottom:i=t.bottom-r.height,o=n.left-r.width/2;break;case a.POSITION_TYPE.Left:i=n.top-r.height/2,o=t.left;break;case a.POSITION_TYPE.TopLeft:i=t.top,o=t.left;break;case a.POSITION_TYPE.TopRight:i=t.top,o=t.right-r.width;break;case a.POSITION_TYPE.BottomRight:i=t.bottom-r.height,o=t.right-r.width;break;case a.POSITION_TYPE.BottomLeft:i=t.bottom-r.height,o=t.left;break;case a.POSITION_TYPE.Center:i=n.top-r.height/2,o=n.left-r.width/2}return{top:i,left:o}},function(){a=e.get("Consts")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var a;this.calculate=function(e,t,n,r){var i,o;switch(e){case a.POSITION_TYPE.Top:i=t.top-r.height,o=n.left-r.width/2;break;case a.POSITION_TYPE.Right:i=n.top-r.height/2,o=t.right;break;case a.POSITION_TYPE.Bottom:i=t.bottom,o=n.left-r.width/2;break;case a.POSITION_TYPE.Left:i=n.top-r.height/2,o=t.left-r.width;break;case a.POSITION_TYPE.TopLeft:i=t.top-r.height,o=t.left-r.width;break;case a.POSITION_TYPE.TopRight:i=t.top-r.height,o=t.right;break;case a.POSITION_TYPE.BottomRight:i=t.bottom,o=t.right;break;case a.POSITION_TYPE.BottomLeft:i=t.bottom,o=t.left-r.width}return{top:i,left:o}},function(){a=e.get("Consts")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(d){(function(){var t=n(98),c=n(103);e.exports=function(e){var s,l,i,o;function u(e,t,n){return l?s.reposition(l,e,t,n):d.resolve()}function a(){i&&(o.remove(i),i=null)}this.embed=function(e,t,n,r){return a(),i=function(){return i=null,function(e,t,n,r){try{var i=s.embed(e)}catch(a){return d.reject(a)}return l=new c({topMostElement:o=i,originElement:o}),u(t,n,r);var o}(e,t,n,r)},o.mutate(i)},this.reposition=u,this.getElement=function(){return l},this.destroy=function(){a(),s.destroy()},function(){o=t.get("DOMSessionManager"),s=e.elementEmbedderApi}.apply(null,arguments)}}).call(window)}).call(this,n(28))},function(e,t){(function(){e.exports=function(e){var t,n;this.getOriginElement=function(){return t},this.getTopMostElement=function(){return n},this.getElementSize=function(){return{width:t.outerWidth(),height:t.outerHeight()}},function(){n=wmjQuery(e.topMostElement),t=wmjQuery(e.originElement)}.apply(null,arguments)}}).call(window)},function(e,n,i){(function(a){(function(){"use strict";n.__esModule=!0;var t=i(98),r=i(105),e=function(){function e(e){this._domSessionManager=t.get("DOMSessionManager"),this._elementAttacher=e.elementAttacher||t.get("ElementAttacher"),this._elementToEmbedInto=e.elementToEmbedInto,this._elementContainerProvider=e.elementContainerProvider,this._positionProvider=e.positionProvider}return e.prototype.embed=function(e,t,n){var r=this._elementContainerProvider.get(this._elementToEmbedInto,n);return this._elementAttacher.attachCopy(r,e,t)},e.prototype.reposition=function(t,n,r,i){var o=this;return this.cancelReposition(),this._repositionCallback=function(){try{return o.doReposition(t,n,r,i)}catch(e){return a.reject(e)}},this._domSessionManager.measure(this._repositionCallback)},e.prototype.destroy=function(){this.cancelReposition()},e.prototype.cancelReposition=function(){this._repositionCallback&&(this._domSessionManager.remove(this._repositionCallback),this._repositionCallback=null)},e.prototype.doReposition=function(e,t,n,r){var i=this;this._repositionCallback=null;var o=this.getPosition(e,t,n);return r&&(o=r.refine(o)),this._domSessionManager.mutate(function(){i.setPosition(e,o)})},e.prototype.getPosition=function(e,t,n){var r=this._elementContainerProvider.get(this._elementToEmbedInto);return this._positionProvider.getPosition(this._elementToEmbedInto,e,t,n,r)},e.prototype.setPosition=function(e,t){var n=e.getOriginElement();r.setPosition(n,t)},e}();n.ElementEmbedderApi=e}).call(window)}).call(this,i(28))},function(e,t){(function(){e.exports=new function(){this.setPosition=function(e,t){e.css("top",t.top+"px"),e.css("left",t.left+"px")}}}).call(window)},function(e,t){(function(){e.exports=function(){this.isVisible=function(e){return e.getOriginElement().is(":mt_visible")}}}).call(window)},function(e,t){(function(){e.exports=function(){this.get=function(e){return e.parent()}}}).call(window)},function(e,t,n){(function(){e.exports=function(){var u;this.getPosition=function(e,t,n,r,i){return o=u.getPosition(e,t,n,r,i),a=i,s=e.offset(),l=a.offset(),{top:o.top+(s.top-l.top),left:o.left+(s.left-l.left)};var o,a,s,l},function(){u=n(109)}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98),p=n(110);t.exports=new function(){var f;this.getPosition=function(e,t,n,r,i){var o,a,s,l,u,c=t.getElementSize(),d=p.get(e);return o=f.getPosition(d,c,n,r),a=i,s=t.getTopMostElement(),l=a.offset(),u=s.offset(),{top:o.top+(l.top-u.top),left:o.left+(l.left-u.left)}},function(){f=e.get("PositionProvider")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var t;this.get=function(e){return t.getEmbedInElementPosition(e,{leftOffset:0,topOffset:0})},function(){t=e.get("PositionHelper")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(o){(function(){var i=n(112);e.exports=function(){var r;this.create=function(e){var t={elementToEmbedInto:e,elementContainerProvider:i,positionProvider:r},n={elementEmbedderApi:o.create("ElementEmbedderApi",t)};return o.create("EmbedInElementElementEmbedder",n)},function(){r=n(109)}.apply(null,arguments)}}).call(window)}).call(this,n(1))},function(e,t){(function(){e.exports=new function(){this.get=function(e){return e}}}).call(window)},function(t,e,n){(function(o){(function(){var e=n(98);t.exports=function(){var r,i;this.create=function(e){var t={elementToEmbedInto:e,elementContainerProvider:r,positionProvider:i},n={elementEmbedderApi:o.create("ElementEmbedderApi",t)};return o.create("EmbedInElementElementEmbedder",n)},function(){r=e.get("EmbedInElementParentContainerProvider"),i=e.get("EmbedInElementParentPositionProvider")}.apply(null,arguments)}}).call(window)}).call(this,n(1))},function(e,t,n){(function(m){(function(){var t=n(98),h=n(103);e.exports=function(e){var c,d,o,a,f,p;function g(e,t,n){return d?c.reposition(d,e,t,n):m.resolve()}function s(){o&&(a.remove(o),o=null)}this.embed=function(e,t,n,r,i){return s(),o=function(){return o=null,function(e,t,n,r,i){var o,a,s=p.create(n);f.attach(s,e);try{var l=c.embed(s,n,i)}catch(u){return m.reject(u)}return a=(o=l).children()[0],d=new h({topMostElement:o,originElement:a}),g(t,n,r)}(e,t,n,r,i)},a.mutate(o)},this.reposition=g,this.getElement=function(){return d},this.destroy=function(){s(),c.destroy()},function(){c=e.elementEmbedderApi,a=t.get("DOMSessionManager"),f=t.get("ElementAttacher"),p=t.get("EmbedInElementWrapperCreator")}.apply(null,arguments)}}).call(window)}).call(this,n(28))},function(t,e,n){(function(){var e=n(98);t.exports=function(){this.get=function(e){for(var t=e.parent(),n={originalElement:e,currentParent:t};t&&t.exist();){if(n.currentParent=t,n.reason="",!t[0].style)return n.reason=s,r.raiseEvent(o.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,n),i.getTopContainer(e);if(a.canEmbed(t))return t;n.reason=l,r.raiseEvent(o.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,n),t=t.parent()}return i.getTopContainer(e)};var r,i,o,a,s="Parent has no style",l="Parent is not ':wm_can_embed'";(function(){r=e.get("CommonEvents"),i=e.get("TopContainerProvider"),o=e.get("Consts"),n(116),a=n(117)}).apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var t;this.get=function(){var e=t.get().Custom;return e&&e.walkMeNoEmbed&&e.walkMeNoEmbed.selectors&&e.walkMeNoEmbed.selectors.join(",")},function(){t=e.get("SiteConfigManager")}.apply(null,arguments)}}).call(window)},function(e,t,r){(function(){e.exports=new function(){var n;this.canEmbed=function(e,t){return(t||e.is(":wm_can_embed"))&&!e.is(n.get())},n=r(116)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=function(){var o,a;this.create=function(e){var t,n,r,i=mtjQuery(document.createElement("div"));return i.css("display","-moz-inline-stack"),r=e,(n=i).css("position","relative"),n.css("display","inline-block"),n.css("float",function(e){var t="left";switch(e){case o.POSITION_TYPE.Right:case o.POSITION_TYPE.TopRight:case o.POSITION_TYPE.BottomRight:t="right"}return t}(r)),(t=i).css("zoom","1"),t.css("*display","inline"),a.isFeatureEnabled(o.FEATURES.EmbedInElementDontWrapText)&&i.css("white-space","nowrap"),i},function(){o=e.get("Consts"),a=e.get("FeaturesManager")}.apply(null,arguments)}}).call(window)},function(e,t){(function(){e.exports=function(){this.attach=function(e,t){return t.appendTo(e)},this.attachCopy=function(e,t){return e.append(t[0].outerHTML),e.children().filter(":last-child")},this.detach=function(e,t){var n=e.find(t);n&&n.remove()},this.detachByElement=function(e){try{e&&e.remove()}catch(t){}}}}).call(window)},function(e,t,n){(function(){var t=n(98);e.exports=function(c,i,d,f,e,p,g){var h;function m(e){return e&&e.embed}this.getContainer=function(e,t,n,r){if(d.isFeatureEnabled(f.FEATURES.EmbedInContainer)){var i=t.parents((s=g.defaultSelectors.embedInContainerSelector,o="embedInContainerSelector",(l=(a=p.get().Custom)&&a[o])&&(s=l),s));if(i.exist())return i}var o,a,s,l;if(m(e))return h.get(t);var u=null;return n&&(u=c(t)),u&&u.length||(u=c(null,!0)),u},this.handleEmbedding=function(e,t,n){m(e)&&t.css("cursor","default")},this.fixPosition=function(e,t,n){if(m(t)&&"BODY"!=i.getElementTagName(n[0])){var r=n.offset();e.left-=r.left-n.scrollLeft(),e.top-=r.top-n.scrollTop()}},this.isEmbeded=m,function(){h=t.get("EmbedInClosestCanEmbedElementContainerProvider")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var t=n(98);e.exports=function(e){var s,l,u,c,d,f,p,g,h;this.get=function(e,t,n){var r,i,o,a=s.get(t,e,n);switch(a){case h.EmbedInElement:return r=e,i=l.create(r),o=u.create(r),new g({elementEmbedders:[i,o]});case h.EmbedInElementParent:return u.create(e);case h.EmbedInOwnerDocument:return c.create(e);case h.EmbedInTopDocument:return d.create(e);case h.EmbedInClosestCanEmbed:return f.create(e);case h.EmbedNearCompatibleSibling:return p.create(e);case h.ForceEmbedInElement:return l.create(e);default:throw new Error("unknown embedment type "+a)}},function(){s=t.get("EmbedmentTypeProvider"),l=t.get("EmbedInElementElementEmbedderCreator"),u=t.get("EmbedInElementElementParentEmbedderCreator"),c=n(122),d=n(126),f=n(130),p=n(131),g=n(137),h=e.EMBEDMENT_TYPE}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(o){(function(){var r=n(123),i=n(124);e.exports=new function(){this.create=function(e){var t={elementToEmbedInto:e,elementContainerProvider:r,positionProvider:i},n={elementEmbedderApi:o.create("ElementEmbedderApi",t)};return o.create("ElementEmbedder",n)}}}).call(window)}).call(this,n(1))},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var t;this.get=function(e){return t.getTopContainer(e)},function(){t=e.get("TopContainerProvider")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98),l=n(125);t.exports=new function(){var s;this.getPosition=function(e,t,n,r,i){var o=l.get(e),a=t.getElementSize();return s.getPosition(o,a,n,r)},function(){s=e.get("PositionProvider")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var t;this.get=function(e){return t.getElementBounds(e,!0,window,{leftOffset:0,topOffset:0})},function(){t=e.get("PositionHelper")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(o){(function(){var r=n(127),i=n(129);e.exports=new function(){this.create=function(e){var t={elementToEmbedInto:e,elementContainerProvider:i,positionProvider:r},n={elementEmbedderApi:o.create("ElementEmbedderApi",t)};return o.create("ElementEmbedder",n)}}}).call(window)}).call(this,n(1))},function(t,e,n){(function(){var e=n(98),l=n(128);t.exports=new function(){var s;this.getPosition=function(e,t,n,r,i){var o=l.get(e),a=t.getElementSize();return s.getPosition(o,a,n,r)},function(){s=e.get("PositionProvider")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var t;this.get=function(e){return t.getElementBounds(e,!1,window,{leftOffset:0,topOffset:0})},function(){t=e.get("PositionHelper")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var t=n(98);e.exports=new function(){var e;this.get=function(){return e.getTopContainer(null,!0)},function(){e=t.get("TopContainerProvider")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(o){(function(){var e=n(98);t.exports=new function(){var r,i;this.create=function(e){var t={elementToEmbedInto:e,elementContainerProvider:r,positionProvider:i},n={elementEmbedderApi:o.create("ElementEmbedderApi",t)};return o.create("EmbedInElementElementEmbedder",n)},function(){r=e.get("EmbedInClosestCanEmbedElementContainerProvider"),i=e.get("EmbedInElementParentPositionProvider")}.apply(null,arguments)}}).call(window)}).call(this,n(1))},function(e,t,n){(function(a){(function(){e.exports=new function(){var r,i,o;this.create=function(e){var t={elementToEmbedInto:e,elementContainerProvider:r,positionProvider:i,elementAttacher:o},n={elementEmbedderApi:a.create("ElementEmbedderApi",t)};return a.create("EmbedInElementElementEmbedder",n)},r=n(132),i=n(135),o=n(136)}}).call(window)}).call(this,n(1))},function(e,t,n){(function(){e.exports=new function(){var o,a;this.get=function(e,t){for(var n=t&&t.isInvisible,r=a.get(e),i=r.parent();!i.is("body");){if(o.canEmbed(i,n))return r;r=a.get(i),i=r.parent()}return r},o=n(117),a=n(133)}}).call(window)},function(e,t,n){(function(){e.exports=new function(){var o;this.get=function(n){var r,e=o.get().embedInCompatibleParent;wmjQuery.each(e,function(e,t){n.is(t.elementType)&&(r=t)});var t=n;if(r){var i=n.closest(r.topParent);i.length&&(t=i)}return t},o=n(134)}}).call(window)},function(e,t){(function(){e.exports=new function(){this.get=function(){return{embedInElement:n,embedInParent:e,embedInCompatibleParent:t}};var e=["input","img","select","button","textarea","iframe","a","abbr","acronym","area","b","base","basefont","bdi","bdo","br","cite","code","datalist","dfn","dl","em","embed","font","h1","h2","h3","h4","h5","h6","hr","i","kbd","label","legend","link","mark","meta","meter","ol","output","param","picture","pre","progress","q","ruby","s","samp","small","span","strong","sub","summary","sup","table","time","u","ul","var"],t=[{elementType:"tr",topParent:"table"},{elementType:"tbody",topParent:"table"},{elementType:"tfoot",topParent:"table"},{elementType:"thead",topParent:"table"},{elementType:"col",topParent:"table"},{elementType:"colgroup",topParent:"table"},{elementType:"option",topParent:"select, datalist"},{elementType:"optgroup",topParent:"select"},{elementType:"rt",topParent:"ruby"},{elementType:"rp",topParent:"ruby"}],n=["th","td","caption","li","dt","dd"]}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var a;this.getPosition=function(e,t,n,r,i){var o=i.parent();return a.getPosition(e,t,n,r,o)},a=e.get("EmbedInElementParentPositionProvider")}}).call(window)},function(e,t,r){(function(){var n=r(98);e.exports=new function(){var i,t=this;function o(e,t){return e.before(t[0].outerHTML),e.prev()}function a(e,t){return e.after(t[0].outerHTML),e.next()}t.attachCopy=function(e,t,n){return((r=n)===i.Left||r===i.TopLeft||r===i.BottomLeft?o:a)(e,t);var r},function(){i=n.get("Positions");var e=n.get("ElementAttacher");t.attach=e.attach,t.detach=e.detach,t.detachByElement=e.detachByElement}()}}).call(window)},function(e,t,r){(function(f){(function(){var n=r(98);e.exports=function(e){var c,d,l;function t(e){l=e}this.embed=function(i,o,a,s){return function(a,s,l,u){for(var e=f.reject(),t=0;t<d.length-1;t++)e=e.then(null,function(o){return function(){return e=a,t=s,r=l,i=u,(n=o).embed(e,t,r,i).then(function(){return new f(function(e,t){!function(e){var t=e.getElement();if(c.isVisible(t))return!0;var n=t.getTopMostElement();return n.remove(),!1}(n)?t():e(n)})});var n,e,t,r,i}}(d[t]));return e}(i,o,a,s).then(t,function(){return e=i,t=o,n=a,r=s,(l=d[d.length-1]).embed(e,t,n,r);var e,t,n,r})},this.reposition=function(e,t,n,r){return l.reposition(e,t,n,r)},this.getElement=function(){return l.getElement()},this.destroy=function(){l.destroy()},function(){c=n.get("FallbackElementEmbedderVisibilityChecker"),d=e.elementEmbedders}.apply(null,arguments)}}).call(window)}).call(this,r(28))},function(t,e,n){(function(){var e=n(98);t.exports=function(){var i,o,a,s,l,u,c;this.get=function(e,t,n){if(e||s.shouldUseEmbedInElementBecauseInJspPane(t)){if(n)return u.getEmbedmentType(t);if(o.isFeatureEnabled(i.FEATURES.EmbedInClosestCanEmbed))return c.EmbedInClosestCanEmbed;var r=a.canEmbedInElement(t);return r?c.EmbedInElement:c.EmbedInElementParent}return l.canEmbedInOwnerDocument(t)?c.EmbedInOwnerDocument:c.EmbedInTopDocument},function(){i=e.get("Consts"),o=e.get("FeaturesManager"),a=n(139),s=n(141),l=n(142),u=n(143),c=i.EMBEDMENT_TYPE}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98),o=n(140);t.exports=new function(){var r,i;this.canEmbedInElement=function(t){var n=r.browser.version,e=o.get();return i.doAllMeetCondition(e,function(e){return!t.is(e.elementType)||e.isSupported&&n>=e.minimalSupportedVersion})},function(){r=e.get("HostData"),i=e.get("CommonUtils")}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){var i=n(98);e.exports=new function(){var e,t=[{elementType:"select",isSupported:(this.get=function(){return t},!1)}],n=[{elementType:"button",isSupported:!1},{elementType:"input",isSupported:!0,minimalSupportedVersion:9},{elementType:"img",isSupported:!0,minimalSupportedVersion:9},{elementType:"iframe",isSupported:!0,minimalSupportedVersion:9},{elementType:"textarea",isSupported:!1}],r=[{elementType:"textarea",isSupported:!1}];(function(){(e=i.get("HostData")).isIE()?t=t.concat(n):e.isEdge()&&(t=t.concat(r))}).apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var t,n,r;this.shouldUseEmbedInElementBecauseInJspPane=function(e){return n.isFeatureEnabled(t.FEATURES.JSP)&&!!r.findJspContainer(e)},function(){t=e.get("Consts"),n=e.get("FeaturesManager"),r=e.get("CommonUtils")}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var t,n,r,i;this.canEmbedInOwnerDocument=function(e){return!i.isInIframe(e)||n.isFeatureEnabled(t.FEATURES.ForceEmbedInOwnerDocument)||r.shouldHandlePageAsFramesets()},function(){t=e.get("Consts"),n=e.get("FeaturesManager"),r=e.get("FramesetsUtils"),i=e.get("ElementInIframeIndicator")}.apply(null,arguments)}}).call(window)},function(e,t,o){(function(){var t=o(98);e.exports=new function(){var n,r,e,i;this.getEmbedmentType=function(t){var e=n.get();return r.doesAnyMeetCondition(e.embedInElement,function(e){return t.is(e)})?i.ForceEmbedInElement:i.EmbedNearCompatibleSibling},r=t.get("CommonUtils"),e=t.get("Consts"),n=o(134),i=e.EMBEDMENT_TYPE}}).call(window)},function(e,t,n){(function(){e.exports=new function(){this.extend=function(){wmjQuery.extend(_walkmeInternals.ctx.get("Lib"),n(145))}}}).call(window)},function(e,t,n){(function(t){(function(){e.exports=new function(){this.overrideBalloonEmbedder=function(e){t.register("BalloonEmbedder").asCtor(e).dependencies("getTopContainer")}}}).call(window)}).call(this,n(1))},function(e,t,n){(function(){var r=n(147),i={init:function(){r.get("LaunchersSetter").init();var e=r.get("LaunchersManager"),t=r.get("LaunchersModule"),n=r.get("LauncherDefaultIcon");i.getActionData=e.getActionData,i.isWithAction=e.isWithAction,i.getLaunchers=t.getLaunchers,i.setLaunchers=t.setLaunchers,i.showLauncher=t.showLauncher,i.showAllLaunchers=t.showAllLaunchers,i.getLauncherAction=t.getLauncherAction,i.releaseLaunchers=t.releaseLaunchers,i.launcherDefaultIcon=n},services:["LaunchersManager","LaunchersModule","LauncherDefaultIcon"],types:["Launcher"]};n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(67).registerApi(i,r),e.exports=i}).call(window)},function(e,t,n){(function(){e.exports=n(67).create()}).call(window)},function(e,t,n){(function(){n(147).register("DataFileLauncherDataAppender").asCtor(function(i,o,a,s,e){var t=this;t.register=function(){e.registerDataAppender(t)},t.append=function(e,t){o.isNewLanguage()&&i.setLaunchers([]);n=t[a.Launcher],r=i.getLaunchers(),r=r.concat(n),i.setLaunchers(r),o.isNewLanguage()&&s.setDeployables(i.getLaunchers());var n,r}}).dependencies("LaunchersModule, LibInitializer, DeployableTypes, LaunchersManager, DataFileDataLoader")}).call(window)},function(e,t,n){(function(){var _=n(147);_.register("Launcher").asCtor(function(i,t,n,e,o,r,a,s,l,u,c,d,f,p){var g,h,m,v,y,S=this;function E(){return(g=T()).show().then(function(e){m=e.getOriginElement(),function(e){if(p.launcher.Settings.embedInParent){var t=e.getTopMostElement();t.addClass("walkme-launcher-container"),t.addClass("walkme-launcher-container-id-"+p.launcher.Id)}}(e);var t,n=(t=p.launcher,_.create("TolltipIconUiBehavior",{tooltipText:o.getSettingsValue(t.Settings,"tooltip","")}));n.applyBehavior(e);var r=b();r.applyBehavior(e),I(),"onHover"==p.launcher.Settings.displayStyle&&m.css("display","none")})}function T(){var e=w(),t=l.get(p.element,e);return u.create(t,p.element)}function w(){var e,t=C(),n={TemplateId:t.data.id,Type:t.type,Predefined:t},r=s.get(n);return r||(r={mainImageUrl:t.data.url,hoverImageUrl:t.data.hover,clickImageUrl:t.data.click,text:t.data.customText,cssClassName:"custom-launcher-"+t.data.id,kind:t.data.url?i.ICON_CONTENT_KIND.Image:i.ICON_CONTENT_KIND.Text}),{uniqueIdentifierType:"Launcher",uniqueIdentifierId:p.launcher.Id,isEmbedInElement:p.launcher.Settings.embedInParent,attachmentSide:p.launcher.Position,zindex:p.launcher.Settings["z-index"],perimeterType:p.launcher.Settings.context,isAnimated:p.launcher.Settings.animated,growingDirection:p.launcher.Settings.direction,positionTopCustomOffset:p.launcher.Settings.topOffset,positionLeftCustomOffset:p.launcher.Settings.leftOffset,contentElementCssClassNames:["walkme-launcher-image-div"],positionElementCssClassNames:(e=[],e.push("walkme-launcher-id-"+p.launcher.Id),e.push("walkme-custom-launcher-outer-div"),e.push("walkme-text-launcher"),e),contentData:r}}function C(){return o.getSettingsValue(p.launcher.Settings,"imageObject",e)}function b(){return _.create("ClickIconExecutionBehavior",{clickAction:function(){n.raiseEvent(y.LauncherClicked,{launcherId:p.launcher.Id}),d.SendClickAudit(i.DEPLOYABLE_TYPE.Launcher,p.launcher.Id);var e={type:i.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,objectId:p.launcher.Id};c.setForScope(e,function(){t.getAction(p.launcher).doAction()})}})}function I(){v&&v.shouldShow()&&!f.isQuirksMode(p.element[0])&&v.highlight()}S.show=function(e){E().then(function(){r.report(),n.deprecatedRaiseEvent(y.LauncherIsShown,{getId:function(){return p.launcher.Id},getName:function(){return p.launcher.Name}},{customText:C().data.customText,name:p.launcher.Name,launcherDiv:m,launcherId:p.launcher.Id,element:p.element,launcherData:p.launcher}),e&&e(m)})},S.destroy=function(e){h&&(h.destroy(),h=null);S.watchLauncherTimeout&&S.watchLauncherTimeout.clear();(function(){g&&g.destroy();v&&v.unhighlightElement()})(),m=null,p.element=null,g=v=null,n.raiseEvent("LauncherDestroyed",{launcher:p.launcher}),e&&e()},S.setTimeoutOn=function(){(h=a.create(p.element,function(){g&&(g.reposition(),I())})).track()},S.isDrawn=function(){try{return 0<m.parents("html").length}catch(e){return!1}},S.display=function(){m.show(),n.raiseEvent(y.DisplayLauncher,{launcher:p.launcher})},S.removeDisplay=function(){m.hide(),n.raiseEvent(y.HideLauncher,{launcher:p.launcher})},S.watchLauncherTimeout=null,y=i.EVENTS.Launchers,v=_.create("Highlighter",{element:p.element,settings:p.launcher.Settings,embedInElement:p.launcher.Settings.embedInParent,drawableType:"launcher",drawableId:p.launcher.Id,monitor:!0,defaultSettings:!1,cssKeysValues:[{id:p.launcher.Id,name:"launcher"}]})}).asProto().dependencies("Consts, LauncherActions, CommonEvents, LauncherDefaultIcon, SettingsValuesRetriever, WalkmeVisibleReporter,UiElementPositionTrackerCreator,IconContentProvider,IconCreatorParamsProvider,IconCreator,InitiatorManager,ClickAuditManager,HostData")}).call(window)},function(e,t,n){(function(){n(147).register("LauncherActionDataProvider").asCtor(function(e,a){var s={};this.fillActionData=function(e,t){if(t=t||{},null==e)return t;var n=e.Settings;if(n&&n.action){var r=n.action,i=s[r.actionType];if(i){t.Type=i.actionEntityType;var o=r.arguments;o&&o[i.idField]&&(t.ItemId=o[i.idField].toString(),t.Name=a.getDeployableName(i.deployableType,t.ItemId),t.aAppType=i.aAppType)}}return t},this.isWithAction=function(e){var t=e.Settings;if(t&&t.action){var n=t.action.actionType;if(n&&"none"!=n)return!0}return!1},function(){s.playWt={idField:"wtId",deployableType:e.DEPLOYABLE_TYPE.Tutorial,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:e.EVENT_SENDER_EVENT_APPS.Walkthru},s.playContent={idField:"contentId",deployableType:e.DEPLOYABLE_TYPE.Content,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayResource,aAppType:e.EVENT_SENDER_EVENT_APPS.Content},s.playSurvey={idField:"surveyId",deployableType:e.DEPLOYABLE_TYPE.Survey,actionEntityType:e.EVENT_SENDER_ACTIONS.PlaySurvey,aAppType:e.EVENT_SENDER_EVENT_APPS.Survey},s.playShuttle={idField:"shuttleId",deployableType:e.DEPLOYABLE_TYPE.Shuttle,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:e.EVENT_SENDER_EVENT_APPS.Shuttle},s.shoutOut={idField:"id",deployableType:e.DEPLOYABLE_TYPE.ShoutOut,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShoutOut,aAppType:e.EVENT_SENDER_EVENT_APPS.ShoutOut},s.openMenu={actionEntityType:e.EVENT_SENDER_ACTIONS.OpenMenu,aAppType:e.EVENT_SENDER_EVENT_APPS.None,aType:e.EVENT_SENDER_ACTIONS.OpenMenu},s.playBf={idField:"bfId",deployableType:e.DEPLOYABLE_TYPE.BusinessSolution,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:e.EVENT_SENDER_EVENT_APPS.BizFlow},s.checkMyForm={idField:"businessSolutionId",deployableType:e.DEPLOYABLE_TYPE.BusinessSolution,actionEntityType:e.EVENT_SENDER_ACTIONS.PlaySmartTipSet,aAppType:e.EVENT_SENDER_EVENT_APPS.SmartTipSet},s.openTeachMe={actionEntityType:e.EVENT_SENDER_ACTIONS.OpenCoursesMenu,aAppType:e.EVENT_SENDER_EVENT_APPS.None,aType:e.EVENT_SENDER_ACTIONS.OpenCoursesMenu}}.apply(null,arguments)}).dependencies("Consts,DeployablesDataProvider")}).call(window)},function(e,t,n){(function(){n(147).register("LauncherActions").asCtor(function(n,r,i,o){this.reset=function(){a={}},this.getAction=function(e){if(a[e.Id])return a[e.Id];var t=i.getSettingsValue(e.Settings,"action",null);if(!t)return n.customerLog("No action core. aborting..."),null;return a[e.Id]=o.get(t.actionType,t.arguments,r.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,e),a[e.Id]};var a={}}).dependencies("Logger, Consts, SettingsValuesRetriever, ActionsFactory")}).call(window)},function(e,t,n){(function(){n(147).register("LauncherEventSender").asCtor(function(o,a){var s;this.postLauncherIsShownEventIfWasntSent=function(e){var t=e.getId();if(-1!=wmjQuery.inArray(t,s))return;var n={type:a.EVENT_APPS.Launcher,oId:t,oName:e.getName()};try{var r=a.postEvent(a.EVENT_TYPES.Play,n);return s.push(t),r}catch(i){return o.error(i),!0}},function(){s=[]}.apply(null,arguments)}).dependencies("Logger, EventSender")}).call(window)},function(e,t,n){(function(){n(147).register("LaunchersLegacyExternalApi").asCtor(function(e){this.getLaunchers=e.getLaunchers,this.setLaunchers=e.setLaunchers,this.showAllLaunchers=e.showAllLaunchers,this.getLauncherAction=e.getLauncherAction,this.releaseLaunchers=e.releaseLaunchers}).dependencies("LaunchersModule")}).call(window)},function(e,i,o){(function(r){(function(){"use strict";i.__esModule=!0;var e=o(89),t=o(147),n=function(i){function e(e,t,n){var r=i.call(this,{deployables:[],lib:e,type:t.DEPLOYABLE_TYPE.Launcher})||this;return r.consts=t,r.launcherActionDataProvider=n,r._name="Launcher",r}return r(e,i),e.prototype.getActionData=function(e){var t=i.prototype.getActionData.call(this,e);return this.launcherActionDataProvider.fillActionData(e,t)},e.prototype.isWithAction=function(e){return this.launcherActionDataProvider.isWithAction(e)},e}(e.DeployablesManager);t.register("LaunchersManager").asCtor(n).dependencies("Lib, Consts, LauncherActionDataProvider")}).call(window)}).call(this,o(88))},function(t,e,n){(function(){var P=n(147);function e(g,h,m,v,y,S,E,i,n,r,T,w,o){var a=this;a.getLaunchers=l,a.setLaunchers=u,a.showLauncher=function(e,t){if(r.isFeatureEnabled("hideLauncherWithoutLink")&&!function(e){var t=e.Settings.action,n=g.ACTION_TO_DEPLOYABLE_DATA[t.actionType],r=n&&t.arguments[n.deployableIdField];if(!r)return!0;return null!=i.get(n.deployableType).getById(parseInt(r))}(e))return!1;var n=v.getSettingsValue(e.Settings,"PlayLauncherConditionTree",null);return function(t,e,n){var r=!1,i=g.STICKY_TYPE.ONCE,o=v.getSettingsValue(t.Settings,g.IS_STICKY_SETTING_KEY,!1);if(o&&0<parseInt(o)){var a=parseInt(v.getSettingsValue(t.Settings,g.STICKINESS_TYPE_SETTING_KEY,null));i=a==g.OLD_STICKIES.STICKINESS_TYPES.soft?g.STICKY_TYPE.SOFT:g.STICKY_TYPE.STRONG}var s={type:g.ELEMENT_OWNER_TYPE_NAMES.LAUNCHER,id:t.Id,stickyType:i},l={logContext:t.Id,stickyType:i,isRemoveByCondition:1==t.Settings.condHide,elementVisibilityParams:{findElementParams:{IdentifySettings:t.IdentifySettings,ownerChain:s}},conditionCheckerParams:{featureName:C,elementName:t.Name,ownerChain:s},conditionTree:n,onShow:function(e){r=!0,function(e,t,n){var r=v.getSettingsValue(e.Settings,"imageObject","");if(function(e,t,n){if(typeof n.isContentSecure===undefined)return n.isContentSecure;if(!I(e[0].ownerDocument.location.href)||"custom"!=t.type)return!1;if(!I(t.data.url)||!b(t.data.click)||!b(t.data.hover))return!0;return!1}(t,r,e))return e.isContentSecure=!1,y.customerLog("Launcher ["+e.Id+"] will not be displayed. Launcher URL must be https in secure page",1),m.raiseEvent(g.EVENTS.Launchers.LauncherIsInsecure,{name:e.Name});e.isContentSecure=!0,S.setCustomCssIfNeeded(t);var i=(s=t,l=e,P.create("Launcher",{element:s,launcher:l})),o=(a=e.drawable=i,function(){a.show(function(){a.setTimeoutOn(),n&&n()})});var a;var s,l;(function(e,t){if(h.isTrue(e.Settings,"hasDelay",!1)){var n=v.getSettingsValue(e.Settings,"delayInSeconds",0);E.libSetTimeout(t,1e3*n)}else t()})(e,o)}(t,e,c)},onRemove:d,trackUIChanges:!0},u=P.create("UIVisibilityManager",l);function c(){"onHover"===t.Settings.displayStyle&&function(t){var e,n={featureName:C,elementName:t.Name,stopPollingAfterEvaluateTrue:!1},r=T.createOld(n);t.hoverLauncherEvaluator&&t.hoverLauncherEvaluator.cleanResources();(t.hoverLauncherEvaluator=r).onValueChanged(function(e){if(!e)return t.hoverDestroyTimeout=E.libSetTimeout(function(){t.drawable&&t.drawable.isDrawn()&&(t.hoverLauncherEvaluator.getCachedValue()||t.drawable.removeDisplay())},300),!1;t.hoverDestroyTimeout&&(t.hoverDestroyTimeout.clear(),t.hoverDestroyTimeout=undefined),t.drawable&&t.drawable.display()});var i=".walkme-launcher-id-"+t.Id;if(t.IdentifySettings.IsJquerySelector)e={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:t.IdentifySettings.JquerySelector},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:i},nodeDepth:0},nodeDepth:0};else{var o=(a=t.IdentifySettings,(s=w.clone(a)).Sensitivity=a.StepSensitivity,s.StepSensitivity=undefined,s.IgnoreId=a.IsIgnoreId,s.IsIgnoreId=undefined,s.IgnoreText=a.IsIgnoreText,s.IsIgnoreText=undefined,s.IgnorePageIdentification=undefined,s.IsValidPageId=undefined,s);e={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"ElementHoverSwitch",funcArgs:{IdentifySettings:o},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:i},nodeDepth:0},nodeDepth:0}}var a,s;r.evaluateAsync(e)}(t),f()}function d(){t.drawable&&t.drawable.destroy(),_(t)}function f(){t.drawable.watchLauncherTimeout=E.libSetTimeout(p,2e3)}function p(){t.drawable.isDrawn()?f():(d(),u.cleanResources(),u.watchForVisibility())}return u.watchForVisibility(),t.uiVisibilityManager=u,r}(e,0,n)},a.showAllLaunchers=function(){try{for(var e=0;e<s.length;e++){var t=s[e],n=a.showLauncher(t);y.customerLog(o.formatString("willDrawLauncher={0} for launcher with id {1}",n,t.Id),1,C)}}catch(r){y.error(r)}},a.getLauncherAction=function(e){var t=function(e){for(var t=0;t<s.length;t++)if(s[t].Id==e)return s[t]}(e);return n.getAction(t)},a.releaseLaunchers=function(e,t,n){h.executeParallel({objectsArray:l(),functionsToExecute:[function(e,t){e.uiVisibilityManager&&(e.uiVisibilityManager.cleanResources(),e.uiVisibilityManager=undefined);e.drawable?e.drawable.destroy(t):t&&t();_(e)}],successCallback:function(){n||u([]),e&&e()}})};var s=[],C="showLaunchers";function l(){return s}function u(e){n.reset(),s=e}function b(e){return!e||I(e)}function I(e){return/^https/i.test(e)}function _(e){e.hoverLauncherEvaluator&&(e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=null)}}P.register("LaunchersModule").asCtor(e).dependencies("Consts, CommonUtils, CommonEvents, SettingsValuesRetriever, Logger,CustomCssSetter, TimerManager, DeployablesManagerFactory, LauncherActions,FeaturesManager, ConditionCheckerFactory, JsonUtils, StringUtils"),t.exports=e}).call(window)},function(e,t,n){(function(){n(147).register("LaunchersSetter").asCtor(function(e,t,n,r,i,o,a,s,l,u,c,d){var f=this;function p(){s.add(u.DEPLOYABLE_TYPE.Launcher,n),n.setDeployables(t.getLaunchers()),wmjQuery.extend(e,d)}function g(){t.releaseLaunchers()}f.init=function(){o.registerDeployablesRunner(f),r.register(),l.one(u.EVENTS.DATA_FILES_LOADED,p),l.bind(u.EVENTS.ReleaseAllElementsCalled,g),l.bind(u.EVENTS.Launchers.LauncherIsShown,function(e,t){i.postLauncherIsShownEventIfWasntSent(t)})},f.start=function(){if(a.isWalkMeVisible()){var e=c.timer("show all launchers");t.showAllLaunchers(),e.stop()}}}).dependencies("Lib, LaunchersModule, LaunchersManager, DataFileLauncherDataAppender, LauncherEventSender,StartupDeployablesRunner, WalkMeVisibilityChecker, DeployablesManagerFactory,WmInternals, Consts, Logger, LaunchersLegacyExternalApi")}).call(window)},function(e,t,r){(function(){var e=r(147),t=e.get("PlatformDI"),n=e.get("Consts");t.register(n.PLATFORM.Web,function(){e.register("LauncherDefaultIcon").asInstance({type:"shape",data:{shape:"round-question-mark",color:"blue"}})}),t.register(n.PLATFORM.MobileWeb,function(){e.register("LauncherDefaultIcon").asInstance({type:"htmlShape",data:{shape:"round-question-mark",color:"blue",customClass:"html-launcher-round-question-mark-blue",customText:"?"}})}),t.register(n.PLATFORM.Desktop,function(){e.register("LauncherDefaultIcon").asInstance(null)})}).call(window)},function(e,t,n){(function(e){(function(){e.register("CookiesManager").dependencies("SettingsFile").asCtor(n(159)),e.register("LocalStorageService").dependencies("Logger").asFunction(n(164))}).call(window)}).call(this,n(1))},function(e,t,r){(function(){var n=r(160),u=r(162);e.exports=function(e,t){var l;this.setCookie=function(e,t,n,r){try{"string"!=typeof t&&(t=t.toString()),t=l.encode(t);var i="";r&&0<r.length&&(i="; domain="+r);var o=new Date;o.setTime(o.getTime()+1e3*n);var a=t+"; expires="+o.toUTCString()+"; path=/"+i;document.cookie=u.encode(e)+"="+a}catch(s){}},this.getCookie=function(e){var t,n,r,i=u.encode(e),o=!1,a=document.cookie.split(";");for(t=0;t<a.length;t++){if(n=a[t].substr(0,a[t].indexOf("=")),r=a[t].substr(a[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==i)return l.decode(r);n==e&&(o=l.decode(r))}return o},function(){l=n.getValueEncoderBySettingsFile(e)}.apply(null,arguments)}}).call(window)},function(n,e,i){(function(){var e=i(161),t=i(162),r=i(163);n.exports=new function(){var n={0:e,1:t,3:r};this.getValueEncoderBySettingsFile=function(e){var t=e.getStorageType();return t&&t.et!==undefined?n[t.et]:n[0]}}}).call(window)},function(e,t){(function(){e.exports=new function(){var a={},n=[{from:33,to:33},{from:35,to:36},{from:38,to:43},{from:45,to:58},{from:60,to:91},{from:93,to:126}];function s(e){for(var t in n)if(n.hasOwnProperty(t)&&e>=n[t].from&&e<=n[t].to)return!0;return!1}this.encode=function(e){for(var t,n="",r=0,i=0;i<e.length;i++)if(!s(e.charCodeAt(i))){t=e.charAt(i);var o=e.substring(r,i);a[t]||(a[t]=encodeURIComponent(t)),n+=o+a[t],r=i+1}return n+=e.substring(r)},this.decode=function(e){try{return decodeURIComponent(e)}catch(t){return e}}}}).call(window)},function(e,t){(function(){e.exports=new function(){this.encode=function(e){return encodeURIComponent(e)},this.decode=function(e){return decodeURIComponent(e)}}}).call(window)},function(e,t){(function(){e.exports=new function(){this.encode=function(e){return e.replace(/,/g,"%2C").replace(/"/g,"%00").replace(/'/g,"%01").replace(/;/g,"%3B")},this.decode=function(e){return e.replace(/%2C/g,",").replace(/%00/g,'"').replace(/%01/g,"'").replace(/%3B/g,";")}}}).call(window)},function(e,t){(function(){e.exports=function(e){return function(){try{if(!window.localStorage)return!1}catch(e){return!1}try{window.localStorage.getItem("wm-test")}catch(t){return!1}return!0}()?window.localStorage:(e.customerLog("localStorage is not enabled"),!1)}}).call(window)},function(e,t,n){(function(){var r=n(166),i={init:function(){var e=r.get("UIChangeTracker"),t=r.get("ChangesTrackerFactory"),n=r.get("PageChangeTracker");i.uiChangeTracker=e,i.changesTrackerFactory=t,i.pageChangeTracker=n},services:["UIChangeTracker","ChangesTrackerFactory","PageChangeTracker"],types:[]};n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(67).registerApi(i,r),e.exports=i}).call(window)},function(e,t,n){(function(){e.exports=n(67).create()}).call(window)},function(e,t,n){(function(){n(166).register("HashChecker").asCtor(function(t,e){var n,r;this.hashChanged=function(){var e=n!=t.location.hash;e?(r("Hash has changed. Previous hash: "+n+". New hash: "+t.location.hash,3),n=t.location.hash):r("Hash has't changed",3);return e},n=t.location.hash,r=e.wrapCustomerLog("HashChecker")}).dependencies("win,Logger")}).call(window)},function(e,t,n){(function(){n(166).register("PageChangeTracker").asCtor(function(e,t,n){this.init=function(){if(o)return;if(o=!0,!l())return;e.bindPreListener(u),s=!0},this.stop=function(){if(o=!1,!l())return;e.unbind(u)},this.bind=function(e){i.push(e)},this.unbind=function(e){for(var t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}},this.triggerPageChange=function(){c()},this.getCurrentIndex=function(){return a},this.isActivated=function(){return s};var r,i=[],o=!1,a=0,s=!1;function l(){return t.isWalkMeVisible()}function u(e){(function(e){if(!e)return!0;for(var t=0;t<r.length;t++)if(e[r[t]])return!1;return!0})(e.notifiers)||c()}function c(){a++;for(var e=i.length-1;0<=e;e--)try{i[e]({uiChangeIndex:a})}catch(t){}}r=[n.UI_CHANGE_NOTIFIERS.HASH,n.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS,n.UI_CHANGE_NOTIFIERS.HISTORY,n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR,n.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR]}).dependencies("UIChangeTracker, WalkMeVisibilityChecker, Consts")}).call(window)},function(e,t,n){(function(){n(166).register("SPAAjaxConfig").dependencies("SPAConfig,HashAjaxConfig,ThrottledAjaxConfig,DummyAjaxConfig,Consts").asFunction(function(e,t,n,r,i){return e.getValue(i.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)?t:e.getValue(i.UI_CHANGE_NOTIFIERS.AJAX_CALLS)?n:r})}).call(window)},function(e,t,n){(function(){n(166).register("SPAConfig").asCtor(function(t,n){this.getValue=function(e){return n.getValue(t.get(),"Settings.spaConfig."+e)}}).dependencies("SiteConfigManager, ObjectJpath")}).call(window)},function(e,t,n){(function(){n(166).register("ElementsRedrawer").asCtor(function(){var l,u,t,c,d,f,n=!1;function r(){n=!1,d.remapTopIframes(),u.callListeners()}this.ready=function(e,t,n,r,i,o,a,s){t,l=n,u=r,c=o.wrapCustomerLog(e.LOG_FEATURES.UI_CHANGE_TRACKER),i,d=a,f=s},this.redrawElements=function(){l.libSetTimeout(function(){if(n)return void c("UIChangeTracker - Canceling uiChange, already waiting for redraw",4);c("UIChangeTracker - UI change triggered",2),n=!0;var e=parseInt(f.getValue("redrawTimeout"))||300;c("UIChangeTracker - redrawing in "+e,4),t&&(t.clear(),t=undefined);t=l.libSetTimeout(r,e)},0)},this.getRedrawerName=function(){return"ElementsRedrawer"}}).injectToReady().dependencies("Consts, Lib,TimerManager,UIChangeTracker, CommonUtils, Logger,IFramesManager, SPAConfig")}).call(window)},function(e,t,n){(function(){var k=n(166);k.register("UIChangeTracker").asCtor(function(e,t,n,r,i,o,a,s,l,u,c,d){var f=this;f.init=function(){f.triggerUIChangeAPI=b,y&&T();if(y=!0,!f.isEnabled())return;u.mapIframes();for(var e=[],t=0;t<p.length;t++)p[t].start(),p[t].isActivated()&&e.push(p[t].getSpaTypeName());0<e.length?(v=!0,g("UIChangeTracker - Creating UIChangeTracker for types: "+e.join(", ")+". Using the following redrawer: "+s.getRedrawerName(),2)):g("UIChangeTracker - Did not activate",2)},f.isEnabled=function(){return d.isWalkMeVisible()},f.stop=T,f.bind=function(e){h.push(e)},f.bindPreListener=function(e){m.push(e)},f.unbind=function(e){w(m,e),w(h,e)},f.callListeners=function(){S++,C(m),C(h),E={}},f.triggerUIChange=b,f.triggerThrottledUIChange=function(t){t&&(E[t]=!0);_?A||(P=!0):(I(),A=_=!0,c.libSetTimeout(function e(){P&&(I(),c.libSetTimeout(e,k.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW"))),_=P,P=!1},k.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW")),c.libSetTimeout(function(){A=!1},k.get("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW")))},f.isActivated=function(){return v},f.getElementRedrawerType=function(){return"ElementsRedrawer"},f.getCurrentIndex=function(){return S},f.triggerUIChangeAPI=function(){g("UIChangeTracker - Not triggering UI Change. Wait For WalkMe to Load",2)};var p,g,h=[],m=[],v=!1,y=!1,S=0,E={};function T(){if(y=!1,f.isEnabled())for(var e=0;e<p.length;e++)p[e].isActivated()&&p[e].stop()}function w(e,t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}}function C(e){for(var t=e.length-1;0<=t;t--)try{e[t]({uiChangeIndex:S,notifiers:E})}catch(n){}}function b(e){e&&(E[e]=!0),I()}function I(){s.redrawElements()}var _=!1,P=!1,A=!1;p=[t,n,r,i,o,a],g=l.wrapCustomerLog(e.LOG_FEATURES.UI_CHANGE_TRACKER)}).dependencies("Consts, HashChangeNotifier, HistoryChangeNotifier, IFrameLoadChangeNotifier,ClickChangeNotifier, AjaxCallsChangeNotifier, UserInputChangeNotifier, ElementsRedrawer,Logger, IFramesManager, TimerManager, WalkMeVisibilityChecker"),k.register("UICT_DEFAULT_THROTTLE_TIME_WINDOW").asInstance(2e3),k.register("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW").asInstance(250)}).call(window)},function(e,t,n){(function(){n(166).register("DummyAjaxConfig").asCtor(function(e){this.name="Dummy ajax handler",this.handler=function(){e.customerLog("That's a dummy ajax calls handler. If you see it, please check your configuration")},this.active=!1}).dependencies("Logger")}).call(window)},function(e,t,n){(function(){n(166).register("HashAjaxConfig").asCtor(function(e,t,n){this.name="Hash on Ajax Calls",this.handler=function(){e.hashChanged()&&t.triggerUIChange(n.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)},this.active=!0}).dependencies("HashChecker,UIChangeTracker,Consts")}).call(window)},function(e,t,n){(function(){n(166).register("ThrottledAjaxConfig").asCtor(function(e,t){this.name="Ajax Calls",this.handler=function(){e.triggerThrottledUIChange(t.UI_CHANGE_NOTIFIERS.AJAX_CALLS)},this.active=!0}).dependencies("UIChangeTracker,Consts")}).call(window)},function(e,t,n){(function(){var g=n(166);g.register("AjaxCallsChangeNotifier").asCtor(function(){var s,n,i,l,u,c,o,d,f,e=!1;function t(e){var t,r;e.XMLHttpRequest&&(n=e.XMLHttpRequest.prototype.send,i=e.XMLHttpRequest.prototype.open,d.isFeatureEnabled("ajaxSpaLoad")?(t=e.XMLHttpRequest,r=t.prototype.open,t.prototype.open=function(e,t){var n=f.registerEventHandler("load",function(){u.customerLog("ajaxSpaOnLoad was called successfully following ajax load",3),n(),c.filter(t)&&o.handler()},!0,this);return r.apply(this,arguments)}):function(e){var n=e.prototype.send,r=e.prototype.open;e.prototype.open=function(e,t){return this._wmUrl=t,r.apply(this,arguments)};e.prototype.send=function(){var t=this;l.setWalkmeTimeout(function(){var e=t.onreadystatechange;t.onreadystatechange=function(){e&&e.apply(t,arguments),c.filter(t._wmUrl)&&o.handler()}},0),n.apply(this,arguments)}}(e.XMLHttpRequest))}function r(e){!e.ajaxCallsListenerSet&&e.documentAccessible&&(t(e.iframe.contentWindow),e.ajaxCallsListenerSet=!0)}function a(){u.customerLog("UIChangeTracker - Stopped listening to Ajax calls",2),p(window),function t(e){e.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{p(this.contentWindow),t(wmjQuery(this.contentWindow.document)),wmjQuery(this).off("load.wmAjaxResposive")}catch(e){u.customerLog("Ajax calls were not overridden for all iframes. (ajax calls ui tracker). This can occur for cross-domain iframes ",4)}})}(wmjQuery(document))}function p(e){e.XMLHttpRequest&&(e.XMLHttpRequest.prototype.send=n,e.XMLHttpRequest.prototype.open=i)}this.ready=function(e,t,n,r,i,o,a){e,s=t,l=n,u=r,c=i,d=o,f=a},this.start=function(){(o=g.get("SPAAjaxConfig")).active&&(t(window),s.foreachIframe(r,!0),s.onIframeLoad(function(e){e.ajaxCallsListenerSet=!1,r(e)}),e=!0)},this.stop=function(){a(),e=!1},this.isActivated=function(){return e},this.getSpaTypeName=function(){return o.name}}).injectToReady().dependencies("UIChangeTracker,IFramesManager, TimerManager, Logger, AjaxCallsChangeNotifierFilter, FeaturesManager, CommonUtils")}).call(window)},function(e,t,n){(function(){n(166).register("ClickChangeNotifier").asCtor(function(){var i,o,a,s,e=!1;function t(){return o.getValue(s.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}function n(){i.triggerThrottledUIChange(s.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}this.ready=function(e,t,n,r){i=e,o=t,a=n,s=r},this.start=function(){t()&&(a.customerLog("UIChangeTracker - clickSelector config defined. Listening to click events for "+t(),2),wmjQuery(document).on("mousedown.wmSpa",t(),n),wmjQuery(document).on("click.wmSpa",t(),n),wmjQuery(document).on("mouseup.wmSpa",t(),n),e=!0)},this.stop=function(){t()&&(wmjQuery(document).off("mousedown.wmSpa"),wmjQuery(document).off("click.wmSpa"),wmjQuery(document).off("mouseup.wmSpa")),e=!1},this.isActivated=function(){return e},this.getSpaTypeName=function(){return"Click"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,Logger,Consts")}).call(window)},function(e,t,n){(function(){n(166).register("HashChangeNotifier").asCtor(function(){var r,i,o,e=null,t=!1;this.ready=function(e,t,n){r=e,i=t,o=n},this.start=function(){i.getValue(o.UI_CHANGE_NOTIFIERS.HASH)&&!i.getValue(o.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)&&(e=window.onhashchange,window.onhashchange=function(){e&&e.apply(null,arguments),r.triggerUIChange(o.UI_CHANGE_NOTIFIERS.HASH)},t=!0)},this.stop=function(){t&&(window.onhashchange=e,e=null,t=!1)},this.isActivated=function(){return t},this.getSpaTypeName=function(){return"Hash"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,Consts")}).call(window)},function(e,t,n){(function(){n(166).register("HistoryChangeNotifier").asCtor(function(){var r,i,o,e=null,t=null,n=!1;this.ready=function(e,t,n){r=e,i=t,o=n},this.start=function(){i.getValue(o.UI_CHANGE_NOTIFIERS.HISTORY)&&(!function(){if(!window.history||!window.history.pushState)return;e=window.onpopstate,window.onpopstate=function(){e&&e.apply(null,arguments),r.triggerUIChange(o.UI_CHANGE_NOTIFIERS.HISTORY)},t||(t=window.history.pushState,window.history.pushState=function(){t.apply(window.history,arguments),r.triggerUIChange(o.UI_CHANGE_NOTIFIERS.HISTORY)})}(),n=!0)},this.stop=function(){n&&(window.onpopstate=e,e=null,window.history.pushState=t,t=null,n=!1)},this.isActivated=function(){return n},this.getSpaTypeName=function(){return"History"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,Consts")}).call(window)},function(e,t,n){(function(){n(166).register("UserInputChangeNotifier").asCtor(function(){var o,a,s,l,u,e=!1;function t(e){if(!e.userInputListenerSet&&e.documentAccessible){var t=wmjQuery(e.iframe.contentWindow.document);n(t),e.userInputListenerSet=!0}}function n(e){e.on("click.wmUITrack",i),e.on("dblclick.wmUITrack",i),e.on("mousedown.wmUITrack",i),e.on("mouseup.wmUITrack",i),a.getValue("userInputHoverOff")||(e.on("hover.wmUITrack",i),e.on("mouseenter.wmUITrack",i),e.on("mouseleave.wmUITrack",i),e.on("mousemove.wmUITrack",i),e.on("mouseout.wmUITrack",i),e.on("mouseover.wmUITrack",i)),e.on("keydown.wmUITrack",i),e.on("keypress.wmUITrack",i),e.on("keyup.wmUITrack",i)}function r(){l.customerLog("UIChangeTracker - Stopped listening to User Input",2),function t(e){e.off("click.wmUITrack");e.off("dblclick.wmUITrack");e.off("mousedown.wmUITrack");e.off("mouseup.wmUITrack");a.getValue("userInputHoverOff")||(e.off("hover.wmUITrack"),e.off("mouseenter.wmUITrack"),e.off("mouseleave.wmUITrack"),e.off("mousemove.wmUITrack"),e.off("mouseout.wmUITrack"),e.off("mouseover.wmUITrack"));e.off("keydown.wmUITrack");e.off("keypress.wmUITrack");e.off("keyup.wmUITrack");e.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{t(wmjQuery(this.contentWindow.document)),wmjQuery(this).off("load.wmUITrack")}catch(e){l.customerLog("User input change tracker did not stop listening for all iframes.. This can occur for cross-domain iframes ",4)}})}(wmjQuery(document))}function i(){o.triggerThrottledUIChange(u.UI_CHANGE_NOTIFIERS.USER_INPUT)}this.ready=function(e,t,n,r,i){o=e,a=t,s=n,l=r,u=i},this.start=function(){a.getValue(u.UI_CHANGE_NOTIFIERS.USER_INPUT)&&(n(wmjQuery(document)),s.foreachIframe(t,!0),s.onIframeLoad(function(e){e.userInputListenerSet=!1,t(e)}),e=!0)},this.stop=function(){r(),e=!1},this.isActivated=function(){return e},this.getSpaTypeName=function(){return"User input"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,IFramesManager,Logger,Consts")}).call(window)},function(e,t,n){(function(){n(166).register("IFrameLoadChangeNotifier").asCtor(function(){var a,s,l,u,c,d,t=!1;function i(e){wmjQuery(e).find(f()).on("load.wmSpa",function(){a.triggerUIChange(l.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)})}function o(e){if(!e.iframeLoadListenerSet&&e.documentAccessible){var t=wmjQuery(e.iframe.contentWindow.document);i(t),e.iframeLoadListenerSet=!0}}function f(){var e=s.getValue(l.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR);return c.decodeHtml(e,["&",'"',"'"])}function p(e){e.iframeLoadListenerSet||(wmjQuery(e.iframe).on("load.wmSpa",function(){a.triggerUIChange(l.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)}),e.iframeLoadListenerSet=!0)}this.ready=function(e,t,n,r,i,o){a=e,s=t,u=n,c=r,d=i,l=o},this.start=function(){s.getValue(l.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)!=undefined&&(!function(){var t,e=f(),n=!e,r=n?"all iframes/frames":e;d.customerLog("UIChangeTracker - iframeLoadSelector config defined. Listening to iframe load events for "+r,2),n?t=p:(i(document),t=o);u.foreachIframe(t,!0),u.onIframeLoad(function(e){e.iframeLoadListenerSet=!1,t(e)})}(),t=!0)},this.stop=function(){var e=f();e&&wmjQuery(e).off("load.wmSpa"),t=!1},this.isActivated=function(){return t},this.getSpaTypeName=function(){return"IFrame load"}}).injectToReady().dependencies("UIChangeTracker,SPAConfig,IFramesManager,HtmlDecoder,Logger,Consts")}).call(window)},function(e,t,n){(function(){n(166).register("AjaxCallsChangeNotifierFilter").asCtor(function(r,i){this.filter=function(e){if(!e)return!0;var t=r.get();if(0===e.indexOf(t))return!1;var n=i.get();return 0!==e.indexOf(n)}}).dependencies("EventServerBaseUrlProvider, RecorderServerManager")}).call(window)},function(e,t,n){(function(){n(166).register("ChangesTrackerFactory").asCtor(function(e,t,n,r){var i;this.get=function(){return i},i=e.isFeatureEnabled(t.FEATURES.pageChangeTracking)?r:n}).dependencies("FeaturesManager, AnalyticsTrackerConsts, UIChangeTracker, PageChangeTracker")}).call(window)},function(e,t,n){(function(e){(function(){e.register("ClickIconExecutionBehavior").asCtor(n(185)).asProto().dependencies("CommonUtils, FeaturesManager"),e.register("TolltipIconUiBehavior").asCtor(n(186)).asProto().dependencies("HtmlDecoder"),e.register("IconCreator").asCtor(n(187)),e.register("IconCreatorParamsProvider").asCtor(n(214)).dependencies("Consts, CommonUtils, SharedConsts"),e.register("IconContentProvider").asCtor(n(215))}).call(window)}).call(this,n(1))},function(e,t){(function(){e.exports=function(e,r,t){var i,o;this.applyBehavior=function(e){e.getTopMostElement().click(function(e){var t,n;t=(new Date).getTime(),n=t-o,!(null!=o&&n<=a)&&(o=t,1)&&((r.isFeatureEnabled("accessibility")||r.isFeatureEnabled("jawsAccessibility"))&&wmjQuery(this).blur(),i())})};var a=2e3;(function(e){i=e.clickAction}).apply(null,[t])}}).call(window)},function(e,t){(function(){e.exports=function(r,e){var i;this.applyBehavior=function(e){var t,n;t=e.getTopMostElement(),n=r.decodeHtml(i,["&",'"',"'",">","<"]),t.attr("title",n)},function(e){i=e.tooltipText}.apply(null,[e])}}).call(window)},function(e,t,a){(function(){e.exports=function(){var r=a(188),i=a(189),o=a(190);this.create=function(e){var t=[i,r],n={concreteIcon:o.create(e),behaviors:t,iconElementUniqueIdentifier:"walkme-icon-root-"+e.uniqueIdentifierType+"-"+e.uniqueIdentifierId};return new(a(212))(n)}}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var i=e.get("FeaturesManager"),o=e.get("SiteConfigManager"),a=e.get("PropagationStopper"),s=e.get("Consts");this.applyBehavior=function(e){var t,n,r;(t=e.getTopMostElement()).click(function(e){e.preventDefault(),e.stopPropagation()}),t.hover(function(e){e.stopPropagation()}),i.isFeatureEnabled(s.FEATURES.IconExecutionAdditionalSp)&&(n=t,r=o.get().Custom.IconExecutionSpEvents||{events:["mousedown","mouseup"]},a.addEventStopPropagation(n,r.events))},function(){}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var r=e.get("CommonUtils");this.applyBehavior=function(e){var t,n=e.getTopMostElement();t=n,r.addTabIndex(t),n.css("cursor","pointer")},function(){}.apply(null,arguments)}}).call(window)},function(t,e,n){(function(){var e=n(98),g=n(191),h=n(193),m=n(199),v=n(209);t.exports=new function(){var d=e.get("ElementEmbedderFactory"),f=e.get("EmbedmentTypeProvider"),p=e.get("Consts");this.create=function(e){var t,n,r,i,o,a,s,l,u,c=(t=e,n={embedder:d.get(t.element,t.isEmbedInElement),perimeterType:t.perimeterType,attachmentSide:t.attachmentSide,positionCustomOffset:t.positionCustomOffset,growingDirection:t.growingDirection,element:t.element},new g(n));return e.contentData.kind==p.ICON_CONTENT_KIND.Image?(r=c,o={contentData:(i=e).contentData,cssClasses:i.cssClasses,zindex:i.zindex,iconEmbedder:r,isAnimated:i.isAnimated},new m(o)):(a=c,s=e,l=f.get(s.isEmbedInElement,s.element),u={headToEmbedFontsIn:v.get(l).get(s.element),text:s.contentData.text,cssClasses:s.cssClasses,zindex:s.zindex,iconEmbedder:a},s.contentData.cssClassName&&s.cssClasses.positionElementCssClassNames.push(s.contentData.cssClassName),new h(u))}}}).call(window)},function(e,t,n){(function(){var l=n(98),u=n(192);e.exports=function(e){var t,n,r,i,o,a=l.get("CustomCssSetter");function s(e){return u.refine(e,i)}this.embed=function(e){return a.setCustomCssIfNeeded(o),t.embed(e,n,r,{refine:s}).then(function(){return t.getElement()})},this.reposition=function(){return t.reposition(n,r,{refine:s})},this.destroy=function(){t.destroy()},t=e.embedder,n=e.perimeterType,r=e.attachmentSide,i=e.positionCustomOffset,e.growingDirection,o=e.element}}).call(window)},function(e,t){(function(){e.exports=new function(){this.refine=function(e,t){var n,r,i={top:e.top,left:e.left};return(n=i).top+=(r=t).top,n.left+=r.left,i}}}).call(window)},function(e,t,n){(function(){var c=n(98),d=n(194),f=n(195),p=n(197),g=n(198);e.exports=function(e){var t,n,r,i,o,a=c.get("Consts"),s=c.get("PlatformDI"),l=undefined;function u(){var e=d.create(n),t=f.createElement(e,r,i);return o.embed(t)}s.register(a.PLATFORM.Web,function(){l=p}),s.register(a.PLATFORM.MobileWeb,function(){l=g}),this.show=function(){return l.load(t).then(u)},this.reposition=function(){return o.reposition()},this.destroy=function(){o.destroy()},t=e.headToEmbedFontsIn,n=e.text,r=e.cssClasses,i=e.zindex,o=e.iconEmbedder}}).call(window)},function(e,t){(function(){e.exports=new function(){this.create=function(e){var t=mtjQuery(document.createElement("div"));return t.html(e),t},function(){}.apply(null,arguments)}}).call(window)},function(e,t,n){(function(){e.exports=new function(){var l=n(98).get("CssClassesAppender"),u=n(196);this.createElement=function(e,t,n){var r,i;r=e,i=t.contentElementCssClassNames,l.appendClasses(r,["walkme-icon-image-div"]),l.appendClasses(r,i);var o,a,s=u.create(n);return o=s,a=t.positionElementCssClassNames,l.appendClasses(o,["walkme-custom-icon-outer-div"]),l.appendClasses(o,a),s.html(e),s}}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var n=e.get("UiUtils"),r=e.get("TopMostCssStyleSettter");this.create=function(e){var t=mtjQuery(document.createElement("div"));return n.addBrowserSpecificClasses(t),n.setLangAttribute(t),t.css("position","absolute"),t.css("display","inline"),t.css("left",0),t.css("top",0),r.setTopMostCssStyle(t,e),t},function(){}.apply(null,arguments)}}).call(window)},function(n,e,r){(function(t){(function(){var e=r(98);n.exports=new function(){var r=e.get("ResourceManager"),i=e.get("FontsData");this.load=function(n){return new t(function(e,t){r.fonts([i.get("walkme-opensans")],n,e,t)})}}}).call(window)}).call(this,r(28))},function(n,e,r){(function(t){(function(){var e=r(98);n.exports=new function(){var r=e.get("ResourceManager"),i=e.get("FontsData");this.load=function(n){return new t(function(e,t){r.fonts([i.get("walkme-opensans"),i.get("lib-font")],n,e,t)})}}}).call(window)}).call(this,r(28))},function(e,t,n){(function(){var p=n(98),g=n(200),h=n(201),m=n(204),v=n(208),y=n(195);e.exports=function(e){var t,n,r,i,o,a,s=p.get("Consts");function l(e){a=m.getStates(e,o)}function u(){var t=g.create();d(t,s.ICON_CONTENT_STATE.Regular);var e=y.createElement(t,n,r);return i.embed(e).then(function(e){return t=e.getOriginElement().children().first(),v.bind(t,a,c),e})}function c(e,t){d(e,t),f()}function d(e,t){a[t].applyState(e)}function f(){return i.reposition()}this.show=function(){return h.load(t).then(l).then(u)},this.reposition=f,this.destroy=function(){i.destroy()},t=e.contentData,n=e.cssClasses,r=e.zindex,i=e.iconEmbedder,o=e.isAnimated}}).call(window)},function(e,t){(function(){e.exports=new function(){this.create=function(){var e=mtjQuery(document.createElement("div"));return e.css("background-repeat","no-repeat"),e},function(){}.apply(this,arguments)}}).call(window)},function(t,e,n){(function(s){(function(){var e=n(98),a=n(202);t.exports=new function(){var o=e.get("CommonUtils"),t=e.get("ImageLoader");function n(r,e,i,o,a){e.push(function(n){t.getImageSize(a[i],function(e){var t;t=e,r[o]=t,r[i]=a[i],n()})})}this.load=function(e){a.convert(e);var r={},i=[];return n(r,i,"mainImageUrl","mainImageSize",e),e.hoverImageUrl&&n(r,i,"hoverImageUrl","hoverImageSize",e),e.clickImageUrl&&n(r,i,"clickImageUrl","clickImageSize",e),new s(function(e,t){var n={functionsToExecute:i,successCallback:function(){e(r)},failCallback:t};o.executeParallel(n)})}}}).call(window)}).call(this,n(28))},function(e,t,r){(function(){var n=r(203);e.exports=new function(){function t(e){return e&&0!=e.indexOf("http")?n.get()+e:e}this.convert=function(e){e.mainImageUrl=t(e.mainImageUrl),e.hoverImageUrl=t(e.hoverImageUrl),e.clickImageUrl=t(e.clickImageUrl)}}}).call(window)},function(e,t,n){(function(){var t=n(98);e.exports=new function(){var e=t.get("ResourceManager");this.get=function(){return e.getResourcePath("/player/resources/launchers/")}}}).call(window)},function(t,e,n){(function(){var e=n(98),s=n(205);t.exports=new function(){var a=e.get("Consts");this.getStates=function(e,t){var n={},r=s.get(t,e.mainImageUrl,e.mainImageSize);if(n[a.ICON_CONTENT_STATE.Regular]=r,e.clickImageSize){var i=s.get(t,e.clickImageUrl,e.clickImageSize);n[a.ICON_CONTENT_STATE.Click]=i}if(e.hoverImageSize){var o=s.get(t,e.hoverImageUrl,e.hoverImageSize);n[a.ICON_CONTENT_STATE.Hover]=o}return n}}}).call(window)},function(e,t,n){(function(){var i=n(206),o=n(207);e.exports=new function(){this.get=function(e,t,n){var r={imageUrl:t,imageSize:n};return e?new i(r):new o(r)},function(){}.apply(null,arguments)}}).call(window)},function(e,t){(function(){e.exports=function(e){var t,n;this.applyState=function(e){e.stop(),e.css("background-image",'url("'+n+'")'),e.animate({width:t.width+"px",height:t.height+"px"})},function(e){t=e.imageSize,n=e.imageUrl}.apply(null,[e])}}).call(window)},function(e,t){(function(){e.exports=function(e){var n,r;this.applyState=function(e){var t;e.css("background-image",'url("'+r+'")'),(t=e).css("height",n.height+"px"),t.css("width",n.width+"px")},function(e){n=e.imageSize,r=e.imageUrl}.apply(null,[e])}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var l=e.get("Consts");this.bind=function(e,t,n){var r,i,o,a,s;t[l.ICON_CONTENT_STATE.Hover]&&(i=n,(r=e).hover(function(){i(r,l.ICON_CONTENT_STATE.Hover)},function(){i(r,l.ICON_CONTENT_STATE.Regular)})),t[l.ICON_CONTENT_STATE.Click]&&(o=e,a=n,s=t[l.ICON_CONTENT_STATE.Hover]?l.ICON_CONTENT_STATE.Hover:l.ICON_CONTENT_STATE.Regular,o.on("touchend mouseup",function(){a(o,s)}).on("touchstart mousedown",function(){a(o,l.ICON_CONTENT_STATE.Click)}))}}}).call(window)},function(t,e,i){(function(){var e=i(98),n=i(210),r=i(211);t.exports=new function(){this.get=function(e){return e==t.EMBEDMENT_TYPE.EmbedInTopDocument?r:n};var t=e.get("Consts")}}).call(window)},function(e,t){(function(){e.exports=new function(){this.get=function(e){return wmjQuery("head",e[0].ownerDocument)}}}).call(window)},function(e,t){(function(){e.exports=new function(){this.get=function(){return wmjQuery("head")}}}).call(window)},function(e,t,n){(function(){var a=n(98),s=n(213);e.exports=function(e){var t,n,r,i,o=a.get("ElementAttacher");this.show=function(){return t.show().then(function(e){var t;return(t=(i=e).getTopMostElement()).addClass(n),t.addClass("walkme-not-embed"),s.applyBehaviors(i,r),i})},this.destroy=function(){i&&(o.detachByElement(i.getTopMostElement()),i=undefined),t.destroy()},this.reposition=function(){t.reposition()},this.getIconElement=function(){return i},this.addCssClasses=function(e){var t=i.getTopMostElement();e="string"==typeof e?[e]:e;for(var n=0;n<e.length;n++)t.addClass(e[n])},this.isDrawn=function(){try{return 0<i.getOriginElement().parents("html").length}catch(e){return!1}},this.hide=function(e){e?i.getOriginElement().css("display","none"):i.getOriginElement().hide()},this.display=function(){i.getOriginElement().show()},t=e.concreteIcon,n=e.iconElementUniqueIdentifier,r=e.behaviors}}).call(window)},function(e,t){(function(){e.exports=new function(){this.applyBehaviors=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.applyBehavior(e)}}}}).call(window)},function(e,t){(function(){e.exports=function(n,r,i){this.get=function(e,t){return r.defaultValue(t.isAnimated,!1),{element:e,uniqueIdentifierType:t.uniqueIdentifierType,uniqueIdentifierId:t.uniqueIdentifierId,isEmbedInElement:r.defaultValue(t.isEmbedInElement,!1),contentData:t.contentData,isAnimated:t.isAnimated,attachmentSide:t.attachmentSide,zindex:r.defaultValue(t.zindex,i.deployableDefaultAttributes.zIndex.icon.toString()),perimeterType:parseInt(r.defaultValue(t.perimeterType,n.POSITION_PERIMETER_TYPE.Outside)),positionCustomOffset:{top:parseInt(r.defaultValue(t.positionTopCustomOffset,0)),left:parseInt(r.defaultValue(t.positionLeftCustomOffset,0))},cssClasses:{contentElementCssClassNames:t.contentElementCssClassNames,positionElementCssClassNames:t.positionElementCssClassNames}}}}}).call(window)},function(e,t,i){(function(){e.exports=function(){var t=i(216),n=i(217),r=i(218);this.get=function(e){return e.TemplateId?"htmlShape"==e.Type?n.getFromCustomTemplate(e.TemplateId):r.getFromCustomTemplate(e.TemplateId):"htmlShape"==e.Type?n.getFromSettingsImageObject(e.Predefined):t.getFromSettingsImageObject(e.Predefined)},function(){}.apply(null,arguments)}}).call(window)},function(e,t,i){(function(){e.exports=new function(){var e=i(98),n=e.get("CommonUtils"),r=e.get("Consts");this.getFromSettingsImageObject=function(e){var t=e.data.shape+"-"+e.data.color;return{mainImageUrl:t+".png",kind:r.ICON_CONTENT_KIND.Image,hoverImageUrl:n.isValueTrue(e.data.hover)?t+"-hover.png":null,clickImageUrl:n.isValueTrue(e.data.click)?t+"-click.png":null}}}}).call(window)},function(e,t,i){(function(){e.exports=new function(){var e=i(98),n=e.get("HtmlShapesProvider"),r=e.get("Consts");this.getFromSettingsImageObject=function(e){return{text:e.data.customText,cssClassName:e.data.customClass,kind:r.ICON_CONTENT_KIND.Text}},this.getFromCustomTemplate=function(e){var t=n.getById(e);return{text:t.Text,kind:r.ICON_CONTENT_KIND.Text,cssClassName:"html-launcher-"+t.Shape+"-"+t.Color}}}}).call(window)},function(t,e,n){(function(){var e=n(98);t.exports=new function(){var n=e.get("CustomImagesProvider"),r=e.get("Consts");this.getFromCustomTemplate=function(e){var t=n.getById(e);return t?{mainImageUrl:t.Url,hoverImageUrl:t.Hover,clickImageUrl:t.Click,text:t.CustomText,cssClassName:"custom-launcher-"+e,kind:t.Url?r.ICON_CONTENT_KIND.Image:r.ICON_CONTENT_KIND.Text}:null}}}).call(window)},function(e,t,n){(function(){var u=n(220),c={init:function(){var e=u.get("SmartTipSetsManager"),t=u.get("SmartTipEventSender"),n=u.get("SmartTipHighlighterDrawerCreator"),r=u.get("SmartTipComponentDrawerConfigurationProvider"),i=u.get("SmartTipDrawerOptionsProvider"),o=u.get("SmartTipSetActivationInitiator"),a=u.get("DisabledSmartTipsRemover"),s=u.get("SmartTipIconStylingProvider"),l=u.get("SmartTipDrawersCreator");c.smartTipSetsManager={},c.smartTipSetsManager.init=e.init,c.smartTipSetsManager.getAll=e.getAll,c.smartTipSetsManager.getSetManagerById=e.getSetManagerById,c.smartTipSetsManager.turnOffAllSets=e.turnOffAllSets,c.smartTipEventSender={},c.smartTipEventSender.postSetActivatedEvent=t.postSetActivatedEvent,c.smartTipEventSender.postSmartTipSegmentedEvent=t.postSmartTipSegmentedEvent,c.smartTipEventSender.postValidationFailedEvent=t.postValidationFailedEvent,c.smartTipEventSender.postValidationPassedEvent=t.postValidationPassedEvent,c.smartTipEventSender.postTooltipShownEvent=t.postTooltipShownEvent,c.smartTipEventSender.postElementEvent=t.postElementEvent,c.smartTipHighlighterDrawerCreator={},c.smartTipHighlighterDrawerCreator.create=n.create,c.smartTipComponentDrawerConfigurationProvider={},c.smartTipComponentDrawerConfigurationProvider.getConfig=r.getConfig,c.smartTipDrawerOptionsProvider={},c.smartTipDrawerOptionsProvider.getTooltipDrawerOptions=i.smartTipDrawerOptionsProvider,c.smartTipSetActivationInitiator={},c.smartTipSetActivationInitiator.start=o.start,c.smartTipSetActivationInitiator.stop=o.stop,c.disabledSmartTipsRemover={},c.disabledSmartTipsRemover.remove=a.remove,c.smartTipIconStylingProvider={},c.smartTipIconStylingProvider.get=s.get,c.smartTipDrawersCreator={},c.smartTipDrawersCreator.getIconDrawer=l.getIconDrawer,c.smartTipDrawersCreator.getStaticTooltipDrawer=l.getStaticTooltipDrawer,c.smartTipDrawersCreator.getInteractiveTooltipDrawer=l.getInteractiveTooltipDrawer,c.smartTipDrawersCreator.getHighlighterDrawer=l.getHighlighterDrawer},services:["SmartTipSetsManager","SmartTipEventSender","SmartTipHighlighterDrawerCreator","SmartTipComponentDrawerConfigurationProvider","SmartTipDrawerOptionsProvider","SmartTipSetActivationInitiator","DisabledSmartTipsRemover","SmartTipIconStylingProvider","SmartTipDrawersCreator"],types:["SmartTip","SmartTipTooltipDrawer","ChainedSmartTipComponentDrawer"]};n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(67).registerApi(c,u),e.exports=c}).call(window)},function(e,t,n){(function(){e.exports=n(67).create()}).call(window)},function(e,t,n){(function(){n(220).register("InfoAndValidationsSmartTipComponentsActivator").asCtor(function(n,e){var r,i;function o(){var e=[r.destroy(),i.destroy()];return n.executeParallely(e)}this.activate=function(e){o();var t=[r.activate(e),i.activate(e)];return n.executeParallely(t)},this.destroy=o,r=e.infoComponentActivator,i=e.validationsComponentActivator}).asProto().dependencies("PromiseUtils")}).call(window)},function(e,t,n){(function(){n(220).register("InfoSmartTipComponentsActivator").asCtor(function(t,e){var n,r;this.activate=function(e){return(r=t.get(n,n.Info)).draw(e)},this.destroy=function(){if(r)return r.destroy();return wmjQuery.when()},n=e.smartTipModel}).asProto().dependencies("SmartTipComponentDrawerFactory")}).call(window)},function(e,t,n){(function(){var l=n(220);l.register("SmartTipComponentsActivatorFactory").asCtor(function(o){function a(e){var t={smartTipModel:e};return l.create("InfoSmartTipComponentsActivator",t)}function s(e){var t={smartTipModel:e};return l.create("ValidationsSmartTipComponentsActivator",t)}this.get=function(e){switch(e.Mode){case o.SMART_TIP.MODE.OnlyInfo:return a(e);case o.SMART_TIP.MODE.OnlyValidations:return s(e);case o.SMART_TIP.MODE.InfoAndValidations:return n=a(t=e),r=s(t),i={infoComponentActivator:n,validationsComponentActivator:r},l.create("InfoAndValidationsSmartTipComponentsActivator",i);default:throw new Error("Unsupported smartTipMode: "+e.Mode)}var t,n,r,i}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(220).register("ValidationsComplexConditionIndicator").asCtor(function(i){function o(e){if("Func"!=e.nodeType)return!1;var t=0===e.funcName.indexOf("Element"),n=0===e.funcName.indexOf("jQuery");return t||n}this.containsComplexCondition=function(e){if(!e)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(n.ConditionTrees&&n.ConditionTrees.Validation){var r=i.anyMatchesCondition(n.ConditionTrees.Validation,o);if(r)return!0}}return!1}}).dependencies("ConditionTreeUtils")}).call(window)},function(e,t,n){(function(){n(220).register("ValidationsSmartTipComponentsActivator").asCtor(function(n,e,r,i,o,t){var a,s,l,u,c,d,f;function p(){return f=!0,l.drawValidationFeedback(a)}function g(e,t,n){t&&t.shouldValidate&&a&&o.libSetTimeout(function(){p().then(function(){var e=n&&n.sender==a[0];l.applyBehaviorOnFeedback({tooltipStartShown:e})})},0)}function h(){wmjQuery(d).off(n.SMART_TIP_INNER_EVENTS.CheckValidations)}function m(){if(c&&a){var e=y(c);i.off(a,s,e)}}function v(t){return function(e){f&&u.evaluate(t,{sender:e.target})}}function y(e){for(var t=[],n=0;n<e.length;n++){var r=e[n]+"."+d.Id;t.push(r)}return t}this.activate=function(e){return a=e,f=!d.Settings.validateThruLauncher,h(),wmjQuery(d).on(n.SMART_TIP_INNER_EVENTS.CheckValidations,p),t=r.get(d,a,g),s=t.activationElementsSelector,u=t.stateMachine,c=t.elementEvents,m(),function(){if(c&&a)for(var e=y(c),t=0;t<e.length;t++)i.on(a,s,e[t],v(c[t]))}(),wmjQuery.when();var t},this.destroy=function(){h(),m(),u&&(u.reset(),u=null);return a=s=null,l.removeValidationFeedback()},l=e.create(t.smartTipModel),d=t.smartTipModel}).asProto().dependencies("Consts, ValidationsSmartTipComponentDrawerCreator, ValidationsSmartTipStateMachineProvider, DocumentElementEventsBinder, TimerManager")}).call(window)},function(e,t,n){(function(){n(220).register("ValidationsSmartTipStateMachineConfiguration").asFunction(function(e){var t={dontCheck:"dontCheck",delayValidationCheck:"delayValidationCheck",checkValidation:"checkValidation"},n=".walkme.smarttip.validation",r={onFocusOut:"blur"+n,onFocus:"focus"+n,onKeyDown:"keydown"+n,onChange:"change"+n};return{initialState:t.dontCheck,timedOutTransitions:[{fromState:t.delayValidationCheck,timeout:500,toState:t.checkValidation}],defaultTransitionValuesToReturn:[{toState:t.checkValidation,valueToReturn:{shouldValidate:1}}],keyDownTransitions:[{fromState:"*",onAction:r.onKeyDown,toState:t.delayValidationCheck}],keyDownEvents:[r.onKeyDown],focusTransitions:[{fromState:"*",onAction:r.onFocusOut,toState:t.checkValidation},{fromState:"*",onAction:r.onFocus,toState:t.dontCheck}],focusEvents:[r.onFocus,r.onFocusOut],changeTransitions:[{fromState:"*",onAction:r.onChange,toState:t.checkValidation}],changeEvents:[r.onChange]}}).dependencies("Consts")}).call(window)},function(e,t,n){(function(){n(220).register("ValidationsSmartTipStateMachineProvider").asCtor(function(u,c,d,e,f){this.get=function(e,t,n){var r=u.focusTransitions,i=u.focusEvents,o=f.containsComplexCondition(e.Validations);e.Settings.validateWhileTyping&&(r=r.concat(u.keyDownTransitions),i=i.concat(u.keyDownEvents));(d.isSelectInput(t)||o)&&(r=r.concat(u.changeTransitions),i=i.concat(u.changeEvents));return{stateMachine:(a=r,s=n,l={initState:u.initialState,timedOutTransitions:u.timedOutTransitions,defaultTransitionValuesToReturn:u.defaultTransitionValuesToReturn,onStateChangedCallback:s,transitions:a},c.create(l)),elementEvents:i,activationElementsSelector:o?p:t};var a,s,l};var p="*"}).dependencies("ValidationsSmartTipStateMachineConfiguration, StatesMachineCreator, HtmlElementsDataProvider, Consts, ValidationsComplexConditionIndicator")}).call(window)},function(e,t,n){(function(){var o=n(220);o.register("SmartTipHighlighterDrawerCreator").asCtor(function(){this.create=function(e,t,n,r){var i={drawableType:t,drawableId:e,highlighterCustomStyling:n,smartTipModel:r};return o.create("SmartTipHighlighterDrawer",i)}})}).call(window)},function(e,t,n){(function(){n(220).register("ChainedSmartTipComponentDrawer").asCtor(function(o,r,e){var a,i,s;this.draw=function(e){return u(function(){return function(e){s=l.Drawing;for(var t=[],n=0;n<a.length;n++){var r=a[n];t.push(r.draw)}var i=o.executePromiseChain(t,e);return i.always(function(){s=l.Drawn}),i}(wmjQuery(e))},t,l.Destroying)},this.applyBehavior=function(e){for(var t=0;t<a.length;t++)a[t].applyBehavior&&a[t].applyBehavior(e)},this.destroy=function(){return u(c,n,l.Drawing)};var l={Drawing:"drawing",Drawn:"drawn",Destroying:"destroying",Destroyed:"destroyed"},t=[l.Drawing,l.Drawn],n=[l.Destroying,l.Destroyed];function u(e,t,n){return-1!=r(s,t)?i:i=s==n?i.then(e):e()}function c(){s=l.Destroying;for(var e=[],t=a.length-1;0<=t;t--){var n=a[t];e.push(n.destroy)}var r=o.executePromiseChain(e);return r.always(function(){s=l.Destroyed}),r}a=e.drawers}).asProto().dependencies("PromiseUtils, inArrayFunc")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipComponentDrawerConfigurationProvider").asCtor(function(){this.getConfig=function(e){var t=e.IsWithIcon,n=!!e.TooltipText,r=e.IsWithHighlighter;return{shouldDrawIcon:t,shouldDrawTooltip:n,shouldDrawHighlighter:r}}})}).call(window)},function(e,t,n){(function(){var a=n(220);a.register("SmartTipDrawersCreator").asCtor(function(i){function o(e,t,n){var r={smartTipModel:n,smartTipUiComponentModel:e,globalStyling:t};return a.create("SmartTipTooltipDrawer",r)}this.getIconDrawer=function(e,t,n){var r={smartTipModel:e,smartTipUiComponentModel:t,globalStyling:n};return a.create("SmartTipIconDrawer",r)},this.getStaticTooltipDrawer=o,this.getInteractiveTooltipDrawer=function(e,t,n){var r=o(e,t,n),i={smartTipComponentModel:e,tooltipDrawer:r};return a.create("SmartTipInteractiveTooltipDrawer",i)},this.getHighlighterDrawer=function(e,t,n){var r={};return r["z-index"]=e&&e.Settings&&e.Settings["z-index"],r=wmjQuery.extend({},n.Highlighter,r),i.create(t.Id,"smartTipUiComponent",r,e)}}).dependencies("SmartTipHighlighterDrawerCreator")}).call(window)},function(e,t,n){(function(){var c=n(220);c.register("SmartTipComponentDrawerFactory").asCtor(function(l,r,u){this.get=function(e,t){var n=r.get(t.GlobalStyleId);return function(e,t,n){var r=l.getConfig(t),i=[];if(r.shouldDrawHighlighter){var o=u.getHighlighterDrawer(e,t,n);i.push(o)}if(r.shouldDrawIcon){var a=u.getIconDrawer(e,t,n);i.push(a)}if(r.shouldDrawTooltip){var s=u.getInteractiveTooltipDrawer(t,n,e);i.push(s)}return c.create("ChainedSmartTipComponentDrawer",{drawers:i})}(e,t,n)}}).dependencies("SmartTipComponentDrawerConfigurationProvider, SmartTipGlobalStylingProvider, SmartTipDrawersCreator")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipDrawerOptionsProvider").asCtor(function(t,i){this.getTooltipDrawerOptions=function(e,t){var n={smartTip:t,uiComponent:e},r={};i.merge(n,r,o),r.cssClasses=[],t&&r.cssClasses.push("walkme-tooltip-smarttip-"+t.Id);e&&r.cssClasses.push("walkme-tooltip-uicomponent-"+e.Id);return r};var o={"uiComponent.Id":"itemId","smartTip.Settings.z-index":"stepSettings.z-index","smartTip.Settings.embedInParent":"stepSettings.embed","smartTip.Settings.tooltipPosition":"tooltipPosition","smartTip.Settings.tooltipPositionOffset":{destination:"tooltipPositionOffset",where:function(e,t){return t("smartTip.Settings.tooltipPosition")!==undefined}},"smartTip.Settings.Position":{destination:"directionToAvoid",transform:function(e){return t.OPPOSITE_POSITION_TYPE[e]},where:function(e,t){return!!t("uiComponent.IsWithIcon")}}}}).dependencies("Consts, ObjectMapper")}).call(window)},function(e,t,n){(function(){var p=n(220);p.register("SmartTipHighlighterDrawer").asCtor(function(o,a,e){var s,l,u,c,d;function f(e){s.highlight()}this.draw=function(e){return(t=e,n=l,r=o.isTrue(u.Settings,"embedInParent",!1),i={element:t,settings:n,drawableType:c,drawableId:d,monitor:!0,defaultSettings:!1,embedInElement:r,cssKeysValues:[{id:d,name:c},{id:u.Id,name:"smarttipid"}]},s=p.create("Highlighter",i)).highlight(),wmjQuery(u).on(a.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,f),wmjQuery.when(e);var t,n,r,i},this.destroy=function(){s&&(s.unhighlightElement(),s=null);return wmjQuery(u).off(a.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,f),wmjQuery.when()},c=e.drawableType,d=e.drawableId,l=e.highlighterCustomStyling,u=e.smartTipModel}).asProto().dependencies("CommonUtils, Consts")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipIconDrawer").asCtor(function(t,e,n){var r,i,o,a,s,l;function u(e){r.reposition()}this.draw=function(e){r=t.create(i,o,e,a);var n=wmjQuery.Deferred();return wmjQuery(i).on(s.SmartTipElementRepositioned,u),r.show().then(function(e){wmjQuery(o).trigger(s.EventPropogationPrefix,{eventType:l.SmartTipIconShown});var t=e.getOriginElement();t&&t[0]?n.resolve(t):n.reject()}),n.promise()},this.destroy=function(){r&&(r.destroy(),r=null,wmjQuery(o).trigger(s.EventPropogationPrefix,{eventType:l.SmartTipIconDestroyed}));return wmjQuery(i).off(s.SmartTipElementRepositioned,u),wmjQuery.when()},i=n.smartTipModel,o=n.smartTipUiComponentModel,a=n.globalStyling,s=e.SMART_TIP_INNER_EVENTS,l=e.EVENTS.SmartTips}).asProto().dependencies("SmartTipIconCreator, Consts")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipInteractiveTooltipDrawer").asCtor(function(n,r,i,o,e){var a,s,l;function u(e,t){t&&t.uiComponent&&s&&t.uiComponent.Id!=l.Id&&s.hide()}this.draw=function(e){var t=r.getEventsByElement(e);return(s=n.create(a,e,t)).setEvents(),i.bind(o.EVENTS.SmartTips.TooltipShown,u),wmjQuery.when(e)},this.applyBehavior=function(e){e&&e.tooltipStartShown&&s&&s.show()},this.destroy=function(){if(i.unbind(o.EVENTS.SmartTips.TooltipShown,u),!s)return wmjQuery.when();var e=s.clean();return s=null,e},a=e.tooltipDrawer,l=e.smartTipComponentModel}).asProto().dependencies("TooltipControllerCreator, TooltipVisibilityEventsProvider, WmInternals, Consts")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipTooltipDrawer").asCtor(function(i,e,o,t,n,r){var a,s,l,u;this.draw=function(e){return f=e,g()},this.destroy=function(){return f=null,p=p.pipe(m)};var c,d,f=null,p=wmjQuery.when();function g(){return p=p.pipe(m).pipe(h)}function h(){if(!f)return wmjQuery.when();var e=s.TooltipStyle||u.Tooltip,t=o.getTooltipDrawerOptions(s,l);a=i.create(f,s.TooltipText,e,t);var n=wmjQuery.Deferred(),r=n.promise();return a.show().pipe(function(e){wmjQuery(s).trigger(c.EventPropogationPrefix,{eventType:d.TooltipShown}),n.resolve(e)}),wmjQuery(l).on(c.SmartTipElementRepositioned,y),r}function m(){if(!a)return wmjQuery.when();wmjQuery(l).off(c.SmartTipElementRepositioned,y);var e=a.destroy().then(v);return a=undefined,e}function v(){wmjQuery(s).trigger(c.EventPropogationPrefix,{eventType:d.SmartTipTooltipDestroyed})}function y(e){document.activeElement==wmjQuery("body")[0]?t.setWalkmeTimeout(S,100):S()}function S(){var e;e=wmjQuery("#walkme-tooltip-"+s.Id)[0],n.isFocusedElementOutsideElement(e)&&g()}s=r.smartTipUiComponentModel,u=r.globalStyling,l=r.smartTipModel,c=e.SMART_TIP_INNER_EVENTS,d=e.EVENTS.SmartTips}).asProto().dependencies("TooltipCreator, Consts, SmartTipDrawerOptionsProvider, TimerManager, FocusedElementInElementChecker")}).call(window)},function(e,t,n){(function(){n(220).register("ValidationsSmartTipComponentDrawer").asCtor(function(o,r,a,i,e){var s,l,u,c;function d(n,r){var e=[],t=l!=undefined;t&&(l=null,e.push(f));var i=r!=undefined;if(i){l=r;e.push(function(){return e=n,t=r,(s=o.get(u,t)).draw(e);var e,t})}return a.executePromiseChain(e)}function f(){if(!s)return wmjQuery.when();var e=s.destroy();return s=null,e}function p(e,t){var n={uiComponent:t,eventType:e};wmjQuery(u).trigger(i.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,n)}this.drawValidationFeedback=function(e){var t=r.getFeedbackComponent(u,e);if(n=t,n==l&&!c)return wmjQuery.when();var n;return c=!1,d(e,t).then(function(){var e;(e=t)&&e.Type==i.SMART_TIP.COMPONENT_TYPE.Validation?p(i.EVENTS.SmartTips.ValidationFailed,e):p(i.EVENTS.SmartTips.ValidationPassed,e)})},this.removeValidationFeedback=function(){return l=null,f()},this.applyBehaviorOnFeedback=function(e){s&&s.applyBehavior&&s.applyBehavior(e)},u=e.smartTipModel,c=!0}).asProto().dependencies("SmartTipComponentDrawerFactory, SmartTipValidationFeedbackComponentProvider, PromiseUtils, Consts")}).call(window)},function(e,t,r){(function(){var n=r(220);n.register("ValidationsSmartTipComponentDrawerCreator").asCtor(function(){this.create=function(e){var t={smartTipModel:e};return n.create("ValidationsSmartTipComponentDrawer",t)}})}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipIconStylingProvider").asCtor(function(){this.get=function(e,t){if(e.TemplateId)return{TemplateId:e.TemplateId};if(e.Settings.imageObject)return"htmlShape"==e.Settings.imageObject.type?{TemplateId:e.Settings.imageObject.data.id,Predefined:e.Settings.imageObject,Type:e.Settings.imageObject.type}:{Predefined:e.Settings.imageObject};if(t.Icon.TemplateId)return{TemplateId:t.Icon.TemplateId};if("htmlShape"==t.Icon.Predefined.type)return{Predefined:t.Icon.Predefined,Type:t.Icon.Predefined.type};return{Predefined:t.Icon.Predefined}},function(){}.apply(null,arguments)})}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipIconCreator").asCtor(function(g,h,m,v){this.create=function(e,t,n,r){var i=(u=e,c=t,d=r,f=v.get(c,d),p=m.get(f),{uniqueIdentifierType:"SmartTip",uniqueIdentifierId:u.Id,isEmbedInElement:u.Settings.embedInParent,attachmentSide:u.Settings.Position,zindex:u.Settings["z-index"],perimeterType:u.Settings.context,isAnimated:u.Settings.animated,growingDirection:u.Settings.direction,positionTopCustomOffset:u.Settings.topOffset,positionLeftCustomOffset:u.Settings.leftOffset,contentElementCssClassNames:[],positionElementCssClassNames:(a=u,s=p,l=[],l.push("walkme-icon-position-smartTip-id-"+a.Id),s.customClass&&l.push(s.customClass),l),contentData:p}),o=h.get(n,i);var a,s,l;var u,c,d,f,p;return g.create(o,n)},function(){}.apply(null,arguments)}).dependencies("IconCreator, IconCreatorParamsProvider, IconContentProvider, SmartTipIconStylingProvider")}).call(window)},function(e,t,n){(function(){var s=n(220);s.register("SmartTipSetsActivatorFactory").asCtor(function(a){this.get=function(){for(var e=[],t=a.getAll(),n=0;n<t.length;n++){var r=t[n],i=(o=r,s.create("SmartTipSetActivator",{set:o}));e.push(i)}var o;return e}}).dependencies("SmartTipSetsManager")}).call(window)},function(e,t,n){(function(){var a=n(220);a.register("SmartTipSetActivator").asCtor(function(t,n,r){var i,o,e;this.start=function(){if(e)return;(e=a.create("UIVisibilityManager",o)).watchForVisibility()},this.stop=function(){e&&e.cleanResources(),e=null},function(){i=r.set;var e=n.getSetManagerById(i.Id);o={logContext:i.Id,trackUIChanges:!0,conditionTree:i.ConditionTrees.DisplayRules,onShow:e.turnOnWithLazyValidations,onRemove:e.turnOff,conditionCheckerParams:{elementName:i.Name,ownerChain:{type:t.ELEMENT_OWNER_TYPE_NAMES.SMART_TIPSET,id:i.Id}}}}()}).asProto().dependencies("Consts, SmartTipSetsManager")}).call(window)},function(e,t,n){(function(){n(220).register("DisabledSmartTipsRemover").asCtor(function(r){function i(e){return!e.IsEnabled}this.remove=function(e){for(var t=0;t<e.length;t++){var n=e[t].SmartTips;r.remove(n,i)}}}).dependencies("DisabledElementsRemover")}).call(window)},function(e,t,n){(function(){n(220).register("FocusedElementInElementChecker").asCtor(function(n){this.isFocusedElementOutsideElement=function(e){var t=document.activeElement;return!e||!n.contains(e,t)}}).dependencies("wmjQuery")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipComponentsIterator").asCtor(function(){this.doOnAllComponents=function(e,t){e.Info&&t(e.Info);e.PositiveFeedback&&t(e.PositiveFeedback);if(e.Validations)for(var n=0;n<e.Validations.length;n++){var r=e.Validations[n];t(r)}}})}).call(window)},function(e,t,n){(function(){var r=n(220);r.register("SmartTipCreator").asCtor(function(){this.create=function(e,t){e._setId=t;var n={smartTipModel:e};return r.create("SmartTip",n)}})}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipDrawer").asCtor(function(n,e,t,r){var i,o,a;this.drawSmartTipElements=function(e){i.Settings.hlType!=undefined&&(t=e,(a=n.create(i.Id,"smartTip",i.Settings,i)).draw(t));var t;return o.activate(e)},this.removeSmartTipElements=function(){var e=[o.destroy()];a&&e.push(a.destroy());return t.executeParallely(e)},i=r.smartTipModel,o=e.get(i)}).asProto().dependencies("SmartTipHighlighterDrawerCreator, SmartTipComponentsActivatorFactory, PromiseUtils")}).call(window)},function(e,t,r){(function(){var n=r(220);n.register("SmartTipDrawerCreator").asCtor(function(){this.create=function(e){var t={smartTipModel:e};return n.create("SmartTipDrawer",t)}})}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipFirstFailedValidationProvider").asCtor(function(r){function a(e,t){var n=r.createNew({getSelectedElement:function(){return t}});return n.getCurrentEvaluationValueAndStopEvaluating(e)}this.getFirstFailedValidation=function(e,t){if(!e.Validations)return null;for(var n=0;n<e.Validations.length;n++){var r=e.Validations[n];if(r.ConditionTrees&&r.ConditionTrees.Validation){var i=r.ConditionTrees.Validation,o=a(i,t);if(!o)return r}}return null}}).dependencies("ConditionCheckerFactory")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipGlobalStylingProvider").asCtor(function(t){this.get=function(e){return t.get().SmarttipSettings[e]}}).dependencies("SiteConfigManager")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipSetActivationInitiator").asCtor(function(e,t,n,r,i){var o=[];function a(){o=t.get();for(var e=0;e<o.length;e++)o[e].start()}this.start=function(){e.wrapSession(function(){var e={type:i.STEP_PLAY_INITIATOR_ENUM.AUTOSTART};r.saveData(r.keysConfig.smartTipSet.initiator.key,e,r.keysConfig.smartTipSet.initiator.expiry),n.setForScope(e,a)})},this.stop=function(){for(var e=0;e<o.length;e++)o[e].stop()}}).dependencies("ElementFinder, SmartTipSetsActivatorFactory, InitiatorManager, ClientStorageManager, Consts")}).call(window)},function(e,t,n){(function(E){(function(){n(220).register("SmartTipSetManager").asCtor(function(n,t,r,i,o,e){this.turnOnWithLazyValidations=d,this.turnOnWithImmediateValidations=function(e){d(function(){f(m),e&&e()})},this.turnOff=function(){if(!c)return wmjQuery.when();return c=!1,f(v),S(t.EVENTS.SmartTips.SetTurnedOff),e=wmjQuery.map(a,function(e){return s[e.Id]}),r.executeParallelyOnArray(e,g);var e};var a,s,l,u,c=!1;function d(e){c?e&&e():(u=o.generateGuid(),function(n){var r=[];return a&&wmjQuery.each(a,function(e,t){r.push(n(t))}),E.all(r)}(p).then(function(){c||(f(y),S(t.EVENTS.SmartTips.SetTurnedOn),c=!0),e&&e()}))}function f(n){a&&wmjQuery.each(a,function(e,t){n(t)})}function p(e){var t=s[e.Id];return t.activate()}function g(e){return e.deactivate()}function h(e){var t=n.create(e,l);s[e.Id]=t}function m(e){wmjQuery(e).trigger(t.SMART_TIP_INNER_EVENTS.CheckValidations)}function v(e){wmjQuery(e).off(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix)}function y(r){wmjQuery(r).on(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(e,t){var n={smartTipModel:r};n=wmjQuery.extend(n,t),S(t.eventType,n)})}function S(e,t){var n={setId:l,playGuid:u};t=wmjQuery.extend(n,t||{}),i.raiseEvent(e,t)}a=e.smartTipModels,l=e.setId,s={},f(h)}).asProto().dependencies("SmartTipCreator, Consts, PromiseUtils, CommonEvents, GuidGenerator")}).call(window)}).call(this,n(28))},function(e,t,r){(function(){var n=r(220);n.register("SmartTipSetManagerCreator").asCtor(function(){this.create=function(e,t){return n.create("SmartTipSetManager",{smartTipModels:e,setId:t})}})}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipSetsManager").asCtor(function(r,t,n){var i,o;function a(e){return e.turnOff()}this.init=function(e){o=e,function(){i={};for(var e=o.length-1;0<=e;e--){var t=o[e],n=r.create(t.SmartTips,t.Id);i[t.Id]=n}}()},this.getAll=function(){return o},this.getSetManagerById=function(e){return i[e]},this.turnOffAllSets=function(){if(!i)return wmjQuery.when();var e=n.getDictionaryValues(i);return t.executeParallelyOnArray(e,a)}}).dependencies("SmartTipSetManagerCreator, PromiseUtils, DictionaryUtils")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipValidationFeedbackComponentProvider").asCtor(function(n){this.getFeedbackComponent=function(e,t){return n.getFirstFailedValidation(e,t)||e.PositiveFeedback}}).dependencies("SmartTipFirstFailedValidationProvider")}).call(window)},function(e,t,n){(function(){var u=n(220);u.register("SmartTipVisiblityWatchCreator").asCtor(function(s,l){this.createVisibilityWatch=function(e,t,n){var r=e.ConditionTrees.SmartTip,i=l.getStickyType(e.Settings),o={logContext:e.Id,stickyType:i,elementVisibilityParams:{findElementParams:{IdentifySettings:e.IdentifySettings,ownerChain:{type:s.ELEMENT_OWNER_TYPE_NAMES.SMART_TIP,id:e.Id,stickyType:i,owner:{type:s.ELEMENT_OWNER_TYPE_NAMES.SMART_TIPSET,id:e._setId}}}},isRemoveByCondition:l.getIsRemoveByCondition(e.Settings),conditionCheckerParams:(a=e,{featureName:s.CONDITION_CHECKER.FEATURE_NAMES.SmartTipSegmentation,elementName:a.Name}),conditionTree:r&&r.Root?r:undefined,onShow:t,onRemove:n,trackUIChanges:!0};var a;return u.create("UIVisibilityManager",o)},function(){}.apply(null,arguments)}).dependencies("Consts, UIElementVisibilityAttributes")}).call(window)},function(e,t,n){(function(){var a=n(220);a.register("UiChangesTrackerWrapper").asCtor(function(r){var i,o;this.trackChanges=function(e){n=e,n={callback:n.callback},i=a.create("UiWindowSizeTracker",n),i.track(),e.isEmbedInElement||(t=e,t={embedmentType:r.get(!1,t.element),element:t.element,positionChangedCallback:t.callback},(o=a.create("UiElementPositionTracker",t)).track());var t;var n},this.stopTrackingChanges=function(){i&&i.destroy(),o&&o.destroy(),o=null}}).asProto().dependencies("EmbedmentTypeProvider")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTipEventSender").asCtor(function(r,i,o,a,n,s,l,u,c){function t(e,t){var n={type:o.EVENT_SENDER_EVENT_APPS.SmartTip,oId:t.smartTipModel.Id,oName:t.smartTipModel.Name,owId:t.setId,owType:o.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:p(t.setId),aoId:t.uiComponent&&t.uiComponent.Id,aType:t.uiComponent&&t.uiComponent.Type,aAppType:o.EVENT_SENDER_EVENT_APPS.SmartTipUiComponent};return n=f(n,t),d(e,n)}function d(e,t){try{return r.postEvent(e,t)}catch(n){return i.error(n),!0}}function f(e,t){var n,r=(n=t,{interactionGuid:a.getCurrentInteractionGuid(),pId:n.playGuid,pInit:u.map(l.get()||c.getData(c.keysConfig.smartTipSet.initiator.key))});return wmjQuery.extend(r,e)}function p(e){var t=n.getById(e);return t.Name}this.postSetActivatedEvent=function(e){var t={type:o.EVENT_SENDER_EVENT_APPS.SmartTipSet,oId:e.setId,oName:p(e.setId)};return t=f(t,e),d(o.EVENT_SENDER_EVENT_TYPES.Play,t)},this.postSmartTipSegmentedEvent=function(e){s.report();var t={type:o.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owId:e.setId,owType:o.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:p(e.setId)};return t=f(t,e),d(o.EVENT_SENDER_EVENT_TYPES.Play,t)},this.postValidationFailedEvent=function(e){return t(o.EVENT_SENDER_EVENT_TYPES.Failed,e)},this.postValidationPassedEvent=function(e){return t(o.EVENT_SENDER_EVENT_TYPES.Passed,e)},this.postTooltipShownEvent=function(e){return t(o.EVENT_SENDER_EVENT_TYPES.Visible,e)},this.postElementEvent=function(e){var t={type:o.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owType:o.EVENT_SENDER_EVENT_APPS.SmartTipSet,owId:e.setId,owName:p(e.setId)};return t=f(t,e),d(e.eventType,t)}}).dependencies("EventSender, Logger, Consts, InteractionManager, BusinessSolutionsManager, WalkmeVisibleReporter, InitiatorManager, ReportInitiatorMapper, ClientStorageManager")}).call(window)},function(e,t,n){(function(){n(220).register("SmartTip").asCtor(function(e,r,i,t,o,n,a,s,l){var u,c,d,f;this.activate=function(){return p=!0,(c=e.createVisibilityWatch(u,h,v)).watchForVisibility()},this.deactivate=function(){p=!1,c&&c.cleanResources();return c=null,y()};var p,g=".wmst";function h(n){if(p)return d=n,f.drawSmartTipElements(d).then(function(){var e,t;E(r.EVENTS.SmartTips.SmartTipSegmented),i.bind(d,g,E),e={isEmbedInElement:u.Settings.embedInParent,element:d,callback:m},o.trackChanges(e),t={smartTip:u,element:n},a.raiseEvent(r.EVENTS.SmartTips.SmartTipElementShown,t)})}function m(){s(u).trigger(r.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned)}function v(){var e;y(),e={smartTip:u},a.raiseEvent(r.EVENTS.SmartTips.SmartTipElementRemoved,e)}function y(){return o.stopTrackingChanges(),d&&(i.unbind(d,g),d=null),f.removeSmartTipElements()}function S(n){s(n).on(r.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(e,t){t.uiComponent=n,s(u).trigger(r.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,t)})}function E(e){s(u).trigger(r.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:e})}u=l.smartTipModel,f=n.create(u),t.doOnAllComponents(u,S)}).asProto().dependencies("SmartTipVisiblityWatchCreator, Consts, ElementInteractionEventsBinder, SmartTipComponentsIterator, UiChangesTrackerWrapper, SmartTipDrawerCreator, CommonEvents, wmjQuery")}).call(window)},function(o,e,a){(function(i){(function(){var e=i.get("PlatformDI"),t=i.get("Consts"),n="Mustache,CommonUtils,PositionHelper,CommonEvents,CdnServer,UiUtils,SiteConfigManager,TimerManager,getTopContainer,Lib,HostData,Consts";e.register(t.PLATFORM.Web,function(){i.register("LightboxDisplayer").asProto().asCtor(a(262)).dependencies(n)}),e.register(t.PLATFORM.MobileWeb,function(){i.register("LightboxDisplayer").asProto().asCtor(a(264)).dependencies(n)});var r={init:function(){r.activate=i.get("LightboxDisplayer").activate,r.remove=i.get("LightboxDisplayer").remove,r.getSize=i.get("LightboxDisplayer").getSize}};o.exports=r}).call(window)}).call(this,a(1))},function(n,r,i){(function(t){(function(){"use strict";r.__esModule=!0;var e=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return t(s,a),s.prototype.activate=function(e,t,n,r,i,o){a.prototype.activate.call(this,e,t,n,r,i,o),this._lib.centerElementInPage(this._lightBoxDiv,!1),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxDivCentered,{lightBoxDiv:this._lightBoxDiv})},s.prototype.createLightBox=function(e,t,n,r,i){a.prototype.createLightBox.call(this,e,t,n,r,i);var o=this.getAjaxLoader(this._lightBoxDiv);this._positionHelper.centerElementInParent(o,this._lightBoxDiv),o.css("left","0"),this._positionHelper.registerResizeAndScrollEvents({element:this._lightBoxDiv,eventNameSuffix:s.WALKME_LIGHTBOX_EVENTS})},s.prototype.removeLightBox=function(e){a.prototype.removeLightBox.call(this,e),this._positionHelper.removeScrollAndResizeEvents(s.WALKME_LIGHTBOX_EVENTS)},s.prototype.getDimensionSize=function(e,t,n){var r=this.getSizeUnitSettingKey(e),i=this.getSizeUnit(t,r),o=this.getDimensionSettingKey(e),a=this._commonUtils.getSettingsValue(t.Settings,o,n[e]);"%"==i&&(a=this._positionHelper.getWindowSize()[e]*a/100);return a+"px"},s.prototype.getSizeUnitSettingKey=function(e){return e+"Unit"},s.prototype.getSizeUnit=function(e,t){return this._commonUtils.getSettingsValue(e.Settings,t,"px")},s.prototype.getDimensionSettingKey=function(e){return"height"==e?s.LIGHTBOX_HEIGHT_KEY:s.LIGHTBOX_WIDTH_KEY},s.prototype.getToolbarWidth=function(e){return parseFloat(e)+4+"px"},s.prototype.getSize=function(){return{width:this._lightBoxDiv.css("width").replace("px","")+"px",height:this._lightBoxDiv.css("height").replace("px","")+"px"}},s.prototype.contentMouseOver=function(e,t){var n=t?"#404040":"#646464";e.css("backgroundColor",n)},s.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position:absolute; height: 17px; width: 17px; right: 5px; top: -19px; cursor: pointer; z-index: 2147483632; vertical-align: top;'><img src='{2}/player/resources/images/blue-x-button.png' style='margin: 4px;' /></div>",e,t,this._cdnServer)},s.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute;height:17px; width:17px; right:25px; top:-19px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/open-in-new-tab.png' style='margin: 4px;'></div>",e,this._cdnServer)},s.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='float:left; width:{{lightboxWidth}}; height:{{lightboxHeight}}; padding: 2px; z-index:{{zIndex}}; background-color:white; box-shadow:4px -4px 19px -1px #494949;'><div id='{{lightboxTopbarDivId}}' style='position: absolute; top: -23px; left: 0px; height: 25px; width: {{topbarWidth}}; background-color:#646464;'></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v2.gif) no-repeat center; width:100%; height:100px; position:relative; text-align:center; vertical-align: bottom; margin-top: -30px;'><span style='display: inline-block; color: #99d3fe; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},s.LIGHTBOX_WIDTH_KEY="LightboxWidth",s.LIGHTBOX_HEIGHT_KEY="LightboxHeight",s.WALKME_LIGHTBOX_EVENTS="walkmeLightBox",s}(i(263).LightboxDisplayer);n.exports=e}).call(window)}).call(this,i(88))},function(e,t,n){(function(r){(function(){"use strict";t.__esModule=!0;var e=function(){function f(e,t,n,r,i,o,a,s,l,u,c,d){this._mustache=e,this._commonUtils=t,this._positionHelper=n,this._commonEvents=r,this._uiUtils=o,this._siteConfigManager=a,this._timerManager=s,this._cdnServer=i.get(),this._getTopContainer=l,this._lib=u,this._hostData=c,this._consts=d}return f.prototype.activate=function(e,t,n,r,i,o){this._activateContentInNewTab=o,this.createLightBox(e,t,n,r,i)},f.prototype.getElement=function(){return this._lightBoxDiv},f.prototype.getAjaxLoader=function(e){return wmjQuery("#"+f.AJAX_LOADER_DIV_ID,e)},f.prototype.remove=function(e){e||(e=this._getTopContainer(null,!1)),this.removeTakingLongMsg(!1),this.removeLightBox(e),this.removeOverlay(),this.unbindEscButton(e)},f.prototype.removeOverlay=function(){this._uiUtils.removeOverlayById(f.OVERLAY_ID)},f.prototype.unbindEscButton=function(e){e.unbind(f.KEY_UP_EVENT)},f.prototype.removeLightBox=function(e){var t=wmjQuery("#"+f.LIGHTBOX_DIV_ID,e);t.exist()&&(t.find("iframe").attr("src",""),t.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.ContentRemoved,{}))},f.prototype.createLightBox=function(e,t,n,r,i){var o=this._getTopContainer(null,!1),a=this.getHtml(e,t),s=wmjQuery(a);this._lightBoxDiv=s,this.addCssClasses(e,s,n),this._uiUtils.setLangAttribute(s);var l=this.createXButtonElement();s.append(l),this.handleCreatingOpenInNewTabButton(e,o,s,r),this.handleCreatingOverlay(),this.bindEscButton(o);var u=i(e);this.setTakingLongTimers(s),this.overlayContent(u,s);var c=this.handleIosIframeScrolling(u);this.appendContent(c),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxDivCreated,{lightBoxDiv:s,content:e}),o.append(s);var d=wmjQuery("#"+f.RELOAD_LIGTHBOX_DIV_ID);return d.click(wmjQuery.proxy(function(){var e=u.get(0);e.src=e.src,this.getAjaxLoader(s).show(),this.removeTakingLongMsg(!1),this.setTakingLongTimers(s)},this)),this._positionHelper.centerElementInParent(d,s),d.css("left","0"),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxCreated,s),s},f.prototype.overlayContent=function(e,t){e.hide();var n=wmjQuery.proxy(function(){e.off("load loadeddata",n),this.removeTakingLongMsg(!0),this.getAjaxLoader(t).remove(),e.show()},this);this.shouldWaitForReady(e)?e.ready(n):e.load(n),"VIDEO"==r.get("ElementUtils").getElementTagName(e[0])&&e.bind("loadeddata",n)},f.prototype.appendContent=function(e){this._lightBoxDiv.append(e)},f.prototype.reloadButtonTimerFunction=function(e){wmjQuery("#"+f.RELOAD_LIGTHBOX_DIV_ID).css("display","block"),this._reloadButtonTimer.clear(),this.getAjaxLoader(e).hide()},f.prototype.takingLongerTimerFunction=function(e){var t=wmjQuery("#"+f.WAITING_DIV_ID);this._positionHelper.centerElementInParent(t,e),t.css("left","0"),t.css("display","block"),this._takingLongerTimer.clear()},f.prototype.setTakingLongTimers=function(e){this._takingLongerTimer=this._timerManager.libSetTimeout(wmjQuery.proxy(function(){this.takingLongerTimerFunction(e)},this),f.TAKING_LONGER_MESSAGE_INTERVAL),this._reloadButtonTimer=this._timerManager.libSetTimeout(wmjQuery.proxy(function(){this.reloadButtonTimerFunction(e)},this),f.RELOAD_BUTTON_INTERVAL)},f.prototype.removeTakingLongMsg=function(e){this._reloadButtonTimer&&this._reloadButtonTimer.clear(),this._takingLongerTimer&&this._takingLongerTimer.clear();var t=wmjQuery("#"+f.RELOAD_LIGTHBOX_DIV_ID),n=wmjQuery("#"+f.WAITING_DIV_ID);e?(t.remove(),n.remove()):(t.css("display","none"),n.css("display","none"))},f.prototype.handleIosIframeScrolling=function(e){return/iPhone|iPod|iPad/.test(navigator.userAgent)?this.getIframeWrapperDiv(e):e},f.prototype.getIframeWrapperDiv=function(e){var t={width:e.attr("width")||e[0].style.width,height:e.attr("height")||e[0].style.height,overflow:"auto","-webkit-overflow-scrolling":"touch"},n=wmjQuery("<div />").css(t);return n.append(e),n},f.prototype.bindEscButton=function(e){e.bind(f.KEY_UP_EVENT,wmjQuery.proxy(function(e){27==e.keyCode&&this.remove()},this))},f.prototype.handleCreatingOverlay=function(){this._uiUtils.canDisplayOverlay()&&this._uiUtils.displayOverlay(this._consts.POPUP_BALLOON_Z_INDEX,!1,f.OVERLAY_ID).click(wmjQuery.proxy(function(){this.remove()},this))},f.prototype.handleCreatingOpenInNewTabButton=function(e,t,n,r){if(r){var i=wmjQuery(this.newTabHtml("walkme-open-in-new-tab-button"));i.click(wmjQuery.proxy(function(){this.remove(t),this._activateContentInNewTab(e)},this)),i.mouseover(wmjQuery.proxy(function(){this.contentMouseOver(i,!0)},this)),i.mouseout(wmjQuery.proxy(function(){this.contentMouseOver(i,!1)},this)),n.append(i)}},f.prototype.newTabHtml=function(e){throw""},f.prototype.addCssClasses=function(e,t,n){var r=this._commonUtils.formatString("walkme-{0}-light-box-{1}",n,e.Id);t.addClass(r),t.addClass("walkme-to-remove"),t.addClass("walkme-to-destroy")},f.prototype.createXButtonElement=function(){var e=this._siteConfigManager.get().ContentCloseTooltip,t=wmjQuery(this.xButtonHtml("walkme-light-box-x-button",e));return t.click(wmjQuery.proxy(this.closeLightBoxClicked,this)),t.mouseover(wmjQuery.proxy(function(){this.contentMouseOver(t,!0)},this)),t.mouseout(wmjQuery.proxy(function(){this.contentMouseOver(t,!1)},this)),t},f.prototype.xButtonHtml=function(e,t){throw""},f.prototype.contentMouseOver=function(e,t){throw""},f.prototype.closeLightBoxClicked=function(){this.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxClosed)},f.prototype.getHtml=function(e,t){return this._mustache.to_html(this.getTemplate(),this.getConfig(e,t))},f.prototype.getConfig=function(e,t){var n=this.getDimensionSize("width",e,t),r=this.getDimensionSize("height",e,t),i=this.getToolbarWidth(n);return{lightboxDivId:f.LIGHTBOX_DIV_ID,lightboxWidth:n,lightboxHeight:r,zIndex:this._consts.POPUP_BALLOON_Z_INDEX,lightboxTopbarDivId:f.LIGHTBOX_TOPBAR_DIV_ID,topbarWidth:i,ajaxLoaderDivId:f.AJAX_LOADER_DIV_ID,waitingDivId:f.WAITING_DIV_ID,reloadDivId:f.RELOAD_LIGTHBOX_DIV_ID,cdnServer:this._cdnServer}},f.prototype.shouldWaitForReady=function(e){return(this._hostData.isIE()||"Chrome"==this._hostData.browser.name)&&e[0]&&e[0].src&&-1<e[0].src.indexOf(".pdf")},f.prototype.getTemplate=function(){throw""},f.prototype.getDimensionSize=function(e,t,n){throw""},f.prototype.getToolbarWidth=function(e){throw""},f.prototype.getSize=function(){throw""},f.LIGHTBOX_DIV_ID="walkme-content-light-box",f.LIGHTBOX_TOPBAR_DIV_ID="walkme-content-light-box-top-bar",f.AJAX_LOADER_DIV_ID="walkme-ajax-loader",f.WAITING_DIV_ID="walkme-ajax-taking-long",f.RELOAD_LIGTHBOX_DIV_ID="walkme-ligth-box-reload",f.OVERLAY_ID="walkme-content-background",f.KEY_UP_EVENT="keyup.walkme",f.TAKING_LONGER_MESSAGE_INTERVAL=8e3,f.RELOAD_BUTTON_INTERVAL=15e3,f}();t.LightboxDisplayer=e}).call(window)}).call(this,n(1))},function(n,r,i){(function(t){(function(){"use strict";r.__esModule=!0;var e=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}return t(e,o),e.prototype.createLightBox=function(e,t,n,r,i){o.prototype.createLightBox.call(this,e,t,n,r,i),this._lightBoxDiv.css({position:"fixed",top:0,left:0})},e.prototype.getDimensionSize=function(e,t,n){return"100%"},e.prototype.getToolbarWidth=function(e){return"100%"},e.prototype.getSize=function(){return{width:"100%",height:"100%"}},e.prototype.contentMouseOver=function(e,t){},e.prototype.getConfig=function(e,t){var n=o.prototype.getConfig.call(this,e,t);return n.padding="10px",n.title=e.Name,n},e.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position: absolute; right: 19px; top: 17px; cursor: pointer; z-index: 2147483632; vertical-align: top; height: 15px; width: 15px; background-image: url(\"{2}/player/resources/images/x-btn-resources.png\"); background-position: -5px -5px;'></div>",e,t,this._cdnServer)},e.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute; height:11px; width:11px; right:50px; top:15px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/mobile_full_screen.png' style='margin: 4px;'></div>",e,this._cdnServer)},e.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='width:{{lightboxWidth}}; height:{{lightboxHeight}}; box-sizing: border-box; z-index:{{zIndex}}; background-color: black; padding-top: 50px; padding-right: 10px;'><div style='width: 100%; box-sizing: border-box; padding: 0 15px; position: absolute; top: 0; left: 0px; line-height: 50px; background-color: #3393d1; color: white; text-align: left; font-size: 15px;'>{{title}}<div id='{{lightboxTopbarDivId}}' style='height: 100%; width: 100%;'></div></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v3.gif) no-repeat center; width:100%; height:100px; position:absolute; text-align:center; vertical-align: bottom; top: 50%; margin-top: -50px;'><span style='display: inline-block; color: white; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},e.LIGHTBOX_WIDTH_KEY="LightboxWidth",e.LIGHTBOX_HEIGHT_KEY="LightboxHeight",e}(i(263).LightboxDisplayer);n.exports=e}).call(window)}).call(this,i(88))},function(e,t,r){(function(){var t=r(266),n={init:function(){var e=t.get("AttentionGrabberManagerAPI");n.initApi=e.init,n.loadApi=e.load,n.removeApi=e.remove,n.creataImageAGApi=e.creataImageAG,n.createAGApi=e.createAG},services:["AttentionGrabberManagerAPI","AttentionGrabberManager","AttentionGrabberDataManager"],types:["AttentionGrabber"]};r(267),r(67).registerApi(n,t),e.exports=n}).call(window)},function(e,t,n){(function(){e.exports=n(67).create()}).call(window)},function(e,t,o){(function(){var i=o(266);i.register("AttentionGrabberManagerAPI").asCtor(function(){var n,r;function e(t){Promise.all([o.e(7),o.e(6)]).then(function(){var e=[o(314),o(315),o(316)];(function(){r=i.get("AttentionGrabberManager"),t&&t(r)}).apply(null,e)})["catch"](o.oe)}this.init=function(e){n=e},this.load=function(){var t;t=function(e){e.init(n),e.load()},o.e(6).then(function(){var e=[o(314),o(315)];(function(){r=i.get("AttentionGrabberManager"),t&&t(r)}).apply(null,e)})["catch"](o.oe)},this.remove=function(e){r?r.remove(e):e&&e()},this.creataImageAG=function(n){e(function(e){var t=e.getImageAG(n);t.setupAttenGrab()})},this.createAG=function(n){e(function(e){var t=e.create(n);t.setupAttenGrab()})}})}).call(window)},function(e,t,n){"object"==typeof e.exports&&(e.exports=function(e){var c;function d(a,e,s){var t=!0,l=function(e,t){var n=undefined;try{var r=new RegExp(t,"g");return n=e.cssText.replace(r,".walkme-hover-css")}catch(i){return undefined}return n}(e,s);if(!l)return t;var n=e.selectorText.split(","),u=new RegExp("([^:]*)"+s+"(.*)");try{c.each(n,function(e,t){var n=u.exec(t);if(!n||-1<t.indexOf(" > "+s))return!0;var r=n[1],i=a.parents().addBack().filter(r),o=n[2];""!=o&&(i=i.find(o).addBack()),c.each(i,function(e,t){var n=t.ownerDocument,r=n.createElement("style");r.type="text/css",r.title="walkme-hover-css-style",r.innerHTML=l,n.getElementsByTagName("head")[0].appendChild(r),c(t).addClass("walkme-hover-css")})})}catch(r){t=!1}return t}this.addElementClass=function(e,t){for(var n=!0,r=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}(e[0].ownerDocument.styleSheets),i=0;i<r.length;i++){var o=r[i];try{for(var a=o.cssRules||o.rules,s=0;s<(a&&a.length);s++){var l=a[s];if(l&&l.selectorText&&-1<l.selectorText.indexOf(t)){var u=d(e,l,t);n&&!u&&(n=!1)}}}catch(c){n=!1}}return n},this.removeElementClass=function(){c(".walkme-hover-css").removeClass("walkme-hover-css")},function(){c=e.jQ}.apply(null,arguments)})},function(t,e,n){(function(e){(function(){t.exports={shouldLoad:function(e){return 0<e.Tutorials.length},load:function(t){n.e(8).then(function(){(function(e){t(n(333))}).apply(null,[n])})["catch"](n.oe)},type:e.get("DynamicComponentTypes").Walkthru}}).call(window)}).call(this,n(1))},function(t,e,n){(function(e){(function(){var o=e.get("HostData"),a=e.get("FeaturesManager");t.exports={shouldLoad:function(e){var t=!o.isIEOlderThan(11),n=a.isFeatureEnabled("ActionBots")||localStorage&&!!localStorage.getItem("wm_actionbot_enabled"),r=a.isFeatureEnabled("ActionBotsDisabled")||localStorage&&!!localStorage.getItem("wm_actionbot_disabled"),i=e.Launchers&&wmjQuery.grep(e.Launchers,function(e){var t=e&&e.Settings&&e.Settings.action&&e.Settings.action.actionType&&e.Settings.action.actionType.toLowerCase();return t&&("none"===t||"actionbot"===t)});return t&&n&&!r&&i&&i.length},load:function(t){n.e(9).then(function(){(function(e){t(n(384))}).apply(null,[n])})["catch"](n.oe)},type:e.get("DynamicComponentTypes").ActionBot}}).call(window)}).call(this,n(1))},function(e,t,r){(function(n){(function(){e.exports={shouldLoad:function(e){var t=e.SiteConfig&&e.SiteConfig.Settings&&e.SiteConfig.Settings.liveChat&&e.SiteConfig.Settings.liveChat.isEnabled&&!1===n.has("LiveChat");return t||n.get("Logger").customerLog("will not load chat integration",3)},load:function(t){r.e(10).then(function(){(function(e){t(r(385))}).apply(null,[r])})["catch"](r.oe)},type:n.get("DynamicComponentTypes").LiveChat}}).call(window)}).call(this,r(1))},function(t,e,n){(function(e){(function(){var i=e.get("HostData"),o=e.get("FeaturesManager");t.exports={shouldLoad:function(e){if(e){var t=!i.isIEOlderThan(11),n=o.isFeatureEnabled("IntegrationCenterWebhooksActive")||localStorage&&!!localStorage.getItem("wm_integrationcenterwebhooksactive_enabled"),r=o.isFeatureEnabled("IntegrationCenterWebhooksDisabled")||localStorage&&!!localStorage.getItem("wm_integrationcenterwebhooks_disabled");return t&&!r&&n}},load:function(t){n.e(11).then(function(){(function(e){t(n(402))}).apply(null,[n])})["catch"](n.oe)},type:e.get("DynamicComponentTypes").IntegrationCenterWebhooks}}).call(window)}).call(this,n(1))},function(t,e,n){(function(e){(function(){var r=e.get("HostData"),i=e.get("FeaturesManager");t.exports={shouldLoad:function(){var e=r&&r.browser&&"Chrome"===r.browser.name,t=i.isFeatureEnabled("DeepUi")||localStorage&&!!localStorage.getItem("wm_deepui_enabled"),n=i.isFeatureEnabled("DeepUiDisabled")||localStorage&&!!localStorage.getItem("wm_deepui_disabled");return e&&t&&!n},load:function(t){n.e(12).then(function(){(function(e){t(n(403))}).apply(null,[n])})["catch"](n.oe)},type:e.get("DynamicComponentTypes").DeepUI}}).call(window)}).call(this,n(1))},function(e,t,n){(function(r,t){(function(){var e=function(){function e(e,t,n){this.logger=t,this._handlers=[],this._teardownHandlers=[]}return e.prototype.listen=function(e){this._handlers.push(e),this._messageHandler||(this._messageHandler=wmjQuery.proxy(function(){this.handleMessage.apply(this,arguments)},this),window.addEventListener?window.addEventListener("message",this._messageHandler,!1):window.attachEvent("onmessage",this._messageHandler))},e.prototype.addTeardownCallback=function(e){this._teardownHandlers.push(e)},e.prototype.cleanResources=function(){for(var e=this,t=[],n=0;n<this._teardownHandlers.length;n++)t.push(this._teardownHandlers[n]());return r.all(t).then(function(){return e.releaseEventHandlers()})},e.prototype.releaseEventHandlers=function(){this._messageHandler&&(window.addEventListener?window.removeEventListener("message",this._messageHandler,!1):window.detachEvent("onmessage",this._messageHandler),this._messageHandler=null,this._handlers=[])},e.prototype.handleMessage=function(e){for(var t=0;t<this._handlers.length;++t)try{this._handlers[t].apply(null,arguments)}catch(n){this.logger.error(n)}},e}();t.register("PostMessageListener").asCtor(e).dependencies("Consts,Logger,WmInternals")}).call(window)}).call(this,n(28),n(1))},function(e,t,n){var C=n(276),b=n(280),I=n(281),_=n(282),P=n(283),A=n(284),k=n(285),D=n(286),r=["JQueryElementFinder","PositionHelper","HtmlDecoder","Logger","Consts","CommonUtils","ArrayUtils","TimerManager","FeaturesManager","SimpleNLP","win","FindElementPlugins","ElementFinderExtensionsProvider","FindElementDebugger"];function i(e,t,n,r,i,o,a,s,l,u,c,d,f,p,g){var h=g.ctx,m=new D(h),v=new I(l),y=new b(m,v),S=new _(s,v,y,p),E=new P(s,m,a,o,p,S),T=new A(d,o,m),w=new k(u,c,v,m);return new C(e,t,n,T,v,S,r,i,p,w,o,E,f,m,y)}e.exports={registerToCtx:function(e){e.has("FindElementDebugger")||e.register("FindElementDebugger").asInstance({isEnabled:function(){return!1},shouldMeasure:function(){return!1}});var t=r.join(",");e.register("FindElementPlugins").asInstance([]),e.register("ElementFinder").asFunction(i).dependencies(t).args({ctx:e}).asSingleton()}}},function(e,t,n){var r=n(277);r.VersionName="classic";var o=n(278);o.VersionName="next-gen";var s=n(279);e.exports=function(c,d,f,p,g,h,e,t,m,v,y,a,S,E,T){var w,C,b=this,n=!1,i={};function I(e,t,n,r,i,o){var a,s=S.getElementFinderExtension(e);if(s)return s.findElement(e,t,n.scoreOut,r,i);if(!1===p.extendOriginalSettings(e,n))return!1;if(C(e,5),v.isEnabled()&&v.getPageKey(e)){var l=v.compareCurrent(e);if(!l.match)return!1}if(e.IsJquerySelector){e.ElementDescription.extended=e.ElementDescription.extended||{},e.ElementDescription.extended.elementIframe=null;var u=c.findElements(e,t);return!!(a=u&&u.length&&u[0])&&(a=wmjQuery(a),e.ElementDescription.extended&&a.data("iframe",e.ElementDescription.extended.elementIframe),a)}return(a=p.findElement(e,n))!==undefined?(n.reason="plugin",n.scoreOut&&_(n,{totalScore:n.scoreOut.score||n.scoreOut.totalScore||0},undefined,e),a?wmjQuery(a):a):!0===e.ElementDescription.r&&g.isFeatureEnabled("disableDefaultFE")?!(n.reason="disable"):!!(a=function(e,t,n,r,i,o,a){var s=b.recognizeElement(e,t,n,r,i,o,a),l=b.getWinner(s),u=l&&l.element&&l.element.length&&l.element[0];r&&(l&&r.scoreOut&&(r.scoreOut.totalScore=l.totalScore,r.scoreOut.details=l.details,r.scoreOut.losers=s.losers,_(r,l,s.losers,e)),s.timeMeasurements&&(r.timeMeasurements=s.timeMeasurements));u&&wmjQuery(u).data("iframe",s.context);return u}(e,e.ElementDescription,t,n,r,i,o))&&wmjQuery(a)}function _(e,t,n,r){e.scoreOut.score=s({feStrengthCalc:g.isFeatureEnabled("feStrengthCalc"),result:{winner:t,losers:n},stepSensitivity:r.StepSensitivity,sensitivityMap:i})}function P(e,t,n,r){e.timeMeasurements||(e.timeMeasurements=[]),e.timeMeasurements.push({name:w.ElementRecognition.MeasurePhase.TotalFindElementTime,duration:t});for(var i=function(e,t,n){var r={result:!!t};n.reason?r.reason=n.reason:e.IsJquerySelector&&(r.reason="jQuery");var i=p.hasPlugins()?"N/A":undefined;return r.pluginName=n.pluginName||i,r.pluginVersion=n.pluginVersion||i,r.pluginCaptureVersion=n.pluginCaptureVersion||i,r.capturePlatformVersion=n.capturePlatformVersion||i,r.platformVersion=n.platformVersion||i,r.customContext=n.customContext,r}(n,r,e),o=0;o<e.timeMeasurements.length;o++)e.timeMeasurements[o].misc=wmjQuery.extend({},i,e.timeMeasurements[o].misc);a.addMeasurement(e.timeMeasurements)}b.initFE=function(){n||(g.isFeatureManagerReady()?(n=!0,w=!g.isFeatureEnabled("enableFEAllTypes")&&!window.walkMeGermany||g.isFeatureEnabled("dw5")?r:o):w=r,a.setFE(w),i[w.ElementRecognition.AlgorithmSensitivity.Low]=0,i[w.ElementRecognition.AlgorithmSensitivity.Medium]=1.45,i[w.ElementRecognition.AlgorithmSensitivity.High]=3,w.ElementRecognition.setOptions({jquery:wmjQuery,commonUtils:y,now:E.now,sensitivityMap:i}))},b.getFindElementCore=function(){return w},b.getVersion=function(){return w.Version},b.adaptDescription=function(e,t,n,r){var i,o,a=!g.isFeatureEnabled("fe_no_xpath_cache"),s=new w.ElementRecognition.ElementDescription(a);s.preDefinedSuspects=r,s.elementType=(i=t.elementXpath.toLowerCase(),(o=i.split("/"))[o.length-1].split("[")[0]),s.uppercaseElementType=s.elementType.toUpperCase(),s.width=t.elementWidth,s.height=t.elementHeight,s.relativeLeft=t.relativeLeft,s.absY=t.elementAbsY,s.centeredElementWidth=t.centeredElementWidth,s.xpathArrayOriginal=w.XpathLib.xpathStringToArray(t.elementXpath.toUpperCase()),s.xpathArray=w.XpathLib.removeHtmlAndBodyFromXpathArray(s.xpathArrayOriginal),s.xpathArrayToIframe=w.XpathLib.removeHtmlAndBodyFromXpathArray(w.ContextUtils.getXpathUpToIframe(s.xpathArrayOriginal)),s.text=t.textArray&&0<t.textArray.length?f.decodeHtml(t.textArray[0],["&",'"',"'",">","<"]):"",s.autoQuery=t.autoQuery?f.decodeHtml(t.autoQuery,['"']).replace(/([.:])/gm,function(e,t,n,r){return"\\"!==r[n-1]?"\\"+t:t}):null,t["data-walkmeid"]?s.customSelector="[data-walkmeid='"+t["data-walkmeid"]+"']":(n==undefined||n)&&(s.visibilityFilter=d.getVisibleFilter(e));var l={elementClass:"class",elementId:"id",elementName:"name"};for(var u in s.attributes={},l)s.attributes[l[u]]=t[u];for(var c in t)!t.hasOwnProperty(c)||s.attributes.hasOwnProperty(c)||l[c]||(s.attributes[c]=t[c]);return s},b.wrapSession=function(e,t){return h.wrapSession(e,t)},b.startSessionForEditor=function(e,t){return h.startSessionForEditor(e,t)},b.endSessionForEditor=function(){return h.endSessionForEditor()},b.recognizeElement=function(e,t,n,r,i,o,a){var s,l=h.getSession(i,w,!!a);y.isDefined(e.StepSensitivity)&&l.setAlgorithmSensitivity((s=e.StepSensitivity,{0:w.ElementRecognition.AlgorithmSensitivity.Low,1:w.ElementRecognition.AlgorithmSensitivity.Medium,2:w.ElementRecognition.AlgorithmSensitivity.High}[s])),l.setSearchOptions(function(e,t){var n=w.ElementRecognition.SearchOptions.IGNORE_NOTHING,r=[],i=g.isFeatureEnabled("forceIgnorePosition");e.IsIdentifyByText&&r.push("IDENTIFY_TEXT");e.IsIgnoreText&&r.push("IGNORE_TEXT");e.IsIgnoreId&&(r.push("IGNORE_ID"),r.push("IGNORE_NAME"));(i||0!=e.IgnorePosition)&&r.push("IGNORE_POSITION");e.IsIdentifyById&&r.push("IDENTIFY_ID_AND_NAME");e.IgnoreShapeProportion&&r.push("IGNORE_SHAPE_PROPORTION");e.IgnoreClass&&r.push("IGNORE_CLASS");e.IgnoreStyle&&r.push("IGNORE_STYLE");e.IgnoreHref&&r.push("IGNORE_HREF");t["data-walkmeid"]&&r.push("IDENTIFY_WALKME_ID");g.isFeatureEnabled("noAutoQuery")||r.push("USE_AUTO_SELECTOR");for(var o=0;o<r.length;o++)n|=w.ElementRecognition.SearchOptions[r[o]];return n}(e,t));var u=b.adaptDescription(e,t,n,o);p.extendAdaptedSettings(e,u,r),r.customContext=!!(u.customContext&&0<u.customContext.length);var c=l.recognize(u);return p.extendResult(e,u,c,r),m.isEnabled()&&m.addDebugResult(c),c},b.getWinner=function(e){var t=e&&e.elements&&e.elements.length&&e.elements[0];return t},b.findElement=function(e,t,n,r,i){b.initFE();var o,a,s,l={scoreOut:n};n&&!r&&g.isFeatureEnabled("feStrengthCalc")&&(E.isInEditor()||E.isDebuggerOnWindow())&&(r=1),m.isEnabled()&&3!==r&&(r=3,C("Switching algorithm mode to 'VerbouseDebug' due to 'debug' flag.",5)),g.isFeatureEnabled("fe_monitor_session")&&(o=h.getSession(r,w));var u=e.ElementDescription;if(u&&(s=u._sentIndex||1,u._sentIndex=undefined,(a=o?o.isMeasuringTime:T.shouldMonitor(s)||m.shouldMeasure())&&s++),a)var c=E.now();var d=I(e,t,l,r,i,a);if(a){var f=E.now()-c;P(l,f,e,d)}return u&&(u._sentIndex=s),d},b.getFindElementPluginManager=function(){return p},b.getPageComparerCacheManagerEditorApi=function(){return v.editorApi},function(){C=e.wrapCustomerLog(t.FEATURES_LOGS.ElementFinder)}.apply(this,arguments)}},function(e,t){var y;!function(s){function o(e){return s.R(e,"parentNode")}function a(e,t){t=t||[],e=e||document;for(var n=s.$("iframe,frame",e).toArray(),r=0;r<n.length;r++){var i=l(s.$(n[r]))[0];t.push(i),i&&(t=a(i,t))}return t}function l(e){if(null!=e){if(null==(e=e[0]))return s.$();var t;try{t=e.contentDocument?e.contentDocument:e.contentWindow?e.contentWindow.document:[],t=s.$(t)}catch(n){return s.commonUtils.handleCrossDomainError(n),s.$()}return t}}var t;s.$,s.p,s.R=function(e,t){return e[t]},s.commonUtils,s.setOptions=function(e){s.$=e.jquery,s.p=e.jquery,s.$.fnHelpers&&(s.R=function(e,t){return s.$.fnHelpers[t](e)}),s.commonUtils=e.commonUtils,t=e.now},s.$a=function(e){return(e=e.tagName).toUpperCase&&(e=e.toUpperCase()),e},s.parentNode=o,s.childNodes=function(e){return s.R(e,"childNodes")},s.ea=function(e,t){for(var n=o(e[0]),r=t&&t[0]&&o(t[0]),i=[];n&&1==n.nodeType&&n!=r;n=o(n))i.push(n);return i},s.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},s.reduce=function(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n},s.$b=function(e){var t={};e=e.prop("attributes");for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}return t},s.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},s.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},s.ua=function(e,t,n){e=s.filter(e.split(t),function(e){return s.$.trim(e)}),e=s.map(e,function(e){return e.split(n)}),t={};for(var r=0;r<e.length;r++){var i=e[r],o=s.$.trim(i[0]),a="";i[1]&&(a=s.$.trim(i[1])),t[o]=a}return t};var n=function(){function e(){this.start=t()}return e.prototype.F=function(){var e=t()-this.start;return Math.round(1e3*e)/1e3},e}();s.Ub=n,s.D=function(){return new n},s.ac=function(){for(var e=0;e<arguments.length;e++);e=arguments[0];for(var t=1;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},s.cc=function(e){return null!=e&&0<e.length},s.getAllElements=function(e,t){t=t||"*";var n=a(e=e||document,[e]);return s.$(t,n)},s.bc=a,s.r=l,s.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},s.min=function(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),i=(n=e[0],1);i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}return n},s.ja=function(){return(new Date).getTime()%1e9}}(y||(y={}));var S,c,n,r,f=function(){function e(){this.buffer=[]}return e.prototype.append=function(e){this.buffer.push(e)},e.prototype.toString=function(){return this.buffer.join("")},e}();function o(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n}!function(p){function c(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;0<=t;t--)if(n(e.get(t).tag))return t}else for(;t<=i-1;t++)if(n(e.get(t).tag))return t;return-1}function i(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push(l(e,i,n,r)),e=i;return s(o=o.reverse(),n)}function a(e,t,n,r){var i=(e=e[0])&&y.parentNode(e);n=n&&n[0];for(var o=[];e&&1==e.nodeType&&e!=n;e=i,i=y.parentNode(e))o.push(l(e,i,t,r));return s(o=o.reverse(),t)}function s(e,t){return t?new n(e):new d(e)}function l(e,t,n,r){return n?n.ab(e,t,r):u(e,t,r)}function u(e,t,n){var r=1;if("HTML"!=y.$a(e)){t=y.childNodes(t);for(var i=0;i<t.length&&t[i]!=e;i++){var o=t[i];o.tagName==e.tagName&&y.inArray(o,n)<0&&r++}}return{tag:e.tagName.toUpperCase(),index:r}}function o(e){for(var t=["HTML","BODY"],n=0;n<e.count()&&-1<y.inArray(e.get(n).tag,t);n++);return e.slice(n)}var d=function(){function n(e){this.xpathArray=e}return n.prototype.count=function(){return this.xpathArray.length},n.prototype.get=function(e){return this.xpathArray[e]},n.prototype.slice=function(e,t){return new n(this.xpathArray.slice.apply(this.xpathArray,arguments))},n}();p.Vb=d;var n=function(){function n(e){this.xpathArray=e}return n.prototype.count=function(){return this.xpathArray.length},n.prototype.get=function(e){return this.xpathArray[e].get()},n.prototype.slice=function(e,t){return new n(this.xpathArray.slice.apply(this.xpathArray,arguments))},n}();p.Wb=n,p.l=1,p.Aa=1;var g=function(){function e(e,t,n){this.k=this.s=this.b=0,this.b=e,this.s=t,this.k=n}return e.prototype.clone=function(){return new e(this.b,this.s,this.k)},e.prototype.o=function(){return this.b+this.s/4+this.k/10},e.max=function(){return new e(1e4,0,0)},e.o=function(e){return e.o()},e}();p.Xb=g,p.L=function(t,n,f){return function e(t,n,r,i,o){if(Math.abs(n-i)>f||o.b>f)return g.max();if(0==n||0==i)return(o=o.clone()).b+=Math.max(n,i,0),o.b>f?g.max():o;var a,s=t.get(n-1),l=r.get(i-1),u=0;if(s.tag!==l.tag)u=p.l,a=g.max();else{if(s.index===l.index)return e(t,n-1,r,i-1,o);u=p.Aa}var c=o.clone();c.b+=u;u=e(t,n-1,r,i,c);var d=e(t,n,r,i-1,c);return a||(s=Math.abs(s.index-l.index),c=o.clone(),0<s&&(c.s++,c.k+=s),a=e(t,n-1,r,i-1,c)),y.min([u,d,a],g.o)}(t,t.count(),n,n.count(),new g(0,0,0))},p.fa=function(e,t,n,r){var i=e.count();if(i<=0)return null;t=E.$(t||document),r=r?":not("+r+")":"";for(var o=0;o<i;o++){var a=e.get(o);if(t=t.children(a.tag+r).eq(a.index-1),-1!=y.inArray(a.tag,["IFRAME","FRAME"])&&o+1<i&&(0<t.length&&(n&&t.data("iframe",n),n=t),t=y.r(t)),!t||0==t.length||!t.get(0)){t=null;break}}return t&&0<t.length&&n&&t.data("iframe",n),t},p.Lb=function(e,t){if(!t||t.count()<=0)return 0;for(var n=function(t,n){function e(e){return c(n,e,function(e){return e==t},!1)}for(var r=e(0),i=[];0<=r&&r<n.count()-1;)i.push(n.slice(0,r+1)),r=e(r+1);return i}(r=t.get(t.count()-1).tag,e),r=g.max().o(),i=2*p.l,o=r,a=[],s=0;s<n.length;s++){var l=n[s],u=p.L(l,t,i).o();u<o?(o=u,a=[l]):u==o&&a.push(l)}return n=0,o<r&&(n=y.min(a,function(e){return Math.abs(t.count()-e.count())}).count()),n},p.P=c,p.Yb=i,p.Pa=a;var e=function(){function n(){this.va={}}return n.prototype.ab=function(e,t,n){var r,i,o,a=null,s=this.t(e);return void 0!==s&&(a=this.va[s]),a||(r=e,i=t,o=n,a=new T(null,function(){return u(r,i,o)}),t=this.v(),this.A(e,t),this.va[t]=a),a},n.prototype.t=function(e){return e&&e[n.Y]||void 0},n.prototype.A=function(e,t){e&&(e[n.Y]=t)},n.prototype.v=function(){return++n.S},n.S=y.ja(),n.Y="__WM_XPATH_ENTRY_KEY__",n}();p.Ha=e,p.Qa=function(e,t,n,r){return o(e=i(e[0],t,n,r))},p.Na=function(t,n,r){var i,o=!(i=t)||i.length<=0?null:1==i.get(0).nodeType?i:(i=i.find(":first"))&&i.length&&1==i.get(0).nodeType?i:null;return!o||o.length<=0?new d([]):(o=function e(t,n,r,i){if(i=i||[],0<(n=n||E.$(document)).find(t).length)t.data("iframe",r),i.unshift(n);else{r=i.length,n=n.find(h.ia);for(var o=0;o<n.length;o++){var a=n.eq(o);if((i=e(t,y.r(a),a,i)).length>r){E.$(i[0]).data("iframe",a),i.unshift(a);break}}}return i}(o),s((o=y.reduce(o,function(e,t){return e.concat(a(t,n,null,r).xpathArray)},[])).concat(a(t,n,null,r).xpathArray),n))},p.removeHtmlAndBodyFromXpathArray=o,p.Qb=function(e){for(var t=new f,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()},p.xpathStringToArray=function(e){var r=[];return E.$.each(e.split("/"),function(e,t){if(0!=e){var n=t.indexOf("[");r[e-1]={tag:t.substring(0,n),index:parseInt(t.substring(n+1,t.length-1))}}}),new d(r)}}(S||(S={})),n=c||(c={}),r=function(){function e(e,t){this.Eb=e,this.weight=t,this.name=e.name}return e.prototype.d=function(e,t){var n=this.Eb.d(e,t);return this.weight*n},e}(),n.Ga=r,r=function(){function e(e){this.attributeName=e,this.name="Attribute Scorer : "+e}return e.prototype.d=function(e,t){var n=e.element.attr(this.attributeName),r=t.attributes[this.attributeName];return n&&r&&n.toLowerCase()===r.toLowerCase()?1:0},e}(),r=function(n){function e(e,t){n.call(this,e),this.Ob=t}return o(e,n),e.prototype.d=function(e,t){return t.attributes[this.attributeName]==this.Ob?0:n.prototype.d.call(this,e,t)},e}(n.Rb=r),n.xa=r,r=function(){function e(e){this.name="XpathScorer",this.g=e}return e.prototype.d=function(e,t){var n=e.xpath.get();return(n=this.g.u(n,t.xpathArrayToIframe)).b>S.l?0:(n=1-.1*(n.b+n.k/10))<0?0:n},e}(),n.Ia=r,r=function(){function t(){this.name="ShapeProportionScorer"}return t.prototype.d=function(e,t){if(!this.rb(e.element))return 0;var n=e.width.get(),r=e.height.get();return 0!=n*r&&.6<=(n=this.la(n,t.width)/2+this.la(r,t.height)/2)?n:0},t.prototype.la=function(e,t){var n=e/t;return 1<n&&(n=1/n),Math.pow(n,4)},t.prototype.rb=function(e){return e=e.prop("tagName"),-1!==y.indexOf(t.Nb,e)},t.Nb="DIV TABLE TR TD TBODY TH".split(" "),t}(),n.Ea=r,r=function(){function e(e,t,n){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.zb=t,this.lb=n}return e.prototype.d=function(e,t){if(!t.attributes[this.attributeName]||!e.element.attr(this.attributeName))return 0;var n=t.complexAttributes[this.attributeName].get(),r=y.ua(e.element.attr(this.attributeName),this.zb,this.lb);return 1==this.Ta(n,r)?1:0},e.prototype.Ta=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]==t[n]&&r++);return(n=0)<i&&(n=r/i),n},e}(),n.V=r,r=function(){function e(){this.name="TextScorer"}return e.prototype.d=function(e,t){return t.text&&e.text.get()==t.text?1:0},e}(),n.Fa=r;var d,h,p,g,m,i,a,s,l,E,v=function(){function e(e){this.data=Array(e),this.size=e,this.count=0}return e.prototype.getItem=function(e){if(e<0||e>=this.count)throw Error("Out of range exception");return this.data[e]},e.prototype.clear=function(){this.count=0},e.prototype.push=function(e){if(this.count==this.size)throw Error("FastArray exceeded it's limits");this.data[this.count]=e,this.count++},e.prototype.fb=function(){return this.data.slice(0,this.count)},e}(),T=function(){function e(e,t){this.Bb=t,this.hasData=!1,this.context=e}return e.prototype.get=function(){return this.hasData||(this.data=this.Bb.apply(this.context),this.hasData=!0),this.data},e.prototype.clear=function(){this.hasData=!1},e}(),w=function(){function e(){}return e.prototype.u=function(e,t){return S.L(e,t,S.l)},e.prototype.O=function(e){return new E.ScoredElement(e,this.c)},e.prototype.n=function(e){this.c=e},e.prototype.N=function(e,t){return t(e)},e.prototype.Jb=function(e){e.G=this.c&&e&&this.c.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.c.G:e&&e.ignoreWalkmeElementsSelector?y.getAllElements(document,e.ignoreWalkmeElementsSelector).toArray():[]},e}(),C=function(i){function n(){i.apply(this,arguments),this.T={},this.C=[],this.ga={},this.h={}}return o(n,i),n.prototype.n=function(e){this.Ra(e),i.prototype.n.call(this,e)},n.prototype.tb=function(e,t){return(e&&e[0]||null)===(t&&t[0]||null)},n.prototype.Ra=function(e){if(this.h={},0<this.C.length){var t=!1;this.c&&(t=!this.tb(this.c.m,e.m));for(var n=0;n<this.C.length;n++){var r=this.T[this.C[n]];r.totalScore=0,r.details=[],r.da=!1,r.n(e,t)}}},n.prototype.t=function(e){return e&&e[0]&&e[0][n.W]||null},n.prototype.A=function(e,t){e&&e[0]&&(e[0][n.W]=t)},n.prototype.v=function(){return++n.S},n.prototype.O=function(e){var t=null,n=this.t(e);return void 0!==n&&(t=this.T[n]),t||(t=i.prototype.O.call(this,e),n=this.v(),this.A(e,n),this.T[n]=t,this.C.push(n)),t},n.prototype.u=function(e,t){var n,r=S.Qb(e);return this.h.hasOwnProperty(r)||(n=i.prototype.u.call(this,e,t),this.h[r]=n),this.h[r]},n.prototype.jb=function(e){var t=this.c.m;if(t&&0<t.length){var n=this.t(t);n||(n=this.v(),this.A(t,n)),n&&(e+="__"+n)}return e},n.prototype.N=function(e,t){var n=this.jb(e),r=this.ga[n]||null;return r||(r=i.prototype.N.call(this,e,t),this.ga[n]=r),r},n.S=y.ja(),n.W="__WM_SUSPECT_KEY__",n}(w);!function(o){function a(e){var t="";if(3===e.nodeType||4===e.nodeType){t=e.nodeValue,e=[160,10,13,9];for(var n=new f,r=0;r<t.length;r++)y.indexOf(e,t.charCodeAt(r))<0&&n.append(t.charAt(r).toLowerCase());if(t=n.toString().replace(/ /g,""),t=(t=E.$.trim(t)).substring(0,o.wb),null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(t)){for(e=-1,n=t.length,r=new f;++e<n;){var i=t.charAt(e);/[\uD800-\uDBFF]/.test(i)||/[\uDC00-\uDFFF]/.test(i)?r.append(s(i)):r.append(i)}t=r}}else if(1===e.nodeType&&!e.tagName.match(/^(script|style)$/i))for(n=0,r=(e=y.childNodes(e)).length;n<r&&!(t=a(e[n]));n++);return t}function s(e){var t=2<(e=e.charCodeAt(0).toString(16).toUpperCase()).length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}var e,t;o.wb=70,(t=e||(e={}))[t.ElementNode=1]="ElementNode",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",o.extractFirstOccuringText=function(e){return a(e[0])},o.Zb=a}(d||(d={})),function(g){function h(){for(var e=0;e<arguments.length;e++);return E.$.apply(E.$,arguments)}function m(e){if(1==e.count())return e;var t=S.P(e,1,v,!0);return-1==t?e:e.slice(t+1)}function v(e){return-1!=y.inArray(e,t)}var t=["IFRAME","FRAME"];g.Pb=t.join(":mt_visible,")+":mt_visible",g.ia=t.join(","),g.getXpathUpToIframe=m,g.Ab=function(t){var n,r=t.a,i=S.Na(r.customContext,r.h,r.G),o=S.Lb(r.xpathArrayOriginal,i),a=r.xpathArrayOriginal.slice(o);n=r.h;var s,l=r.customContext,u=r.G,c=r.ignoreWalkmeElementsSelector;if(1==a.count())n=l;else if(-1==(p=S.P(a,1,v,!0)))n=l;else{var d=y.r(l),f=(d=d&&0<d.length?d:null)?l:l?l.data("iframe"):null,p=a.slice(0,p+1);(c=S.fa(p,d||l,f,c))&&c.is(":mt_visible")||(c=null),c||(c=function e(t,n,r,i,o,a){var s=S.P(t,0,v,!1);if(s<0)return r;var l=t.slice(0,s+1);return t=t.slice(s+1),0==(s=h(g.Pb,o||r)).length?null:(s=1==s.length?s[0]:y.min(s,function(e){return e=S.Pa(h(e),n,h(r),i),S.L(e,l,S.l).o()}),(a||r&&0<r.length&&o&&0<o.length)&&h(s).data("iframe",a||r),e(t,n,h(s),i,y.r(h(s))))}(a,n,l,u,d,f)),n=c}return u=(l=(n=n||r.customContext)&&n.is(g.ia))?y.r(n):n&&0<n.length?n:void 0,n={context:n,sb:l,contents:u},r.m=n.contents,t.setSearchOptions(-257&t.f),i&&i.count()&&r.m==r.customContext&&(o<=0&&t.setSearchOptions(256|t.f),r.xpathArrayToIframe=S.removeHtmlAndBodyFromXpathArray(m(a))),n&&(s=n.sb?n.context:h(n.context).data("iframe")),s}}(h||(h={})),function(u){u.$,u.p,u.Ib=function(e){u.$=e,u.p=e};var e=function(){function e(){this.name="PositionScorer"}return e.prototype.d=function(e,t){return this.Db(e,t)},e.prototype.Db=function(e,t){var n=0;if(r=t.centeredElementWidth){n=t.relativeLeft;var r,i=this.gb(e);if(((r=r/5)<30?30:r)<(n=Math.abs(n-i)))return 0;r=1-n/20,n=t.absY,i=e.element.offset().top,n=1-Math.abs(n-i)/20,i=.3,.9<r&&(i=.9),n=(n=r*(1-i)+n*i)<0?0:n}return n},e.prototype.gb=function(e){var t=(t=this.Za(e))?t.offset().left:0;return e.element.offset().left-t},e.prototype.Za=function(e){for(var t=null,n=(e=e.Ka.get()).length-1;0<=n;n--)try{if(this.ob(e[n])){var r=u.$(e[n]),i=u.$(window).width(),o=r.width(),a=r.offset().left,s=i-o;if(0<s&&s/2==a){t=r;break}if(s<0&&s==a){t=r;break}if(this.qb(r)){t=u.$(r);break}}}catch(l){}return t},e.prototype.ob=function(e){var t=u.$(e),n=t.data("mt_isElementFixedWidth");return 1==n||0!=n&&(e=this.nb(e),t.data("mt_isElementFixedWidth",e),e)},e.prototype.qb=function(e){var t=u.$(e),n=t.data("mt_isElementMarginAuto");return 1==n||0!=n&&(e=this.pb(e),t.data("mt_isElementMarginAuto",e),e)},e.prototype.ma=function(e,t){for(var n=!1,r=0;r<t.length&&(n=t[r],!(n=u.$(e).is(u.$(n))));r++);return n},e.prototype.nb=function(e){return!!this.na(e.style)||this.ma(e,this.bb())},e.prototype.Mb=function(e){return 0==e.indexOf("0")},e.prototype.Va=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4==e.length},e.prototype.oa=function(e){if(e){var t=u.$.trim(e.margin),n=u.$.trim(e.marginLeft);if(e=u.$.trim(e.marginRight),(t=this.Mb(t)&&this.Va(t))||"auto"==n&&"auto"==e)return!0}return!1},e.prototype.pb=function(e){return!!this.oa(e.style)||this.ma(e,this.eb())},e.prototype.eb=function(){return null==this.J&&(this.J=[],this.ha(this.ta)),this.J},e.prototype.ta=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.ta(n.styleSheet):this.oa(n.style)&&this.J.push(n.selectorText)}}catch(r){}},e.prototype.ha=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},e.prototype.sa=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.sa(n.styleSheet):this.na(n.style)&&this.K.push(n.selectorText)}}catch(r){}},e.prototype.bb=function(){return null==this.K&&(this.K=[],this.ha(this.sa)),this.K},e.prototype.na=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t)&&(-1!=e.indexOf("p")||-1!=e.indexOf("e")||-1!=e.indexOf("m")||-1!=e.indexOf("i")))return!0}},e}();u.Ba=e}(p||(p={})),function(e){var t;(t=e.Da||(e.Da={}))[t.Indifferent=0]="Indifferent",t[t.Accepted=1]="Accepted",t[t.Rejected=2]="Rejected";var n=function(){function e(e,t){this.qa=e,this.yb=t,this.isEqual=e===t}return e.prototype.j=function(){throw Error("childScreen must be overriden by subclass")},e.prototype.screen=function(e,t){return this.isEqual?this.qa:this.j(e,t)?this.qa:this.yb},e}();e.Tb=n;var r=function(){function e(){}return e.prototype.ra=function(){throw Error("rejectFn must be overriden by subclass")},e.prototype.Z=function(){throw Error("acceptFn must be overriden by subclass")},e.prototype.screen=function(e,t){return this.ra(e,t)?2:this.Z(e,t)?1:0},e}();r=function(n){function e(e,t){n.call(this),this.name="IdScreen",this.mb=e,this.ub=t,this.ca=new i("id",0,0)}return o(e,n),e.prototype.ra=function(e,t){if(this.ub){var n=e.H("id");return!(!n||30<=n.length)&&!this.ca.j(e,t)}},e.prototype.Z=function(e,t){if(this.mb)return this.ca.j(e,t)},e}(e.Sb=r),e.za=r;var i=function(r){function e(e,t,n){r.call(this,t,n),this.attrName=e,this.name="AttributeScreen["+this.attrName+"]"}return o(e,r),e.prototype.j=function(e,t){var n=e.H(this.attrName),r=t.attributes[this.attrName];return!(!r||!n)&&n===r},e}(n);e.q=i,r=function(r){function e(e,t,n){r.call(this,e,t),this.Ma=n,this.name="XpathScreen"}return o(e,r),e.prototype.j=function(e,t){var n=e.xpath.get(),r=S.l;return this.Ma.u(n,t.xpathArrayToIframe).b<=r},e}(n),e.Ja=r,r=function(i){function e(e,t,n){i.call(this,t,n);var r=e.xpathArrayOriginal;this.vb=new T(this,function(){return S.fa(r,void 0,void 0,e.ignoreWalkmeElementsSelector)}),this.name="ExactXpathScreen"}return o(e,i),e.prototype.j=function(e){var t=this.vb.get();return t&&t[0]==e.element[0]},e}(n),e.ya=r,n=function(n){function e(e,t){n.call(this,e,t),this.name="TextScreen"}return o(e,n),e.prototype.j=function(e,t){return!(!t.text||0===t.text.length)&&e.text.get()===t.text},e}(n),e.X=n}(g||(g={})),i=m||(m={}),a={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},s={id:1,name:4,title:8},l=function(){function e(e,t){this.U=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.Oa()}return e.prototype.Oa=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Kb(e)&&this.Q(this.description.attributes[e])&&(t+=this.M(e),this.U.push(e));return t},e.prototype.Kb=function(e){var t=0!==this.M(e);return!(s.hasOwnProperty(e)&&s[e]&this.options)&&t},e.prototype.d=function(e,t){for(var n=0,r=0;r<this.U.length;r++){var i=this.U[r],o=t.attributes[i],a=e.H(i);this.Q(a)&&this.Q(o)&&a==o&&(n+=this.M(i))}return n},e.prototype.Q=function(e){return null!=e&&null!=e&&""!=e},e.prototype.M=function(e){return a.hasOwnProperty(e)?a[e]:0},e}(),i.Ca=l,function(i){function n(){}var r;i.$,i.p,i.setOptions=function(e){i.$=e.jquery,i.p=e.jquery,p.Ib(e.jquery),y.setOptions(e),r=e.sensitivityMap},i.setLogFunc=function(e){n=e};var e=function(){function e(e,t){var n=this;this.totalScore=0,this.width=new T(this,function(){return n.element.width()}),this.height=new T(this,function(){return n.element.height()}),this.parents=new T(this,function(){return y.ea(n.element,n.c.m)}),this.Ka=new T(this,function(){return y.ea(n.element)}),this.text=new T(this,function(){return d.extractFirstOccuringText(n.element)}),this.H=function(e){return this.I.hasOwnProperty(e)||(this.I[e]=this.element.attr(e)),this.I[e]},this.xpath=new T(this,function(){return S.Qa(n.element,n.parents.get(),n.c.h,n.c.G)}),this.element=e,this.details=[],this.I={},this.n(t)}return e.prototype.n=function(e,t){this.c&&t&&(this.parents.clear(),this.xpath.clear()),this.c=e},e}();i.ScoredElement=e;var t,o,a,s,l=function(){this.elements=[],this.losers=void 0};i.RecognitionResult=l,e=function(){function e(e){this.attributes={},this.complexAttributes={},this.aa("style",";",":"),this.aa("class"," ",null),e&&(this.h=new S.Ha)}return e.prototype.aa=function(e,t,n){var r=this;this.complexAttributes[e]=new T(this,function(){return y.ua(r.attributes[e],t,n)})},e}(),i.ElementDescription=e,(t=i.wa||(i.wa={}))[t.Efficient=0]="Efficient",t[t.Verbouse=1]="Verbouse",t[t.Fast=2]="Fast",t[t.VerbouseDebug=3]="VerbouseDebug",(o=i.MeasurePhase||(i.MeasurePhase={}))[o.TotalFindElementTime=0]="TotalFindElementTime",o[o.Suspects=1]="Suspects",o[o.Screened=2]="Screened",o[o.Scored=3]="Scored",o[o.Screen_Attr_id=4]="Screen_Attr_id",o[o.Screen_Attr_name=5]="Screen_Attr_name",o[o.Screen_Text=6]="Screen_Text",o[o.Screen_Attr_walkmeid=7]="Screen_Attr_walkmeid",o[o.Screen_Exact_Xpath=8]="Screen_Exact_Xpath",o[o.Screen_Xpath=9]="Screen_Xpath",o[o.Screen_Attr_src=10]="Screen_Attr_src",o[o.Score_Xpath=11]="Score_Xpath",o[o.Score_Multi=12]="Score_Multi",o[o.Score_Text=13]="Score_Text",o[o.Score_Shape_Proportion=14]="Score_Shape_Proportion",o[o.Score_Complex_Class=15]="Score_Complex_Class",o[o.Score_Complex_Style=16]="Score_Complex_Style",o[o.Score_Attr_href=17]="Score_Attr_href",o[o.Score_Position=18]="Score_Position",(a=i.AlgorithmSensitivity||(i.AlgorithmSensitivity={}))[a.High=0]="High",a[a.Medium=1]="Medium",a[a.Low=2]="Low",(s=i.SearchOptions||(i.SearchOptions={}))[s.IGNORE_ALL=4294967295]="IGNORE_ALL",s[s.IGNORE_NOTHING=0]="IGNORE_NOTHING",s[s.IGNORE_ID=1]="IGNORE_ID",s[s.IGNORE_POSITION=2]="IGNORE_POSITION",s[s.IGNORE_NAME=4]="IGNORE_NAME",s[s.IGNORE_TEXT=8]="IGNORE_TEXT",s[s.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",s[s.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",s[s.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",s[s.IGNORE_XPATH=256]="IGNORE_XPATH",s[s.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",s[s.IGNORE_CLASS=1024]="IGNORE_CLASS",s[s.IGNORE_STYLE=2048]="IGNORE_STYLE",s[s.IGNORE_HREF=4096]="IGNORE_HREF",s[s.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR";var u=function(){function e(e){this.list=[],this.f=e}return e.prototype.La=function(e){return this.list.push(e),this},e.prototype.i=function(e,t,n){var r=!1;return void 0!==n&&(r=0<(this.f&n)),r||this.list.push(new c.Ga(e,t)),this},e.prototype.sort=function(){return this.list.sort(function(e,t){return t.weight-e.weight}),this},e}();e=function(){function t(e,t,n){this.f=0,this.ba=1,this.mode=e,this.pa=1==this.mode||3==this.mode,this.timeMeasurements=[],this.g=n?new C:new w,this.isMeasuringTime=t||3===this.mode}return t.prototype.Hb=function(e){this.a=e},t.prototype.setSearchOptions=function(e){this.f=e},t.prototype.setAlgorithmSensitivity=function(e){this.ba=e},t.prototype.w=function(e){this.isMeasuringTime&&this.timeMeasurements.push(e)},t.prototype.Sa=function(){this.timeMeasurements=[]},t.prototype.B=function(e){return t.xb[e]},t.prototype.recognize=function(e){var t,n=new l;3==this.mode&&(n.debug={MS:this.ka(),SCR:null,MEA:[],ED:[],CBS:-1,CAS:-1,FCS:{},SCS:{}}),this.Hb(e),this.g.Jb(e);var r=h.Ab(this);return this.g.n(e),this.isMeasuringTime&&(t=y.D()),e=this.Ya(),n.debug&&(n.debug.CBS=e.length,n.debug.FCS=e),this.isMeasuringTime&&(t=t.F(),this.w({name:this.B("suspects"),duration:t,misc:{amount:e.length}}),t=y.D()),e=this.Gb(e,n),n.debug&&(n.debug.CAS=e.count,n.debug.SCS=e),this.isMeasuringTime&&(t=t.F(),this.w({name:this.B("screened"),duration:t,misc:{amount:e.count}}),t=y.D()),e=this.Cb(e),this.isMeasuringTime&&(t=t.F(),this.w({name:this.B("scored"),duration:t,misc:{amount:e.length}}),n.debug&&(n.debug.MEA=this.timeMeasurements),n.timeMeasurements=this.timeMeasurements,this.Sa()),n.elements=this.Xa(e),n.losers=this.Wa(n,e),n.context=r,n},t.prototype.Ya=function(){var e,t=this;return this.a.preDefinedSuspects&&this.a.preDefinedSuspects[0]?this.a.preDefinedSuspects:(e=this.a.customSelector?this.a.customSelector:this.e(8192)&&this.a.autoQuery?this.a.autoQuery:this.a.elementType.replace(":","\\:"),this.a.visibilityFilter&&(e+=this.a.visibilityFilter),this.a.ignoreWalkmeElementsSelector&&(e+=":not("+this.a.ignoreWalkmeElementsSelector+")"),n("Finding suspects using : "+e),this.g.N(e,function(e){return i.$(e,t.a.m)}))},t.prototype.Ua=function(e){for(var t=new v(e.length),n=0;n<e.length;n++){var r=i.$(e[n]);r=this.g.O(r);t.push(r)}return t},t.prototype.Gb=function(e,t){var n=this.Ua(e),r=this.ib(e.length);t.debug&&(t.debug.SCR=r);for(var i=new v(e.length),o=0;o<n.count;o++){var a=n.getItem(o),s=this.Fb(a,r,t);2&s||!(1&s)||i.push(a)}return i},t.prototype.kb=function(){var e,t={32:function(){return[new g.X(1,2)]},64:function(){return[new g.q("id",1,0),new g.q("name",1,0)]},128:function(){return[new g.q("data-walkmeid",1,0)]}};for(e in t)if(this.e(e))return t[e]();return null},t.prototype.cb=function(e){var t=[],n=new g.q("src",1,0);return t.push(n),n=new g.X(1,0),!this.e(8)&&t.push(n),null!=this.a.attributes.id&&(n=new g.za(!this.e(1)&&0<this.a.attributes.id.length,!this.e(161)),t.push(n)),n=new g.q("name",1,0),!this.e(4)&&t.push(n),n=new g.Ja(1,0,this.g),e<2e3&&!this.e(256)&&t.push(n),n=new g.ya(this.a,1,0),2e3<=e&&!this.e(256)&&t.push(n),t},t.prototype.ib=function(e){var t=this.kb();return t||(t=this.cb(e)),t},t.prototype.Fb=function(e,t,n){for(var r=0,i=0;i<t.length;i++){var o=t[i].screen(e,this.a);r=r|o;if(2==o){n.debug&&n.debug.ED.push({element:e.element,screenerName:t[i].name});break}}return r},t.prototype.Cb=function(e){var t=this.hb(),n=y.reduce(t,function(e,t){return e+t.weight},0),r=e,i=new v(e.count);e=new v(e.count);for(var o=0,a=0;a<t.length;a++){var s=t[a];if(this.isMeasuringTime)var l=y.D(),u=0;for(var c=0;c<r.count;c++){var d=r.getItem(c);if(n+d.totalScore<o&&0==this.mode?(d.da=!0,i.push(d)):e.push(d),!d.da||0!=this.mode){var f=s.d(d,this.a);this.isMeasuringTime&&u++,this.pa&&d.details.push({scorerName:s.name,scorerWeight:s.weight,relativeScore:f/s.weight,absoluteScore:f}),d.totalScore+=f,d.totalScore>o&&(o=d.totalScore)}}this.isMeasuringTime&&(c=l.F(),this.w({name:this.B(s.name),duration:c,misc:{count:u}})),n-=s.weight,n=Math.max(n,0),s=r,r=e,(e=s).clear()}return r.fb()},t.prototype.e=function(e){return!!(this.f&e)},t.prototype.hb=function(){var e=new u(this.f);return e.La(new m.Ca(this.a,this.f)).i(new c.Fa,3,8).i(new c.Ia(this.g),1,256).i(new c.Ea,.7,512).i(new c.V("class"," ",null),.7,1024).i(new c.V("style",";",":"),.5,2048).i(new c.xa("href","#"),3,4096).sort().i(new p.Ba,1,2),e.list},t.prototype.Xa=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n].totalScore;t=r<=t?t:r}if(r=[],t>this.ka())for(n=0;n<e.length;n++)e[n].totalScore==t&&r.push(e[n]);return r},t.prototype.Wa=function(e,t){if(this.pa){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},t.prototype.ka=function(){var e=r[this.ba];return null==e&&(e=r[1]),e},t.xb={suspects:1,screened:2,scored:3,"AttributeScreen[src]":10,TextScreen:6,IdScreen:4,"AttributeScreen[name]":5,XpathScreen:9,"Multiple attributes":12,TextScorer:13,"Attribute Scorer : href":17,XpathScorer:11,ShapeProportionScorer:14,"ComplexAttributeScorer : class":15,"ComplexAttributeScorer : style":16,PositionScorer:18},t}();i.ElementRecognizerSession=e}(E||(E={})),e.exports={Version:"1.0.8",ElementRecognition:E,TempUtils:y,ContextUtils:h,TextUtils:d,XpathLib:S}},function(e,t){var y;!function(s){function o(e){return s.Y(e,"parentNode")}function a(e,t){t=t||[],e=e||document;for(var n=s.$("iframe,frame",e).toArray(),r=0;r<n.length;r++){var i=l(s.$(n[r]))[0];t.push(i),i&&(t=a(i,t))}return t}function l(e){if(null!=e){if(null==(e=e[0]))return s.$();var t;try{t=e.contentDocument?e.contentDocument:e.contentWindow?e.contentWindow.document:[],t=s.$(t)}catch(l){return s.commonUtils.handleCrossDomainError(l),s.$()}return t}}var t;s.$,s.h,s.Y=function(e,t){return e[t]},s.commonUtils,s.setOptions=function(e){s.$=e.jquery,s.h=e.jquery,s.$.fnHelpers&&(s.Y=function(e,t){return s.$.fnHelpers[t](e)}),s.commonUtils=e.commonUtils,t=e.now},s.nb=function(e){return(e=e.tagName).toUpperCase&&(e=e.toUpperCase()),e},s.parentNode=o,s.childNodes=function(e){return s.Y(e,"childNodes")},s.oa=function(e,t){for(var n=o(e),r=t&&t[0]&&o(t[0]),i=[];n&&1==n.nodeType&&n!=r;n=o(n))i.push(n);return i},s.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},s.reduce=function(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n},s.pc=function(e){var t={};e=e.prop("attributes");for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}return t},s.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},s.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},s.Ja=function(e,t,n){e=s.filter(e.split(t),function(e){return s.$.trim(e)}),e=s.map(e,function(e){return e.split(n)}),t={};for(var r=0;r<e.length;r++){var i=e[r],o=s.$.trim(i[0]),a="";i[1]&&(a=s.$.trim(i[1])),t[o]=a}return t};var e=function(){function e(){this.start=t()}return e.prototype.L=function(){var e=t()-this.start;return Math.round(1e3*e)/1e3},e}();s.ic=e,s.K=function(){return new e},s.qc=function(){for(var e=0;e<arguments.length;e++);e=arguments[0];for(var t=1;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},s.sc=function(e){return null!=e&&0<e.length},s.getAllElements=function(e,t){t=t||"*";var n=a(e=e||document,[e]);return s.$(t,n)},s.rc=a,s.u=l,s.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},s.min=function(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),i=(n=e[0],1);i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}return n},s.ta=function(){return(new Date).getTime()%1e9}}(y||(y={}));var S,c,n,r,f=function(){function e(){this.buffer=[]}return e.prototype.append=function(e){this.buffer.push(e)},e.prototype.toString=function(){return this.buffer.join("")},e}();!function(p){function c(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;0<=t;t--)if(n(e.get(t).tag))return t}else for(;t<=i-1;t++)if(n(e.get(t).tag))return t;return-1}function i(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push(l(e,i,n,r)),e=i;return s(o=o.reverse(),n)}function a(e,t,n,r){var i=(e=e[0])&&y.parentNode(e);n=n&&n[0];for(var o=[];e&&1==e.nodeType&&e!=n;e=i,i=y.parentNode(e))o.push(l(e,i,t,r));return s(o=o.reverse(),t)}function s(e,t){return t?new n(e):new d(e)}function l(e,t,n,r){return n?n.pb(e,t,r):u(e,t,r)}function u(e,t,n){var r=1;if("HTML"!=y.nb(e)){t=y.childNodes(t);for(var i=0;i<t.length&&t[i]!=e;i++){var o=t[i];o.tagName==e.tagName&&y.inArray(o,n)<0&&r++}}return{tag:e.tagName.toUpperCase(),index:r}}function o(e){for(var t=["HTML","BODY"],n=0;n<e.count()&&-1<y.inArray(e.get(n).tag,t);n++);return e.slice(n)}var d=function(){function n(e){this.xpathArray=e}return n.prototype.count=function(){return this.xpathArray.length},n.prototype.get=function(e){return this.xpathArray[e]},n.prototype.slice=function(e,t){return new n(this.xpathArray.slice.apply(this.xpathArray,arguments))},n}();p.jc=d;var n=function(){function n(e){this.xpathArray=e}return n.prototype.count=function(){return this.xpathArray.length},n.prototype.get=function(e){return this.xpathArray[e].get()},n.prototype.slice=function(e,t){return new n(this.xpathArray.slice.apply(this.xpathArray,arguments))},n}();p.kc=n,p.l=1,p.Na=1;var g=function(){function e(e,t,n){this.n=this.w=this.b=0,this.b=e,this.w=t,this.n=n}return e.prototype.clone=function(){return new e(this.b,this.w,this.n)},e.prototype.r=function(){return this.b+this.w/4+this.n/10},e.max=function(){return new e(1e4,0,0)},e.r=function(e){return e.r()},e}();p.lc=g,p.Q=function(t,n,f){return function e(t,n,r,i,o){if(Math.abs(n-i)>f||o.b>f)return g.max();if(0==n||0==i)return(o=o.clone()).b+=Math.max(n,i,0),o.b>f?g.max():o;var a,s=t.get(n-1),l=r.get(i-1),u=0;if(s.tag!==l.tag)u=p.l,a=g.max();else{if(s.index===l.index)return e(t,n-1,r,i-1,o);u=p.Na}var c=o.clone();c.b+=u;u=e(t,n-1,r,i,c);var d=e(t,n,r,i-1,c);return a||(s=Math.abs(s.index-l.index),c=o.clone(),0<s&&(c.w++,c.n+=s),a=e(t,n-1,r,i-1,c)),y.min([u,d,a],g.r)}(t,t.count(),n,n.count(),new g(0,0,0))},p.pa=function(e,t,n,r){var i=e.count();if(i<=0)return null;t=T.$(t||document),r=r?":not("+r+")":"";for(var o=0;o<i;o++){var a=e.get(o);if(t=t.children(a.tag+r).eq(a.index-1),-1!=y.inArray(a.tag,["IFRAME","FRAME"])&&o+1<i&&(0<t.length&&(n&&t.data("iframe",n),n=t),t=y.u(t)),!t||0==t.length||!t.get(0)){t=null;break}}return t&&0<t.length&&n&&t.data("iframe",n),t},p.$b=function(e,t){if(!t||t.count()<=0)return 0;for(var n=function(t,n){function e(e){return c(n,e,function(e){return e==t},!1)}for(var r=e(0),i=[];0<=r&&r<n.count()-1;)i.push(n.slice(0,r+1)),r=e(r+1);return i}(r=t.get(t.count()-1).tag,e),r=g.max().r(),i=2*p.l,o=r,a=[],s=0;s<n.length;s++){var l=n[s],u=p.Q(l,t,i).r();u<o?(o=u,a=[l]):u==o&&a.push(l)}return n=0,o<r&&(n=y.min(a,function(e){return Math.abs(t.count()-e.count())}).count()),n},p.X=c,p.mc=i,p.bb=a;var e=function(){function n(){this.Ka={}}return n.prototype.pb=function(e,t,n){var r,i,o,a=null,s=this.B(e);return void 0!==s&&(a=this.Ka[s]),a||(r=e,i=t,o=n,a=new h(null,function(){return u(r,i,o)}),t=this.D(),this.H(e,t),this.Ka[t]=a),a},n.prototype.B=function(e){return e&&e[n.ia]||void 0},n.prototype.H=function(e,t){e&&(e[n.ia]=t)},n.prototype.D=function(){return++n.aa},n.aa=y.ta(),n.ia="__WMWA_XPATH_ENTRY_KEY__",n}();p.Ua=e,p.cb=function(e,t,n,r){return o(e=i(e,t,n,r))},p.$a=function(t,n,r){var i,o=!(i=t)||i.length<=0?null:1==i.get(0).nodeType?i:(i=i.find(":first"))&&i.length&&1==i.get(0).nodeType?i:null;return!o||o.length<=0?new d([]):(o=function e(t,n,r,i){if(i=i||[],0<(n=n||T.$(document)).find(t).length)t.data("iframe",r),i.unshift(n);else{r=i.length,n=n.find(v.sa);for(var o=0;o<n.length;o++){var a=n.eq(o);if((i=e(t,y.u(a),a,i)).length>r){T.$(i[0]).data("iframe",a),i.unshift(a);break}}}return i}(o),s((o=y.reduce(o,function(e,t){return e.concat(a(t,n,null,r).xpathArray)},[])).concat(a(t,n,null,r).xpathArray),n))},p.removeHtmlAndBodyFromXpathArray=o,p.dc=function(e){for(var t=new f,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()},p.xpathStringToArray=function(e){var r=[];return T.$.each(e.split("/"),function(e,t){if(0!=e){var n=t.indexOf("[");r[e-1]={tag:t.substring(0,n),index:parseInt(t.substring(n+1,t.length-1))}}}),new d(r)}}(S||(S={})),n=c||(c={}),r=function(){function e(e,t){this.Ub=e,this.weight=t,this.name=e.name}return e.prototype.e=function(e){return e=this.Ub.e(e),this.weight*e},e}(),n.Ta=r,r=function(){function e(e){this.name="TagScorer",this.weight=6,this.uppercaseElementType=e.uppercaseElementType}return e.prototype.e=function(e){return(e=e.elementType.get())&&this.uppercaseElementType&&e===this.uppercaseElementType?6:0},e}(),n.Ra=r,r=function(){function e(e,t){this.attributeName=e,this.name="Attribute Scorer : "+e,this.v=(this.v=t.attributes[this.attributeName])&&this.v.toLowerCase()}return e.prototype.e=function(e){return(e=e.t(this.attributeName))&&this.v&&e.toLowerCase()===this.v?1:0},e}(),n.Ma=r,r=function(){function e(e,t){this.name="XpathScorer",this.j=e,this.uppercaseElementType=t.uppercaseElementType,this.xpathArrayToIframe=t.xpathArrayToIframe}return e.prototype.e=function(e){return e.elementType.get()!==this.uppercaseElementType?0:(e=e.xpath.get(),(e=this.j.C(e,this.xpathArrayToIframe,S.l)).b>S.l?0:(e=1-.1*(e.b+e.n/10))<0?0:e)},e}(),n.Va=r,r=function(){function t(e){this.name="ShapeProportionScorer",this.width=e.width,this.height=e.height}return t.prototype.e=function(e){if(!this.ya(e.elementType.get()))return 0;var t=e.width.get();return 0!=t*(e=e.height.get())&&.6<=(t=this.ua(t,this.width)/2+this.ua(e,this.height)/2)?t:0},t.prototype.ua=function(e,t){var n=e/t;return 1<n&&(n=1/n),Math.pow(n,4)},t.prototype.ya=function(e){return t.bc[e]},t.bc={DIV:1,TABLE:1,TR:1,TD:1,TBODY:1,TH:1},t}(),n.Qa=r,r=function(){function e(e,t,n,r){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.Pb=t,this.Eb=n,this.Ya=r.complexAttributes[this.attributeName]}return e.prototype.e=function(e){var t=e.t(this.attributeName);return t?(e=this.Ya.get(),t=y.Ja(t,this.Pb,this.Eb),1==this.gb(e,t)?1:0):0},e.prototype.gb=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]==t[n]&&r++);return(n=0)<i&&(n=r/i),n},e}(),n.ea=r,r=function(){function e(e){this.name="TextScorer",this.text=e.text}return e.prototype.e=function(e){return e.text.get()==this.text?1:0},e}(),n.Sa=r;var m=function(){function e(e){this.data=Array(e),this.size=e,this.count=0}return e.prototype.getItem=function(e){if(e<0||e>=this.count)throw Error("Out of range exception");return this.data[e]},e.prototype.clear=function(){this.count=0},e.prototype.push=function(e){if(this.count==this.size)throw Error("FastArray exceeded it's limits");this.data[this.count]=e,this.count++},e.prototype.vb=function(){return this.data.length=this.count,this.data},e}(),h=function(){function e(e,t){this.Rb=t,this.hasData=!1,this.context=e}return e.prototype.get=function(){return this.hasData||(this.data=this.Rb.apply(this.context),this.hasData=!0),this.data},e.prototype.clear=function(){this.hasData=!1},e}();function o(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n}var d,v,p,g,E,i,a,s,l,T,w=function(){function e(){}return e.prototype.C=function(e,t){return S.Q(e,t,S.l)},e.prototype.W=function(e){return new T.ScoredElement(e,this.d)},e.prototype.q=function(e){this.d=e},e.prototype.T=function(e,t){return t(e)},e.prototype.Yb=function(e){e.M=this.d&&e&&this.d.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.d.M:e&&e.ignoreWalkmeElementsSelector?y.getAllElements(document,e.ignoreWalkmeElementsSelector).toArray():[]},e}(),C=function(i){function n(){i.apply(this,arguments),this.ba={},this.J=[],this.qa={},this.k={}}return o(n,i),n.prototype.q=function(e){this.eb(e),i.prototype.q.call(this,e)},n.prototype.Kb=function(e,t){return(e&&e[0]||null)===(t&&t[0]||null)},n.prototype.eb=function(e){if(this.k={},0<this.J.length){var t=!1;this.d&&(t=!this.Kb(this.d.f,e.f));for(var n=0;n<this.J.length;n++){var r=this.ba[this.J[n]];r.totalScore=0,r.details=[],r.oc=!1,r.da=!1,r.G=void 0,r.q(e,t)}}},n.prototype.B=function(e){return e&&e[n.ga]||null},n.prototype.H=function(e,t){e&&(e[n.ga]=t)},n.prototype.D=function(){return++n.aa},n.prototype.W=function(e){var t=null,n=this.B(e);return void 0!==n&&(t=this.ba[n]),t||(t=i.prototype.W.call(this,e),n=this.D(),this.H(e,n),this.ba[n]=t,this.J.push(n)),t},n.prototype.C=function(e,t,n){var r=S.dc(e);return this.k.hasOwnProperty(r)||(e=i.prototype.C.call(this,e,t,n),this.k[r]=e),this.k[r]},n.prototype.yb=function(e){var t=this.d.f;if(t&&0<t.length){var n=this.B(t[0]);n||(n=this.D(),this.H(t[0],n)),n&&(e+="__"+n)}return e},n.prototype.T=function(e,t){var n=this.yb(e),r=this.qa[n]||null;return r||(r=i.prototype.T.call(this,e,t),this.qa[n]=r),r},n.aa=y.ta(),n.ga="__WMWA_SUSPECT_KEY__",n}(w);!function(o){function a(e){var t="";if(3===e.nodeType||4===e.nodeType){t=e.nodeValue,e=[160,10,13,9];for(var n=new f,r=0;r<t.length;r++)y.indexOf(e,t.charCodeAt(r))<0&&n.append(t.charAt(r).toLowerCase());if(t=n.toString().replace(/ /g,""),t=(t=T.$.trim(t)).substring(0,o.Mb),null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(t)){for(e=-1,n=t.length,r=new f;++e<n;){var i=t.charAt(e);/[\uD800-\uDBFF]/.test(i)||/[\uDC00-\uDFFF]/.test(i)?r.append(s(i)):r.append(i)}t=r}}else if(1===e.nodeType&&!e.tagName.match(/^(script|style)$/i))for(n=0,r=(e=y.childNodes(e)).length;n<r&&!(t=a(e[n]));n++);return t}function s(e){var t=2<(e=e.charCodeAt(0).toString(16).toUpperCase()).length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}var e,t;o.Mb=70,(t=e||(e={}))[t.ElementNode=1]="ElementNode",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",o.extractFirstOccuringText=function(e){return a(e)},o.nc=a}(d||(d={})),function(g){function h(){for(var e=0;e<arguments.length;e++);return T.$.apply(T.$,arguments)}function m(e){if(1==e.count())return e;var t=S.X(e,1,v,!0);return-1==t?e:e.slice(t+1)}function v(e){return-1!=y.inArray(e,t)}var t=["IFRAME","FRAME"];g.cc=t.join(":mt_visible,")+":mt_visible",g.sa=t.join(","),g.getXpathUpToIframe=m,g.Qb=function(t){var n,r=t.a,i=S.$a(r.customContext,r.k,r.M),o=S.$b(r.xpathArrayOriginal,i),a=r.xpathArrayOriginal.slice(o);n=r.k;var s,l=r.customContext,u=r.M,c=r.ignoreWalkmeElementsSelector;if(1==a.count())n=l;else if(-1==(p=S.X(a,1,v,!0)))n=l;else{var d=y.u(l),f=(d=d&&0<d.length?d:null)?l:l?l.data("iframe"):null,p=a.slice(0,p+1);(c=S.pa(p,d||l,f,c))&&c.is(":mt_visible")||(c=null),c||(c=function e(t,n,r,i,o,a){var s=S.X(t,0,v,!1);if(s<0)return r;var l=t.slice(0,s+1);return t=t.slice(s+1),0==(s=h(g.cc,o||r)).length?null:(s=1==s.length?s[0]:y.min(s,function(e){return e=S.bb(h(e),n,h(r),i),S.Q(e,l,S.l).r()}),(a||r&&0<r.length&&o&&0<o.length)&&h(s).data("iframe",a||r),e(t,n,h(s),i,y.u(h(s))))}(a,n,l,u,d,f)),n=c}return u=(l=(n=n||r.customContext)&&n.is(g.sa))?y.u(n):n&&0<n.length?n:void 0,n={context:n,Jb:l,contents:u},r.f=n.contents,t.setSearchOptions(-257&t.i),i&&i.count()&&r.f==r.customContext&&(o<=0&&t.setSearchOptions(256|t.i),r.xpathArrayToIframe=S.removeHtmlAndBodyFromXpathArray(m(a))),n&&(s=n.Jb?n.context:h(n.context).data("iframe")),s}}(v||(v={})),function(u){u.$,u.h,u.Xb=function(e){u.$=e,u.h=e};var e=function(){function e(e){this.name="PositionScorer",this.centeredElementWidth=e.centeredElementWidth,this.relativeLeft=e.relativeLeft,this.absY=e.absY}return e.prototype.e=function(e){return this.Tb(e)},e.prototype.Tb=function(e){var t=this.centeredElementWidth,n=0;if(t){var r=this.relativeLeft;n=e.U();if(e=this.wb(e,n),((t/=5)<30?30:t)<(e=Math.abs(r-e)))return 0;t=1-e/20,e=this.absY,n=n.offset().top,n=1-Math.abs(e-n)/20,e=.3,.9<t&&(e=.9),n=(n=t*(1-e)+n*e)<0?0:n}return n},e.prototype.wb=function(e,t){var n=(n=this.mb(e))?n.offset().left:0;return t.offset().left-n},e.prototype.mb=function(e){for(var t=null,n=(e=e.Xa.get()).length-1;0<=n;n--)try{if(this.Gb(e[n])){var r=u.$(e[n]),i=u.$(window).width(),o=r.width(),a=r.offset().left,s=i-o;if(0<s&&s/2==a){t=r;break}if(s<0&&s==a){t=r;break}if(this.Ib(r)){t=u.$(r);break}}}catch(l){}return t},e.prototype.Gb=function(e){var t=u.$(e),n=t.data("mt_isElementFixedWidth");return 1==n||0!=n&&(e=this.Fb(e),t.data("mt_isElementFixedWidth",e),e)},e.prototype.Ib=function(e){var t=u.$(e),n=t.data("mt_isElementMarginAuto");return 1==n||0!=n&&(e=this.Hb(e),t.data("mt_isElementMarginAuto",e),e)},e.prototype.xa=function(e,t){for(var n=!1,r=0;r<t.length&&(n=t[r],!(n=u.$(e).is(u.$(n))));r++);return n},e.prototype.Fb=function(e){return!!this.za(e.style)||this.xa(e,this.rb())},e.prototype.ac=function(e){return 0==e.indexOf("0")},e.prototype.hb=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4==e.length},e.prototype.Aa=function(e){if(e){var t=u.$.trim(e.margin),n=u.$.trim(e.marginLeft);if(e=u.$.trim(e.marginRight),(t=this.ac(t)&&this.hb(t))||"auto"==n&&"auto"==e)return!0}return!1},e.prototype.Hb=function(e){return!!this.Aa(e.style)||this.xa(e,this.tb())},e.prototype.tb=function(){return null==this.O&&(this.O=[],this.ra(this.Ia)),this.O},e.prototype.Ia=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.Ia(n.styleSheet):this.Aa(n.style)&&this.O.push(n.selectorText)}}catch(r){}},e.prototype.ra=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},e.prototype.Ha=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.Ha(n.styleSheet):this.za(n.style)&&this.P.push(n.selectorText)}}catch(r){}},e.prototype.rb=function(){return null==this.P&&(this.P=[],this.ra(this.Ha)),this.P},e.prototype.za=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t)&&(-1!=e.indexOf("p")||-1!=e.indexOf("e")||-1!=e.indexOf("m")||-1!=e.indexOf("i")))return!0}},e}();u.gc=e}(p||(p={})),function(e){var t;(t=e.Pa||(e.Pa={}))[t.Indifferent=0]="Indifferent",t[t.Accepted=1]="Accepted",t[t.Rejected=2]="Rejected";var n=function(){function e(e,t){this.Z=e,this.Ea=t,this.isEqual=e===t}return e.prototype.m=function(){throw Error("childScreen must be overriden by subclass")},e.prototype.screen=function(e,t){return this.isEqual?this.Z:this.m(e,t)?this.Z:this.Ea},e.prototype.R=function(){return 1===this.Z},e.prototype.A=function(){return 2===this.Ea},e}();e.hc=n;var r=function(){function e(){}return e.prototype.Ga=function(){throw Error("rejectFn must be overriden by subclass")},e.prototype.ja=function(){throw Error("acceptFn must be overriden by subclass")},e.prototype.screen=function(e,t){return this.Ga(e,t)?2:this.ja(e,t)?1:0},e.prototype.R=function(){throw Error("canAccept must be overriden by subclass")},e.prototype.A=function(){throw Error("canReject must be overriden by subclass")},e}();r=function(n){function e(e,t){n.call(this),this.name="IdScreen",this.wa=e,this.Ba=t,this.na=new i("id",0,0)}return o(e,n),e.prototype.Ga=function(e,t){if(this.Ba){var n=e.t("id");return!(!n||30<=n.length)&&!this.na.m(e,t)}},e.prototype.ja=function(e,t){if(this.wa)return this.na.m(e,t)},e.prototype.R=function(){return this.wa},e.prototype.A=function(){return this.Ba},e}(e.ec=r),e.fa=r;var i=function(r){function e(e,t,n){r.call(this,t,n),this.attrName=e,this.name="AttributeScreen["+this.attrName+"]"}return o(e,r),e.prototype.m=function(e,t){var n=e.t(this.attrName),r=t.attributes[this.attrName];return!(!r||!n)&&n===r},e}(n);e.s=i,r=function(r){function e(e,t,n){r.call(this,e,t),this.Za=n,this.name="XpathScreen"}return o(e,r),e.prototype.m=function(e,t){var n=(o=e.xpath.get()).count()-1,r=(n=o.get(n)).tag;n.tag=t.uppercaseElementType;var i=S.l,o=this.Za.C(o,t.xpathArrayToIframe,i);return n.tag=r,o.b<=i},e}(n),e.Wa=r,r=function(i){function e(e,t,n){i.call(this,t,n);var r=e.xpathArrayOriginal;this.Lb=new h(this,function(){return S.pa(r,void 0,void 0,e.ignoreWalkmeElementsSelector)}),this.name="ExactXpathScreen"}return o(e,i),e.prototype.m=function(e){var t=this.Lb.get();return t&&t[0]==e.c},e}(n),e.fc=r,n=function(n){function e(e,t){n.call(this,e,t),this.name="TextScreen"}return o(e,n),e.prototype.m=function(e,t){return!(!t.text||0===t.text.length)&&e.text.get()===t.text},e}(n),e.ha=n}(g||(g={})),i=E||(E={}),a={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},s={id:1,name:4,title:8},l=function(){function e(e,t){this.ca=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.ab(),this.Ob=e.attributes}return e.prototype.ab=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Zb(e)&&this.Ca(this.description.attributes[e])&&(t+=this.S(e),this.ca.push(e));return t},e.prototype.Zb=function(e){var t=0!==this.S(e);return!(s.hasOwnProperty(e)&&s[e]&this.options)&&t},e.prototype.e=function(e){for(var t=0,n=0;n<this.ca.length;n++){var r=this.ca[n],i=this.Ob[r],o=e.t(r);this.Ca(o)&&o==i&&(t+=this.S(r))}return t},e.prototype.Ca=function(e){return null!=e&&null!=e&&""!=e},e.prototype.S=function(e){return a.hasOwnProperty(e)?a[e]:0},e}(),i.Oa=l,function(i){var n;i.$,i.h,i.setOptions=function(e){i.$=e.jquery,i.h=e.jquery,p.Xb(e.jquery),y.setOptions(e),n=e.sensitivityMap},i.setLogFunc=function(){};var o=function(){function e(e,t){this.totalScore=0,this.da=!1,this.width=new h(this,this.Cb),this.height=new h(this,this.sb),this.parents=new h(this,this.ub),this.Xa=new h(this,this.lb),this.text=new h(this,this.Bb),this.xpath=new h(this,this.Db),this.elementType=new h(this,this.ob),this.c=e,this.details=[],this.N={},this.q(t)}return e.prototype.q=function(e,t){this.d&&t&&(this.parents.clear(),this.xpath.clear()),this.d=e},e.prototype.U=function(){return this.element||(this.element=i.$(this.c)),this.element},e.prototype.Cb=function(){return this.c.clientWidth},e.prototype.sb=function(){return this.c.clientHeight},e.prototype.ub=function(){return y.oa(this.c,this.d.f)},e.prototype.lb=function(){return y.oa(this.c)},e.prototype.Bb=function(){return d.extractFirstOccuringText(this.c)},e.prototype.t=function(e){return this.N.hasOwnProperty(e)||(this.N[e]=s[e]?s[e](this.c):this.c.getAttribute(e)),this.N[e]},e.prototype.Db=function(){return S.cb(this.c,this.parents.get(),this.d.k,this.d.M)},e.prototype.ob=function(){var e=this.c;return e?(e.tagName||"").toUpperCase():""},e}();i.ScoredElement=o;var e,t,r,a,s={style:function(e){return(e=e.getAttribute("style"))&&"object"==typeof e&&(e=e.cssText.toLowerCase()),e}},l=function(){this.elements=[],this.losers=void 0};i.RecognitionResult=l,o=function(){function e(e){this.attributes={},this.complexAttributes={},this.la("style",";",":"),this.la("class"," ",null),e&&(this.k=new S.Ua)}return e.prototype.la=function(e,t,n){var r=this;this.complexAttributes[e]=new h(this,function(){return y.Ja(r.attributes[e],t,n)})},e}(),i.ElementDescription=o,(e=i.La||(i.La={}))[e.Efficient=0]="Efficient",e[e.Verbouse=1]="Verbouse",e[e.Fast=2]="Fast",e[e.VerbouseDebug=3]="VerbouseDebug",(t=i.MeasurePhase||(i.MeasurePhase={}))[t.TotalFindElementTime=0]="TotalFindElementTime",t[t.Suspects=1]="Suspects",t[t.Screened=2]="Screened",t[t.Scored=3]="Scored",t[t.Screen_Attr_id=4]="Screen_Attr_id",t[t.Screen_Attr_name=5]="Screen_Attr_name",t[t.Screen_Text=6]="Screen_Text",t[t.Screen_Attr_walkmeid=7]="Screen_Attr_walkmeid",t[t.Screen_Exact_Xpath=8]="Screen_Exact_Xpath",t[t.Screen_Xpath=9]="Screen_Xpath",t[t.Screen_Attr_src=10]="Screen_Attr_src",t[t.Score_Xpath=11]="Score_Xpath",t[t.Score_Multi=12]="Score_Multi",t[t.Score_Text=13]="Score_Text",t[t.Score_Shape_Proportion=14]="Score_Shape_Proportion",t[t.Score_Complex_Class=15]="Score_Complex_Class",t[t.Score_Complex_Style=16]="Score_Complex_Style",t[t.Score_Attr_href=17]="Score_Attr_href",t[t.Score_Position=18]="Score_Position",t[t.Score_Tag=19]="Score_Tag",(r=i.AlgorithmSensitivity||(i.AlgorithmSensitivity={}))[r.High=0]="High",r[r.Medium=1]="Medium",r[r.Low=2]="Low",(a=i.SearchOptions||(i.SearchOptions={}))[a.IGNORE_ALL=4294967295]="IGNORE_ALL",a[a.IGNORE_NOTHING=0]="IGNORE_NOTHING",a[a.IGNORE_ID=1]="IGNORE_ID",a[a.IGNORE_POSITION=2]="IGNORE_POSITION",a[a.IGNORE_NAME=4]="IGNORE_NAME",a[a.IGNORE_TEXT=8]="IGNORE_TEXT",a[a.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",a[a.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",a[a.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",a[a.IGNORE_XPATH=256]="IGNORE_XPATH",a[a.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",a[a.IGNORE_CLASS=1024]="IGNORE_CLASS",a[a.IGNORE_STYLE=2048]="IGNORE_STYLE",a[a.IGNORE_HREF=4096]="IGNORE_HREF",a[a.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR";var u=function(){function e(e){this.list=[],this.i=e}return e.prototype.ka=function(e){this.list.push(e)},e.prototype.o=function(e,t,n){var r=!1;void 0!==n&&(r=0<(this.i&n)),r||this.list.push(new c.Ta(e,t))},e.prototype.sort=function(){return this.list.sort(function(e,t){return t.weight-e.weight}),this},e}();o=function(){function t(e,t,n){this.i=0,this.ma=1,this.mode=e,this.Da=1==this.mode||3==this.mode,this.timeMeasurements=[],this.j=n?new C:new w,this.isMeasuringTime=t||3===this.mode}return t.prototype.Wb=function(e){this.a=e},t.prototype.setSearchOptions=function(e){this.i=e},t.prototype.setAlgorithmSensitivity=function(e){this.ma=e},t.prototype.F=function(e){this.isMeasuringTime&&this.timeMeasurements.push(e)},t.prototype.fb=function(){this.timeMeasurements=[]},t.prototype.I=function(e){return t.Nb[e]},t.prototype.recognize=function(e){var t,n=new l;3==this.mode&&(n.debug={minimumScore:this.V(),screeners:null,measurements:[],eliminationDetails:[]}),this.Wb(e),this.j.Yb(e);var r=v.Qb(this);this.j.q(e),this.isMeasuringTime&&(t=y.K());var i=this.kb();return this.isMeasuringTime&&(t=t.L(),this.F({name:this.I("suspects"),duration:t,misc:{amount:i.length}}),t=y.K()),e=this.zb(),i=this.Ab(i,n,0===e.length),this.isMeasuringTime&&(t=t.L(),this.F({name:this.I("screened"),duration:t,misc:{amount:i.count}}),t=y.K()),e=this.Sb(i,n,e),this.isMeasuringTime&&(t=t.L(),this.F({name:this.I("scored"),duration:t,misc:{amount:e.length}}),n.debug&&(n.debug.measurements=this.timeMeasurements),n.timeMeasurements=this.timeMeasurements,this.fb()),n.elements=this.jb(e),n.losers=this.ib(n,e),n.context=r,n},t.prototype.kb=function(){var e,n,r=this;return this.a.preDefinedSuspects&&this.a.preDefinedSuspects[0]?this.a.preDefinedSuspects:(e=this.a.customSelector?this.a.customSelector:this.g(8192)&&this.a.autoQuery?n=this.a.autoQuery.replace(/([^\[\s]+)(\[[^\]]+\])?$/,"*$2"):"*",this.a.ignoreWalkmeElementsSelector&&(e+=":not("+this.a.ignoreWalkmeElementsSelector+")"),this.j.T(e,function(e){var t;if(("*"===e||n&&e===n)&&(r.a.f?1===r.a.f.length&&(t=r.a.f[0]):t=document,t&&t.querySelectorAll))try{return i.h.queryHelpers&&i.h.queryHelpers.querySelectorAll?i.h.queryHelpers.querySelectorAll(t,e):t.querySelectorAll(e)}catch(o){}return i.$(e,r.a.f)}))},t.prototype.Ab=function(e,t,n){for(var r=this.qb(),i=new m(e.length),o=0;o<e.length;o++){var a=this.j.W(e[o]);this.Fa(a,r,t,n)&&i.push(a)}return i},t.prototype.va=function(e){for(var t in e)if(this.g(t))return e[t]();return null},t.prototype.p=function(e,t,n){t&&(n.R()||n.A())&&e.push(n)},t.prototype.qb=function(){if(e=this.va({64:function(){return[]},128:function(){return[]},32:function(){return[new g.ha(1,2)]}}))return e;var e=[],t=!this.g(161);return null!=this.a.attributes.id&&t&&this.p(e,!0,new g.fa(!this.g(1)&&0<this.a.attributes.id.length,t)),e},t.prototype.zb=function(){if(e=this.va({64:function(){return[new g.s("id",1,0),new g.s("name",1,0)]},128:function(){return[new g.s("data-walkmeid",1,0)]},32:function(){return[]}}))return e;var e=[],t=!this.g(161);return null==this.a.attributes.id||t||this.p(e,!0,new g.fa(!this.g(1)&&0<this.a.attributes.id.length,t)),this.p(e,!0,new g.s("src",1,0)),this.p(e,!this.g(4),new g.s("name",1,0)),this.p(e,!this.g(8),new g.ha(1,0)),this.p(e,!this.g(256),new g.Wa(1,0,this.j)),e},t.prototype.Fa=function(e,t,n,r){return!r&&0===t.length||(e.G=this.Vb(e,t,n,e.G),t=1&e.G,!(2&e.G||!t&&r))},t.prototype.Vb=function(e,t,n,r){if(r&&2&r)return r;r=r||0;for(var i=0;i<t.length;i++){var o=t[i];if((!(1&r)||o.A())&&(r|=o=o.screen(e,this.a),2==o)){n.debug&&n.debug.eliminationDetails.push({element:e.c,screenerName:t[i].name});break}}return r},t.prototype.Sb=function(e,t,n){var r=this.xb(),i=y.reduce(r,function(e,t){return e+t.weight},0),o=e;e=new m(e.count);var a=this.V()+6,s=i;for(i=0;i<r.length;i++){var l=r[i];if(this.isMeasuringTime)var u=y.K(),c=0;for(var d=0;d<o.count;d++){var f=o.getItem(d),p=!1,g=s+f.totalScore<a&&0==this.mode;if(!g){var h=l.e(f);this.isMeasuringTime&&c++,this.Da&&f.details.push({scorerName:l.name,scorerWeight:l.weight,relativeScore:h/l.weight,absoluteScore:h}),f.totalScore+=h,f.totalScore>a&&(f.da||(!this.a.visibilityFilter||f.U().is(this.a.visibilityFilter))&&this.Fa(f,n,t,!0)?(a=f.totalScore,f.da=!0):p=!0)}p||g||e.push(f)}this.isMeasuringTime&&(d=u.L(),this.F({name:this.I(l.name),duration:d,misc:{count:c}})),s=Math.max(s-l.weight,0),l=o,o=e,(e=l).clear()}for(t=o.vb(),i=0;i<t.length;i++)t[i].totalScore-=6;return t},t.prototype.g=function(e){return!!(this.i&e)},t.prototype.xb=function(){var e=new u(this.i);e.ka(new E.Oa(this.a,this.i)),this.a.attributes.href&&"#"!=this.a.attributes.href&&e.o(new c.Ma("href",this.a),3,4096),e.ka(new c.Ra(this.a)),this.a.attributes.style&&e.o(new c.ea("style",";",":",this.a),.5,2048),this.a.attributes["class"]&&e.o(new c.ea("class"," ",null,this.a),.7,1024),this.a.text&&e.o(new c.Sa(this.a),3,8),e.o(new c.Va(this.j,this.a),1,256);var t=new c.Qa(this.a);return t.ya(this.a.uppercaseElementType)&&e.o(t,.7,512),e.list},t.prototype.jb=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n].totalScore;t=r<=t?t:r}if(r=[],t>this.V())for(n=0;n<e.length;n++)if(e[n].totalScore==t){var i=e[n];i.U(),r.push(i)}return r},t.prototype.ib=function(e,t){if(this.Da){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},t.prototype.V=function(){var e=n[this.ma];return null==e&&(e=n[1]),e},t.Nb={suspects:1,screened:2,scored:3,"AttributeScreen[src]":10,TextScreen:6,IdScreen:4,"AttributeScreen[name]":5,XpathScreen:9,"Multiple attributes":12,TextScorer:13,"Attribute Scorer : href":17,XpathScorer:11,ShapeProportionScorer:14,"ComplexAttributeScorer : class":15,"ComplexAttributeScorer : style":16,PositionScorer:18,TagScorer:19},t}();i.ElementRecognizerSession=o}(T||(T={})),e.exports={Version:"1.0.18",ElementRecognition:T,TempUtils:y,ContextUtils:v,TextUtils:d,XpathLib:S}},function(e,t){function d(e){return Math.min(Math.max(e,1),5)}function f(e){return Math.floor(e/2)+1}function p(){}e.exports=function(e,t){t=t||p;var n=e.result,r=e.stepSensitivity,i=e.sensitivityMap,o=(n&&n.winner).totalScore;if(t("STRENGTH-CALC: old element score is "+d(f(o))),!e.feStrengthCalc)return d(f(o));var a,s=0,l=0,u=n.losers;if(u&&u.length){var c=o-Math.max.apply(0,function(e,t){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=e(t[r]);return n}((a="totalScore",function(e){return e[a]}),u));c<.3?s+=3:c<.8?s+=2:c<=1.5?s+=1:3<c&&(l+=1)}else l+=1;return r!==undefined&&i!==undefined&&o-i[r]<.3&&(s+=1),o=f(o),0<s?o-=Math.min(s,3):o+=Math.min(l,2),t("STRENGTH-CALC: new element score is "+(o=d(o))),o}},function(e,t){e.exports=function(t,n){var r=Math.min,i=Math.random;this.shouldMonitor=function(e){return e=e||1,t.getBILogger().isEnabled()&&n.isFeatureEnabled("enableFEMeasurements")&&i()<1/(150+50*r(e,9))}}},function(e,t){e.exports=function(t){this.isFeatureManagerReady=function(){return t.isReady()},this.isFeatureEnabled=function(e){return t.isReady()?t.isFeatureEnabled(e):!!_walkmeInternals.findElementFeatures&&!!_walkmeInternals.findElementFeatures[e]},function(){}.apply(this,arguments)}},function(e,t){e.exports=function(n,r,i,o){var a,s,l,u,c,d,f=this;function p(){return r.isFeatureEnabled("fe_no_session_cache")}function g(e,t){e=e||0,d=r.isFeatureEnabled("fe_monitor_session")?i.shouldMonitor(1):t,a=new u.ElementRecognition.ElementRecognizerSession(e,d||o.shouldMeasure(),l),l=!1,c&&n.libSetTimeout(h,0)}function h(){s=0,a=null,c=!(l=!1)}function m(){return a&&0<s}function v(e,t){if(!t)return m()||l||(l=!0),s<0&&(s=0),s+=1,!0}f.getSession=function(e,t,n){return m()||(u=t,g(e,n)),void 0!==n&&(a.isMeasuringTime=n),a},f.wrapSession=function(e,t){var n=p();v(t,n);var r=e&&e();return function(e){if(e)return;s-=1,a&&s<=0&&h()}(n),r},f.startSessionForEditor=function(e,t){var n=p();return f.setAutoCloseSessionFlag(t),v(e,n)},f.endSessionForEditor=function(){var e=p();if(!e)return h(),!0},f.setAutoCloseSessionFlag=function(e){e!==undefined&&null!==e&&(c=e)},f.setSessionCacheFlag=function(e){e!==undefined&&null!==e&&(l=e)},f.shouldMonitor=function(){return d},f.closeSession=h,function(){h()}.apply(this,arguments)}},function(e,t){e.exports=function(t,n,i,o,a,s){var l,u,c;function d(i,o){return function(e){return t=i,n=o,r=e,wmjQuery.extend({type:"feperf",name:r.name,duration:r.duration,instanceId:n,sessionId:t,version:u.Version,reason:u.VersionName},r.misc||{});var t,n,r}}function f(){var r,e,t=(r=o.generateGUID(),e=l,i.reduceSpec(e,function(e,t,n){return e.concat(i.mapSpec(t,d(r,n)))},[]));i.foreach(t,function(e){n.getBILogger().send("feperf",e)})}this.setFE=function(e){u=e},this.addMeasurement=function(e){if(e){if(l.push(e),!c){var n=a.shouldMeasure(),r=s.shouldMonitor();t.libSetTimeout(function(){var e,t;e=n,t=r,c=!1,0<l.length&&(e&&a.handleSessionMeasurements(l),t&&f(),l=[])},0)}c=!0}},function(){l=[],c=!1}.apply(this,arguments)}},function(e,t){e.exports=function(r,i,t){function o(e){for(var t=!1,n=0;!t&&n<r.length;n++)t=e(r[n])}this.hasPlugins=function(){return 0<r.length},this.registerPlugin=function(e){r.push(e),e&&e.init&&e.init(t.getElementFinder())},this.findElement=function(t,n){var r;return o(function(e){return(r=e.findElement&&e.findElement(t,n&&n.scoreOut,n))!==undefined}),r},this.extendDescription=function(t,e){var n=i.secureEvalJSON(e);return o(function(e){e.extendDescription&&e.extendDescription(t,n)}),i.toJSON(n)},this.extendResult=function(t,n,r,i){o(function(e){e.extendResult&&e.extendResult(t,n,r,i)})},this.extendOriginalSettings=function(t,n){try{o(function(e){e.extendOriginalSettings&&e.extendOriginalSettings(t,n)})}catch(e){return!1}return!0},this.extendAdaptedSettings=function(t,n,r){o(function(e){e.extendAdaptedSettings&&e.extendAdaptedSettings(t,n,r)})}}},function(e,t){e.exports=function(t,n,e,r){var i,o,a,s,l,u,c=this,d=!1;c.init=function(){if(d||!(i=r.getPlatformPageIdentifier()))return d;d=!0;var e=[new i.GeneralCapture(function(e){return t.isPhraseHuman(e)}),new i.SFPlatformCapture(function(){return n.location})];return a=new i.PlatformPageCapture(e),s=i.ComparersFactory.createSalesForce(),c.resetCollection(),d},c.isEnabled=function(){return d},c.captureCurrentPage=function(){return a.capture()},c.resetCollection=function(){l=new i.PageDescriptionCollection(s)},c.addSerializedPage=function(e,t){var n=i.PageDescription.deserialize(e);l.add(n,t)},c.updateCurrentPage=function(){u={},o=a.capture()},c.getPageKey=function(e){var t=e.ElementDescription.pageKey;if(c.getPageDesc(t))return t},c.getPageDesc=function(e){return l.getPage(e)},c.getComparer=function(){return s},c.compareCurrent=function(e){var t=c.getPageKey(e);return u[t]||(u[t]=s.compareCurrent(o,c.getPageDesc(t),l)),u[t]},c.editorApi={isEnabled:c.isEnabled,updateCurrentPage:c.updateCurrentPage,addSerializedPage:c.addSerializedPage,resetCollection:c.resetCollection,captureCurrentPage:function(){var e=c.captureCurrentPage(),t=s.compareDescriptions(e,e);if(t&&t.match)return e.serialize()}},function(){}.apply(this,arguments)}},function(e,t){e.exports=function(e){this.getBILogger=function(){return e.get("BILogger")},this.getPlatformPageIdentifier=function(){return e.has("PlatformPageIdentifier")?e.get("PlatformPageIdentifier"):null},this.getElementFinder=function(){return e.get("ElementFinder")},this.now=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},this.isInEditor=function(){return e.has("IsInEditor")&&e.get("IsInEditor").get()},this.isDebuggerOnWindow=function(){return e.has("DebuggerManager")&&e.get("DebuggerManager").isDebuggerOnWindow()}}},function(e,n,i){(function(s,r){(function(){"use strict";n.__esModule=!0;var t=i(289);!function(){function e(e,t,n,r,i,o){void 0===o&&(o={});var a=this;this.performanceDataIntegrityKeeper=e,this.consts=t,this.eventBase=n,this.jQuery=r,this.key=i,this.options=o,this._deferredPromise={},this._deferredPromise.promise=new s(function(e,t){a._deferredPromise.resolve=e,a._deferredPromise.reject=t})}var n;(n=e).now=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.start=function(){var e=this;this._startTime=n.now(),this.eventBase.bind(this.consts.EVENTS.BeforeWalkmeRemoved,this._deferredPromise.reject),this.performanceDataIntegrityKeeper.onViolation(this._deferredPromise.reject);var t=function(){e.cleanResources()};return this._deferredPromise.promise.then(t,t),this._deferredPromise.promise},e.prototype.stop=function(){this._deferredPromise.resolve(this.jQuery.extend({key:this.key,duration:n.now()-this._startTime},this.options.extraData))},e.prototype.cancel=function(){this._deferredPromise.reject()},e.prototype.getPromise=function(){return this._deferredPromise.promise},e.prototype.cleanResources=function(){this.performanceDataIntegrityKeeper.unbind(this._deferredPromise.reject)},e=n=r([t.Provide("PerformanceStopwatch",{proto:!0,dependencies:"PerformanceDataIntegrityKeeper,Consts,WmInternals,wmjQuery"})],e)}()}).call(window)}).call(this,i(28),i(288))},function(e,t,n){e.exports=function(){"use strict";return this&&this.__decorate||function(e,t,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,n,r);for(var i,o=e.length-1,a=arguments.length,s=a<3?t:r;0<=o;o--)(i=e[o])&&(s=(a<3?i(s):3<a?i(t,n,s):void i(t,n))||s);return s}}()},function(e,t,n){(function(c){(function(){"use strict";t.__esModule=!0,t.Provide=function(a,e){var t=void 0===e?{}:e,s=t.proto,l=t.dependencies,u=t.platforms;return function(e){var t,n,r,i,o=(t=a,n=e,i=l,void 0===(r=s)&&(r=!1),function(){var e=c.register(t).asCtor(n);r&&(e=e.asProto()),i&&e.dependencies(i)});u?c.get("PlatformDI").register(u,o):o()}}}).call(window)}).call(this,n(1))},function(e,o,a){(function(r,i){(function(){"use strict";o.__esModule=!0;var t=a(289),n=["widgetEndLoad","dataFileStartLoad","dataFileEndLoad","postLibStartLoad","walkmeReady","walkmeReadyEnd","loadWalkmeConfigStart","loadWalkmeConfigEnd","widgetStartLoad","widgetStartInit","widgetEndInit","debuggerStartInit","debuggerEndInit"],e=function(){function e(e,t){this.performanceTimestampAdder=e,this.arrayUtils=t}return e.prototype.measure=function(e,t){return-1<this.arrayUtils.inArray(e,n)?this.performanceTimestampAdder.addTimeStamp(e):this.getBiLogger().measure(e)},e.prototype.getBiLogger=function(){return this._biLogger||(this._biLogger=r.get("PerformanceBILogger")),this._biLogger},e.prototype.isEnabled=function(){},e.prototype.registerProfilerCallback=function(){},e.prototype.startProfile=function(){},e=i([t.Provide("PerformanceAPI",{dependencies:"PerformanceTimestampAdder,ArrayUtils"})],e)}();o.PerformanceAPI=e}).call(window)}).call(this,a(1),a(288))},function(e,t,n){"use strict";t.__esModule=!0;var a=n(292),s=n(293);t.init=function(e,t,n,r,i){var o=new s.PerformanceManager(e,t,n);o.init(function(){var e,t;e=r,t=o.performanceAPI,e.register("LoggerManager").asCtor(a.LoggerManager).dependencies("SettingsFile, Consts, WmInternals"),e.register("ProfilerAPI").asInstance(t),i()})}},function(e,t,n){"use strict";t.__esModule=!0,t.LoggerManager=function(t,e,n){var r="wmLogger.js",i="logger/"+r;function o(e,t){"walkmelogger"!=t.searchTerm||s()||a()}function a(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",t.getPlayerRelatedPath()+i),document.getElementsByTagName("head")[0].appendChild(e)}function s(){return 0<wmjQuery("script[src*='"+r+"']").length}function l(){n.unbind(e.EVENTS.Widget.SearchTermChanged,o)}this.launchLogger=a,this.isLoggerActivated=s,function(){n.bind(e.EVENTS.Widget.SearchTermChanged,o),n.bind("removeWalkMe",l)}.apply(null,arguments)}},function(e,r,i){"use strict";(function(t){r.__esModule=!0;var n="wm-perf-toolkit",e=function(){function e(e,t,n){void 0===n&&(n=window._walkmeInternals),this.localStorage=e,this.jsonUtils=t,this.wmInternals=n,this.performanceAPI={},n.performance=this.performanceAPI}return e.prototype.init=function(e){var t=this.getPermalinkSession();return t?this.loadAndStartSession(t).then(e):this.isEnabled()?this.loadToolkit().then(e):(this.createStub(),void(e&&e()))},e.prototype.getPermalinkSession=function(){var e=/[?&]walkmeProfilerSession=([^&]*)/.exec(window.location.href);if(e)return this.removeFromUrl(e[0]),decodeURI(e[1])},e.prototype.removeFromUrl=function(e){if(window.history.replaceState){var t=window.location.href.replace(e,"");window.history.replaceState({},document.title,t)}},e.prototype.loadToolkit=function(n){var r=this;return new t(function(t){i.e(13).then(function(){var e=[i(404)];(function(e){r.createApi(e,n),t()}).apply(null,e)})["catch"](i.oe)})},e.prototype.createApi=function(e,t){var n=wmjQuery(this.wmInternals),r=new e.PerformanceProfilerLib({on:function(e,t){return n.on(e,t)},once:function(e,t){return n.one(e,t)}});t&&r.initServices(),this.performanceAPI.profiler=r.getAPI()},e.prototype.createStub=function(){var n=this;this.performanceAPI.profiler={startSession:function(e,t){return(t=t||{}).reload===undefined&&(t.reload=!0),n.loadAndStartSession(e,t,!0)},measure:function(){},measureEnd:function(){}}},e.prototype.loadAndStartSession=function(e,t,n){var r=this;return this.enable(),this.loadToolkit(n).then(function(){r.performanceAPI.profiler.startSession(e,t)})},e.prototype.enable=function(){this.localStorage&&this.localStorage.setItem(n,this.jsonUtils.toJSON({started:(new Date).getTime()}))},e.prototype.isEnabled=function(){var e=this.localStorage&&this.localStorage.getItem(n);return!!e&&(e=this.jsonUtils.secureEvalJSON(e),(new Date).getTime()<e.started+36e5)},e}();r.PerformanceManager=e}).call(this,i(28))}]);